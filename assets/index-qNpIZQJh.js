var dme=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var crt=dme((Xrt,FR)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var c1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iq={exports:{}},BA={},oq={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=Symbol.for("react.element"),hme=Symbol.for("react.portal"),pme=Symbol.for("react.fragment"),gme=Symbol.for("react.strict_mode"),mme=Symbol.for("react.profiler"),yme=Symbol.for("react.provider"),vme=Symbol.for("react.context"),bme=Symbol.for("react.forward_ref"),xme=Symbol.for("react.suspense"),wme=Symbol.for("react.memo"),_me=Symbol.for("react.lazy"),BP=Symbol.iterator;function Ame(e){return e===null||typeof e!="object"?null:(e=BP&&e[BP]||e["@@iterator"],typeof e=="function"?e:null)}var aq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sq=Object.assign,uq={};function fg(e,t,n){this.props=e,this.context=t,this.refs=uq,this.updater=n||aq}fg.prototype.isReactComponent={};fg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lq(){}lq.prototype=fg.prototype;function XC(e,t,n){this.props=e,this.context=t,this.refs=uq,this.updater=n||aq}var JC=XC.prototype=new lq;JC.constructor=XC;sq(JC,fg.prototype);JC.isPureReactComponent=!0;var jP=Array.isArray,cq=Object.prototype.hasOwnProperty,KC={current:null},fq={key:!0,ref:!0,__self:!0,__source:!0};function dq(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)cq.call(t,r)&&!fq.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:l2,type:e,key:o,ref:a,props:i,_owner:KC.current}}function Sme(e,t){return{$$typeof:l2,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function QC(e){return typeof e=="object"&&e!==null&&e.$$typeof===l2}function Eme(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var UP=/\/+/g;function GE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Eme(""+e.key):t.toString(36)}function Dx(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l2:case hme:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+GE(a,0):r,jP(i)?(n="",e!=null&&(n=e.replace(UP,"$&/")+"/"),Dx(i,t,n,"",function(l){return l})):i!=null&&(QC(i)&&(i=Sme(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(UP,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",jP(e))for(var s=0;s<e.length;s++){o=e[s];var u=r+GE(o,s);a+=Dx(o,t,n,u,i)}else if(u=Ame(e),typeof u=="function")for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=r+GE(o,s++),a+=Dx(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function gb(e,t,n){if(e==null)return e;var r=[],i=0;return Dx(e,r,"","",function(o){return t.call(n,o,i++)}),r}function $me(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gi={current:null},Px={transition:null},Cme={ReactCurrentDispatcher:gi,ReactCurrentBatchConfig:Px,ReactCurrentOwner:KC};dt.Children={map:gb,forEach:function(e,t,n){gb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return gb(e,function(){t++}),t},toArray:function(e){return gb(e,function(t){return t})||[]},only:function(e){if(!QC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dt.Component=fg;dt.Fragment=pme;dt.Profiler=mme;dt.PureComponent=XC;dt.StrictMode=gme;dt.Suspense=xme;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cme;dt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sq({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=KC.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)cq.call(t,u)&&!fq.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:l2,type:e.type,key:i,ref:o,props:r,_owner:a}};dt.createContext=function(e){return e={$$typeof:vme,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yme,_context:e},e.Consumer=e};dt.createElement=dq;dt.createFactory=function(e){var t=dq.bind(null,e);return t.type=e,t};dt.createRef=function(){return{current:null}};dt.forwardRef=function(e){return{$$typeof:bme,render:e}};dt.isValidElement=QC;dt.lazy=function(e){return{$$typeof:_me,_payload:{_status:-1,_result:e},_init:$me}};dt.memo=function(e,t){return{$$typeof:wme,type:e,compare:t===void 0?null:t}};dt.startTransition=function(e){var t=Px.transition;Px.transition={};try{e()}finally{Px.transition=t}};dt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dt.useCallback=function(e,t){return gi.current.useCallback(e,t)};dt.useContext=function(e){return gi.current.useContext(e)};dt.useDebugValue=function(){};dt.useDeferredValue=function(e){return gi.current.useDeferredValue(e)};dt.useEffect=function(e,t){return gi.current.useEffect(e,t)};dt.useId=function(){return gi.current.useId()};dt.useImperativeHandle=function(e,t,n){return gi.current.useImperativeHandle(e,t,n)};dt.useInsertionEffect=function(e,t){return gi.current.useInsertionEffect(e,t)};dt.useLayoutEffect=function(e,t){return gi.current.useLayoutEffect(e,t)};dt.useMemo=function(e,t){return gi.current.useMemo(e,t)};dt.useReducer=function(e,t,n){return gi.current.useReducer(e,t,n)};dt.useRef=function(e){return gi.current.useRef(e)};dt.useState=function(e){return gi.current.useState(e)};dt.useSyncExternalStore=function(e,t,n){return gi.current.useSyncExternalStore(e,t,n)};dt.useTransition=function(){return gi.current.useTransition()};dt.version="18.2.0";oq.exports=dt;var Y=oq.exports;const Ri=cg(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kme=Y,Tme=Symbol.for("react.element"),Mme=Symbol.for("react.fragment"),Ome=Object.prototype.hasOwnProperty,Nme=kme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rme={key:!0,ref:!0,__self:!0,__source:!0};function hq(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ome.call(t,r)&&!Rme.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Tme,type:e,key:o,ref:a,props:i,_owner:Nme.current}}BA.Fragment=Mme;BA.jsx=hq;BA.jsxs=hq;iq.exports=BA;var J=iq.exports,y8={},pq={exports:{}},Co={},gq={exports:{}},mq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,H){var U=z.length;z.push(H);e:for(;0<U;){var V=U-1>>>1,K=z[V];if(0<i(K,H))z[V]=H,z[U]=K,U=V;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],U=z.pop();if(U!==H){z[0]=U;e:for(var V=0,K=z.length,Q=K>>>1;V<Q;){var ne=2*(V+1)-1,ce=z[ne],ye=ne+1,fe=z[ye];if(0>i(ce,U))ye<K&&0>i(fe,ce)?(z[V]=fe,z[ye]=U,V=ye):(z[V]=ce,z[ne]=U,V=ne);else if(ye<K&&0>i(fe,U))z[V]=fe,z[ye]=U,V=ye;else break e}}return H}function i(z,H){var U=z.sortIndex-H.sortIndex;return U!==0?U:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,d=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=z)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function A(z){if(y=!1,_(z),!g)if(n(u)!==null)g=!0,L(E);else{var H=n(l);H!==null&&j(A,H.startTime-z)}}function E(z,H){g=!1,y&&(y=!1,b(k),k=-1),p=!0;var U=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||z&&!F());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var K=V(f.expirationTime<=H);H=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var Q=!0;else{var ne=n(l);ne!==null&&j(A,ne.startTime-H),Q=!1}return Q}finally{f=null,d=U,p=!1}}var $=!1,S=null,k=-1,O=5,N=-1;function F(){return!(e.unstable_now()-N<O)}function W(){if(S!==null){var z=e.unstable_now();N=z;var H=!0;try{H=S(!0,z)}finally{H?I():($=!1,S=null)}}else $=!1}var I;if(typeof x=="function")I=function(){x(W)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=W,I=function(){D.postMessage(null)}}else I=function(){v(W,0)};function L(z){S=z,$||($=!0,I())}function j(z,H){k=v(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var U=d;d=H;try{return z()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=d;d=z;try{return H()}finally{d=U}},e.unstable_scheduleCallback=function(z,H,U){var V=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,z={id:c++,callback:H,priorityLevel:z,startTime:U,expirationTime:K,sortIndex:-1},U>V?(z.sortIndex=U,t(l,z),n(u)===null&&z===n(l)&&(y?(b(k),k=-1):y=!0,j(A,U-V))):(z.sortIndex=K,t(u,z),g||p||(g=!0,L(E))),z},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(z){var H=d;return function(){var U=d;d=H;try{return z.apply(this,arguments)}finally{d=U}}}})(mq);gq.exports=mq;var Fme=gq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yq=Y,bo=Fme;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vq=new Set,ey={};function m0(e,t){fp(e,t),fp(e+"Capture",t)}function fp(e,t){for(ey[e]=t,e=0;e<t.length;e++)vq.add(t[e])}var al=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v8=Object.prototype.hasOwnProperty,Dme=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WP={},HP={};function Pme(e){return v8.call(HP,e)?!0:v8.call(WP,e)?!1:Dme.test(e)?HP[e]=!0:(WP[e]=!0,!1)}function Lme(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ime(e,t,n,r){if(t===null||typeof t>"u"||Lme(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mi(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yr[e]=new mi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yr[t]=new mi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yr[e]=new mi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yr[e]=new mi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yr[e]=new mi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yr[e]=new mi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yr[e]=new mi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yr[e]=new mi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yr[e]=new mi(e,5,!1,e.toLowerCase(),null,!1,!1)});var ZC=/[\-:]([a-z])/g;function e7(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ZC,e7);yr[t]=new mi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ZC,e7);yr[t]=new mi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ZC,e7);yr[t]=new mi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yr[e]=new mi(e,1,!1,e.toLowerCase(),null,!1,!1)});yr.xlinkHref=new mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yr[e]=new mi(e,1,!1,e.toLowerCase(),null,!0,!0)});function t7(e,t,n,r){var i=yr.hasOwnProperty(t)?yr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ime(t,n,i,r)&&(n=null),r||i===null?Pme(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bl=yq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mb=Symbol.for("react.element"),Ah=Symbol.for("react.portal"),Sh=Symbol.for("react.fragment"),n7=Symbol.for("react.strict_mode"),b8=Symbol.for("react.profiler"),bq=Symbol.for("react.provider"),xq=Symbol.for("react.context"),r7=Symbol.for("react.forward_ref"),x8=Symbol.for("react.suspense"),w8=Symbol.for("react.suspense_list"),i7=Symbol.for("react.memo"),Jl=Symbol.for("react.lazy"),wq=Symbol.for("react.offscreen"),qP=Symbol.iterator;function f1(e){return e===null||typeof e!="object"?null:(e=qP&&e[qP]||e["@@iterator"],typeof e=="function"?e:null)}var hn=Object.assign,VE;function J1(e){if(VE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);VE=t&&t[1]||""}return`
`+VE+e}var YE=!1;function XE(e,t){if(!e||YE)return"";YE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=s);break}}}finally{YE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?J1(e):""}function zme(e){switch(e.tag){case 5:return J1(e.type);case 16:return J1("Lazy");case 13:return J1("Suspense");case 19:return J1("SuspenseList");case 0:case 2:case 15:return e=XE(e.type,!1),e;case 11:return e=XE(e.type.render,!1),e;case 1:return e=XE(e.type,!0),e;default:return""}}function _8(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Sh:return"Fragment";case Ah:return"Portal";case b8:return"Profiler";case n7:return"StrictMode";case x8:return"Suspense";case w8:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xq:return(e.displayName||"Context")+".Consumer";case bq:return(e._context.displayName||"Context")+".Provider";case r7:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case i7:return t=e.displayName||null,t!==null?t:_8(e.type)||"Memo";case Jl:t=e._payload,e=e._init;try{return _8(e(t))}catch{}}return null}function Bme(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _8(t);case 8:return t===n7?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _q(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jme(e){var t=_q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yb(e){e._valueTracker||(e._valueTracker=jme(e))}function Aq(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_q(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Aw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function A8(e,t){var n=t.checked;return hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function GP(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Dc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sq(e,t){t=t.checked,t!=null&&t7(e,"checked",t,!1)}function S8(e,t){Sq(e,t);var n=Dc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?E8(e,t.type,n):t.hasOwnProperty("defaultValue")&&E8(e,t.type,Dc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function VP(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function E8(e,t,n){(t!=="number"||Aw(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var K1=Array.isArray;function Hh(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Dc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $8(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function YP(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ve(92));if(K1(n)){if(1<n.length)throw Error(ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dc(n)}}function Eq(e,t){var n=Dc(t.value),r=Dc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function XP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $q(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C8(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$q(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vb,Cq=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vb=vb||document.createElement("div"),vb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ty(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ume=["Webkit","ms","Moz","O"];Object.keys(Cm).forEach(function(e){Ume.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cm[t]=Cm[e]})});function kq(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cm.hasOwnProperty(e)&&Cm[e]?(""+t).trim():t+"px"}function Tq(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kq(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Wme=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k8(e,t){if(t){if(Wme[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function T8(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M8=null;function o7(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var O8=null,qh=null,Gh=null;function JP(e){if(e=d2(e)){if(typeof O8!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=qA(t),O8(e.stateNode,e.type,t))}}function Mq(e){qh?Gh?Gh.push(e):Gh=[e]:qh=e}function Oq(){if(qh){var e=qh,t=Gh;if(Gh=qh=null,JP(e),t)for(e=0;e<t.length;e++)JP(t[e])}}function Nq(e,t){return e(t)}function Rq(){}var JE=!1;function Fq(e,t,n){if(JE)return e(t,n);JE=!0;try{return Nq(e,t,n)}finally{JE=!1,(qh!==null||Gh!==null)&&(Rq(),Oq())}}function ny(e,t){var n=e.stateNode;if(n===null)return null;var r=qA(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ve(231,t,typeof n));return n}var N8=!1;if(al)try{var d1={};Object.defineProperty(d1,"passive",{get:function(){N8=!0}}),window.addEventListener("test",d1,d1),window.removeEventListener("test",d1,d1)}catch{N8=!1}function Hme(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var km=!1,Sw=null,Ew=!1,R8=null,qme={onError:function(e){km=!0,Sw=e}};function Gme(e,t,n,r,i,o,a,s,u){km=!1,Sw=null,Hme.apply(qme,arguments)}function Vme(e,t,n,r,i,o,a,s,u){if(Gme.apply(this,arguments),km){if(km){var l=Sw;km=!1,Sw=null}else throw Error(ve(198));Ew||(Ew=!0,R8=l)}}function y0(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dq(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KP(e){if(y0(e)!==e)throw Error(ve(188))}function Yme(e){var t=e.alternate;if(!t){if(t=y0(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return KP(i),e;if(o===r)return KP(i),t;o=o.sibling}throw Error(ve(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?e:t}function Pq(e){return e=Yme(e),e!==null?Lq(e):null}function Lq(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lq(e);if(t!==null)return t;e=e.sibling}return null}var Iq=bo.unstable_scheduleCallback,QP=bo.unstable_cancelCallback,Xme=bo.unstable_shouldYield,Jme=bo.unstable_requestPaint,En=bo.unstable_now,Kme=bo.unstable_getCurrentPriorityLevel,a7=bo.unstable_ImmediatePriority,zq=bo.unstable_UserBlockingPriority,$w=bo.unstable_NormalPriority,Qme=bo.unstable_LowPriority,Bq=bo.unstable_IdlePriority,jA=null,Is=null;function Zme(e){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(jA,e,void 0,(e.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:nye,eye=Math.log,tye=Math.LN2;function nye(e){return e>>>=0,e===0?32:31-(eye(e)/tye|0)|0}var bb=64,xb=4194304;function Q1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cw(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Q1(s):(o&=a,o!==0&&(r=Q1(o)))}else a=n&~i,a!==0?r=Q1(a):o!==0&&(r=Q1(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Va(t),i=1<<n,r|=e[n],t&=~i;return r}function rye(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iye(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Va(o),s=1<<a,u=i[a];u===-1?(!(s&n)||s&r)&&(i[a]=rye(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}function F8(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jq(){var e=bb;return bb<<=1,!(bb&4194240)&&(bb=64),e}function KE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function c2(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Va(t),e[t]=n}function oye(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Va(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function s7(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Va(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dt=0;function Uq(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wq,u7,Hq,qq,Gq,D8=!1,wb=[],bc=null,xc=null,wc=null,ry=new Map,iy=new Map,ic=[],aye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZP(e,t){switch(e){case"focusin":case"focusout":bc=null;break;case"dragenter":case"dragleave":xc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":ry.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(t.pointerId)}}function h1(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=d2(t),t!==null&&u7(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function sye(e,t,n,r,i){switch(t){case"focusin":return bc=h1(bc,e,t,n,r,i),!0;case"dragenter":return xc=h1(xc,e,t,n,r,i),!0;case"mouseover":return wc=h1(wc,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ry.set(o,h1(ry.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,iy.set(o,h1(iy.get(o)||null,e,t,n,r,i)),!0}return!1}function Vq(e){var t=fd(e.target);if(t!==null){var n=y0(t);if(n!==null){if(t=n.tag,t===13){if(t=Dq(n),t!==null){e.blockedOn=t,Gq(e.priority,function(){Hq(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=P8(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);M8=r,n.target.dispatchEvent(r),M8=null}else return t=d2(n),t!==null&&u7(t),e.blockedOn=n,!1;t.shift()}return!0}function eL(e,t,n){Lx(e)&&n.delete(t)}function uye(){D8=!1,bc!==null&&Lx(bc)&&(bc=null),xc!==null&&Lx(xc)&&(xc=null),wc!==null&&Lx(wc)&&(wc=null),ry.forEach(eL),iy.forEach(eL)}function p1(e,t){e.blockedOn===t&&(e.blockedOn=null,D8||(D8=!0,bo.unstable_scheduleCallback(bo.unstable_NormalPriority,uye)))}function oy(e){function t(i){return p1(i,e)}if(0<wb.length){p1(wb[0],e);for(var n=1;n<wb.length;n++){var r=wb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bc!==null&&p1(bc,e),xc!==null&&p1(xc,e),wc!==null&&p1(wc,e),ry.forEach(t),iy.forEach(t),n=0;n<ic.length;n++)r=ic[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ic.length&&(n=ic[0],n.blockedOn===null);)Vq(n),n.blockedOn===null&&ic.shift()}var Vh=bl.ReactCurrentBatchConfig,kw=!0;function lye(e,t,n,r){var i=Dt,o=Vh.transition;Vh.transition=null;try{Dt=1,l7(e,t,n,r)}finally{Dt=i,Vh.transition=o}}function cye(e,t,n,r){var i=Dt,o=Vh.transition;Vh.transition=null;try{Dt=4,l7(e,t,n,r)}finally{Dt=i,Vh.transition=o}}function l7(e,t,n,r){if(kw){var i=P8(e,t,n,r);if(i===null)s9(e,t,r,Tw,n),ZP(e,r);else if(sye(i,e,t,n,r))r.stopPropagation();else if(ZP(e,r),t&4&&-1<aye.indexOf(e)){for(;i!==null;){var o=d2(i);if(o!==null&&Wq(o),o=P8(e,t,n,r),o===null&&s9(e,t,r,Tw,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else s9(e,t,r,null,n)}}var Tw=null;function P8(e,t,n,r){if(Tw=null,e=o7(r),e=fd(e),e!==null)if(t=y0(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dq(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tw=e,null}function Yq(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kme()){case a7:return 1;case zq:return 4;case $w:case Qme:return 16;case Bq:return 536870912;default:return 16}default:return 16}}var uc=null,c7=null,Ix=null;function Xq(){if(Ix)return Ix;var e,t=c7,n=t.length,r,i="value"in uc?uc.value:uc.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Ix=i.slice(e,1<r?1-r:void 0)}function zx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _b(){return!0}function tL(){return!1}function ko(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_b:tL,this.isPropagationStopped=tL,this}return hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_b)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_b)},persist:function(){},isPersistent:_b}),t}var dg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f7=ko(dg),f2=hn({},dg,{view:0,detail:0}),fye=ko(f2),QE,ZE,g1,UA=hn({},f2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d7,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==g1&&(g1&&e.type==="mousemove"?(QE=e.screenX-g1.screenX,ZE=e.screenY-g1.screenY):ZE=QE=0,g1=e),QE)},movementY:function(e){return"movementY"in e?e.movementY:ZE}}),nL=ko(UA),dye=hn({},UA,{dataTransfer:0}),hye=ko(dye),pye=hn({},f2,{relatedTarget:0}),e9=ko(pye),gye=hn({},dg,{animationName:0,elapsedTime:0,pseudoElement:0}),mye=ko(gye),yye=hn({},dg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vye=ko(yye),bye=hn({},dg,{data:0}),rL=ko(bye),xye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_ye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aye(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_ye[e])?!!t[e]:!1}function d7(){return Aye}var Sye=hn({},f2,{key:function(e){if(e.key){var t=xye[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wye[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d7,charCode:function(e){return e.type==="keypress"?zx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eye=ko(Sye),$ye=hn({},UA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iL=ko($ye),Cye=hn({},f2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d7}),kye=ko(Cye),Tye=hn({},dg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mye=ko(Tye),Oye=hn({},UA,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nye=ko(Oye),Rye=[9,13,27,32],h7=al&&"CompositionEvent"in window,Tm=null;al&&"documentMode"in document&&(Tm=document.documentMode);var Fye=al&&"TextEvent"in window&&!Tm,Jq=al&&(!h7||Tm&&8<Tm&&11>=Tm),oL=String.fromCharCode(32),aL=!1;function Kq(e,t){switch(e){case"keyup":return Rye.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qq(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Eh=!1;function Dye(e,t){switch(e){case"compositionend":return Qq(t);case"keypress":return t.which!==32?null:(aL=!0,oL);case"textInput":return e=t.data,e===oL&&aL?null:e;default:return null}}function Pye(e,t){if(Eh)return e==="compositionend"||!h7&&Kq(e,t)?(e=Xq(),Ix=c7=uc=null,Eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jq&&t.locale!=="ko"?null:t.data;default:return null}}var Lye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lye[e.type]:t==="textarea"}function Zq(e,t,n,r){Mq(r),t=Mw(t,"onChange"),0<t.length&&(n=new f7("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mm=null,ay=null;function Iye(e){cG(e,0)}function WA(e){var t=kh(e);if(Aq(t))return e}function zye(e,t){if(e==="change")return t}var eG=!1;if(al){var t9;if(al){var n9="oninput"in document;if(!n9){var uL=document.createElement("div");uL.setAttribute("oninput","return;"),n9=typeof uL.oninput=="function"}t9=n9}else t9=!1;eG=t9&&(!document.documentMode||9<document.documentMode)}function lL(){Mm&&(Mm.detachEvent("onpropertychange",tG),ay=Mm=null)}function tG(e){if(e.propertyName==="value"&&WA(ay)){var t=[];Zq(t,ay,e,o7(e)),Fq(Iye,t)}}function Bye(e,t,n){e==="focusin"?(lL(),Mm=t,ay=n,Mm.attachEvent("onpropertychange",tG)):e==="focusout"&&lL()}function jye(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return WA(ay)}function Uye(e,t){if(e==="click")return WA(t)}function Wye(e,t){if(e==="input"||e==="change")return WA(t)}function Hye(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Za=typeof Object.is=="function"?Object.is:Hye;function sy(e,t){if(Za(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v8.call(t,i)||!Za(e[i],t[i]))return!1}return!0}function cL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fL(e,t){var n=cL(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cL(n)}}function nG(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nG(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rG(){for(var e=window,t=Aw();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Aw(e.document)}return t}function p7(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qye(e){var t=rG(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nG(n.ownerDocument.documentElement,n)){if(r!==null&&p7(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=fL(n,o);var a=fL(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gye=al&&"documentMode"in document&&11>=document.documentMode,$h=null,L8=null,Om=null,I8=!1;function dL(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I8||$h==null||$h!==Aw(r)||(r=$h,"selectionStart"in r&&p7(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Om&&sy(Om,r)||(Om=r,r=Mw(L8,"onSelect"),0<r.length&&(t=new f7("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$h)))}function Ab(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ch={animationend:Ab("Animation","AnimationEnd"),animationiteration:Ab("Animation","AnimationIteration"),animationstart:Ab("Animation","AnimationStart"),transitionend:Ab("Transition","TransitionEnd")},r9={},iG={};al&&(iG=document.createElement("div").style,"AnimationEvent"in window||(delete Ch.animationend.animation,delete Ch.animationiteration.animation,delete Ch.animationstart.animation),"TransitionEvent"in window||delete Ch.transitionend.transition);function HA(e){if(r9[e])return r9[e];if(!Ch[e])return e;var t=Ch[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in iG)return r9[e]=t[n];return e}var oG=HA("animationend"),aG=HA("animationiteration"),sG=HA("animationstart"),uG=HA("transitionend"),lG=new Map,hL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cf(e,t){lG.set(e,t),m0(t,[e])}for(var i9=0;i9<hL.length;i9++){var o9=hL[i9],Vye=o9.toLowerCase(),Yye=o9[0].toUpperCase()+o9.slice(1);cf(Vye,"on"+Yye)}cf(oG,"onAnimationEnd");cf(aG,"onAnimationIteration");cf(sG,"onAnimationStart");cf("dblclick","onDoubleClick");cf("focusin","onFocus");cf("focusout","onBlur");cf(uG,"onTransitionEnd");fp("onMouseEnter",["mouseout","mouseover"]);fp("onMouseLeave",["mouseout","mouseover"]);fp("onPointerEnter",["pointerout","pointerover"]);fp("onPointerLeave",["pointerout","pointerover"]);m0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));m0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));m0("onBeforeInput",["compositionend","keypress","textInput","paste"]);m0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));m0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));m0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Z1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Z1));function pL(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Vme(r,t,void 0,e),e.currentTarget=null}function cG(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;pL(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;pL(i,s,l),o=u}}}if(Ew)throw e=R8,Ew=!1,R8=null,e}function Jt(e,t){var n=t[W8];n===void 0&&(n=t[W8]=new Set);var r=e+"__bubble";n.has(r)||(fG(t,e,2,!1),n.add(r))}function a9(e,t,n){var r=0;t&&(r|=4),fG(n,e,r,t)}var Sb="_reactListening"+Math.random().toString(36).slice(2);function uy(e){if(!e[Sb]){e[Sb]=!0,vq.forEach(function(n){n!=="selectionchange"&&(Xye.has(n)||a9(n,!1,e),a9(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sb]||(t[Sb]=!0,a9("selectionchange",!1,t))}}function fG(e,t,n,r){switch(Yq(t)){case 1:var i=lye;break;case 4:i=cye;break;default:i=l7}n=i.bind(null,t,n,e),i=void 0,!N8||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function s9(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=fd(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}Fq(function(){var l=o,c=o7(n),f=[];e:{var d=lG.get(e);if(d!==void 0){var p=f7,g=e;switch(e){case"keypress":if(zx(n)===0)break e;case"keydown":case"keyup":p=Eye;break;case"focusin":g="focus",p=e9;break;case"focusout":g="blur",p=e9;break;case"beforeblur":case"afterblur":p=e9;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=nL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kye;break;case oG:case aG:case sG:p=mye;break;case uG:p=Mye;break;case"scroll":p=fye;break;case"wheel":p=Nye;break;case"copy":case"cut":case"paste":p=vye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=iL}var y=(t&4)!==0,v=!y&&e==="scroll",b=y?d!==null?d+"Capture":null:d;y=[];for(var x=l,_;x!==null;){_=x;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,b!==null&&(A=ny(x,b),A!=null&&y.push(ly(x,A,_)))),v)break;x=x.return}0<y.length&&(d=new p(d,g,null,n,c),f.push({event:d,listeners:y}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==M8&&(g=n.relatedTarget||n.fromElement)&&(fd(g)||g[sl]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=l,g=g?fd(g):null,g!==null&&(v=y0(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(y=nL,A="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=iL,A="onPointerLeave",b="onPointerEnter",x="pointer"),v=p==null?d:kh(p),_=g==null?d:kh(g),d=new y(A,x+"leave",p,n,c),d.target=v,d.relatedTarget=_,A=null,fd(c)===l&&(y=new y(b,x+"enter",g,n,c),y.target=_,y.relatedTarget=v,A=y),v=A,p&&g)t:{for(y=p,b=g,x=0,_=y;_;_=nh(_))x++;for(_=0,A=b;A;A=nh(A))_++;for(;0<x-_;)y=nh(y),x--;for(;0<_-x;)b=nh(b),_--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=nh(y),b=nh(b)}y=null}else y=null;p!==null&&gL(f,d,p,y,!1),g!==null&&v!==null&&gL(f,v,g,y,!0)}}e:{if(d=l?kh(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var E=zye;else if(sL(d))if(eG)E=Wye;else{E=jye;var $=Bye}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Uye);if(E&&(E=E(e,l))){Zq(f,E,n,c);break e}$&&$(e,d,l),e==="focusout"&&($=d._wrapperState)&&$.controlled&&d.type==="number"&&E8(d,"number",d.value)}switch($=l?kh(l):window,e){case"focusin":(sL($)||$.contentEditable==="true")&&($h=$,L8=l,Om=null);break;case"focusout":Om=L8=$h=null;break;case"mousedown":I8=!0;break;case"contextmenu":case"mouseup":case"dragend":I8=!1,dL(f,n,c);break;case"selectionchange":if(Gye)break;case"keydown":case"keyup":dL(f,n,c)}var S;if(h7)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Eh?Kq(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Jq&&n.locale!=="ko"&&(Eh||k!=="onCompositionStart"?k==="onCompositionEnd"&&Eh&&(S=Xq()):(uc=c,c7="value"in uc?uc.value:uc.textContent,Eh=!0)),$=Mw(l,k),0<$.length&&(k=new rL(k,e,null,n,c),f.push({event:k,listeners:$}),S?k.data=S:(S=Qq(n),S!==null&&(k.data=S)))),(S=Fye?Dye(e,n):Pye(e,n))&&(l=Mw(l,"onBeforeInput"),0<l.length&&(c=new rL("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}cG(f,t)})}function ly(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mw(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ny(e,n),o!=null&&r.unshift(ly(e,o,i)),o=ny(e,t),o!=null&&r.push(ly(e,o,i))),e=e.return}return r}function nh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gL(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=ny(n,o),u!=null&&a.unshift(ly(n,u,s))):i||(u=ny(n,o),u!=null&&a.push(ly(n,u,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Jye=/\r\n?/g,Kye=/\u0000|\uFFFD/g;function mL(e){return(typeof e=="string"?e:""+e).replace(Jye,`
`).replace(Kye,"")}function Eb(e,t,n){if(t=mL(t),mL(e)!==t&&n)throw Error(ve(425))}function Ow(){}var z8=null,B8=null;function j8(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U8=typeof setTimeout=="function"?setTimeout:void 0,Qye=typeof clearTimeout=="function"?clearTimeout:void 0,yL=typeof Promise=="function"?Promise:void 0,Zye=typeof queueMicrotask=="function"?queueMicrotask:typeof yL<"u"?function(e){return yL.resolve(null).then(e).catch(e2e)}:U8;function e2e(e){setTimeout(function(){throw e})}function u9(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),oy(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oy(t)}function _c(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hg=Math.random().toString(36).slice(2),Os="__reactFiber$"+hg,cy="__reactProps$"+hg,sl="__reactContainer$"+hg,W8="__reactEvents$"+hg,t2e="__reactListeners$"+hg,n2e="__reactHandles$"+hg;function fd(e){var t=e[Os];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sl]||n[Os]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vL(e);e!==null;){if(n=e[Os])return n;e=vL(e)}return t}e=n,n=e.parentNode}return null}function d2(e){return e=e[Os]||e[sl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function qA(e){return e[cy]||null}var H8=[],Th=-1;function ff(e){return{current:e}}function Zt(e){0>Th||(e.current=H8[Th],H8[Th]=null,Th--)}function Vt(e,t){Th++,H8[Th]=e.current,e.current=t}var Pc={},Ir=ff(Pc),Pi=ff(!1),Dd=Pc;function dp(e,t){var n=e.type.contextTypes;if(!n)return Pc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Li(e){return e=e.childContextTypes,e!=null}function Nw(){Zt(Pi),Zt(Ir)}function bL(e,t,n){if(Ir.current!==Pc)throw Error(ve(168));Vt(Ir,t),Vt(Pi,n)}function dG(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ve(108,Bme(e)||"Unknown",i));return hn({},n,r)}function Rw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pc,Dd=Ir.current,Vt(Ir,e),Vt(Pi,Pi.current),!0}function xL(e,t,n){var r=e.stateNode;if(!r)throw Error(ve(169));n?(e=dG(e,t,Dd),r.__reactInternalMemoizedMergedChildContext=e,Zt(Pi),Zt(Ir),Vt(Ir,e)):Zt(Pi),Vt(Pi,n)}var ju=null,GA=!1,l9=!1;function hG(e){ju===null?ju=[e]:ju.push(e)}function r2e(e){GA=!0,hG(e)}function df(){if(!l9&&ju!==null){l9=!0;var e=0,t=Dt;try{var n=ju;for(Dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ju=null,GA=!1}catch(i){throw ju!==null&&(ju=ju.slice(e+1)),Iq(a7,df),i}finally{Dt=t,l9=!1}}return null}var Mh=[],Oh=0,Fw=null,Dw=0,Wo=[],Ho=0,Pd=null,Gu=1,Vu="";function Qf(e,t){Mh[Oh++]=Dw,Mh[Oh++]=Fw,Fw=e,Dw=t}function pG(e,t,n){Wo[Ho++]=Gu,Wo[Ho++]=Vu,Wo[Ho++]=Pd,Pd=e;var r=Gu;e=Vu;var i=32-Va(r)-1;r&=~(1<<i),n+=1;var o=32-Va(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gu=1<<32-Va(t)+i|n<<i|r,Vu=o+e}else Gu=1<<o|n<<i|r,Vu=e}function g7(e){e.return!==null&&(Qf(e,1),pG(e,1,0))}function m7(e){for(;e===Fw;)Fw=Mh[--Oh],Mh[Oh]=null,Dw=Mh[--Oh],Mh[Oh]=null;for(;e===Pd;)Pd=Wo[--Ho],Wo[Ho]=null,Vu=Wo[--Ho],Wo[Ho]=null,Gu=Wo[--Ho],Wo[Ho]=null}var mo=null,fo=null,on=!1,Pa=null;function gG(e,t){var n=Vo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wL(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mo=e,fo=_c(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mo=e,fo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pd!==null?{id:Gu,overflow:Vu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mo=e,fo=null,!0):!1;default:return!1}}function q8(e){return(e.mode&1)!==0&&(e.flags&128)===0}function G8(e){if(on){var t=fo;if(t){var n=t;if(!wL(e,t)){if(q8(e))throw Error(ve(418));t=_c(n.nextSibling);var r=mo;t&&wL(e,t)?gG(r,n):(e.flags=e.flags&-4097|2,on=!1,mo=e)}}else{if(q8(e))throw Error(ve(418));e.flags=e.flags&-4097|2,on=!1,mo=e}}}function _L(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mo=e}function $b(e){if(e!==mo)return!1;if(!on)return _L(e),on=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!j8(e.type,e.memoizedProps)),t&&(t=fo)){if(q8(e))throw mG(),Error(ve(418));for(;t;)gG(e,t),t=_c(t.nextSibling)}if(_L(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fo=_c(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fo=null}}else fo=mo?_c(e.stateNode.nextSibling):null;return!0}function mG(){for(var e=fo;e;)e=_c(e.nextSibling)}function hp(){fo=mo=null,on=!1}function y7(e){Pa===null?Pa=[e]:Pa.push(e)}var i2e=bl.ReactCurrentBatchConfig;function Na(e,t){if(e&&e.defaultProps){t=hn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Pw=ff(null),Lw=null,Nh=null,v7=null;function b7(){v7=Nh=Lw=null}function x7(e){var t=Pw.current;Zt(Pw),e._currentValue=t}function V8(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yh(e,t){Lw=e,v7=Nh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fi=!0),e.firstContext=null)}function ra(e){var t=e._currentValue;if(v7!==e)if(e={context:e,memoizedValue:t,next:null},Nh===null){if(Lw===null)throw Error(ve(308));Nh=e,Lw.dependencies={lanes:0,firstContext:e}}else Nh=Nh.next=e;return t}var dd=null;function w7(e){dd===null?dd=[e]:dd.push(e)}function yG(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,w7(t)):(n.next=i.next,i.next=n),t.interleaved=n,ul(e,r)}function ul(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kl=!1;function _7(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ac(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,bt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ul(e,n)}return i=r.interleaved,i===null?(t.next=t,w7(r)):(t.next=i.next,i.next=t),r.interleaved=t,ul(e,n)}function Bx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,s7(e,n)}}function AL(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Iw(e,t,n,r){var i=e.updateQueue;Kl=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,c=l=u=null,s=o;do{var d=s.lane,p=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(d=t,p=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(p,f,d):g,d==null)break e;f=hn({},f,d);break e;case 2:Kl=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=f):c=c.next=p,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Id|=a,e.lanes=a,e.memoizedState=f}}function SL(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ve(191,i));i.call(r)}}}var bG=new yq.Component().refs;function Y8(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:hn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var VA={isMounted:function(e){return(e=e._reactInternals)?y0(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ai(),i=Ec(e),o=el(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ac(e,o,i),t!==null&&(Ya(t,e,i,r),Bx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ai(),i=Ec(e),o=el(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ac(e,o,i),t!==null&&(Ya(t,e,i,r),Bx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ai(),r=Ec(e),i=el(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ac(e,i,r),t!==null&&(Ya(t,e,r,n),Bx(t,e,r))}};function EL(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!sy(n,r)||!sy(i,o):!0}function xG(e,t,n){var r=!1,i=Pc,o=t.contextType;return typeof o=="object"&&o!==null?o=ra(o):(i=Li(t)?Dd:Ir.current,r=t.contextTypes,o=(r=r!=null)?dp(e,i):Pc),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=VA,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function $L(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&VA.enqueueReplaceState(t,t.state,null)}function X8(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bG,_7(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ra(o):(o=Li(t)?Dd:Ir.current,i.context=dp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Y8(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&VA.enqueueReplaceState(i,i.state,null),Iw(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function m1(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===bG&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,e))}return e}function Cb(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function CL(e){var t=e._init;return t(e._payload)}function wG(e){function t(b,x){if(e){var _=b.deletions;_===null?(b.deletions=[x],b.flags|=16):_.push(x)}}function n(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=$c(b,x),b.index=0,b.sibling=null,b}function o(b,x,_){return b.index=_,e?(_=b.alternate,_!==null?(_=_.index,_<x?(b.flags|=2,x):_):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,x,_,A){return x===null||x.tag!==6?(x=m9(_,b.mode,A),x.return=b,x):(x=i(x,_),x.return=b,x)}function u(b,x,_,A){var E=_.type;return E===Sh?c(b,x,_.props.children,A,_.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jl&&CL(E)===x.type)?(A=i(x,_.props),A.ref=m1(b,x,_),A.return=b,A):(A=Gx(_.type,_.key,_.props,null,b.mode,A),A.ref=m1(b,x,_),A.return=b,A)}function l(b,x,_,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=y9(_,b.mode,A),x.return=b,x):(x=i(x,_.children||[]),x.return=b,x)}function c(b,x,_,A,E){return x===null||x.tag!==7?(x=_d(_,b.mode,A,E),x.return=b,x):(x=i(x,_),x.return=b,x)}function f(b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=m9(""+x,b.mode,_),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mb:return _=Gx(x.type,x.key,x.props,null,b.mode,_),_.ref=m1(b,null,x),_.return=b,_;case Ah:return x=y9(x,b.mode,_),x.return=b,x;case Jl:var A=x._init;return f(b,A(x._payload),_)}if(K1(x)||f1(x))return x=_d(x,b.mode,_,null),x.return=b,x;Cb(b,x)}return null}function d(b,x,_,A){var E=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:s(b,x,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case mb:return _.key===E?u(b,x,_,A):null;case Ah:return _.key===E?l(b,x,_,A):null;case Jl:return E=_._init,d(b,x,E(_._payload),A)}if(K1(_)||f1(_))return E!==null?null:c(b,x,_,A,null);Cb(b,_)}return null}function p(b,x,_,A,E){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(_)||null,s(x,b,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case mb:return b=b.get(A.key===null?_:A.key)||null,u(x,b,A,E);case Ah:return b=b.get(A.key===null?_:A.key)||null,l(x,b,A,E);case Jl:var $=A._init;return p(b,x,_,$(A._payload),E)}if(K1(A)||f1(A))return b=b.get(_)||null,c(x,b,A,E,null);Cb(x,A)}return null}function g(b,x,_,A){for(var E=null,$=null,S=x,k=x=0,O=null;S!==null&&k<_.length;k++){S.index>k?(O=S,S=null):O=S.sibling;var N=d(b,S,_[k],A);if(N===null){S===null&&(S=O);break}e&&S&&N.alternate===null&&t(b,S),x=o(N,x,k),$===null?E=N:$.sibling=N,$=N,S=O}if(k===_.length)return n(b,S),on&&Qf(b,k),E;if(S===null){for(;k<_.length;k++)S=f(b,_[k],A),S!==null&&(x=o(S,x,k),$===null?E=S:$.sibling=S,$=S);return on&&Qf(b,k),E}for(S=r(b,S);k<_.length;k++)O=p(S,b,k,_[k],A),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?k:O.key),x=o(O,x,k),$===null?E=O:$.sibling=O,$=O);return e&&S.forEach(function(F){return t(b,F)}),on&&Qf(b,k),E}function y(b,x,_,A){var E=f1(_);if(typeof E!="function")throw Error(ve(150));if(_=E.call(_),_==null)throw Error(ve(151));for(var $=E=null,S=x,k=x=0,O=null,N=_.next();S!==null&&!N.done;k++,N=_.next()){S.index>k?(O=S,S=null):O=S.sibling;var F=d(b,S,N.value,A);if(F===null){S===null&&(S=O);break}e&&S&&F.alternate===null&&t(b,S),x=o(F,x,k),$===null?E=F:$.sibling=F,$=F,S=O}if(N.done)return n(b,S),on&&Qf(b,k),E;if(S===null){for(;!N.done;k++,N=_.next())N=f(b,N.value,A),N!==null&&(x=o(N,x,k),$===null?E=N:$.sibling=N,$=N);return on&&Qf(b,k),E}for(S=r(b,S);!N.done;k++,N=_.next())N=p(S,b,k,N.value,A),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?k:N.key),x=o(N,x,k),$===null?E=N:$.sibling=N,$=N);return e&&S.forEach(function(W){return t(b,W)}),on&&Qf(b,k),E}function v(b,x,_,A){if(typeof _=="object"&&_!==null&&_.type===Sh&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case mb:e:{for(var E=_.key,$=x;$!==null;){if($.key===E){if(E=_.type,E===Sh){if($.tag===7){n(b,$.sibling),x=i($,_.props.children),x.return=b,b=x;break e}}else if($.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jl&&CL(E)===$.type){n(b,$.sibling),x=i($,_.props),x.ref=m1(b,$,_),x.return=b,b=x;break e}n(b,$);break}else t(b,$);$=$.sibling}_.type===Sh?(x=_d(_.props.children,b.mode,A,_.key),x.return=b,b=x):(A=Gx(_.type,_.key,_.props,null,b.mode,A),A.ref=m1(b,x,_),A.return=b,b=A)}return a(b);case Ah:e:{for($=_.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(b,x.sibling),x=i(x,_.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else t(b,x);x=x.sibling}x=y9(_,b.mode,A),x.return=b,b=x}return a(b);case Jl:return $=_._init,v(b,x,$(_._payload),A)}if(K1(_))return g(b,x,_,A);if(f1(_))return y(b,x,_,A);Cb(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,_),x.return=b,b=x):(n(b,x),x=m9(_,b.mode,A),x.return=b,b=x),a(b)):n(b,x)}return v}var pp=wG(!0),_G=wG(!1),h2={},zs=ff(h2),fy=ff(h2),dy=ff(h2);function hd(e){if(e===h2)throw Error(ve(174));return e}function A7(e,t){switch(Vt(dy,t),Vt(fy,e),Vt(zs,h2),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C8(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C8(t,e)}Zt(zs),Vt(zs,t)}function gp(){Zt(zs),Zt(fy),Zt(dy)}function AG(e){hd(dy.current);var t=hd(zs.current),n=C8(t,e.type);t!==n&&(Vt(fy,e),Vt(zs,n))}function S7(e){fy.current===e&&(Zt(zs),Zt(fy))}var fn=ff(0);function zw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var c9=[];function E7(){for(var e=0;e<c9.length;e++)c9[e]._workInProgressVersionPrimary=null;c9.length=0}var jx=bl.ReactCurrentDispatcher,f9=bl.ReactCurrentBatchConfig,Ld=0,dn=null,Fn=null,Vn=null,Bw=!1,Nm=!1,hy=0,o2e=0;function _r(){throw Error(ve(321))}function $7(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Za(e[n],t[n]))return!1;return!0}function C7(e,t,n,r,i,o){if(Ld=o,dn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jx.current=e===null||e.memoizedState===null?l2e:c2e,e=n(r,i),Nm){o=0;do{if(Nm=!1,hy=0,25<=o)throw Error(ve(301));o+=1,Vn=Fn=null,t.updateQueue=null,jx.current=f2e,e=n(r,i)}while(Nm)}if(jx.current=jw,t=Fn!==null&&Fn.next!==null,Ld=0,Vn=Fn=dn=null,Bw=!1,t)throw Error(ve(300));return e}function k7(){var e=hy!==0;return hy=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?dn.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function ia(){if(Fn===null){var e=dn.alternate;e=e!==null?e.memoizedState:null}else e=Fn.next;var t=Vn===null?dn.memoizedState:Vn.next;if(t!==null)Vn=t,Fn=e;else{if(e===null)throw Error(ve(310));Fn=e,e={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Vn===null?dn.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function py(e,t){return typeof t=="function"?t(e):t}function d9(e){var t=ia(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=Fn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((Ld&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,dn.lanes|=c,Id|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Za(r,t.memoizedState)||(Fi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,dn.lanes|=o,Id|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function h9(e){var t=ia(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Za(o,t.memoizedState)||(Fi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function SG(){}function EG(e,t){var n=dn,r=ia(),i=t(),o=!Za(r.memoizedState,i);if(o&&(r.memoizedState=i,Fi=!0),r=r.queue,T7(kG.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,gy(9,CG.bind(null,n,r,i,t),void 0,null),nr===null)throw Error(ve(349));Ld&30||$G(n,t,i)}return i}function $G(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=dn.updateQueue,t===null?(t={lastEffect:null,stores:null},dn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function CG(e,t,n,r){t.value=n,t.getSnapshot=r,TG(t)&&MG(e)}function kG(e,t,n){return n(function(){TG(t)&&MG(e)})}function TG(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Za(e,n)}catch{return!0}}function MG(e){var t=ul(e,1);t!==null&&Ya(t,e,1,-1)}function kL(e){var t=Ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:e},t.queue=e,e=e.dispatch=u2e.bind(null,dn,e),[t.memoizedState,e]}function gy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=dn.updateQueue,t===null?(t={lastEffect:null,stores:null},dn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function OG(){return ia().memoizedState}function Ux(e,t,n,r){var i=Ss();dn.flags|=e,i.memoizedState=gy(1|t,n,void 0,r===void 0?null:r)}function YA(e,t,n,r){var i=ia();r=r===void 0?null:r;var o=void 0;if(Fn!==null){var a=Fn.memoizedState;if(o=a.destroy,r!==null&&$7(r,a.deps)){i.memoizedState=gy(t,n,o,r);return}}dn.flags|=e,i.memoizedState=gy(1|t,n,o,r)}function TL(e,t){return Ux(8390656,8,e,t)}function T7(e,t){return YA(2048,8,e,t)}function NG(e,t){return YA(4,2,e,t)}function RG(e,t){return YA(4,4,e,t)}function FG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DG(e,t,n){return n=n!=null?n.concat([e]):null,YA(4,4,FG.bind(null,t,e),n)}function M7(){}function PG(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$7(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function LG(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$7(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function IG(e,t,n){return Ld&21?(Za(n,t)||(n=jq(),dn.lanes|=n,Id|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fi=!0),e.memoizedState=n)}function a2e(e,t){var n=Dt;Dt=n!==0&&4>n?n:4,e(!0);var r=f9.transition;f9.transition={};try{e(!1),t()}finally{Dt=n,f9.transition=r}}function zG(){return ia().memoizedState}function s2e(e,t,n){var r=Ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BG(e))jG(t,n);else if(n=yG(e,t,n,r),n!==null){var i=ai();Ya(n,e,r,i),UG(n,t,r)}}function u2e(e,t,n){var r=Ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BG(e))jG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Za(s,a)){var u=t.interleaved;u===null?(i.next=i,w7(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=yG(e,t,i,r),n!==null&&(i=ai(),Ya(n,e,r,i),UG(n,t,r))}}function BG(e){var t=e.alternate;return e===dn||t!==null&&t===dn}function jG(e,t){Nm=Bw=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function UG(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,s7(e,n)}}var jw={readContext:ra,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},l2e={readContext:ra,useCallback:function(e,t){return Ss().memoizedState=[e,t===void 0?null:t],e},useContext:ra,useEffect:TL,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ux(4194308,4,FG.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ux(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ux(4,2,e,t)},useMemo:function(e,t){var n=Ss();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ss();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=s2e.bind(null,dn,e),[r.memoizedState,e]},useRef:function(e){var t=Ss();return e={current:e},t.memoizedState=e},useState:kL,useDebugValue:M7,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=kL(!1),t=e[0];return e=a2e.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=dn,i=Ss();if(on){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=t(),nr===null)throw Error(ve(349));Ld&30||$G(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,TL(kG.bind(null,r,o,e),[e]),r.flags|=2048,gy(9,CG.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ss(),t=nr.identifierPrefix;if(on){var n=Vu,r=Gu;n=(r&~(1<<32-Va(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=o2e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c2e={readContext:ra,useCallback:PG,useContext:ra,useEffect:T7,useImperativeHandle:DG,useInsertionEffect:NG,useLayoutEffect:RG,useMemo:LG,useReducer:d9,useRef:OG,useState:function(){return d9(py)},useDebugValue:M7,useDeferredValue:function(e){var t=ia();return IG(t,Fn.memoizedState,e)},useTransition:function(){var e=d9(py)[0],t=ia().memoizedState;return[e,t]},useMutableSource:SG,useSyncExternalStore:EG,useId:zG,unstable_isNewReconciler:!1},f2e={readContext:ra,useCallback:PG,useContext:ra,useEffect:T7,useImperativeHandle:DG,useInsertionEffect:NG,useLayoutEffect:RG,useMemo:LG,useReducer:h9,useRef:OG,useState:function(){return h9(py)},useDebugValue:M7,useDeferredValue:function(e){var t=ia();return Fn===null?t.memoizedState=e:IG(t,Fn.memoizedState,e)},useTransition:function(){var e=h9(py)[0],t=ia().memoizedState;return[e,t]},useMutableSource:SG,useSyncExternalStore:EG,useId:zG,unstable_isNewReconciler:!1};function mp(e,t){try{var n="",r=t;do n+=zme(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function p9(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function J8(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var d2e=typeof WeakMap=="function"?WeakMap:Map;function WG(e,t,n){n=el(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ww||(Ww=!0,a4=r),J8(e,t)},n}function HG(e,t,n){n=el(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){J8(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){J8(e,t),typeof r!="function"&&(Sc===null?Sc=new Set([this]):Sc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ML(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new d2e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=$2e.bind(null,e,t,n),t.then(e,e))}function OL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function NL(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=el(-1,1),t.tag=2,Ac(n,t,1))),n.lanes|=1),e)}var h2e=bl.ReactCurrentOwner,Fi=!1;function Kr(e,t,n,r){t.child=e===null?_G(t,null,n,r):pp(t,e.child,n,r)}function RL(e,t,n,r,i){n=n.render;var o=t.ref;return Yh(t,i),r=C7(e,t,n,r,o,i),n=k7(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ll(e,t,i)):(on&&n&&g7(t),t.flags|=1,Kr(e,t,r,i),t.child)}function FL(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!I7(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,qG(e,t,o,r,i)):(e=Gx(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:sy,n(a,r)&&e.ref===t.ref)return ll(e,t,i)}return t.flags|=1,e=$c(o,r),e.ref=t.ref,e.return=t,t.child=e}function qG(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(sy(o,r)&&e.ref===t.ref)if(Fi=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Fi=!0);else return t.lanes=e.lanes,ll(e,t,i)}return K8(e,t,n,r,i)}function GG(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Fh,ao),ao|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(Fh,ao),ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Vt(Fh,ao),ao|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Vt(Fh,ao),ao|=r;return Kr(e,t,i,n),t.child}function VG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function K8(e,t,n,r,i){var o=Li(n)?Dd:Ir.current;return o=dp(t,o),Yh(t,i),n=C7(e,t,n,r,o,i),r=k7(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ll(e,t,i)):(on&&r&&g7(t),t.flags|=1,Kr(e,t,n,i),t.child)}function DL(e,t,n,r,i){if(Li(n)){var o=!0;Rw(t)}else o=!1;if(Yh(t,i),t.stateNode===null)Wx(e,t),xG(t,n,r),X8(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=ra(l):(l=Li(n)?Dd:Ir.current,l=dp(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&$L(t,a,r,l),Kl=!1;var d=t.memoizedState;a.state=d,Iw(t,r,a,i),u=t.memoizedState,s!==r||d!==u||Pi.current||Kl?(typeof c=="function"&&(Y8(t,n,c,r),u=t.memoizedState),(s=Kl||EL(t,n,s,r,d,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,vG(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Na(t.type,s),a.props=l,f=t.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=ra(u):(u=Li(n)?Dd:Ir.current,u=dp(t,u));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==u)&&$L(t,a,r,u),Kl=!1,d=t.memoizedState,a.state=d,Iw(t,r,a,i);var g=t.memoizedState;s!==f||d!==g||Pi.current||Kl?(typeof p=="function"&&(Y8(t,n,p,r),g=t.memoizedState),(l=Kl||EL(t,n,l,r,d,g,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Q8(e,t,n,r,o,i)}function Q8(e,t,n,r,i,o){VG(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&xL(t,n,!1),ll(e,t,o);r=t.stateNode,h2e.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=pp(t,e.child,null,o),t.child=pp(t,null,s,o)):Kr(e,t,s,o),t.memoizedState=r.state,i&&xL(t,n,!0),t.child}function YG(e){var t=e.stateNode;t.pendingContext?bL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bL(e,t.context,!1),A7(e,t.containerInfo)}function PL(e,t,n,r,i){return hp(),y7(i),t.flags|=256,Kr(e,t,n,r),t.child}var Z8={dehydrated:null,treeContext:null,retryLane:0};function e4(e){return{baseLanes:e,cachePool:null,transitions:null}}function XG(e,t,n){var r=t.pendingProps,i=fn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vt(fn,i&1),e===null)return G8(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=KA(a,r,0,null),e=_d(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=e4(n),t.memoizedState=Z8,e):O7(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return p2e(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=$c(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=$c(s,o):(o=_d(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?e4(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Z8,r}return o=e.child,e=o.sibling,r=$c(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function O7(e,t){return t=KA({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kb(e,t,n,r){return r!==null&&y7(r),pp(t,e.child,null,n),e=O7(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function p2e(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=p9(Error(ve(422))),kb(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=KA({mode:"visible",children:r.children},i,0,null),o=_d(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&pp(t,e.child,null,a),t.child.memoizedState=e4(a),t.memoizedState=Z8,o);if(!(t.mode&1))return kb(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(ve(419)),r=p9(o,r,void 0),kb(e,t,a,r)}if(s=(a&e.childLanes)!==0,Fi||s){if(r=nr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ul(e,i),Ya(r,e,i,-1))}return L7(),r=p9(Error(ve(421))),kb(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=C2e.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,fo=_c(i.nextSibling),mo=t,on=!0,Pa=null,e!==null&&(Wo[Ho++]=Gu,Wo[Ho++]=Vu,Wo[Ho++]=Pd,Gu=e.id,Vu=e.overflow,Pd=t),t=O7(t,r.children),t.flags|=4096,t)}function LL(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),V8(e.return,t,n)}function g9(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function JG(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Kr(e,t,r.children,n),r=fn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&LL(e,n,t);else if(e.tag===19)LL(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vt(fn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&zw(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),g9(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&zw(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}g9(t,!0,n,null,o);break;case"together":g9(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ll(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Id|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,n=$c(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$c(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function g2e(e,t,n){switch(t.tag){case 3:YG(t),hp();break;case 5:AG(t);break;case 1:Li(t.type)&&Rw(t);break;case 4:A7(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Vt(Pw,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vt(fn,fn.current&1),t.flags|=128,null):n&t.child.childLanes?XG(e,t,n):(Vt(fn,fn.current&1),e=ll(e,t,n),e!==null?e.sibling:null);Vt(fn,fn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return JG(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(fn,fn.current),r)break;return null;case 22:case 23:return t.lanes=0,GG(e,t,n)}return ll(e,t,n)}var KG,t4,QG,ZG;KG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};t4=function(){};QG=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,hd(zs.current);var o=null;switch(n){case"input":i=A8(e,i),r=A8(e,r),o=[];break;case"select":i=hn({},i,{value:void 0}),r=hn({},r,{value:void 0}),o=[];break;case"textarea":i=$8(e,i),r=$8(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ow)}k8(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ey.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ey.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Jt("scroll",e),o||s===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};ZG=function(e,t,n,r){n!==r&&(t.flags|=4)};function y1(e,t){if(!on)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function m2e(e,t,n){var r=t.pendingProps;switch(m7(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(t),null;case 1:return Li(t.type)&&Nw(),Ar(t),null;case 3:return r=t.stateNode,gp(),Zt(Pi),Zt(Ir),E7(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($b(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pa!==null&&(l4(Pa),Pa=null))),t4(e,t),Ar(t),null;case 5:S7(t);var i=hd(dy.current);if(n=t.type,e!==null&&t.stateNode!=null)QG(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ve(166));return Ar(t),null}if(e=hd(zs.current),$b(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Os]=t,r[cy]=o,e=(t.mode&1)!==0,n){case"dialog":Jt("cancel",r),Jt("close",r);break;case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(i=0;i<Z1.length;i++)Jt(Z1[i],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"details":Jt("toggle",r);break;case"input":GP(r,o),Jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Jt("invalid",r);break;case"textarea":YP(r,o),Jt("invalid",r)}k8(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Eb(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Eb(r.textContent,s,e),i=["children",""+s]):ey.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Jt("scroll",r)}switch(n){case"input":yb(r),VP(r,o,!0);break;case"textarea":yb(r),XP(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ow)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$q(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Os]=t,e[cy]=r,KG(e,t,!1,!1),t.stateNode=e;e:{switch(a=T8(n,r),n){case"dialog":Jt("cancel",e),Jt("close",e),i=r;break;case"iframe":case"object":case"embed":Jt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Z1.length;i++)Jt(Z1[i],e);i=r;break;case"source":Jt("error",e),i=r;break;case"img":case"image":case"link":Jt("error",e),Jt("load",e),i=r;break;case"details":Jt("toggle",e),i=r;break;case"input":GP(e,r),i=A8(e,r),Jt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=hn({},r,{value:void 0}),Jt("invalid",e);break;case"textarea":YP(e,r),i=$8(e,r),Jt("invalid",e);break;default:i=r}k8(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?Tq(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cq(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ty(e,u):typeof u=="number"&&ty(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ey.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Jt("scroll",e):u!=null&&t7(e,o,u,a))}switch(n){case"input":yb(e),VP(e,r,!1);break;case"textarea":yb(e),XP(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Dc(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hh(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ow)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ar(t),null;case 6:if(e&&t.stateNode!=null)ZG(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ve(166));if(n=hd(dy.current),hd(zs.current),$b(t)){if(r=t.stateNode,n=t.memoizedProps,r[Os]=t,(o=r.nodeValue!==n)&&(e=mo,e!==null))switch(e.tag){case 3:Eb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Eb(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Os]=t,t.stateNode=r}return Ar(t),null;case 13:if(Zt(fn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(on&&fo!==null&&t.mode&1&&!(t.flags&128))mG(),hp(),t.flags|=98560,o=!1;else if(o=$b(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ve(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ve(317));o[Os]=t}else hp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ar(t),o=!1}else Pa!==null&&(l4(Pa),Pa=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||fn.current&1?Ln===0&&(Ln=3):L7())),t.updateQueue!==null&&(t.flags|=4),Ar(t),null);case 4:return gp(),t4(e,t),e===null&&uy(t.stateNode.containerInfo),Ar(t),null;case 10:return x7(t.type._context),Ar(t),null;case 17:return Li(t.type)&&Nw(),Ar(t),null;case 19:if(Zt(fn),o=t.memoizedState,o===null)return Ar(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)y1(o,!1);else{if(Ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zw(e),a!==null){for(t.flags|=128,y1(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(fn,fn.current&1|2),t.child}e=e.sibling}o.tail!==null&&En()>yp&&(t.flags|=128,r=!0,y1(o,!1),t.lanes=4194304)}else{if(!r)if(e=zw(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),y1(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!on)return Ar(t),null}else 2*En()-o.renderingStartTime>yp&&n!==1073741824&&(t.flags|=128,r=!0,y1(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=En(),t.sibling=null,n=fn.current,Vt(fn,r?n&1|2:n&1),t):(Ar(t),null);case 22:case 23:return P7(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ao&1073741824&&(Ar(t),t.subtreeFlags&6&&(t.flags|=8192)):Ar(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function y2e(e,t){switch(m7(t),t.tag){case 1:return Li(t.type)&&Nw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gp(),Zt(Pi),Zt(Ir),E7(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return S7(t),null;case 13:if(Zt(fn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));hp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zt(fn),null;case 4:return gp(),null;case 10:return x7(t.type._context),null;case 22:case 23:return P7(),null;case 24:return null;default:return null}}var Tb=!1,Tr=!1,v2e=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Rh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yn(e,t,r)}else n.current=null}function n4(e,t,n){try{n()}catch(r){yn(e,t,r)}}var IL=!1;function b2e(e,t){if(z8=kw,e=rG(),p7(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=a),d===o&&++c===r&&(u=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(B8={focusedElem:e,selectionRange:n},kw=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?y:Na(t.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(A){yn(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return g=IL,IL=!1,g}function Rm(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&n4(t,n,o)}i=i.next}while(i!==r)}}function XA(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function r4(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eV(e){var t=e.alternate;t!==null&&(e.alternate=null,eV(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Os],delete t[cy],delete t[W8],delete t[t2e],delete t[n2e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tV(e){return e.tag===5||e.tag===3||e.tag===4}function zL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tV(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function i4(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ow));else if(r!==4&&(e=e.child,e!==null))for(i4(e,t,n),e=e.sibling;e!==null;)i4(e,t,n),e=e.sibling}function o4(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(o4(e,t,n),e=e.sibling;e!==null;)o4(e,t,n),e=e.sibling}var lr=null,Ra=!1;function Hl(e,t,n){for(n=n.child;n!==null;)nV(e,t,n),n=n.sibling}function nV(e,t,n){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(jA,n)}catch{}switch(n.tag){case 5:Tr||Rh(n,t);case 6:var r=lr,i=Ra;lr=null,Hl(e,t,n),lr=r,Ra=i,lr!==null&&(Ra?(e=lr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lr.removeChild(n.stateNode));break;case 18:lr!==null&&(Ra?(e=lr,n=n.stateNode,e.nodeType===8?u9(e.parentNode,n):e.nodeType===1&&u9(e,n),oy(e)):u9(lr,n.stateNode));break;case 4:r=lr,i=Ra,lr=n.stateNode.containerInfo,Ra=!0,Hl(e,t,n),lr=r,Ra=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&n4(n,t,a),i=i.next}while(i!==r)}Hl(e,t,n);break;case 1:if(!Tr&&(Rh(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){yn(n,t,s)}Hl(e,t,n);break;case 21:Hl(e,t,n);break;case 22:n.mode&1?(Tr=(r=Tr)||n.memoizedState!==null,Hl(e,t,n),Tr=r):Hl(e,t,n);break;default:Hl(e,t,n)}}function BL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new v2e),t.forEach(function(r){var i=k2e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ea(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:lr=s.stateNode,Ra=!1;break e;case 3:lr=s.stateNode.containerInfo,Ra=!0;break e;case 4:lr=s.stateNode.containerInfo,Ra=!0;break e}s=s.return}if(lr===null)throw Error(ve(160));nV(o,a,i),lr=null,Ra=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){yn(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rV(t,e),t=t.sibling}function rV(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ea(t,e),xs(e),r&4){try{Rm(3,e,e.return),XA(3,e)}catch(y){yn(e,e.return,y)}try{Rm(5,e,e.return)}catch(y){yn(e,e.return,y)}}break;case 1:Ea(t,e),xs(e),r&512&&n!==null&&Rh(n,n.return);break;case 5:if(Ea(t,e),xs(e),r&512&&n!==null&&Rh(n,n.return),e.flags&32){var i=e.stateNode;try{ty(i,"")}catch(y){yn(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Sq(i,o),T8(s,a);var l=T8(s,o);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?Tq(i,f):c==="dangerouslySetInnerHTML"?Cq(i,f):c==="children"?ty(i,f):t7(i,c,f,l)}switch(s){case"input":S8(i,o);break;case"textarea":Eq(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Hh(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Hh(i,!!o.multiple,o.defaultValue,!0):Hh(i,!!o.multiple,o.multiple?[]:"",!1))}i[cy]=o}catch(y){yn(e,e.return,y)}}break;case 6:if(Ea(t,e),xs(e),r&4){if(e.stateNode===null)throw Error(ve(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){yn(e,e.return,y)}}break;case 3:if(Ea(t,e),xs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oy(t.containerInfo)}catch(y){yn(e,e.return,y)}break;case 4:Ea(t,e),xs(e);break;case 13:Ea(t,e),xs(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(F7=En())),r&4&&BL(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Tr=(l=Tr)||c,Ea(t,e),Tr=l):Ea(t,e),xs(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Oe=e,c=e.child;c!==null;){for(f=Oe=c;Oe!==null;){switch(d=Oe,p=d.child,d.tag){case 0:case 11:case 14:case 15:Rm(4,d,d.return);break;case 1:Rh(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){yn(r,n,y)}}break;case 5:Rh(d,d.return);break;case 22:if(d.memoizedState!==null){UL(f);continue}}p!==null?(p.return=d,Oe=p):UL(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=kq("display",a))}catch(y){yn(e,e.return,y)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){yn(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ea(t,e),xs(e),r&4&&BL(e);break;case 21:break;default:Ea(t,e),xs(e)}}function xs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tV(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ty(i,""),r.flags&=-33);var o=zL(e);o4(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=zL(e);i4(e,s,a);break;default:throw Error(ve(161))}}catch(u){yn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function x2e(e,t,n){Oe=e,iV(e)}function iV(e,t,n){for(var r=(e.mode&1)!==0;Oe!==null;){var i=Oe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Tb;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Tr;s=Tb;var l=Tr;if(Tb=a,(Tr=u)&&!l)for(Oe=i;Oe!==null;)a=Oe,u=a.child,a.tag===22&&a.memoizedState!==null?WL(i):u!==null?(u.return=a,Oe=u):WL(i);for(;o!==null;)Oe=o,iV(o),o=o.sibling;Oe=i,Tb=s,Tr=l}jL(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Oe=o):jL(e)}}function jL(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tr||XA(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&SL(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}SL(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&oy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Tr||t.flags&512&&r4(t)}catch(d){yn(t,t.return,d)}}if(t===e){Oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function UL(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function WL(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{XA(4,t)}catch(u){yn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){yn(t,i,u)}}var o=t.return;try{r4(t)}catch(u){yn(t,o,u)}break;case 5:var a=t.return;try{r4(t)}catch(u){yn(t,a,u)}}}catch(u){yn(t,t.return,u)}if(t===e){Oe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Oe=s;break}Oe=t.return}}var w2e=Math.ceil,Uw=bl.ReactCurrentDispatcher,N7=bl.ReactCurrentOwner,Zo=bl.ReactCurrentBatchConfig,bt=0,nr=null,Tn=null,pr=0,ao=0,Fh=ff(0),Ln=0,my=null,Id=0,JA=0,R7=0,Fm=null,ki=null,F7=0,yp=1/0,Lu=null,Ww=!1,a4=null,Sc=null,Mb=!1,lc=null,Hw=0,Dm=0,s4=null,Hx=-1,qx=0;function ai(){return bt&6?En():Hx!==-1?Hx:Hx=En()}function Ec(e){return e.mode&1?bt&2&&pr!==0?pr&-pr:i2e.transition!==null?(qx===0&&(qx=jq()),qx):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:Yq(e.type)),e):1}function Ya(e,t,n,r){if(50<Dm)throw Dm=0,s4=null,Error(ve(185));c2(e,n,r),(!(bt&2)||e!==nr)&&(e===nr&&(!(bt&2)&&(JA|=n),Ln===4&&oc(e,pr)),Ii(e,r),n===1&&bt===0&&!(t.mode&1)&&(yp=En()+500,GA&&df()))}function Ii(e,t){var n=e.callbackNode;iye(e,t);var r=Cw(e,e===nr?pr:0);if(r===0)n!==null&&QP(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&QP(n),t===1)e.tag===0?r2e(HL.bind(null,e)):hG(HL.bind(null,e)),Zye(function(){!(bt&6)&&df()}),n=null;else{switch(Uq(r)){case 1:n=a7;break;case 4:n=zq;break;case 16:n=$w;break;case 536870912:n=Bq;break;default:n=$w}n=dV(n,oV.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oV(e,t){if(Hx=-1,qx=0,bt&6)throw Error(ve(327));var n=e.callbackNode;if(Xh()&&e.callbackNode!==n)return null;var r=Cw(e,e===nr?pr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qw(e,r);else{t=r;var i=bt;bt|=2;var o=sV();(nr!==e||pr!==t)&&(Lu=null,yp=En()+500,wd(e,t));do try{S2e();break}catch(s){aV(e,s)}while(1);b7(),Uw.current=o,bt=i,Tn!==null?t=0:(nr=null,pr=0,t=Ln)}if(t!==0){if(t===2&&(i=F8(e),i!==0&&(r=i,t=u4(e,i))),t===1)throw n=my,wd(e,0),oc(e,r),Ii(e,En()),n;if(t===6)oc(e,r);else{if(i=e.current.alternate,!(r&30)&&!_2e(i)&&(t=qw(e,r),t===2&&(o=F8(e),o!==0&&(r=o,t=u4(e,o))),t===1))throw n=my,wd(e,0),oc(e,r),Ii(e,En()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ve(345));case 2:Zf(e,ki,Lu);break;case 3:if(oc(e,r),(r&130023424)===r&&(t=F7+500-En(),10<t)){if(Cw(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ai(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=U8(Zf.bind(null,e,ki,Lu),t);break}Zf(e,ki,Lu);break;case 4:if(oc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Va(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=En()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w2e(r/1960))-r,10<r){e.timeoutHandle=U8(Zf.bind(null,e,ki,Lu),r);break}Zf(e,ki,Lu);break;case 5:Zf(e,ki,Lu);break;default:throw Error(ve(329))}}}return Ii(e,En()),e.callbackNode===n?oV.bind(null,e):null}function u4(e,t){var n=Fm;return e.current.memoizedState.isDehydrated&&(wd(e,t).flags|=256),e=qw(e,t),e!==2&&(t=ki,ki=n,t!==null&&l4(t)),e}function l4(e){ki===null?ki=e:ki.push.apply(ki,e)}function _2e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Za(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function oc(e,t){for(t&=~R7,t&=~JA,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Va(t),r=1<<n;e[n]=-1,t&=~r}}function HL(e){if(bt&6)throw Error(ve(327));Xh();var t=Cw(e,0);if(!(t&1))return Ii(e,En()),null;var n=qw(e,t);if(e.tag!==0&&n===2){var r=F8(e);r!==0&&(t=r,n=u4(e,r))}if(n===1)throw n=my,wd(e,0),oc(e,t),Ii(e,En()),n;if(n===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zf(e,ki,Lu),Ii(e,En()),null}function D7(e,t){var n=bt;bt|=1;try{return e(t)}finally{bt=n,bt===0&&(yp=En()+500,GA&&df())}}function zd(e){lc!==null&&lc.tag===0&&!(bt&6)&&Xh();var t=bt;bt|=1;var n=Zo.transition,r=Dt;try{if(Zo.transition=null,Dt=1,e)return e()}finally{Dt=r,Zo.transition=n,bt=t,!(bt&6)&&df()}}function P7(){ao=Fh.current,Zt(Fh)}function wd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qye(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(m7(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nw();break;case 3:gp(),Zt(Pi),Zt(Ir),E7();break;case 5:S7(r);break;case 4:gp();break;case 13:Zt(fn);break;case 19:Zt(fn);break;case 10:x7(r.type._context);break;case 22:case 23:P7()}n=n.return}if(nr=e,Tn=e=$c(e.current,null),pr=ao=t,Ln=0,my=null,R7=JA=Id=0,ki=Fm=null,dd!==null){for(t=0;t<dd.length;t++)if(n=dd[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}dd=null}return e}function aV(e,t){do{var n=Tn;try{if(b7(),jx.current=jw,Bw){for(var r=dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bw=!1}if(Ld=0,Vn=Fn=dn=null,Nm=!1,hy=0,N7.current=null,n===null||n.return===null){Ln=1,my=t,Tn=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=pr,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=OL(a);if(p!==null){p.flags&=-257,NL(p,a,s,o,t),p.mode&1&&ML(o,l,t),t=p,u=l;var g=t.updateQueue;if(g===null){var y=new Set;y.add(u),t.updateQueue=y}else g.add(u);break e}else{if(!(t&1)){ML(o,l,t),L7();break e}u=Error(ve(426))}}else if(on&&s.mode&1){var v=OL(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),NL(v,a,s,o,t),y7(mp(u,s));break e}}o=u=mp(u,s),Ln!==4&&(Ln=2),Fm===null?Fm=[o]:Fm.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=WG(o,u,t);AL(o,b);break e;case 1:s=u;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Sc===null||!Sc.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var A=HG(o,s,t);AL(o,A);break e}}o=o.return}while(o!==null)}lV(n)}catch(E){t=E,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(1)}function sV(){var e=Uw.current;return Uw.current=jw,e===null?jw:e}function L7(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),nr===null||!(Id&268435455)&&!(JA&268435455)||oc(nr,pr)}function qw(e,t){var n=bt;bt|=2;var r=sV();(nr!==e||pr!==t)&&(Lu=null,wd(e,t));do try{A2e();break}catch(i){aV(e,i)}while(1);if(b7(),bt=n,Uw.current=r,Tn!==null)throw Error(ve(261));return nr=null,pr=0,Ln}function A2e(){for(;Tn!==null;)uV(Tn)}function S2e(){for(;Tn!==null&&!Xme();)uV(Tn)}function uV(e){var t=fV(e.alternate,e,ao);e.memoizedProps=e.pendingProps,t===null?lV(e):Tn=t,N7.current=null}function lV(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=y2e(n,t),n!==null){n.flags&=32767,Tn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ln=6,Tn=null;return}}else if(n=m2e(n,t,ao),n!==null){Tn=n;return}if(t=t.sibling,t!==null){Tn=t;return}Tn=t=e}while(t!==null);Ln===0&&(Ln=5)}function Zf(e,t,n){var r=Dt,i=Zo.transition;try{Zo.transition=null,Dt=1,E2e(e,t,n,r)}finally{Zo.transition=i,Dt=r}return null}function E2e(e,t,n,r){do Xh();while(lc!==null);if(bt&6)throw Error(ve(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(oye(e,o),e===nr&&(Tn=nr=null,pr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mb||(Mb=!0,dV($w,function(){return Xh(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Zo.transition,Zo.transition=null;var a=Dt;Dt=1;var s=bt;bt|=4,N7.current=null,b2e(e,n),rV(n,e),qye(B8),kw=!!z8,B8=z8=null,e.current=n,x2e(n),Jme(),bt=s,Dt=a,Zo.transition=o}else e.current=n;if(Mb&&(Mb=!1,lc=e,Hw=i),o=e.pendingLanes,o===0&&(Sc=null),Zme(n.stateNode),Ii(e,En()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ww)throw Ww=!1,e=a4,a4=null,e;return Hw&1&&e.tag!==0&&Xh(),o=e.pendingLanes,o&1?e===s4?Dm++:(Dm=0,s4=e):Dm=0,df(),null}function Xh(){if(lc!==null){var e=Uq(Hw),t=Zo.transition,n=Dt;try{if(Zo.transition=null,Dt=16>e?16:e,lc===null)var r=!1;else{if(e=lc,lc=null,Hw=0,bt&6)throw Error(ve(331));var i=bt;for(bt|=4,Oe=e.current;Oe!==null;){var o=Oe,a=o.child;if(Oe.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Oe=l;Oe!==null;){var c=Oe;switch(c.tag){case 0:case 11:case 15:Rm(8,c,o)}var f=c.child;if(f!==null)f.return=c,Oe=f;else for(;Oe!==null;){c=Oe;var d=c.sibling,p=c.return;if(eV(c),c===l){Oe=null;break}if(d!==null){d.return=p,Oe=d;break}Oe=p}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Oe=a;else e:for(;Oe!==null;){if(o=Oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Rm(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Oe=b;break e}Oe=o.return}}var x=e.current;for(Oe=x;Oe!==null;){a=Oe;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Oe=_;else e:for(a=x;Oe!==null;){if(s=Oe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:XA(9,s)}}catch(E){yn(s,s.return,E)}if(s===a){Oe=null;break e}var A=s.sibling;if(A!==null){A.return=s.return,Oe=A;break e}Oe=s.return}}if(bt=i,df(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(jA,e)}catch{}r=!0}return r}finally{Dt=n,Zo.transition=t}}return!1}function qL(e,t,n){t=mp(n,t),t=WG(e,t,1),e=Ac(e,t,1),t=ai(),e!==null&&(c2(e,1,t),Ii(e,t))}function yn(e,t,n){if(e.tag===3)qL(e,e,n);else for(;t!==null;){if(t.tag===3){qL(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sc===null||!Sc.has(r))){e=mp(n,e),e=HG(t,e,1),t=Ac(t,e,1),e=ai(),t!==null&&(c2(t,1,e),Ii(t,e));break}}t=t.return}}function $2e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ai(),e.pingedLanes|=e.suspendedLanes&n,nr===e&&(pr&n)===n&&(Ln===4||Ln===3&&(pr&130023424)===pr&&500>En()-F7?wd(e,0):R7|=n),Ii(e,t)}function cV(e,t){t===0&&(e.mode&1?(t=xb,xb<<=1,!(xb&130023424)&&(xb=4194304)):t=1);var n=ai();e=ul(e,t),e!==null&&(c2(e,t,n),Ii(e,n))}function C2e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cV(e,n)}function k2e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(t),cV(e,n)}var fV;fV=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pi.current)Fi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fi=!1,g2e(e,t,n);Fi=!!(e.flags&131072)}else Fi=!1,on&&t.flags&1048576&&pG(t,Dw,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wx(e,t),e=t.pendingProps;var i=dp(t,Ir.current);Yh(t,n),i=C7(null,t,r,e,i,n);var o=k7();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Rw(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_7(t),i.updater=VA,t.stateNode=i,i._reactInternals=t,X8(t,r,e,n),t=Q8(null,t,r,!0,o,n)):(t.tag=0,on&&o&&g7(t),Kr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wx(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=M2e(r),e=Na(r,e),i){case 0:t=K8(null,t,r,e,n);break e;case 1:t=DL(null,t,r,e,n);break e;case 11:t=RL(null,t,r,e,n);break e;case 14:t=FL(null,t,r,Na(r.type,e),n);break e}throw Error(ve(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),K8(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),DL(e,t,r,i,n);case 3:e:{if(YG(t),e===null)throw Error(ve(387));r=t.pendingProps,o=t.memoizedState,i=o.element,vG(e,t),Iw(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=mp(Error(ve(423)),t),t=PL(e,t,r,n,i);break e}else if(r!==i){i=mp(Error(ve(424)),t),t=PL(e,t,r,n,i);break e}else for(fo=_c(t.stateNode.containerInfo.firstChild),mo=t,on=!0,Pa=null,n=_G(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hp(),r===i){t=ll(e,t,n);break e}Kr(e,t,r,n)}t=t.child}return t;case 5:return AG(t),e===null&&G8(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,j8(r,i)?a=null:o!==null&&j8(r,o)&&(t.flags|=32),VG(e,t),Kr(e,t,a,n),t.child;case 6:return e===null&&G8(t),null;case 13:return XG(e,t,n);case 4:return A7(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pp(t,null,r,n):Kr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),RL(e,t,r,i,n);case 7:return Kr(e,t,t.pendingProps,n),t.child;case 8:return Kr(e,t,t.pendingProps.children,n),t.child;case 12:return Kr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Vt(Pw,r._currentValue),r._currentValue=a,o!==null)if(Za(o.value,a)){if(o.children===i.children&&!Pi.current){t=ll(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=el(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),V8(o.return,n,t),s.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ve(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),V8(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Kr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yh(t,n),i=ra(i),r=r(i),t.flags|=1,Kr(e,t,r,n),t.child;case 14:return r=t.type,i=Na(r,t.pendingProps),i=Na(r.type,i),FL(e,t,r,i,n);case 15:return qG(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),Wx(e,t),t.tag=1,Li(r)?(e=!0,Rw(t)):e=!1,Yh(t,n),xG(t,r,i),X8(t,r,i,n),Q8(null,t,r,!0,e,n);case 19:return JG(e,t,n);case 22:return GG(e,t,n)}throw Error(ve(156,t.tag))};function dV(e,t){return Iq(e,t)}function T2e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(e,t,n,r){return new T2e(e,t,n,r)}function I7(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M2e(e){if(typeof e=="function")return I7(e)?1:0;if(e!=null){if(e=e.$$typeof,e===r7)return 11;if(e===i7)return 14}return 2}function $c(e,t){var n=e.alternate;return n===null?(n=Vo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gx(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")I7(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Sh:return _d(n.children,i,o,t);case n7:a=8,i|=8;break;case b8:return e=Vo(12,n,t,i|2),e.elementType=b8,e.lanes=o,e;case x8:return e=Vo(13,n,t,i),e.elementType=x8,e.lanes=o,e;case w8:return e=Vo(19,n,t,i),e.elementType=w8,e.lanes=o,e;case wq:return KA(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bq:a=10;break e;case xq:a=9;break e;case r7:a=11;break e;case i7:a=14;break e;case Jl:a=16,r=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=Vo(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function _d(e,t,n,r){return e=Vo(7,e,r,t),e.lanes=n,e}function KA(e,t,n,r){return e=Vo(22,e,r,t),e.elementType=wq,e.lanes=n,e.stateNode={isHidden:!1},e}function m9(e,t,n){return e=Vo(6,e,null,t),e.lanes=n,e}function y9(e,t,n){return t=Vo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function O2e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=KE(0),this.expirationTimes=KE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=KE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function z7(e,t,n,r,i,o,a,s,u){return e=new O2e(e,t,n,s,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Vo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_7(o),e}function N2e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ah,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hV(e){if(!e)return Pc;e=e._reactInternals;e:{if(y0(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var n=e.type;if(Li(n))return dG(e,n,t)}return t}function pV(e,t,n,r,i,o,a,s,u){return e=z7(n,r,!0,e,i,o,a,s,u),e.context=hV(null),n=e.current,r=ai(),i=Ec(n),o=el(r,i),o.callback=t??null,Ac(n,o,i),e.current.lanes=i,c2(e,i,r),Ii(e,r),e}function QA(e,t,n,r){var i=t.current,o=ai(),a=Ec(i);return n=hV(n),t.context===null?t.context=n:t.pendingContext=n,t=el(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ac(i,t,a),e!==null&&(Ya(e,i,a,o),Bx(e,i,a)),a}function Gw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function GL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function B7(e,t){GL(e,t),(e=e.alternate)&&GL(e,t)}function R2e(){return null}var gV=typeof reportError=="function"?reportError:function(e){console.error(e)};function j7(e){this._internalRoot=e}ZA.prototype.render=j7.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));QA(e,t,null,null)};ZA.prototype.unmount=j7.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zd(function(){QA(null,e,null,null)}),t[sl]=null}};function ZA(e){this._internalRoot=e}ZA.prototype.unstable_scheduleHydration=function(e){if(e){var t=qq();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ic.length&&t!==0&&t<ic[n].priority;n++);ic.splice(n,0,e),n===0&&Vq(e)}};function U7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function e3(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function VL(){}function F2e(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Gw(a);o.call(l)}}var a=pV(t,r,e,0,null,!1,!1,"",VL);return e._reactRootContainer=a,e[sl]=a.current,uy(e.nodeType===8?e.parentNode:e),zd(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Gw(u);s.call(l)}}var u=z7(e,0,!1,null,null,!1,!1,"",VL);return e._reactRootContainer=u,e[sl]=u.current,uy(e.nodeType===8?e.parentNode:e),zd(function(){QA(t,u,n,r)}),u}function t3(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=Gw(a);s.call(u)}}QA(t,a,e,i)}else a=F2e(n,t,e,i,r);return Gw(a)}Wq=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Q1(t.pendingLanes);n!==0&&(s7(t,n|1),Ii(t,En()),!(bt&6)&&(yp=En()+500,df()))}break;case 13:zd(function(){var r=ul(e,1);if(r!==null){var i=ai();Ya(r,e,1,i)}}),B7(e,1)}};u7=function(e){if(e.tag===13){var t=ul(e,134217728);if(t!==null){var n=ai();Ya(t,e,134217728,n)}B7(e,134217728)}};Hq=function(e){if(e.tag===13){var t=Ec(e),n=ul(e,t);if(n!==null){var r=ai();Ya(n,e,t,r)}B7(e,t)}};qq=function(){return Dt};Gq=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}};O8=function(e,t,n){switch(t){case"input":if(S8(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qA(r);if(!i)throw Error(ve(90));Aq(r),S8(r,i)}}}break;case"textarea":Eq(e,n);break;case"select":t=n.value,t!=null&&Hh(e,!!n.multiple,t,!1)}};Nq=D7;Rq=zd;var D2e={usingClientEntryPoint:!1,Events:[d2,kh,qA,Mq,Oq,D7]},v1={findFiberByHostInstance:fd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},P2e={bundleType:v1.bundleType,version:v1.version,rendererPackageName:v1.rendererPackageName,rendererConfig:v1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pq(e),e===null?null:e.stateNode},findFiberByHostInstance:v1.findFiberByHostInstance||R2e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ob=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ob.isDisabled&&Ob.supportsFiber)try{jA=Ob.inject(P2e),Is=Ob}catch{}}Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D2e;Co.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U7(t))throw Error(ve(200));return N2e(e,t,null,n)};Co.createRoot=function(e,t){if(!U7(e))throw Error(ve(299));var n=!1,r="",i=gV;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=z7(e,1,!1,null,null,n,!1,r,i),e[sl]=t.current,uy(e.nodeType===8?e.parentNode:e),new j7(t)};Co.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=Pq(t),e=e===null?null:e.stateNode,e};Co.flushSync=function(e){return zd(e)};Co.hydrate=function(e,t,n){if(!e3(t))throw Error(ve(200));return t3(null,e,t,!0,n)};Co.hydrateRoot=function(e,t,n){if(!U7(e))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=gV;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=pV(t,null,e,1,n??null,i,!1,o,a),e[sl]=t.current,uy(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ZA(t)};Co.render=function(e,t,n){if(!e3(t))throw Error(ve(200));return t3(null,e,t,!1,n)};Co.unmountComponentAtNode=function(e){if(!e3(e))throw Error(ve(40));return e._reactRootContainer?(zd(function(){t3(null,null,e,!1,function(){e._reactRootContainer=null,e[sl]=null})}),!0):!1};Co.unstable_batchedUpdates=D7;Co.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!e3(n))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return t3(e,t,n,!1,r)};Co.version="18.2.0-next-9e3b772b8-20220608";function mV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mV)}catch(e){console.error(e)}}mV(),pq.exports=Co;var yV=pq.exports;const em=cg(yV);var YL=yV;y8.createRoot=YL.createRoot,y8.hydrateRoot=YL.hydrateRoot;var vV={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=typeof o;if(a==="string"||a==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var s=n.apply(null,o);s&&r.push(s)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var u in o)t.call(o,u)&&o[u]&&r.push(u)}}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(vV);var L2e=vV.exports;const ut=cg(L2e);function c4(){return c4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c4.apply(this,arguments)}function bV(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function XL(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function I2e(e){var t=z2e(e,"string");return typeof t=="symbol"?t:String(t)}function z2e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B2e(e,t,n){var r=Y.useRef(e!==void 0),i=Y.useState(t),o=i[0],a=i[1],s=e!==void 0,u=r.current;return r.current=s,!s&&u&&o!==t&&a(t),[s?e:o,Y.useCallback(function(l){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];n&&n.apply(void 0,[l].concat(f)),a(l)},[n])]}function W7(e,t){return Object.keys(t).reduce(function(n,r){var i,o=n,a=o[XL(r)],s=o[r],u=bV(o,[XL(r),r].map(I2e)),l=t[r],c=B2e(s,a,e[l]),f=c[0],d=c[1];return c4({},u,(i={},i[r]=f,i[l]=d,i))},e)}function f4(e,t){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f4(e,t)}function j2e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f4(e,t)}const U2e=["xxl","xl","lg","md","sm","xs"],W2e="xs",n3=Y.createContext({prefixes:{},breakpoints:U2e,minBreakpoint:W2e});function Et(e,t){const{prefixes:n}=Y.useContext(n3);return e||n[t]||t}function xV(){const{breakpoints:e}=Y.useContext(n3);return e}function wV(){const{minBreakpoint:e}=Y.useContext(n3);return e}function H2e(){const{dir:e}=Y.useContext(n3);return e==="rtl"}function _V(e){return e&&e.ownerDocument||document}function q2e(e){var t=_V(e);return t&&t.defaultView||window}function G2e(e,t){return q2e(e).getComputedStyle(e,t)}var V2e=/([A-Z])/g;function Y2e(e){return e.replace(V2e,"-$1").toLowerCase()}var X2e=/^ms-/;function Nb(e){return Y2e(e).replace(X2e,"-ms-")}var J2e=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function K2e(e){return!!(e&&J2e.test(e))}function AV(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(Nb(t))||G2e(e).getPropertyValue(Nb(t));Object.keys(t).forEach(function(i){var o=t[i];!o&&o!==0?e.style.removeProperty(Nb(i)):K2e(i)?r+=i+"("+o+") ":n+=Nb(i)+": "+o+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var SV={exports:{}},Q2e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z2e=Q2e,eve=Z2e;function EV(){}function $V(){}$V.resetWarningCache=EV;var tve=function(){function e(r,i,o,a,s,u){if(u!==eve){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$V,resetWarningCache:EV};return n.PropTypes=n,n};SV.exports=tve();var nve=SV.exports;const uo=cg(nve),JL={disabled:!1},CV=Ri.createContext(null);var rve=function(t){return t.scrollTop},tm="unmounted",ed="exited",Ql="entering",id="entered",d4="exiting",xl=function(e){j2e(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var a=i,s=a&&!a.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?s?(u=ed,o.appearStatus=Ql):u=id:r.unmountOnExit||r.mountOnEnter?u=tm:u=ed,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===tm?{status:ed}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Ql&&a!==id&&(o=Ql):(a===Ql||a===id)&&(o=d4)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Ql){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:em.findDOMNode(this);a&&rve(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ed&&this.setState({status:tm})},n.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,u=this.props.nodeRef?[s]:[em.findDOMNode(this),s],l=u[0],c=u[1],f=this.getTimeouts(),d=s?f.appear:f.enter;if(!i&&!a||JL.disabled){this.safeSetState({status:id},function(){o.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Ql},function(){o.props.onEntering(l,c),o.onTransitionEnd(d,function(){o.safeSetState({status:id},function(){o.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:em.findDOMNode(this);if(!o||JL.disabled){this.safeSetState({status:ed},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:d4},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:ed},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:em.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===tm)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=bV(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ri.createElement(CV.Provider,{value:null},typeof a=="function"?a(i,s):Ri.cloneElement(Ri.Children.only(a),s))},t}(Ri.Component);xl.contextType=CV;xl.propTypes={};function rh(){}xl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rh,onEntering:rh,onEntered:rh,onExit:rh,onExiting:rh,onExited:rh};xl.UNMOUNTED=tm;xl.EXITED=ed;xl.ENTERING=Ql;xl.ENTERED=id;xl.EXITING=d4;const ive=xl,kV=!!(typeof window<"u"&&window.document&&window.document.createElement);var h4=!1,p4=!1;try{var v9={get passive(){return h4=!0},get once(){return p4=h4=!0}};kV&&(window.addEventListener("test",v9,v9),window.removeEventListener("test",v9,!0))}catch{}function TV(e,t,n,r){if(r&&typeof r!="boolean"&&!p4){var i=r.once,o=r.capture,a=n;!p4&&i&&(a=n.__once||function s(u){this.removeEventListener(t,s,o),n.call(this,u)},n.__once=a),e.addEventListener(t,a,h4?r:o)}e.addEventListener(t,n,r)}function ove(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function Dh(e,t,n,r){return TV(e,t,n,r),function(){ove(e,t,n,r)}}function ave(e,t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function sve(e){var t=AV(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function uve(e,t,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||ave(e,"transitionend",!0)},t+n),o=Dh(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),o()}}function lve(e,t,n,r){n==null&&(n=sve(e)||0);var i=uve(e,n,r),o=Dh(e,"transitionend",t);return function(){i(),o()}}function KL(e,t){const n=AV(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function cve(e,t){const n=KL(e,"transitionDuration"),r=KL(e,"transitionDelay"),i=lve(e,o=>{o.target===e&&(i(),t(o))},n+r)}function fve(e){e.offsetHeight}const QL=e=>!e||typeof e=="function"?e:t=>{e.current=t};function dve(e,t){const n=QL(e),r=QL(t);return i=>{n&&n(i),r&&r(i)}}function p2(e,t){return Y.useMemo(()=>dve(e,t),[e,t])}function hve(e){return e&&"setState"in e?em.findDOMNode(e):e??null}const pve=Ri.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:o,addEndListener:a,children:s,childRef:u,...l},c)=>{const f=Y.useRef(null),d=p2(f,u),p=$=>{d(hve($))},g=$=>S=>{$&&f.current&&$(f.current,S)},y=Y.useCallback(g(e),[e]),v=Y.useCallback(g(t),[t]),b=Y.useCallback(g(n),[n]),x=Y.useCallback(g(r),[r]),_=Y.useCallback(g(i),[i]),A=Y.useCallback(g(o),[o]),E=Y.useCallback(g(a),[a]);return J.jsx(ive,{ref:c,...l,onEnter:y,onEntered:b,onEntering:v,onExit:x,onExited:A,onExiting:_,addEndListener:E,nodeRef:f,children:typeof s=="function"?($,S)=>s($,{...S,ref:p}):Ri.cloneElement(s,{ref:p})})}),gve=pve;function mve(e){const t=Y.useRef(e);return Y.useEffect(()=>{t.current=e},[e]),t}function ea(e){const t=mve(e);return Y.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const MV=e=>Y.forwardRef((t,n)=>J.jsx("div",{...t,ref:n,className:ut(t.className,e)}));function yve(){return Y.useState(null)}function vve(e,t,n,r=!1){const i=ea(n);Y.useEffect(()=>{const o=typeof e=="function"?e():e;return o.addEventListener(t,i,r),()=>o.removeEventListener(t,i,r)},[e])}function bve(){const e=Y.useRef(!0),t=Y.useRef(()=>e.current);return Y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function xve(e){const t=Y.useRef(null);return Y.useEffect(()=>{t.current=e}),t.current}const wve=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",_ve=typeof document<"u",Ave=_ve||wve?Y.useLayoutEffect:Y.useEffect,Sve=["as","disabled"];function Eve(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function $ve(e){return!e||e.trim()==="#"}function H7({tagName:e,disabled:t,href:n,target:r,rel:i,role:o,onClick:a,tabIndex:s=0,type:u}){e||(n!=null||r!=null||i!=null?e="a":e="button");const l={tagName:e};if(e==="button")return[{type:u||"button",disabled:t},l];const c=d=>{if((t||e==="a"&&$ve(n))&&d.preventDefault(),t){d.stopPropagation();return}a==null||a(d)},f=d=>{d.key===" "&&(d.preventDefault(),c(d))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?i:void 0,onClick:c,onKeyDown:f},l]}const q7=Y.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=Eve(e,Sve);const[o,{tagName:a}]=H7(Object.assign({tagName:n,disabled:r},i));return J.jsx(a,Object.assign({},i,o,{ref:t}))});q7.displayName="Button";const Cve=["onKeyDown"];function kve(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Tve(e){return!e||e.trim()==="#"}const OV=Y.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=kve(e,Cve);const[i]=H7(Object.assign({tagName:"a"},r)),o=ea(a=>{i.onKeyDown(a),n==null||n(a)});return Tve(r.href)||r.role==="button"?J.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:o})):J.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});OV.displayName="Anchor";const NV=OV,Mve={[Ql]:"show",[id]:"show"},RV=Y.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...i},o)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},s=Y.useCallback((u,l)=>{fve(u),r==null||r(u,l)},[r]);return J.jsx(gve,{ref:o,addEndListener:cve,...a,onEnter:s,childRef:t.ref,children:(u,l)=>Y.cloneElement(t,{...l,className:ut("fade",e,t.props.className,Mve[u],n[u])})})});RV.displayName="Fade";const FV=RV,Ove={"aria-label":uo.string,onClick:uo.func,variant:uo.oneOf(["white"])},G7=Y.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},i)=>J.jsx("button",{ref:i,type:"button",className:ut("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));G7.displayName="CloseButton";G7.propTypes=Ove;const Nve=G7,DV=Y.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:r,className:i,as:o="span",...a},s)=>{const u=Et(e,"badge");return J.jsx(o,{ref:s,...a,className:ut(i,u,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})});DV.displayName="Badge";const Rve=DV,PV=Y.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:o=!1,className:a,...s},u)=>{const l=Et(t,"btn"),[c,{tagName:f}]=H7({tagName:e,disabled:o,...s}),d=f;return J.jsx(d,{...c,...s,ref:u,disabled:o,className:ut(a,l,i&&"active",n&&`${l}-${n}`,r&&`${l}-${r}`,s.href&&o&&"disabled")})});PV.displayName="Button";const V7=PV,LV=Y.forwardRef(({bsPrefix:e,size:t,vertical:n=!1,className:r,role:i="group",as:o="div",...a},s)=>{const u=Et(e,"btn-group");let l=u;return n&&(l=`${u}-vertical`),J.jsx(o,{...a,ref:s,role:i,className:ut(r,l,t&&`${u}-${t}`)})});LV.displayName="ButtonGroup";const Fve=LV,IV=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Et(t,"card-body"),J.jsx(n,{ref:i,className:ut(e,t),...r})));IV.displayName="CardBody";const zV=IV,BV=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Et(t,"card-footer"),J.jsx(n,{ref:i,className:ut(e,t),...r})));BV.displayName="CardFooter";const Dve=BV,jV=Y.createContext(null);jV.displayName="CardHeaderContext";const UV=jV,WV=Y.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const o=Et(e,"card-header"),a=Y.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return J.jsx(UV.Provider,{value:a,children:J.jsx(n,{ref:i,...r,className:ut(t,o)})})});WV.displayName="CardHeader";const Pve=WV,HV=Y.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...i},o)=>{const a=Et(e,"card-img");return J.jsx(r,{ref:o,className:ut(n?`${a}-${n}`:a,t),...i})});HV.displayName="CardImg";const Lve=HV,qV=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Et(t,"card-img-overlay"),J.jsx(n,{ref:i,className:ut(e,t),...r})));qV.displayName="CardImgOverlay";const Ive=qV,GV=Y.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},i)=>(t=Et(t,"card-link"),J.jsx(n,{ref:i,className:ut(e,t),...r})));GV.displayName="CardLink";const zve=GV,Bve=MV("h6"),VV=Y.forwardRef(({className:e,bsPrefix:t,as:n=Bve,...r},i)=>(t=Et(t,"card-subtitle"),J.jsx(n,{ref:i,className:ut(e,t),...r})));VV.displayName="CardSubtitle";const jve=VV,YV=Y.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},i)=>(t=Et(t,"card-text"),J.jsx(n,{ref:i,className:ut(e,t),...r})));YV.displayName="CardText";const Uve=YV,Wve=MV("h5"),XV=Y.forwardRef(({className:e,bsPrefix:t,as:n=Wve,...r},i)=>(t=Et(t,"card-title"),J.jsx(n,{ref:i,className:ut(e,t),...r})));XV.displayName="CardTitle";const Hve=XV,JV=Y.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:i,body:o=!1,children:a,as:s="div",...u},l)=>{const c=Et(e,"card");return J.jsx(s,{ref:l,...u,className:ut(t,c,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:o?J.jsx(zV,{children:a}):a})});JV.displayName="Card";const b9=Object.assign(JV,{Img:Lve,Title:Hve,Subtitle:jve,Body:zV,Link:zve,Text:Uve,Header:Pve,Footer:Dve,ImgOverlay:Ive});function qve({as:e,bsPrefix:t,className:n,...r}){t=Et(t,"col");const i=xV(),o=wV(),a=[],s=[];return i.forEach(u=>{const l=r[u];delete r[u];let c,f,d;typeof l=="object"&&l!=null?{span:c,offset:f,order:d}=l:c=l;const p=u!==o?`-${u}`:"";c&&a.push(c===!0?`${t}${p}`:`${t}${p}-${c}`),d!=null&&s.push(`order${p}-${d}`),f!=null&&s.push(`offset${p}-${f}`)}),[{...r,className:ut(n,...a,...s)},{as:e,bsPrefix:t,spans:a}]}const KV=Y.forwardRef((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:a}]=qve(e);return J.jsx(i,{...r,ref:t,className:ut(n,!a.length&&o)})});KV.displayName="Col";const qo=KV,QV=Y.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...i},o)=>{const a=Et(e,"container"),s=typeof t=="string"?`-${t}`:"-fluid";return J.jsx(n,{ref:o,...i,className:ut(r,t?`${a}${s}`:a)})});QV.displayName="Container";const ZL=QV;var Gve=Function.prototype.bind.call(Function.prototype.call,[].slice);function g4(e,t){return Gve(e.querySelectorAll(t))}function ZV(e,t,n){const r=Y.useRef(e!==void 0),[i,o]=Y.useState(t),a=e!==void 0,s=r.current;return r.current=a,!a&&s&&i!==t&&o(t),[a?e:i,Y.useCallback((...u)=>{const[l,...c]=u;let f=n==null?void 0:n(l,...c);return o(l),f},[n])]}function eY(){const[,e]=Y.useReducer(t=>!t,!1);return e}const Vve=Y.createContext(null),r3=Vve;var eI=Object.prototype.hasOwnProperty;function tI(e,t,n){for(n of e.keys())if(Pm(n,t))return n}function Pm(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Pm(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=tI(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=tI(t,i),!i)||!Pm(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(eI.call(e,n)&&++r&&!eI.call(t,n)||!(n in t)||!Pm(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Yve(e){const t=bve();return[e[0],Y.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var zi="top",oa="bottom",aa="right",Bi="left",Y7="auto",g2=[zi,oa,aa,Bi],vp="start",yy="end",Xve="clippingParents",tY="viewport",b1="popper",Jve="reference",nI=g2.reduce(function(e,t){return e.concat([t+"-"+vp,t+"-"+yy])},[]),nY=[].concat(g2,[Y7]).reduce(function(e,t){return e.concat([t,t+"-"+vp,t+"-"+yy])},[]),Kve="beforeRead",Qve="read",Zve="afterRead",ebe="beforeMain",tbe="main",nbe="afterMain",rbe="beforeWrite",ibe="write",obe="afterWrite",abe=[Kve,Qve,Zve,ebe,tbe,nbe,rbe,ibe,obe];function Bs(e){return e.split("-")[0]}function xo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Bd(e){var t=xo(e).Element;return e instanceof t||e instanceof Element}function js(e){var t=xo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function X7(e){if(typeof ShadowRoot>"u")return!1;var t=xo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Ad=Math.max,Vw=Math.min,bp=Math.round;function m4(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function rY(){return!/^((?!chrome|android).)*safari/i.test(m4())}function xp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&js(e)&&(i=e.offsetWidth>0&&bp(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&bp(r.height)/e.offsetHeight||1);var a=Bd(e)?xo(e):window,s=a.visualViewport,u=!rY()&&n,l=(r.left+(u&&s?s.offsetLeft:0))/i,c=(r.top+(u&&s?s.offsetTop:0))/o,f=r.width/i,d=r.height/o;return{width:f,height:d,top:c,right:l+f,bottom:c+d,left:l,x:l,y:c}}function J7(e){var t=xp(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function iY(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&X7(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Lc(e){return e?(e.nodeName||"").toLowerCase():null}function cl(e){return xo(e).getComputedStyle(e)}function sbe(e){return["table","td","th"].indexOf(Lc(e))>=0}function hf(e){return((Bd(e)?e.ownerDocument:e.document)||window.document).documentElement}function i3(e){return Lc(e)==="html"?e:e.assignedSlot||e.parentNode||(X7(e)?e.host:null)||hf(e)}function rI(e){return!js(e)||cl(e).position==="fixed"?null:e.offsetParent}function ube(e){var t=/firefox/i.test(m4()),n=/Trident/i.test(m4());if(n&&js(e)){var r=cl(e);if(r.position==="fixed")return null}var i=i3(e);for(X7(i)&&(i=i.host);js(i)&&["html","body"].indexOf(Lc(i))<0;){var o=cl(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function m2(e){for(var t=xo(e),n=rI(e);n&&sbe(n)&&cl(n).position==="static";)n=rI(n);return n&&(Lc(n)==="html"||Lc(n)==="body"&&cl(n).position==="static")?t:n||ube(e)||t}function K7(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Lm(e,t,n){return Ad(e,Vw(t,n))}function lbe(e,t,n){var r=Lm(e,t,n);return r>n?n:r}function oY(){return{top:0,right:0,bottom:0,left:0}}function aY(e){return Object.assign({},oY(),e)}function sY(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var cbe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,aY(typeof t!="number"?t:sY(t,g2))};function fbe(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Bs(n.placement),u=K7(s),l=[Bi,aa].indexOf(s)>=0,c=l?"height":"width";if(!(!o||!a)){var f=cbe(i.padding,n),d=J7(o),p=u==="y"?zi:Bi,g=u==="y"?oa:aa,y=n.rects.reference[c]+n.rects.reference[u]-a[u]-n.rects.popper[c],v=a[u]-n.rects.reference[u],b=m2(o),x=b?u==="y"?b.clientHeight||0:b.clientWidth||0:0,_=y/2-v/2,A=f[p],E=x-d[c]-f[g],$=x/2-d[c]/2+_,S=Lm(A,$,E),k=u;n.modifiersData[r]=(t={},t[k]=S,t.centerOffset=S-$,t)}}function dbe(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||iY(t.elements.popper,i)&&(t.elements.arrow=i))}const hbe={name:"arrow",enabled:!0,phase:"main",fn:fbe,effect:dbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wp(e){return e.split("-")[1]}var pbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gbe(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:bp(n*i)/i||0,y:bp(r*i)/i||0}}function iI(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,d=a.x,p=d===void 0?0:d,g=a.y,y=g===void 0?0:g,v=typeof c=="function"?c({x:p,y}):{x:p,y};p=v.x,y=v.y;var b=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),_=Bi,A=zi,E=window;if(l){var $=m2(n),S="clientHeight",k="clientWidth";if($===xo(n)&&($=hf(n),cl($).position!=="static"&&s==="absolute"&&(S="scrollHeight",k="scrollWidth")),$=$,i===zi||(i===Bi||i===aa)&&o===yy){A=oa;var O=f&&$===E&&E.visualViewport?E.visualViewport.height:$[S];y-=O-r.height,y*=u?1:-1}if(i===Bi||(i===zi||i===oa)&&o===yy){_=aa;var N=f&&$===E&&E.visualViewport?E.visualViewport.width:$[k];p-=N-r.width,p*=u?1:-1}}var F=Object.assign({position:s},l&&pbe),W=c===!0?gbe({x:p,y},xo(n)):{x:p,y};if(p=W.x,y=W.y,u){var I;return Object.assign({},F,(I={},I[A]=x?"0":"",I[_]=b?"0":"",I.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",I))}return Object.assign({},F,(t={},t[A]=x?y+"px":"",t[_]=b?p+"px":"",t.transform="",t))}function mbe(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,u=s===void 0?!0:s,l={placement:Bs(t.placement),variation:wp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,iI(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,iI(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ybe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mbe,data:{}};var Rb={passive:!0};function vbe(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,u=xo(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach(function(c){c.addEventListener("scroll",n.update,Rb)}),s&&u.addEventListener("resize",n.update,Rb),function(){o&&l.forEach(function(c){c.removeEventListener("scroll",n.update,Rb)}),s&&u.removeEventListener("resize",n.update,Rb)}}const bbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vbe,data:{}};var xbe={left:"right",right:"left",bottom:"top",top:"bottom"};function Vx(e){return e.replace(/left|right|bottom|top/g,function(t){return xbe[t]})}var wbe={start:"end",end:"start"};function oI(e){return e.replace(/start|end/g,function(t){return wbe[t]})}function Q7(e){var t=xo(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Z7(e){return xp(hf(e)).left+Q7(e).scrollLeft}function _be(e,t){var n=xo(e),r=hf(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=rY();(l||!l&&t==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s+Z7(e),y:u}}function Abe(e){var t,n=hf(e),r=Q7(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Ad(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Ad(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Z7(e),u=-r.scrollTop;return cl(i||n).direction==="rtl"&&(s+=Ad(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}function ek(e){var t=cl(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function uY(e){return["html","body","#document"].indexOf(Lc(e))>=0?e.ownerDocument.body:js(e)&&ek(e)?e:uY(i3(e))}function Im(e,t){var n;t===void 0&&(t=[]);var r=uY(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=xo(r),a=i?[o].concat(o.visualViewport||[],ek(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(Im(i3(a)))}function y4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Sbe(e,t){var n=xp(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function aI(e,t,n){return t===tY?y4(_be(e,n)):Bd(t)?Sbe(t,n):y4(Abe(hf(e)))}function Ebe(e){var t=Im(i3(e)),n=["absolute","fixed"].indexOf(cl(e).position)>=0,r=n&&js(e)?m2(e):e;return Bd(r)?t.filter(function(i){return Bd(i)&&iY(i,r)&&Lc(i)!=="body"}):[]}function $be(e,t,n,r){var i=t==="clippingParents"?Ebe(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(u,l){var c=aI(e,l,r);return u.top=Ad(c.top,u.top),u.right=Vw(c.right,u.right),u.bottom=Vw(c.bottom,u.bottom),u.left=Ad(c.left,u.left),u},aI(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function lY(e){var t=e.reference,n=e.element,r=e.placement,i=r?Bs(r):null,o=r?wp(r):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,u;switch(i){case zi:u={x:a,y:t.y-n.height};break;case oa:u={x:a,y:t.y+t.height};break;case aa:u={x:t.x+t.width,y:s};break;case Bi:u={x:t.x-n.width,y:s};break;default:u={x:t.x,y:t.y}}var l=i?K7(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(o){case vp:u[l]=u[l]-(t[c]/2-n[c]/2);break;case yy:u[l]=u[l]+(t[c]/2-n[c]/2);break}}return u}function vy(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,a=o===void 0?e.strategy:o,s=n.boundary,u=s===void 0?Xve:s,l=n.rootBoundary,c=l===void 0?tY:l,f=n.elementContext,d=f===void 0?b1:f,p=n.altBoundary,g=p===void 0?!1:p,y=n.padding,v=y===void 0?0:y,b=aY(typeof v!="number"?v:sY(v,g2)),x=d===b1?Jve:b1,_=e.rects.popper,A=e.elements[g?x:d],E=$be(Bd(A)?A:A.contextElement||hf(e.elements.popper),u,c,a),$=xp(e.elements.reference),S=lY({reference:$,element:_,strategy:"absolute",placement:i}),k=y4(Object.assign({},_,S)),O=d===b1?k:$,N={top:E.top-O.top+b.top,bottom:O.bottom-E.bottom+b.bottom,left:E.left-O.left+b.left,right:O.right-E.right+b.right},F=e.modifiersData.offset;if(d===b1&&F){var W=F[i];Object.keys(N).forEach(function(I){var M=[aa,oa].indexOf(I)>=0?1:-1,D=[zi,oa].indexOf(I)>=0?"y":"x";N[I]+=W[D]*M})}return N}function Cbe(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?nY:u,c=wp(r),f=c?s?nI:nI.filter(function(g){return wp(g)===c}):g2,d=f.filter(function(g){return l.indexOf(g)>=0});d.length===0&&(d=f);var p=d.reduce(function(g,y){return g[y]=vy(e,{placement:y,boundary:i,rootBoundary:o,padding:a})[Bs(y)],g},{});return Object.keys(p).sort(function(g,y){return p[g]-p[y]})}function kbe(e){if(Bs(e)===Y7)return[];var t=Vx(e);return[oI(e),t,oI(t)]}function Tbe(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,y=n.allowedAutoPlacements,v=t.options.placement,b=Bs(v),x=b===v,_=u||(x||!g?[Vx(v)]:kbe(v)),A=[v].concat(_).reduce(function(ne,ce){return ne.concat(Bs(ce)===Y7?Cbe(t,{placement:ce,boundary:c,rootBoundary:f,padding:l,flipVariations:g,allowedAutoPlacements:y}):ce)},[]),E=t.rects.reference,$=t.rects.popper,S=new Map,k=!0,O=A[0],N=0;N<A.length;N++){var F=A[N],W=Bs(F),I=wp(F)===vp,M=[zi,oa].indexOf(W)>=0,D=M?"width":"height",L=vy(t,{placement:F,boundary:c,rootBoundary:f,altBoundary:d,padding:l}),j=M?I?aa:Bi:I?oa:zi;E[D]>$[D]&&(j=Vx(j));var z=Vx(j),H=[];if(o&&H.push(L[W]<=0),s&&H.push(L[j]<=0,L[z]<=0),H.every(function(ne){return ne})){O=F,k=!1;break}S.set(F,H)}if(k)for(var U=g?3:1,V=function(ce){var ye=A.find(function(fe){var pe=S.get(fe);if(pe)return pe.slice(0,ce).every(function(te){return te})});if(ye)return O=ye,"break"},K=U;K>0;K--){var Q=V(K);if(Q==="break")break}t.placement!==O&&(t.modifiersData[r]._skip=!0,t.placement=O,t.reset=!0)}}const Mbe={name:"flip",enabled:!0,phase:"main",fn:Tbe,requiresIfExists:["offset"],data:{_skip:!1}};function sI(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function uI(e){return[zi,aa,oa,Bi].some(function(t){return e[t]>=0})}function Obe(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=vy(t,{elementContext:"reference"}),s=vy(t,{altBoundary:!0}),u=sI(a,r),l=sI(s,i,o),c=uI(u),f=uI(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const Nbe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Obe};function Rbe(e,t,n){var r=Bs(e),i=[Bi,zi].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[Bi,aa].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function Fbe(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,a=nY.reduce(function(c,f){return c[f]=Rbe(f,t.rects,o),c},{}),s=a[t.placement],u=s.x,l=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=a}const Dbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Fbe};function Pbe(e){var t=e.state,n=e.name;t.modifiersData[n]=lY({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Lbe={name:"popperOffsets",enabled:!0,phase:"read",fn:Pbe,data:{}};function Ibe(e){return e==="x"?"y":"x"}function zbe(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,g=n.tetherOffset,y=g===void 0?0:g,v=vy(t,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),b=Bs(t.placement),x=wp(t.placement),_=!x,A=K7(b),E=Ibe(A),$=t.modifiersData.popperOffsets,S=t.rects.reference,k=t.rects.popper,O=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,W={x:0,y:0};if($){if(o){var I,M=A==="y"?zi:Bi,D=A==="y"?oa:aa,L=A==="y"?"height":"width",j=$[A],z=j+v[M],H=j-v[D],U=p?-k[L]/2:0,V=x===vp?S[L]:k[L],K=x===vp?-k[L]:-S[L],Q=t.elements.arrow,ne=p&&Q?J7(Q):{width:0,height:0},ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:oY(),ye=ce[M],fe=ce[D],pe=Lm(0,S[L],ne[L]),te=_?S[L]/2-U-pe-ye-N.mainAxis:V-pe-ye-N.mainAxis,Se=_?-S[L]/2+U+pe+fe+N.mainAxis:K+pe+fe+N.mainAxis,Ae=t.elements.arrow&&m2(t.elements.arrow),re=Ae?A==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,qe=(I=F==null?void 0:F[A])!=null?I:0,_e=j+te-qe-re,Ze=j+Se-qe,Ve=Lm(p?Vw(z,_e):z,j,p?Ad(H,Ze):H);$[A]=Ve,W[A]=Ve-j}if(s){var ht,jr=A==="x"?zi:Bi,Mo=A==="x"?oa:aa,Lt=$[E],Te=E==="y"?"height":"width",un=Lt+v[jr],$t=Lt-v[Mo],Nt=[zi,Bi].indexOf(b)!==-1,On=(ht=F==null?void 0:F[E])!=null?ht:0,xi=Nt?un:Lt-S[Te]-k[Te]-On+N.altAxis,Ur=Nt?Lt+S[Te]+k[Te]-On-N.altAxis:$t,Wr=p&&Nt?lbe(xi,Lt,Ur):Lm(p?xi:un,Lt,p?Ur:$t);$[E]=Wr,W[E]=Wr-Lt}t.modifiersData[r]=W}}const Bbe={name:"preventOverflow",enabled:!0,phase:"main",fn:zbe,requiresIfExists:["offset"]};function jbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ube(e){return e===xo(e)||!js(e)?Q7(e):jbe(e)}function Wbe(e){var t=e.getBoundingClientRect(),n=bp(t.width)/e.offsetWidth||1,r=bp(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Hbe(e,t,n){n===void 0&&(n=!1);var r=js(t),i=js(t)&&Wbe(t),o=hf(t),a=xp(e,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Lc(t)!=="body"||ek(o))&&(s=Ube(t)),js(t)?(u=xp(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=Z7(o))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function qbe(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var u=t.get(s);u&&i(u)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function Gbe(e){var t=qbe(e);return abe.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Vbe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Ybe(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var lI={placement:"bottom",modifiers:[],strategy:"absolute"};function cI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Xbe(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?lI:i;return function(s,u,l){l===void 0&&(l=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},lI,o),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},f=[],d=!1,p={state:c,setOptions:function(b){var x=typeof b=="function"?b(c.options):b;y(),c.options=Object.assign({},o,c.options,x),c.scrollParents={reference:Bd(s)?Im(s):s.contextElement?Im(s.contextElement):[],popper:Im(u)};var _=Gbe(Ybe([].concat(r,c.options.modifiers)));return c.orderedModifiers=_.filter(function(A){return A.enabled}),g(),p.update()},forceUpdate:function(){if(!d){var b=c.elements,x=b.reference,_=b.popper;if(cI(x,_)){c.rects={reference:Hbe(x,m2(_),c.options.strategy==="fixed"),popper:J7(_)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var A=0;A<c.orderedModifiers.length;A++){if(c.reset===!0){c.reset=!1,A=-1;continue}var E=c.orderedModifiers[A],$=E.fn,S=E.options,k=S===void 0?{}:S,O=E.name;typeof $=="function"&&(c=$({state:c,options:k,name:O,instance:p})||c)}}}},update:Vbe(function(){return new Promise(function(v){p.forceUpdate(),v(c)})}),destroy:function(){y(),d=!0}};if(!cI(s,u))return p;p.setOptions(l).then(function(v){!d&&l.onFirstUpdate&&l.onFirstUpdate(v)});function g(){c.orderedModifiers.forEach(function(v){var b=v.name,x=v.options,_=x===void 0?{}:x,A=v.effect;if(typeof A=="function"){var E=A({state:c,name:b,instance:p,options:_}),$=function(){};f.push(E||$)}})}function y(){f.forEach(function(v){return v()}),f=[]}return p}}const Jbe=Xbe({defaultModifiers:[Nbe,Lbe,ybe,bbe,Dbe,Mbe,Bbe,hbe]}),Kbe=["enabled","placement","strategy","modifiers"];function Qbe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const Zbe={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},exe={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const o=r.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",o?`${o},${n.id}`:n.id)}}},txe=[];function nxe(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:o="absolute",modifiers:a=txe}=n,s=Qbe(n,Kbe);const u=Y.useRef(a),l=Y.useRef(),c=Y.useCallback(()=>{var v;(v=l.current)==null||v.update()},[]),f=Y.useCallback(()=>{var v;(v=l.current)==null||v.forceUpdate()},[]),[d,p]=Yve(Y.useState({placement:i,update:c,forceUpdate:f,attributes:{},styles:{popper:{},arrow:{}}})),g=Y.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:v})=>{const b={},x={};Object.keys(v.elements).forEach(_=>{b[_]=v.styles[_],x[_]=v.attributes[_]}),p({state:v,styles:b,attributes:x,update:c,forceUpdate:f,placement:v.placement})}}),[c,f,p]),y=Y.useMemo(()=>(Pm(u.current,a)||(u.current=a),u.current),[a]);return Y.useEffect(()=>{!l.current||!r||l.current.setOptions({placement:i,strategy:o,modifiers:[...y,g,Zbe]})},[o,i,g,r,y]),Y.useEffect(()=>{if(!(!r||e==null||t==null))return l.current=Jbe(e,t,Object.assign({},s,{placement:i,strategy:o,modifiers:[...y,exe,g]})),()=>{l.current!=null&&(l.current.destroy(),l.current=void 0,p(v=>Object.assign({},v,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),d}function fI(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var rxe=function(){},ixe=rxe;const oxe=cg(ixe),dI=()=>{};function axe(e){return e.button===0}function sxe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const x9=e=>e&&("current"in e?e.current:e),hI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function uxe(e,t=dI,{disabled:n,clickTrigger:r="click"}={}){const i=Y.useRef(!1),o=Y.useRef(!1),a=Y.useCallback(l=>{const c=x9(e);oxe(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!c||sxe(l)||!axe(l)||!!fI(c,l.target)||o.current,o.current=!1},[e]),s=ea(l=>{const c=x9(e);c&&fI(c,l.target)&&(o.current=!0)}),u=ea(l=>{i.current||t(l)});Y.useEffect(()=>{var l,c;if(n||e==null)return;const f=_V(x9(e)),d=f.defaultView||window;let p=(l=d.event)!=null?l:(c=d.parent)==null?void 0:c.event,g=null;hI[r]&&(g=Dh(f,hI[r],s,!0));const y=Dh(f,r,a,!0),v=Dh(f,r,x=>{if(x===p){p=void 0;return}u(x)});let b=[];return"ontouchstart"in f.documentElement&&(b=[].slice.call(f.body.children).map(x=>Dh(x,"mousemove",dI))),()=>{g==null||g(),y(),v(),b.forEach(x=>x())}},[e,n,r,a,s,u])}function lxe(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function cxe(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function fxe({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:o,containerPadding:a,arrowElement:s,popperConfig:u={}}){var l,c,f,d,p;const g=lxe(u.modifiers);return Object.assign({},u,{placement:n,enabled:e,strategy:o?"fixed":u.strategy,modifiers:cxe(Object.assign({},g,{eventListeners:{enabled:t,options:(l=g.eventListeners)==null?void 0:l.options},preventOverflow:Object.assign({},g.preventOverflow,{options:a?Object.assign({padding:a},(c=g.preventOverflow)==null?void 0:c.options):(f=g.preventOverflow)==null?void 0:f.options}),offset:{options:Object.assign({offset:i},(d=g.offset)==null?void 0:d.options)},arrow:Object.assign({},g.arrow,{enabled:!!s,options:Object.assign({},(p=g.arrow)==null?void 0:p.options,{element:s})}),flip:Object.assign({enabled:!!r},g.flip)}))})}const dxe=["children"];function hxe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const pxe=()=>{};function cY(e={}){const t=Y.useContext(r3),[n,r]=yve(),i=Y.useRef(!1),{flip:o,offset:a,rootCloseEvent:s,fixed:u=!1,placement:l,popperConfig:c={},enableEventListeners:f=!0,usePopper:d=!!t}=e,p=(t==null?void 0:t.show)==null?!!e.show:t.show;p&&!i.current&&(i.current=!0);const g=$=>{t==null||t.toggle(!1,$)},{placement:y,setMenu:v,menuElement:b,toggleElement:x}=t||{},_=nxe(x,b,fxe({placement:l||y||"bottom-start",enabled:d,enableEvents:f??p,offset:a,flip:o,fixed:u,arrowElement:n,popperConfig:c})),A=Object.assign({ref:v||pxe,"aria-labelledby":x==null?void 0:x.id},_.attributes.popper,{style:_.styles.popper}),E={show:p,placement:y,hasShown:i.current,toggle:t==null?void 0:t.toggle,popper:d?_:null,arrowProps:d?Object.assign({ref:r},_.attributes.arrow,{style:_.styles.arrow}):{}};return uxe(b,g,{clickTrigger:s,disabled:!p}),[A,E]}const gxe={usePopper:!0};function tk(e){let{children:t}=e,n=hxe(e,dxe);const[r,i]=cY(n);return J.jsx(J.Fragment,{children:t(r,i)})}tk.displayName="DropdownMenu";tk.defaultProps=gxe;const Yw={prefix:String(Math.round(Math.random()*1e10)),current:0},fY=Ri.createContext(Yw),mxe=Ri.createContext(!1);let yxe=!!(typeof window<"u"&&window.document&&window.document.createElement),w9=new WeakMap;function vxe(e=!1){let t=Y.useContext(fY),n=Y.useRef(null);if(n.current===null&&!e){var r,i;let o=(i=Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let a=w9.get(o);a==null?w9.set(o,{id:t.current,state:o.memoizedState}):o.memoizedState!==a.state&&(t.current=a.id,w9.delete(o))}n.current=++t.current}return n.current}function bxe(e){let t=Y.useContext(fY);t===Yw&&!yxe&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=vxe(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function xxe(e){let t=Ri.useId(),[n]=Y.useState(Sxe()),r=n?"react-aria":`react-aria${Yw.prefix}`;return e||`${r}-${t}`}const dY=typeof Ri.useId=="function"?xxe:bxe;function wxe(){return!1}function _xe(){return!0}function Axe(e){return()=>{}}function Sxe(){return typeof Ri.useSyncExternalStore=="function"?Ri.useSyncExternalStore(Axe,wxe,_xe):Y.useContext(mxe)}const hY=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},pI=()=>{};function pY(){const e=dY(),{show:t=!1,toggle:n=pI,setToggle:r,menuElement:i}=Y.useContext(r3)||{},o=Y.useCallback(s=>{n(!t,s)},[t,n]),a={id:e,ref:r||pI,onClick:o,"aria-expanded":!!t};return i&&hY(i)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:n}]}function gY({children:e}){const[t,n]=pY();return J.jsx(J.Fragment,{children:e(t,n)})}gY.displayName="DropdownToggle";const Exe=Y.createContext(null),Ic=(e,t=null)=>e!=null?String(e):t||null,fl=Exe,mY=Y.createContext(null);mY.displayName="NavContext";const nk=mY,$xe="data-rr-ui-",Cxe="rrUi";function y2(e){return`${$xe}${e}`}function kxe(e){return`${Cxe}${e}`}const Txe=["eventKey","disabled","onClick","active","as"];function Mxe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function yY({key:e,href:t,active:n,disabled:r,onClick:i}){const o=Y.useContext(fl),a=Y.useContext(nk),{activeKey:s}=a||{},u=Ic(e,t),l=n==null&&e!=null?Ic(s)===u:n;return[{onClick:ea(f=>{r||(i==null||i(f),o&&!f.isPropagationStopped()&&o(u,f))}),"aria-disabled":r||void 0,"aria-selected":l,[y2("dropdown-item")]:""},{isActive:l}]}const vY=Y.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:o,as:a=q7}=e,s=Mxe(e,Txe);const[u]=yY({key:n,href:s.href,disabled:r,onClick:i,active:o});return J.jsx(a,Object.assign({},s,{ref:t},u))});vY.displayName="DropdownItem";const bY=Y.createContext(kV?window:void 0);bY.Provider;function Oxe(){return Y.useContext(bY)}function gI(){const e=eY(),t=Y.useRef(null),n=Y.useCallback(r=>{t.current=r,e()},[e]);return[t,n]}function v2({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${y2("dropdown-item")}]`,focusFirstItemOnShow:o,placement:a="bottom-start",children:s}){const u=Oxe(),[l,c]=ZV(t,e,r),[f,d]=gI(),p=f.current,[g,y]=gI(),v=g.current,b=xve(l),x=Y.useRef(null),_=Y.useRef(!1),A=Y.useContext(fl),E=Y.useCallback((F,W,I=W==null?void 0:W.type)=>{c(F,{originalEvent:W,source:I})},[c]),$=ea((F,W)=>{n==null||n(F,W),E(!1,W,"select"),W.isPropagationStopped()||A==null||A(F,W)}),S=Y.useMemo(()=>({toggle:E,placement:a,show:l,menuElement:p,toggleElement:v,setMenu:d,setToggle:y}),[E,a,l,p,v,d,y]);p&&b&&!l&&(_.current=p.contains(p.ownerDocument.activeElement));const k=ea(()=>{v&&v.focus&&v.focus()}),O=ea(()=>{const F=x.current;let W=o;if(W==null&&(W=f.current&&hY(f.current)?"keyboard":!1),W===!1||W==="keyboard"&&!/^key.+$/.test(F))return;const I=g4(f.current,i)[0];I&&I.focus&&I.focus()});Y.useEffect(()=>{l?O():_.current&&(_.current=!1,k())},[l,_,k,O]),Y.useEffect(()=>{x.current=null});const N=(F,W)=>{if(!f.current)return null;const I=g4(f.current,i);let M=I.indexOf(F)+W;return M=Math.max(0,Math.min(M,I.length)),I[M]};return vve(Y.useCallback(()=>u.document,[u]),"keydown",F=>{var W,I;const{key:M}=F,D=F.target,L=(W=f.current)==null?void 0:W.contains(D),j=(I=g.current)==null?void 0:I.contains(D);if(/input|textarea/i.test(D.tagName)&&(M===" "||M!=="Escape"&&L||M==="Escape"&&D.type==="search")||!L&&!j||M==="Tab"&&(!f.current||!l))return;x.current=F.type;const H={originalEvent:F,source:F.type};switch(M){case"ArrowUp":{const U=N(D,-1);U&&U.focus&&U.focus(),F.preventDefault();return}case"ArrowDown":if(F.preventDefault(),!l)c(!0,H);else{const U=N(D,1);U&&U.focus&&U.focus()}return;case"Tab":TV(D.ownerDocument,"keyup",U=>{var V;(U.key==="Tab"&&!U.target||!((V=f.current)!=null&&V.contains(U.target)))&&c(!1,H)},{once:!0});break;case"Escape":M==="Escape"&&(F.preventDefault(),F.stopPropagation()),c(!1,H);break}}),J.jsx(fl.Provider,{value:$,children:J.jsx(r3.Provider,{value:S,children:s})})}v2.displayName="Dropdown";v2.Menu=tk;v2.Toggle=gY;v2.Item=vY;const xY=Y.createContext({});xY.displayName="DropdownContext";const wY=xY,_Y=Y.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:r="separator",...i},o)=>(t=Et(t,"dropdown-divider"),J.jsx(n,{ref:o,className:ut(e,t),role:r,...i})));_Y.displayName="DropdownDivider";const Nxe=_Y,AY=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",role:r="heading",...i},o)=>(t=Et(t,"dropdown-header"),J.jsx(n,{ref:o,className:ut(e,t),role:r,...i})));AY.displayName="DropdownHeader";const Rxe=AY,SY=Y.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:i,active:o,as:a=NV,...s},u)=>{const l=Et(e,"dropdown-item"),[c,f]=yY({key:n,href:s.href,disabled:r,onClick:i,active:o});return J.jsx(a,{...s,...c,ref:u,className:ut(t,l,f.isActive&&"active",r&&"disabled")})});SY.displayName="DropdownItem";const Fxe=SY,EY=Y.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=Et(t,"dropdown-item-text"),J.jsx(n,{ref:i,className:ut(e,t),...r})));EY.displayName="DropdownItemText";const Dxe=EY,$Y=Y.createContext(null);$Y.displayName="InputGroupContext";const CY=$Y,kY=Y.createContext(null);kY.displayName="NavbarContext";const TY=kY;function MY(e,t){return e}function OY(e,t,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",o=n?"bottom-end":"bottom-start",a=n?"bottom-start":"bottom-end",s=n?"right-start":"left-start",u=n?"right-end":"left-end",l=n?"left-start":"right-start",c=n?"left-end":"right-end";let f=e?a:o;return t==="up"?f=e?i:r:t==="end"?f=e?c:l:t==="start"?f=e?u:s:t==="down-centered"?f="bottom":t==="up-centered"&&(f="top"),f}const NY=Y.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:i=!0,show:o,renderOnMount:a,as:s="div",popperConfig:u,variant:l,...c},f)=>{let d=!1;const p=Y.useContext(TY),g=Et(e,"dropdown-menu"),{align:y,drop:v,isRTL:b}=Y.useContext(wY);n=n||y;const x=Y.useContext(CY),_=[];if(n)if(typeof n=="object"){const F=Object.keys(n);if(F.length){const W=F[0],I=n[W];d=I==="start",_.push(`${g}-${W}-${I}`)}}else n==="end"&&(d=!0);const A=OY(d,v,b),[E,{hasShown:$,popper:S,show:k,toggle:O}]=cY({flip:i,rootCloseEvent:r,show:o,usePopper:!p&&_.length===0,offset:[0,2],popperConfig:u,placement:A});if(E.ref=p2(MY(f),E.ref),Ave(()=>{k&&(S==null||S.update())},[k]),!$&&!a&&!x)return null;typeof s!="string"&&(E.show=k,E.close=()=>O==null?void 0:O(!1),E.align=n);let N=c.style;return S!=null&&S.placement&&(N={...c.style,...E.style},c["x-placement"]=S.placement),J.jsx(s,{...c,...E,style:N,...(_.length||p)&&{"data-bs-popper":"static"},className:ut(t,g,k&&"show",d&&`${g}-end`,l&&`${g}-${l}`,..._)})});NY.displayName="DropdownMenu";const Pxe=NY,RY=Y.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:i=V7,...o},a)=>{const s=Et(e,"dropdown-toggle"),u=Y.useContext(r3);r!==void 0&&(o.bsPrefix=r);const[l]=pY();return l.ref=p2(l.ref,MY(a)),J.jsx(i,{className:ut(n,s,t&&`${s}-split`,(u==null?void 0:u.show)&&"show"),...l,...o})});RY.displayName="DropdownToggle";const Lxe=RY,FY=Y.forwardRef((e,t)=>{const{bsPrefix:n,drop:r="down",show:i,className:o,align:a="start",onSelect:s,onToggle:u,focusFirstItemOnShow:l,as:c="div",navbar:f,autoClose:d=!0,...p}=W7(e,{show:"onToggle"}),g=Y.useContext(CY),y=Et(n,"dropdown"),v=H2e(),b=S=>d===!1?S==="click":d==="inside"?S!=="rootClose":d==="outside"?S!=="select":!0,x=ea((S,k)=>{k.originalEvent.currentTarget===document&&(k.source!=="keydown"||k.originalEvent.key==="Escape")&&(k.source="rootClose"),b(k.source)&&(u==null||u(S,k))}),A=OY(a==="end",r,v),E=Y.useMemo(()=>({align:a,drop:r,isRTL:v}),[a,r,v]),$={down:y,"down-centered":`${y}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return J.jsx(wY.Provider,{value:E,children:J.jsx(v2,{placement:A,show:i,onSelect:s,onToggle:x,focusFirstItemOnShow:l,itemSelector:`.${y}-item:not(.disabled):not(:disabled)`,children:g?p.children:J.jsx(c,{...p,ref:t,className:ut(o,i&&"show",$[r])})})})});FY.displayName="Dropdown";const Fb=Object.assign(FY,{Toggle:Lxe,Menu:Pxe,Item:Fxe,ItemText:Dxe,Divider:Nxe,Header:Rxe}),Ixe={type:uo.string,tooltip:uo.bool,as:uo.elementType},rk=Y.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...i},o)=>J.jsx(e,{...i,ref:o,className:ut(t,`${n}-${r?"tooltip":"feedback"}`)}));rk.displayName="Feedback";rk.propTypes=Ixe;const zxe=rk,Bxe=Y.createContext({}),jxe=Bxe,DY=Y.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:i,className:o,isValid:a=!1,isInvalid:s=!1,plaintext:u,readOnly:l,as:c="input",...f},d)=>{const{controlId:p}=Y.useContext(jxe);return e=Et(e,"form-control"),J.jsx(c,{...f,type:t,size:r,ref:d,readOnly:l,id:i||p,className:ut(o,u?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",s&&"is-invalid")})});DY.displayName="FormControl";const Uxe=Object.assign(DY,{Feedback:zxe}),Wxe=Y.createContext(null),pg=Wxe,Hxe=["as","active","eventKey"];function qxe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ik({key:e,onClick:t,active:n,id:r,role:i,disabled:o}){const a=Y.useContext(fl),s=Y.useContext(nk),u=Y.useContext(pg);let l=n;const c={role:i};if(s){!i&&s.role==="tablist"&&(c.role="tab");const f=s.getControllerId(e??null),d=s.getControlledId(e??null);c[y2("event-key")]=e,c.id=f||r,l=n==null&&e!=null?s.activeKey===e:n,(l||!(u!=null&&u.unmountOnExit)&&!(u!=null&&u.mountOnEnter))&&(c["aria-controls"]=d)}return c.role==="tab"&&(c["aria-selected"]=l,l||(c.tabIndex=-1),o&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=ea(f=>{o||(t==null||t(f),e!=null&&a&&!f.isPropagationStopped()&&a(e,f))}),[c,{isActive:l}]}const PY=Y.forwardRef((e,t)=>{let{as:n=q7,active:r,eventKey:i}=e,o=qxe(e,Hxe);const[a,s]=ik(Object.assign({key:Ic(i,o.href),active:r},o));return a[y2("active")]=s.isActive,J.jsx(n,Object.assign({},o,a,{ref:t}))});PY.displayName="NavItem";const Gxe=PY,Vxe=["as","onSelect","activeKey","role","onKeyDown"];function Yxe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const mI=()=>{},yI=y2("event-key"),LY=Y.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:o,onKeyDown:a}=e,s=Yxe(e,Vxe);const u=eY(),l=Y.useRef(!1),c=Y.useContext(fl),f=Y.useContext(pg);let d,p;f&&(o=o||"tablist",i=f.activeKey,d=f.getControlledId,p=f.getControllerId);const g=Y.useRef(null),y=_=>{const A=g.current;if(!A)return null;const E=g4(A,`[${yI}]:not([aria-disabled=true])`),$=A.querySelector("[aria-selected=true]");if(!$||$!==document.activeElement)return null;const S=E.indexOf($);if(S===-1)return null;let k=S+_;return k>=E.length&&(k=0),k<0&&(k=E.length-1),E[k]},v=(_,A)=>{_!=null&&(r==null||r(_,A),c==null||c(_,A))},b=_=>{if(a==null||a(_),!f)return;let A;switch(_.key){case"ArrowLeft":case"ArrowUp":A=y(-1);break;case"ArrowRight":case"ArrowDown":A=y(1);break;default:return}A&&(_.preventDefault(),v(A.dataset[kxe("EventKey")]||null,_),l.current=!0,u())};Y.useEffect(()=>{if(g.current&&l.current){const _=g.current.querySelector(`[${yI}][aria-selected=true]`);_==null||_.focus()}l.current=!1});const x=p2(t,g);return J.jsx(fl.Provider,{value:v,children:J.jsx(nk.Provider,{value:{role:o,activeKey:Ic(i),getControlledId:d||mI,getControllerId:p||mI},children:J.jsx(n,Object.assign({},s,{onKeyDown:b,ref:x,role:o}))})})});LY.displayName="Nav";const IY=Object.assign(LY,{Item:Gxe}),zY=Y.forwardRef(({bsPrefix:e,active:t,disabled:n,eventKey:r,className:i,variant:o,action:a,as:s,...u},l)=>{e=Et(e,"list-group-item");const[c,f]=ik({key:Ic(r,u.href),active:t,...u}),d=ea(g=>{if(n){g.preventDefault(),g.stopPropagation();return}c.onClick(g)});n&&u.tabIndex===void 0&&(u.tabIndex=-1,u["aria-disabled"]=!0);const p=s||(a?u.href?"a":"button":"div");return J.jsx(p,{ref:l,...u,...c,onClick:d,className:ut(i,e,f.isActive&&"active",n&&"disabled",o&&`${e}-${o}`,a&&`${e}-action`)})});zY.displayName="ListGroupItem";const Xxe=zY,BY=Y.forwardRef((e,t)=>{const{className:n,bsPrefix:r,variant:i,horizontal:o,numbered:a,as:s="div",...u}=W7(e,{activeKey:"onSelect"}),l=Et(r,"list-group");let c;return o&&(c=o===!0?"horizontal":`horizontal-${o}`),J.jsx(IY,{ref:t,...u,as:s,className:ut(n,l,i&&`${l}-${i}`,c&&`${l}-${c}`,a&&`${l}-numbered`)})});BY.displayName="ListGroup";const vI=Object.assign(BY,{Item:Xxe});function jY({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const o=Y.useRef(null),a=Y.useRef(t),s=ea(n);Y.useEffect(()=>{t?a.current=!0:s(o.current)},[t,s]);const u=p2(o,e.ref),l=Y.cloneElement(e,{ref:u});return t?l:i||!a.current&&r?null:l}var bI={exports:{}},v4={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){function i(a,s,u,l,c,f){var d=l||"<<anonymous>>",p=f||u;if(s[u]==null)return a?new Error("Required "+c+" `"+p+"` was not specified "+("in `"+d+"`.")):null;for(var g=arguments.length,y=Array(g>6?g-6:0),v=6;v<g;v++)y[v-6]=arguments[v];return r.apply(void 0,[s,u,d,c,p].concat(y))}var o=i.bind(null,!1);return o.isRequired=i.bind(null,!0),o}e.exports=t.default})(v4,v4.exports);var Jxe=v4.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=Jxe,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function o(){for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];function l(){for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];var p=null;return s.forEach(function(g){if(p==null){var y=g.apply(void 0,f);y!=null&&(p=y)}}),p}return(0,r.default)(l)}e.exports=t.default})(bI,bI.exports);const UY=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Et(t,"nav-item"),J.jsx(n,{ref:i,className:ut(e,t),...r})));UY.displayName="NavItem";const Kxe=UY,WY=Y.forwardRef(({bsPrefix:e,className:t,as:n=NV,active:r,eventKey:i,disabled:o=!1,...a},s)=>{e=Et(e,"nav-link");const[u,l]=ik({key:Ic(i,a.href),active:r,disabled:o,...a});return J.jsx(n,{...a,...u,ref:s,disabled:o,className:ut(t,e,o&&"disabled",l.isActive&&"active")})});WY.displayName="NavLink";const Qxe=WY,HY=Y.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:o=!1,justify:a=!1,navbar:s,navbarScroll:u,className:l,activeKey:c,...f}=W7(e,{activeKey:"onSelect"}),d=Et(r,"nav");let p,g,y=!1;const v=Y.useContext(TY),b=Y.useContext(UV);return v?(p=v.bsPrefix,y=s??!0):b&&({cardHeaderBsPrefix:g}=b),J.jsx(IY,{as:n,ref:t,activeKey:c,className:ut(l,{[d]:!y,[`${p}-nav`]:y,[`${p}-nav-scroll`]:y&&u,[`${g}-${i}`]:!!g,[`${d}-${i}`]:!!i,[`${d}-fill`]:o,[`${d}-justified`]:a}),...f})});HY.displayName="Nav";const $u=Object.assign(HY,{Item:Kxe,Link:Qxe}),qY=Y.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{const o=Et(e,"row"),a=xV(),s=wV(),u=`${o}-cols`,l=[];return a.forEach(c=>{const f=r[c];delete r[c];let d;f!=null&&typeof f=="object"?{cols:d}=f:d=f;const p=c!==s?`-${c}`:"";d!=null&&l.push(`${u}${p}-${d}`)}),J.jsx(n,{ref:i,...r,className:ut(t,o,...l)})});qY.displayName="Row";const Jh=qY,Zxe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],ewe=["activeKey","getControlledId","getControllerId"],twe=["as"];function b4(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function GY(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:o,role:a="tabpanel",onEnter:s,onEntering:u,onEntered:l,onExit:c,onExiting:f,onExited:d}=e,p=b4(e,Zxe);const g=Y.useContext(pg);if(!g)return[Object.assign({},p,{role:a}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:o,onEnter:s,onEntering:u,onEntered:l,onExit:c,onExiting:f,onExited:d}];const{activeKey:y,getControlledId:v,getControllerId:b}=g,x=b4(g,ewe),_=Ic(n);return[Object.assign({},p,{role:a,id:v(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:t==null&&_!=null?Ic(y)===_:t,transition:i||x.transition,mountOnEnter:r??x.mountOnEnter,unmountOnExit:o??x.unmountOnExit,onEnter:s,onEntering:u,onEntered:l,onExit:c,onExiting:f,onExited:d}]}const VY=Y.forwardRef((e,t)=>{let{as:n="div"}=e,r=b4(e,twe);const[i,{isActive:o,onEnter:a,onEntering:s,onEntered:u,onExit:l,onExiting:c,onExited:f,mountOnEnter:d,unmountOnExit:p,transition:g=jY}]=GY(r);return J.jsx(pg.Provider,{value:null,children:J.jsx(fl.Provider,{value:null,children:J.jsx(g,{in:o,onEnter:a,onEntering:s,onEntered:u,onExit:l,onExiting:c,onExited:f,mountOnEnter:d,unmountOnExit:p,children:J.jsx(n,Object.assign({},i,{ref:t,hidden:!o,"aria-hidden":!o}))})})})});VY.displayName="TabPanel";const YY=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:o,transition:a,mountOnEnter:s,unmountOnExit:u,children:l}=e,[c,f]=ZV(i,o,r),d=dY(t),p=Y.useMemo(()=>n||((y,v)=>d?`${d}-${v}-${y}`:null),[d,n]),g=Y.useMemo(()=>({onSelect:f,activeKey:c,transition:a,mountOnEnter:s||!1,unmountOnExit:u||!1,getControlledId:y=>p(y,"tabpane"),getControllerId:y=>p(y,"tab")}),[f,c,a,s,u,p]);return J.jsx(pg.Provider,{value:g,children:J.jsx(fl.Provider,{value:f||null,children:l})})};YY.Panel=VY;const nwe=YY;function XY(e){return typeof e=="boolean"?e?FV:jY:e}const JY=({transition:e,...t})=>J.jsx(nwe,{...t,transition:XY(e)});JY.displayName="TabContainer";const rwe=JY,KY=Y.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Et(t,"tab-content"),J.jsx(n,{ref:i,className:ut(e,t),...r})));KY.displayName="TabContent";const iwe=KY,QY=Y.forwardRef(({bsPrefix:e,transition:t,...n},r)=>{const[{className:i,as:o="div",...a},{isActive:s,onEnter:u,onEntering:l,onEntered:c,onExit:f,onExiting:d,onExited:p,mountOnEnter:g,unmountOnExit:y,transition:v=FV}]=GY({...n,transition:XY(t)}),b=Et(e,"tab-pane");return J.jsx(pg.Provider,{value:null,children:J.jsx(fl.Provider,{value:null,children:J.jsx(v,{in:s,onEnter:u,onEntering:l,onEntered:c,onExit:f,onExiting:d,onExited:p,mountOnEnter:g,unmountOnExit:y,children:J.jsx(o,{...a,ref:r,className:ut(i,b,s&&"active")})})})})});QY.displayName="TabPane";const owe=QY,awe={eventKey:uo.oneOfType([uo.string,uo.number]),title:uo.node.isRequired,disabled:uo.bool,tabClassName:uo.string,tabAttrs:uo.object},ZY=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ZY.propTypes=awe;const ih=Object.assign(ZY,{Container:rwe,Content:iwe,Pane:owe}),swe=()=>{},eX=Y.forwardRef(({bsPrefix:e,name:t,className:n,checked:r,type:i,onChange:o,value:a,disabled:s,id:u,inputRef:l,...c},f)=>(e=Et(e,"btn-check"),J.jsxs(J.Fragment,{children:[J.jsx("input",{className:e,name:t,type:i,value:a,ref:l,autoComplete:"off",checked:!!r,disabled:!!s,onChange:o||swe,id:u}),J.jsx(V7,{...c,ref:f,className:ut(n,s&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:u})]})));eX.displayName="ToggleButton";const uwe=eX,by=[{name:"Sunil ARYA",rank:"Associate Professor",tel:"(852) 2358 8769",email:"arya@ust.hk",gs_id:"Azu2w_MAAAAJ",orcid:"0000-0003-0939-4192",linked_arxiv:1,citedby:7286,citedby5y:1601,hindex:29,hindex5y:19,i10index:48,i10index5y:29,cites_per_year:{1995:20,1996:23,1997:44,1998:72,1999:98,2e3:120,2001:144,2002:160,2003:174,2004:245,2005:228,2006:291,2007:274,2008:327,2009:368,2010:427,2011:377,2012:381,2013:391,2014:362,2015:298,2016:316,2017:387,2018:300,2019:289,2020:266,2021:278,2022:235,2023:232},url_picture:null,pub_per_year:[{1993:3,1994:3,1995:3,1996:1,1997:1,1998:3,1999:2,2e3:4,2001:1,2002:3,2003:2,2006:3,2007:2,2008:2,2009:1,2010:2,2011:1,2012:3,2013:1,2014:1,2015:2,2016:1,2017:3,2018:2,2019:5,2022:1,2023:2}]},{name:"Brahim BENSAOU",rank:"Associate Professor",tel:"(852) 2358 7014",email:"csbb@ust.hk",gs_id:"aQblKVwAAAAJ",orcid:"0000-0002-4473-3658",linked_arxiv:0,citedby:4638,citedby5y:939,hindex:31,hindex5y:17,i10index:78,i10index5y:31,cites_per_year:{1997:15,1998:16,1999:16,2e3:38,2001:52,2002:74,2003:134,2004:169,2005:203,2006:263,2007:291,2008:282,2009:320,2010:284,2011:257,2012:212,2013:189,2014:199,2015:211,2016:211,2017:172,2018:177,2019:193,2020:178,2021:176,2022:126,2023:88},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=aQblKVwAAAAJ&citpid=2",pub_per_year:[{1990:1,1992:1,1993:2,1994:1,1996:3,1997:4,1998:3,1999:5,2e3:13,2001:10,2002:4,2003:5,2004:15,2005:10,2006:4,2007:13,2008:11,2009:7,2010:4,2011:3,2012:3,2013:6,2014:10,2015:11,2016:10,2017:5,2018:5,2019:9,2020:6,2021:3,2022:3,2023:2}]},{name:"Gary Shueng Han CHAN",rank:"Professor",tel:"(852) 2358 6990",email:"gchan@ust.hk",gs_id:"uiCSOycAAAAJ",orcid:"0000-0003-4207-764X",linked_arxiv:0,citedby:7225,citedby5y:2835,hindex:43,hindex5y:22,i10index:140,i10index5y:55,cites_per_year:{1999:31,2e3:15,2001:44,2002:78,2003:143,2004:145,2005:181,2006:184,2007:233,2008:261,2009:313,2010:295,2011:314,2012:359,2013:349,2014:308,2015:263,2016:312,2017:428,2018:508,2019:525,2020:452,2021:420,2022:453,2023:472},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=uiCSOycAAAAJ&citpid=2",pub_per_year:[{1983:1,1990:2,1993:4,1994:6,1995:9,1996:2,1997:2,1998:4,1999:14,2e3:10,2001:18,2002:13,2003:19,2004:12,2005:15,2006:22,2007:23,2008:14,2009:17,2010:19,2011:17,2012:23,2013:10,2014:12,2015:21,2016:15,2017:15,2018:12,2019:8,2020:3,2021:12,2022:14,2023:12}]},{name:"Hao CHEN",rank:"Assistant Professor",tel:"(852) 2358 8346",email:"jhc@ust.hk",gs_id:"Z_t5DjwAAAAJ",orcid:"0000-0002-8400-3780",linked_arxiv:1,citedby:22097,citedby5y:21297,hindex:63,hindex5y:62,i10index:98,i10index5y:98,cites_per_year:{2016:125,2017:554,2018:1243,2019:2543,2020:3464,2021:4428,2022:4858,2023:4695},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=Z_t5DjwAAAAJ&citpid=5",pub_per_year:[{2014:2,2015:6,2016:14,2017:17,2018:14,2019:25,2020:14,2021:15,2022:21,2023:43}]},{name:"Kai CHEN",rank:"Professor",tel:"(852) 2358 7028",email:"kaichen@ust.hk",gs_id:"tnRV5QYAAAAJ",orcid:"0000-0003-2587-6028",linked_arxiv:1,citedby:5673,citedby5y:4395,hindex:38,hindex5y:33,i10index:91,i10index5y:78,cites_per_year:{2010:17,2011:43,2012:72,2013:92,2014:116,2015:222,2016:288,2017:360,2018:444,2019:606,2020:676,2021:831,2022:925,2023:904},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=tnRV5QYAAAAJ&citpid=2",pub_per_year:[{2006:4,2007:2,2009:2,2010:4,2011:6,2012:3,2013:4,2014:9,2015:8,2016:8,2017:9,2018:9,2019:8,2020:17,2021:16,2022:32,2023:23}]},{name:"Lei CHEN",rank:"Chair Professor",tel:"(852) 2358 6980",email:"leichen@ust.hk",gs_id:"gtglwgYAAAAJ",orcid:"0000-0002-8257-5806",linked_arxiv:0,citedby:24780,citedby5y:14477,hindex:78,hindex5y:59,i10index:362,i10index5y:276,cites_per_year:{2006:112,2007:142,2008:234,2009:426,2010:612,2011:638,2012:811,2013:1051,2014:1191,2015:1393,2016:1582,2017:1749,2018:1866,2019:2220,2020:2508,2021:2288,2022:2765,2023:2785},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=gtglwgYAAAAJ&citpid=3",pub_per_year:[{1980:1,1998:1,2002:3,2003:5,2004:7,2005:5,2006:9,2007:19,2008:35,2009:31,2010:30,2011:26,2012:24,2013:39,2014:43,2015:38,2016:32,2017:30,2018:33,2019:44,2020:59,2021:77,2022:63,2023:67}]},{name:"Long CHEN",rank:"Assistant Professor",tel:"(852) 2358 8836",email:"longchen@ust.hk",gs_id:"-gtmMpIAAAAJ",orcid:"0000-0001-6148-9709",linked_arxiv:1,citedby:4328,citedby5y:4291,hindex:23,hindex5y:23,i10index:33,i10index5y:33,cites_per_year:{2017:22,2018:132,2019:338,2020:503,2021:775,2022:1170,2023:1362},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=-gtmMpIAAAAJ&citpid=6",pub_per_year:[{2017:2,2018:1,2019:3,2020:4,2021:12,2022:22,2023:27}]},{name:"Qifeng CHEN",rank:"Assistant Professor",tel:"(852) 2358 8838",email:"cqf@ust.hk",gs_id:"lLMX9hcAAAAJ",orcid:"0000-0003-2199-3948",linked_arxiv:0,citedby:8328,citedby5y:7853,hindex:37,hindex5y:36,i10index:73,i10index5y:73,cites_per_year:{2013:25,2014:43,2015:81,2016:99,2017:173,2018:406,2019:692,2020:987,2021:1332,2022:1976,2023:2433},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=lLMX9hcAAAAJ&citpid=3",pub_per_year:[{2012:1,2013:3,2014:2,2015:1,2016:2,2017:2,2018:5,2019:7,2020:13,2021:28,2022:35,2023:35}]},{name:"Minhao CHENG",rank:"Assistant Professor",tel:"(852) 2358 7011",email:"minhaocheng@ust.hk",gs_id:"_LkC1yoAAAAJ",orcid:"0000-0003-3965-4215",linked_arxiv:0,citedby:2024,citedby5y:2019,hindex:15,hindex5y:15,i10index:18,i10index5y:18,cites_per_year:{2018:22,2019:148,2020:297,2021:447,2022:565,2023:520},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=_LkC1yoAAAAJ&citpid=1",pub_per_year:[{2015:1,2017:1,2018:7,2019:7,2020:6,2021:5,2022:10,2023:9}]},{name:"Siu Wing CHENG",rank:"Professor",tel:"(852) 2358 6973",email:"scheng@ust.hk",gs_id:"0nquEkQAAAAJ",orcid:"0000-0002-3557-9935",linked_arxiv:0,citedby:3870,citedby5y:1014,hindex:31,hindex5y:14,i10index:60,i10index5y:21,cites_per_year:{1991:11,1992:18,1993:19,1994:30,1995:31,1996:52,1997:48,1998:51,1999:41,2e3:60,2001:49,2002:50,2003:58,2004:96,2005:137,2006:122,2007:163,2008:166,2009:198,2010:179,2011:151,2012:140,2013:172,2014:181,2015:176,2016:176,2017:194,2018:172,2019:213,2020:179,2021:169,2022:135,2023:146},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=0nquEkQAAAAJ&citpid=2",pub_per_year:[{1989:1,1990:1,1991:1,1992:5,1993:6,1994:3,1995:4,1996:4,1997:1,1998:3,1999:4,2e3:6,2001:2,2002:3,2003:2,2004:6,2005:6,2006:5,2007:3,2008:3,2009:6,2010:2,2011:1,2012:4,2013:3,2014:6,2015:7,2016:5,2017:6,2018:4,2019:3,2020:4,2021:6,2022:4,2023:6}]},{name:"Shing Chi CHEUNG",rank:"Chair Professor",tel:"(852) 2358 7016",email:"sccheung@ust.hk",gs_id:"5RIgb3wAAAAJ",orcid:"0000-0002-3508-7172",linked_arxiv:1,citedby:9827,citedby5y:4362,hindex:50,hindex5y:32,i10index:168,i10index5y:73,cites_per_year:{1995:44,1996:44,1997:54,1998:43,1999:58,2e3:41,2001:64,2002:55,2003:141,2004:144,2005:204,2006:225,2007:272,2008:278,2009:368,2010:359,2011:342,2012:353,2013:429,2014:356,2015:437,2016:464,2017:406,2018:530,2019:643,2020:586,2021:739,2022:892,2023:965},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=5RIgb3wAAAAJ&citpid=2",pub_per_year:[{1991:2,1992:1,1993:2,1994:3,1995:5,1996:6,1997:6,1998:7,1999:9,2e3:1,2001:6,2002:10,2003:22,2004:14,2005:16,2006:21,2007:19,2008:8,2009:14,2010:16,2011:11,2012:7,2013:6,2014:7,2015:8,2016:12,2017:3,2018:13,2019:13,2020:7,2021:10,2022:11,2023:17}]},{name:"Albert Chi Shing CHUNG",rank:"Professor",tel:"(852) 2358 8776",email:"achung@ust.hk",gs_id:"MVf7Lq0AAAAJ",orcid:"0000-0003-4400-9261",linked_arxiv:0,citedby:6159,citedby5y:2400,hindex:40,hindex5y:22,i10index:105,i10index5y:43,cites_per_year:{2002:20,2003:37,2004:26,2005:40,2006:79,2007:128,2008:136,2009:185,2010:238,2011:292,2012:387,2013:381,2014:377,2015:406,2016:356,2017:349,2018:328,2019:284,2020:313,2021:409,2022:542,2023:519},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=MVf7Lq0AAAAJ&citpid=3",pub_per_year:[{1950:1,1951:2,1952:2,1953:2,1954:1,1955:5,1956:1,1957:2,1958:1,1959:1,1962:3,1964:1,1967:1,1969:2,1977:1,1997:1,1998:3,1999:1,2e3:6,2001:5,2002:3,2003:3,2004:13,2005:10,2006:19,2007:13,2008:9,2009:15,2010:10,2011:9,2012:5,2013:5,2014:1,2016:4,2017:7,2018:9,2019:6,2020:9,2021:5,2022:10,2023:2}]},{name:"Cunsheng DING",rank:"Professor",tel:"(852) 2358 7021",email:"cding@ust.hk",gs_id:"H9zO5eYAAAAJ",orcid:"0000-0001-9392-9860",linked_arxiv:0,citedby:13858,citedby5y:6537,hindex:63,hindex5y:44,i10index:164,i10index5y:130,cites_per_year:{1998:39,1999:69,2e3:48,2001:68,2002:89,2003:127,2004:146,2005:168,2006:215,2007:288,2008:319,2009:330,2010:358,2011:441,2012:419,2013:550,2014:625,2015:879,2016:936,2017:1011,2018:808,2019:1153,2020:1025,2021:1069,2022:1219,2023:1251},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=H9zO5eYAAAAJ&citpid=7",pub_per_year:[{1988:2,1990:1,1991:2,1993:2,1994:6,1996:6,1997:5,1998:9,1999:8,2e3:12,2001:9,2002:4,2003:8,2004:12,2005:8,2006:10,2007:9,2008:10,2009:6,2010:5,2011:8,2012:6,2013:12,2014:14,2015:8,2016:7,2017:14,2018:10,2019:10,2020:9,2021:10,2022:8,2023:13}]},{name:"Amir KAFSHDAR GOHARSHADY",rank:"Assistant Professor",tel:"(852) 2358 8339",email:"goharshady@ust.hk",gs_id:"4o8gvAYAAAAJ",orcid:"0000-0003-1702-6584",linked_arxiv:1,citedby:851,citedby5y:802,hindex:17,hindex5y:17,i10index:28,i10index5y:27,cites_per_year:{2016:11,2017:26,2018:25,2019:93,2020:119,2021:136,2022:139,2023:290},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=4o8gvAYAAAAJ&citpid=23",pub_per_year:[{2014:1,2015:1,2016:3,2017:2,2018:5,2019:8,2020:5,2021:4,2022:4,2023:13}]},{name:"Mordecai Jay GOLIN",rank:"Professor",tel:"(852) 2358 6993",email:"golin@ust.hk",gs_id:"YooPxQwAAAAJ",orcid:"0000-0002-1260-6574",linked_arxiv:1,citedby:2872,citedby5y:611,hindex:27,hindex5y:13,i10index:63,i10index5y:19,cites_per_year:{1993:17,1994:12,1995:21,1996:27,1997:20,1998:44,1999:30,2e3:45,2001:62,2002:81,2003:102,2004:126,2005:150,2006:135,2007:161,2008:118,2009:125,2010:136,2011:114,2012:113,2013:129,2014:131,2015:106,2016:109,2017:82,2018:115,2019:140,2020:60,2021:107,2022:91,2023:96},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=YooPxQwAAAAJ&citpid=2",pub_per_year:[{1988:1,1990:1,1991:3,1992:4,1993:6,1994:5,1995:7,1996:4,1997:1,1998:10,1999:3,2e3:5,2001:8,2002:10,2003:6,2004:10,2005:10,2006:3,2007:6,2008:3,2009:4,2010:4,2011:1,2012:2,2013:3,2014:5,2015:5,2016:6,2017:2,2018:3,2019:6,2021:4,2022:3,2023:4}]},{name:"Song GUO",rank:"Professor",tel:"(852) 2358 8833",email:"songguo@ust.hk",gs_id:"Ib-sizwAAAAJ",orcid:"0000-0001-9831-2202",linked_arxiv:0,citedby:29688,citedby5y:23830,hindex:86,hindex5y:73,i10index:456,i10index5y:383,cites_per_year:{2008:127,2009:102,2010:147,2011:131,2012:226,2013:390,2014:540,2015:803,2016:1202,2017:1813,2018:2691,2019:3108,2020:3932,2021:4559,2022:4916,2023:4549},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=Ib-sizwAAAAJ&citpid=8",pub_per_year:[{1994:1,2e3:1,2001:1,2002:1,2003:5,2004:8,2005:7,2006:13,2007:10,2008:18,2009:25,2010:32,2011:31,2012:31,2013:45,2014:67,2015:60,2016:57,2017:67,2018:63,2019:90,2020:88,2021:60,2022:81,2023:77}]},{name:"Yike GUO",rank:"Chair Professor",tel:"(852) 2358 6122",email:"yikeguo@ust.hk",gs_id:"-0q6cIYAAAAJ",orcid:"0000-0002-3075-2161",linked_arxiv:1,citedby:19158,citedby5y:13806,hindex:67,hindex5y:54,i10index:282,i10index5y:198,cites_per_year:{1997:63,1998:66,1999:80,2e3:84,2001:98,2002:96,2003:107,2004:146,2005:155,2006:162,2007:193,2008:196,2009:183,2010:192,2011:173,2012:303,2013:392,2014:483,2015:506,2016:558,2017:711,2018:1182,2019:1626,2020:2171,2021:2723,2022:3147,2023:2913},url_picture:null,pub_per_year:[{1989:3,1990:3,1991:4,1992:6,1993:2,1994:8,1995:5,1996:4,1997:12,1998:4,1999:7,2e3:9,2001:8,2002:12,2003:7,2004:10,2005:11,2006:6,2007:6,2008:10,2009:12,2010:14,2011:14,2012:22,2013:18,2014:27,2015:20,2016:26,2017:37,2018:43,2019:65,2020:53,2021:60,2022:64,2023:28,2024:2}]},{name:"Junxian HE",rank:"Assistant Professor",tel:"(852) 2358 8765",email:"junxianh@ust.hk",gs_id:"BIFGeoUAAAAJ",orcid:null,linked_arxiv:0,citedby:2465,citedby5y:2461,hindex:19,hindex5y:19,i10index:23,i10index5y:23,cites_per_year:{2018:20,2019:113,2020:267,2021:444,2022:699,2023:911},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=BIFGeoUAAAAJ&citpid=4",pub_per_year:[{2016:1,2017:1,2018:3,2019:5,2020:5,2021:2,2022:7,2023:13}]},{name:"Andrew Brian HORNER",rank:"Professor",tel:"(852) 2358 6998",email:"horner@ust.hk",gs_id:"irCp0RIAAAAJ",orcid:"0000-0002-9795-5190",linked_arxiv:0,citedby:2576,citedby5y:854,hindex:25,hindex5y:13,i10index:60,i10index5y:20,cites_per_year:{1993:13,1994:22,1995:30,1996:31,1997:38,1998:44,1999:42,2e3:36,2001:51,2002:27,2003:45,2004:37,2005:87,2006:72,2007:120,2008:61,2009:59,2010:75,2011:86,2012:77,2013:107,2014:98,2015:85,2016:147,2017:184,2018:150,2019:154,2020:131,2021:146,2022:152,2023:121},url_picture:null,pub_per_year:[{1983:2,1984:3,1985:3,1986:1,1991:1,1992:2,1993:7,1994:2,1995:8,1996:13,1997:6,1998:5,1999:4,2e3:4,2001:4,2002:3,2003:6,2004:5,2005:7,2006:10,2007:8,2008:2,2009:10,2010:4,2011:5,2012:3,2013:5,2014:10,2015:3,2016:8,2017:8,2018:9,2019:4,2020:2,2021:2,2022:5}]},{name:"Sung Hun KIM",rank:"Associate Professor",tel:"(852) 2358 6992",email:"hunkim@ust.hk",gs_id:"JE_m2UgAAAAJ",orcid:"0000-0003-4478-9720",linked_arxiv:0,citedby:18124,citedby5y:11919,hindex:57,hindex5y:44,i10index:79,i10index5y:68,cites_per_year:{2006:59,2007:90,2008:140,2009:180,2010:336,2011:355,2012:543,2013:582,2014:674,2015:891,2016:1047,2017:975,2018:1538,2019:1955,2020:2102,2021:2343,2022:2191,2023:1772},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=JE_m2UgAAAAJ&citpid=2",pub_per_year:[{2004:4,2005:3,2006:8,2007:4,2008:5,2009:10,2010:6,2011:11,2012:6,2013:9,2014:8,2015:7,2016:4,2017:4,2018:7,2019:4,2020:1}]},{name:"James Tin Yau KWOK",rank:"Professor",tel:"(852) 2358 7013",email:"jamesk@ust.hk",gs_id:"-oTraZ4AAAAJ",orcid:"0000-0002-4828-8248",linked_arxiv:0,citedby:25344,citedby5y:13373,hindex:71,hindex5y:46,i10index:165,i10index5y:122,cites_per_year:{2001:75,2002:118,2003:155,2004:185,2005:295,2006:382,2007:462,2008:581,2009:660,2010:819,2011:893,2012:925,2013:1016,2014:1170,2015:1211,2016:1326,2017:1339,2018:1530,2019:1714,2020:2121,2021:2498,2022:2868,2023:2618},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=-oTraZ4AAAAJ&citpid=2",pub_per_year:[{1997:2,1998:2,1999:3,2e3:3,2001:6,2002:7,2003:9,2004:20,2005:13,2006:24,2007:12,2008:10,2009:14,2010:13,2011:9,2012:7,2013:10,2014:12,2015:8,2016:10,2017:6,2018:10,2019:16,2020:16,2021:16,2022:13,2023:14}]},{name:"Bo LI",rank:"Chair Professor",tel:"(852) 2358 6976",email:"bli@ust.hk",gs_id:"SLgWQLEAAAAJ",orcid:"0000-0003-2955-750X",linked_arxiv:0,citedby:32310,citedby5y:13820,hindex:72,hindex5y:42,i10index:690,i10index5y:441,cites_per_year:{2e3:81,2001:116,2002:168,2003:283,2004:441,2005:598,2006:780,2007:940,2008:1126,2009:1301,2010:1469,2011:1349,2012:1477,2013:1321,2014:1507,2015:1552,2016:1607,2017:1708,2018:1803,2019:1901,2020:2229,2021:2487,2022:2722,2023:2634},url_picture:null,pub_per_year:[{1964:1,1984:1,1989:1,1992:5,1993:2,1994:7,1995:7,1996:3,1997:4,1998:18,1999:7,2e3:26,2001:13,2002:33,2003:43,2004:40,2005:32,2006:46,2007:34,2008:34,2009:45,2010:57,2011:48,2012:66,2013:63,2014:73,2015:78,2016:100,2017:91,2018:103,2019:127,2020:54,2021:44,2022:37,2023:57}]},{name:"Mo LI",rank:"Professor",tel:"(852) 2358 7017",email:"lim@ust.hk",gs_id:"kjiwE6IAAAAJ",orcid:"0000-0002-6047-9709",linked_arxiv:0,citedby:11599,citedby5y:5940,hindex:49,hindex5y:37,i10index:106,i10index5y:93,cites_per_year:{2007:31,2008:137,2009:204,2010:253,2011:321,2012:380,2013:534,2014:747,2015:877,2016:951,2017:1030,2018:1079,2019:1143,2020:1026,2021:911,2022:987,2023:792},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=kjiwE6IAAAAJ&citpid=9",pub_per_year:[{2006:2,2007:2,2008:9,2009:7,2010:7,2011:14,2012:9,2013:13,2014:19,2015:10,2016:12,2017:10,2018:11,2019:6,2020:5,2021:9,2022:7,2023:5}]},{name:"Fangzhen LIN",rank:"Professor",tel:"(852) 2358 6975",email:"flin@ust.hk",gs_id:"klFoxpYAAAAJ",orcid:"0000-0002-3141-8675",linked_arxiv:0,citedby:6264,citedby5y:918,hindex:33,hindex5y:15,i10index:64,i10index5y:19,cites_per_year:{1991:16,1992:24,1993:56,1994:76,1995:98,1996:104,1997:158,1998:187,1999:174,2e3:159,2001:177,2002:175,2003:213,2004:225,2005:294,2006:264,2007:325,2008:339,2009:239,2010:269,2011:317,2012:233,2013:269,2014:239,2015:235,2016:205,2017:159,2018:159,2019:164,2020:153,2021:160,2022:133,2023:147},url_picture:null,pub_per_year:[{1980:1,1983:1,1985:1,1988:1,1989:1,1990:1,1991:2,1992:3,1993:2,1994:6,1995:6,1996:4,1997:8,1998:4,1999:4,2e3:3,2001:8,2002:3,2003:4,2004:3,2005:2,2006:5,2007:8,2008:8,2009:8,2010:3,2011:8,2012:6,2013:5,2014:2,2015:4,2016:4,2017:6,2018:2,2019:4,2020:2,2021:4,2022:3,2023:6}]},{name:"Qiong LUO",rank:"Professor",tel:"(852) 2358 6995",email:"luo@ust.hk",gs_id:"SqAsppUAAAAJ",orcid:"0000-0002-2861-9492",linked_arxiv:0,citedby:9752,citedby5y:2574,hindex:41,hindex5y:27,i10index:93,i10index5y:55,cites_per_year:{2001:29,2002:151,2003:216,2004:242,2005:277,2006:242,2007:273,2008:300,2009:374,2010:536,2011:558,2012:706,2013:658,2014:702,2015:626,2016:638,2017:467,2018:499,2019:437,2020:386,2021:462,2022:422,2023:366},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=SqAsppUAAAAJ&citpid=2",pub_per_year:[{2001:7,2002:4,2003:1,2004:9,2005:9,2006:10,2007:14,2008:13,2009:11,2010:11,2011:8,2012:7,2013:7,2014:3,2015:3,2016:5,2017:10,2018:10,2019:8,2020:11,2021:3,2022:8,2023:6}]},{name:"Xiaojuan MA",rank:"Associate Head and Associate Professor",tel:"(852) 2358 6991",email:"mxj@ust.hk",gs_id:"TN0zm80AAAAJ",orcid:"0000-0002-9847-7784",linked_arxiv:0,citedby:4582,citedby5y:4187,hindex:35,hindex5y:34,i10index:114,i10index5y:105,cites_per_year:{2010:22,2011:8,2012:14,2013:20,2014:18,2015:40,2016:65,2017:181,2018:386,2019:481,2020:575,2021:771,2022:972,2023:991},url_picture:null,pub_per_year:[{2006:1,2008:3,2009:3,2010:8,2011:1,2012:1,2014:9,2015:7,2016:18,2017:23,2018:21,2019:26,2020:17,2021:21,2022:35,2023:13,2024:1}]},{name:"Brian Kan Wing MAK",rank:"Associate Professor",tel:"(852) 2358 7012",email:"bmak@ust.hk",gs_id:"Zx8p8RsAAAAJ",orcid:"0000-0001-6787-5555",linked_arxiv:0,citedby:2850,citedby5y:1051,hindex:25,hindex5y:17,i10index:48,i10index5y:19,cites_per_year:{1996:8,1997:20,1998:27,1999:18,2e3:26,2001:43,2002:50,2003:72,2004:89,2005:72,2006:115,2007:123,2008:132,2009:139,2010:120,2011:102,2012:98,2013:110,2014:103,2015:93,2016:92,2017:90,2018:106,2019:130,2020:206,2021:190,2022:194,2023:220},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=Zx8p8RsAAAAJ&citpid=5",pub_per_year:[{1989:1,1990:1,1991:1,1992:1,1993:1,1994:1,1995:1,1996:2,1997:3,1998:3,2e3:5,2001:4,2002:5,2003:6,2004:7,2005:7,2006:9,2007:4,2008:3,2009:3,2010:4,2011:2,2012:4,2013:2,2014:5,2015:2,2016:3,2017:6,2018:12,2019:3,2020:5,2021:3,2022:6,2023:4}]},{name:"Wilfred Siu Hung NG",rank:"Associate Professor",tel:"(852) 2358 6979",email:"wng@ust.hk",gs_id:"NJ6YPT4AAAAJ",orcid:"0000-0001-6639-0521",linked_arxiv:0,citedby:5410,citedby5y:2133,hindex:42,hindex5y:23,i10index:96,i10index5y:53,cites_per_year:{2003:18,2004:15,2005:26,2006:76,2007:117,2008:162,2009:193,2010:178,2011:204,2012:234,2013:269,2014:346,2015:382,2016:468,2017:462,2018:392,2019:355,2020:393,2021:384,2022:342,2023:267},url_picture:null,pub_per_year:[{1997:4,1998:1,1999:4,2e3:4,2001:4,2002:6,2003:9,2004:5,2005:3,2006:12,2007:20,2008:12,2009:6,2010:2,2011:8,2012:8,2013:13,2014:12,2015:12,2016:5,2017:3,2019:3,2020:6,2022:4}]},{name:"Dimitris PAPADIAS",rank:"Professor",tel:"(852) 2358 6971",email:"dimitris@ust.hk",gs_id:"7BPMWSkAAAAJ",orcid:"0000-0001-5588-1026",linked_arxiv:0,citedby:21986,citedby5y:3787,hindex:72,hindex5y:31,i10index:155,i10index5y:73,cites_per_year:{1995:81,1996:105,1997:128,1998:170,1999:186,2e3:234,2001:206,2002:272,2003:429,2004:507,2005:845,2006:1021,2007:987,2008:1045,2009:1380,2010:1377,2011:1221,2012:1384,2013:1386,2014:1269,2015:1326,2016:1132,2017:1088,2018:881,2019:813,2020:677,2021:563,2022:515,2023:338},url_picture:null,pub_per_year:[{1991:2,1992:1,1993:2,1994:7,1995:10,1996:5,1997:7,1998:12,1999:10,2e3:1,2001:11,2002:16,2003:15,2004:13,2005:16,2006:9,2007:8,2008:6,2009:16,2010:6,2011:4,2012:1,2013:5,2014:2,2015:6,2017:2,2018:2,2019:2,2020:1,2021:1,2022:1}]},{name:"Dimitris PAPADOPOULOS",rank:"Associate Professor",tel:"(852) 2358 8767",email:"dipapado@ust.hk",gs_id:"9Q8DH5sAAAAJ",orcid:"0000-0003-2621-3015",linked_arxiv:0,citedby:2109,citedby5y:1928,hindex:22,hindex5y:21,i10index:30,i10index5y:28,cites_per_year:{2014:16,2015:37,2016:45,2017:59,2018:106,2019:170,2020:272,2021:407,2022:444,2023:508},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=9Q8DH5sAAAAJ&citpid=3",pub_per_year:[{2011:1,2014:5,2015:5,2016:5,2017:7,2018:8,2019:4,2020:4,2021:7,2022:3,2023:5}]},{name:"Lionel PARREAUX",rank:"Assistant Professor",tel:"(852) 2358 8341",email:"parreaux@ust.hk",gs_id:"jQqTdHwAAAAJ",orcid:"0000-0002-8805-0728",linked_arxiv:1,citedby:223,citedby5y:207,hindex:7,hindex5y:7,i10index:7,i10index5y:7,cites_per_year:{2016:3,2017:13,2018:29,2019:37,2020:23,2021:37,2022:39,2023:42},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=jQqTdHwAAAAJ&citpid=1",pub_per_year:[{2016:1,2017:3,2018:1,2019:2,2020:3,2021:1,2022:3,2023:3}]},{name:"Huamin QU",rank:"Chair Professor",tel:"(852) 2358 6985",email:"huamin@ust.hk",gs_id:"J7a5zGEAAAAJ",orcid:"0000-0002-3344-9694",linked_arxiv:0,citedby:11636,citedby5y:7783,hindex:56,hindex5y:51,i10index:192,i10index5y:160,cites_per_year:{2007:35,2008:46,2009:96,2010:102,2011:195,2012:273,2013:353,2014:406,2015:563,2016:733,2017:781,2018:952,2019:1014,2020:1202,2021:1403,2022:1592,2023:1605},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=J7a5zGEAAAAJ&citpid=7",pub_per_year:[{1912:1,1998:1,1999:1,2e3:2,2001:3,2002:1,2003:2,2004:4,2005:4,2006:9,2007:9,2008:7,2009:9,2010:9,2011:14,2012:12,2013:18,2014:17,2015:17,2016:24,2017:23,2018:20,2019:27,2020:25,2021:27,2022:29,2023:33}]},{name:"Long QUAN",rank:"Professor",tel:"(852) 2358 7018",email:"quan@ust.hk",gs_id:"ZMLhZJ8AAAAJ",orcid:"0000-0002-0329-9437",linked_arxiv:0,citedby:16278,citedby5y:6709,hindex:66,hindex5y:41,i10index:157,i10index5y:87,cites_per_year:{1994:60,1995:90,1996:73,1997:112,1998:133,1999:111,2e3:149,2001:134,2002:156,2003:154,2004:237,2005:270,2006:375,2007:385,2008:487,2009:597,2010:687,2011:647,2012:784,2013:784,2014:769,2015:741,2016:647,2017:617,2018:552,2019:669,2020:917,2021:1200,2022:1608,2023:1748},url_picture:null,pub_per_year:[{1983:1,1988:4,1989:3,1990:4,1991:2,1992:4,1993:6,1994:4,1995:11,1996:4,1997:8,1998:8,1999:8,2e3:11,2001:7,2002:9,2003:10,2004:18,2005:11,2006:10,2007:9,2008:10,2009:6,2010:14,2011:4,2012:4,2013:5,2014:11,2015:11,2016:4,2017:8,2018:6,2019:7,2020:8,2021:3,2022:4,2023:2}]},{name:"Pedro SANDER",rank:"Professor",tel:"(852) 2358 6983",email:"psander@ust.hk",gs_id:"GIToYFwAAAAJ",orcid:"0000-0002-0435-9833",linked_arxiv:0,citedby:6246,citedby5y:2083,hindex:36,hindex5y:22,i10index:63,i10index5y:38,cites_per_year:{2001:27,2002:65,2003:139,2004:192,2005:231,2006:263,2007:224,2008:224,2009:241,2010:277,2011:290,2012:398,2013:323,2014:299,2015:287,2016:331,2017:222,2018:296,2019:281,2020:292,2021:381,2022:452,2023:379},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=GIToYFwAAAAJ&citpid=2",pub_per_year:[{1999:1,2e3:2,2001:2,2002:2,2003:5,2004:6,2005:7,2006:6,2007:10,2008:7,2009:8,2010:3,2011:4,2012:7,2013:3,2014:3,2015:1,2016:4,2017:8,2018:5,2019:5,2020:1,2021:3,2022:4,2023:1}]},{name:"Dongdong SHE",rank:"Assistant Professor",tel:"(852) 2358 7029",email:"dongdong@ust.hk",gs_id:"CAd3jhcAAAAJ",orcid:"0000-0001-6655-0468",linked_arxiv:0,citedby:537,citedby5y:510,hindex:7,hindex5y:7,i10index:7,i10index5y:7,cites_per_year:{2016:10,2017:16,2018:23,2019:32,2020:83,2021:97,2022:131,2023:143},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=CAd3jhcAAAAJ&citpid=5",pub_per_year:[{2015:1,2016:1,2019:1,2020:3,2021:1,2022:3,2023:2}]},{name:"Jiasi SHEN",rank:"Assistant Professor",tel:"(852) 2358 8835",email:"sjs@ust.hk",gs_id:"pyLCHy0AAAAJ",orcid:"0000-0002-5904-3641",linked_arxiv:1,citedby:110,citedby5y:106,hindex:7,hindex5y:6,i10index:5,i10index5y:5,cites_per_year:{2016:1,2017:3,2018:8,2019:9,2020:10,2021:30,2022:34,2023:15},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=pyLCHy0AAAAJ&citpid=3",pub_per_year:[{2017:2,2018:2,2019:3,2020:1,2021:4,2022:2}]},{name:"Yangqiu SONG",rank:"Associate Professor",tel:"(852) 2358 6987",email:"yqsong@ust.hk",gs_id:"MdQZ-q8AAAAJ",orcid:"0000-0002-7818-6090",linked_arxiv:0,citedby:12545,citedby5y:8948,hindex:54,hindex5y:47,i10index:144,i10index5y:128,cites_per_year:{2008:41,2009:81,2010:141,2011:206,2012:300,2013:399,2014:452,2015:526,2016:622,2017:642,2018:855,2019:1081,2020:1358,2021:1656,2022:1909,2023:2074},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=MdQZ-q8AAAAJ&citpid=3",pub_per_year:[{2005:1,2006:1,2007:8,2008:10,2009:9,2010:5,2011:5,2012:4,2013:4,2014:8,2015:16,2016:15,2017:19,2018:18,2019:18,2020:24,2021:27,2022:26,2023:34}]},{name:"Chiew Lan TAI",rank:"Professor",tel:"(852) 2358 7020",email:"taicl@ust.hk",gs_id:"DORzgBQAAAAJ",orcid:"0000-0002-1486-1974",linked_arxiv:0,citedby:7422,citedby5y:3212,hindex:44,hindex5y:26,i10index:82,i10index5y:57,cites_per_year:{2002:19,2003:29,2004:65,2005:96,2006:154,2007:195,2008:171,2009:271,2010:328,2011:344,2012:413,2013:441,2014:405,2015:411,2016:411,2017:359,2018:366,2019:412,2020:427,2021:481,2022:644,2023:875},url_picture:null,pub_per_year:[{1990:1,1993:1,1994:1,1996:1,1999:3,2e3:2,2001:5,2002:8,2003:2,2004:7,2005:8,2006:1,2007:6,2008:7,2009:2,2010:7,2011:4,2012:5,2013:3,2014:3,2015:5,2016:2,2017:2,2018:6,2019:1,2020:7,2021:4,2022:5}]},{name:"Chi Keung TANG",rank:"Professor",tel:"(852) 2358 8775",email:"cktang@ust.hk",gs_id:"EWfpM74AAAAJ",orcid:"0000-0003-2488-1589",linked_arxiv:0,citedby:16082,citedby5y:7686,hindex:64,hindex5y:40,i10index:116,i10index5y:85,cites_per_year:{2001:65,2002:90,2003:98,2004:162,2005:263,2006:359,2007:481,2008:436,2009:574,2010:618,2011:654,2012:642,2013:729,2014:735,2015:780,2016:757,2017:680,2018:731,2019:941,2020:1048,2021:1335,2022:1783,2023:1833},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=EWfpM74AAAAJ&citpid=2",pub_per_year:[{1994:1,1995:1,1998:5,1999:3,2e3:5,2001:3,2002:1,2003:4,2004:14,2005:7,2006:10,2007:6,2008:11,2009:9,2010:3,2011:4,2012:1,2013:5,2014:8,2015:5,2016:4,2017:5,2018:10,2019:7,2020:12,2021:9,2022:15,2023:18}]},{name:"Shuai WANG",rank:"Assistant Professor",tel:"(852) 2358 8328",email:"shuaiw@ust.hk",gs_id:"POlWWAsAAAAJ",orcid:"0000-0002-0866-0308",linked_arxiv:0,citedby:1807,citedby5y:1708,hindex:21,hindex5y:21,i10index:40,i10index5y:40,cites_per_year:{2016:17,2017:70,2018:150,2019:163,2020:227,2021:285,2022:375,2023:503},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=POlWWAsAAAAJ&citpid=3",pub_per_year:[{2015:2,2016:5,2017:10,2018:9,2019:8,2020:11,2021:11,2022:26,2023:34}]},{name:"Wei WANG",rank:"Associate Professor",tel:"(852) 2358 6972",email:"weiwa@ust.hk",gs_id:"FeJrzPMAAAAJ",orcid:"0000-0002-4585-4152",linked_arxiv:0,citedby:3702,citedby5y:3104,hindex:32,hindex5y:29,i10index:56,i10index5y:54,cites_per_year:{2012:15,2013:34,2014:97,2015:135,2016:115,2017:147,2018:189,2019:204,2020:329,2021:575,2022:875,2023:921},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=FeJrzPMAAAAJ&citpid=3",pub_per_year:[{2009:2,2010:1,2011:1,2012:1,2013:6,2014:6,2015:1,2016:3,2017:8,2018:10,2019:9,2020:11,2021:14,2022:11,2023:10}]},{name:"Raymond Chi Wing WONG",rank:"Professor and Associate Head",tel:"(852) 2358 6982",email:"raywong@ust.hk",gs_id:"IKgiD0AAAAAJ",orcid:"0000-0001-7045-6503",linked_arxiv:0,citedby:6014,citedby5y:2892,hindex:43,hindex5y:31,i10index:93,i10index5y:79,cites_per_year:{2005:18,2006:27,2007:76,2008:124,2009:189,2010:256,2011:232,2012:286,2013:329,2014:331,2015:378,2016:376,2017:405,2018:374,2019:411,2020:433,2021:592,2022:591,2023:487},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=IKgiD0AAAAAJ&citpid=2",pub_per_year:[{1994:1,2003:1,2004:4,2005:11,2006:6,2007:13,2008:7,2009:18,2010:14,2011:10,2012:11,2013:11,2014:13,2015:11,2016:6,2017:10,2018:4,2019:19,2020:17,2021:14,2022:11,2023:17}]},{name:"Dekai WU",rank:"Professor",tel:"(852) 2358 6989",email:"dekai@ust.hk",gs_id:"NMkg-64AAAAJ",orcid:"0000-0001-9833-361X",linked_arxiv:0,citedby:6303,citedby5y:859,hindex:39,hindex5y:13,i10index:84,i10index5y:19,cites_per_year:{1989:19,1990:17,1991:21,1992:41,1993:133,1994:48,1995:69,1996:57,1997:73,1998:76,1999:79,2e3:120,2001:86,2002:120,2003:148,2004:162,2005:209,2006:207,2007:263,2008:352,2009:304,2010:371,2011:386,2012:309,2013:406,2014:405,2015:335,2016:363,2017:182,2018:179,2019:129,2020:141,2021:164,2022:131,2023:113},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=NMkg-64AAAAJ&citpid=2",pub_per_year:[{1986:2,1987:3,1989:1,1990:1,1991:1,1992:3,1993:5,1994:7,1995:6,1996:3,1997:4,1998:2,1999:12,2e3:6,2002:1,2003:2,2004:11,2005:11,2006:6,2007:6,2008:2,2009:8,2010:7,2011:13,2012:9,2013:21,2014:15,2015:6,2016:9,2018:2,2020:3}]},{name:"Dan XU",rank:"Assistant Professor",tel:"(852) 2358 8837",email:"danxu@ust.hk",gs_id:"OuSPv-AAAAAJ",orcid:"0000-0003-0136-9603",linked_arxiv:0,citedby:6668,citedby5y:6240,hindex:40,hindex5y:39,i10index:73,i10index5y:70,cites_per_year:{2014:42,2015:63,2016:119,2017:153,2018:408,2019:708,2020:907,2021:1177,2022:1437,2023:1595},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=OuSPv-AAAAAJ&citpid=13",pub_per_year:[{2011:2,2013:4,2014:3,2015:4,2016:4,2017:6,2018:9,2019:14,2020:9,2021:12,2022:11,2023:14}]},{name:"Dit Yan YEUNG",rank:"Chair Professor",tel:"(852) 2358 6977",email:"dyyeung@ust.hk",gs_id:"nEsOOx8AAAAJ",orcid:"0000-0003-3716-8125",linked_arxiv:0,citedby:36248,citedby5y:23830,hindex:73,hindex5y:52,i10index:180,i10index5y:116,cites_per_year:{2001:94,2002:112,2003:135,2004:197,2005:235,2006:318,2007:360,2008:489,2009:551,2010:590,2011:700,2012:780,2013:877,2014:1076,2015:1263,2016:1666,2017:2226,2018:3020,2019:3708,2020:4107,2021:4526,2022:4647,2023:3817},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=nEsOOx8AAAAJ&citpid=6",pub_per_year:[{1985:2,1986:1,1987:3,1988:4,1989:1,1991:3,1993:4,1994:6,1995:9,1996:8,1997:3,1998:8,1999:6,2e3:3,2001:3,2002:9,2003:5,2004:16,2005:4,2006:25,2007:15,2008:13,2009:10,2010:12,2011:7,2012:8,2013:7,2014:6,2015:15,2016:5,2017:14,2018:4,2019:9,2020:3,2021:9,2022:11,2023:18}]},{name:"Ke YI",rank:"Professor",tel:"(852) 2358 8770",email:"yike@ust.hk",gs_id:"dWcZPFEAAAAJ",orcid:"0000-0002-2178-3716",linked_arxiv:0,citedby:7009,citedby5y:2913,hindex:49,hindex5y:30,i10index:94,i10index5y:68,cites_per_year:{2005:47,2006:57,2007:73,2008:114,2009:200,2010:349,2011:380,2012:422,2013:488,2014:444,2015:479,2016:448,2017:459,2018:478,2019:517,2020:488,2021:452,2022:492,2023:484},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=dWcZPFEAAAAJ&citpid=7",pub_per_year:[{1991:1,2002:1,2003:2,2004:1,2005:4,2006:2,2007:3,2008:8,2009:12,2010:13,2011:12,2012:10,2013:9,2014:5,2015:6,2016:9,2017:6,2018:4,2019:9,2020:8,2021:11,2022:12,2023:8}]},{name:"Binhang YUAN",rank:"Assistant Professor",tel:"(852) 2358 6978",email:"biyuan@ust.hk",gs_id:"TflKxcIAAAAJ",orcid:"0000-0002-3188-2769",linked_arxiv:1,citedby:737,citedby5y:726,hindex:13,hindex5y:13,i10index:15,i10index5y:15,cites_per_year:{2016:6,2017:2,2018:11,2019:17,2020:36,2021:58,2022:129,2023:473},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=TflKxcIAAAAJ&citpid=1",pub_per_year:[{2013:1,2014:1,2015:1,2016:2,2017:1,2018:1,2019:2,2020:4,2021:7,2022:10,2023:5}]},{name:"Charles Chuan ZHANG",rank:"Professor",tel:"(852) 2358 6997",email:"charlesz@ust.hk",gs_id:"Zmppp9kAAAAJ",orcid:"0000-0001-6417-1034",linked_arxiv:0,citedby:2952,citedby5y:1012,hindex:24,hindex5y:15,i10index:52,i10index5y:23,cites_per_year:{2002:8,2003:31,2004:60,2005:99,2006:130,2007:119,2008:111,2009:101,2010:95,2011:93,2012:102,2013:168,2014:181,2015:194,2016:204,2017:154,2018:158,2019:142,2020:121,2021:155,2022:201,2023:233},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=Zmppp9kAAAAJ&citpid=2",pub_per_year:[{1979:1,1982:1,1983:1,1984:1,1986:2,1988:1,1989:5,1990:1,1991:1,1992:8,1993:3,1994:4,1995:8,1996:10,1997:15,1998:19,1999:14,2e3:15,2001:15,2002:19,2003:28,2004:30,2005:37,2006:38,2007:32,2008:26,2009:17,2010:31,2011:40,2012:35,2013:25,2014:12,2015:6,2016:6,2017:3,2018:3,2019:5,2020:7,2021:13,2022:7,2023:9}]},{name:"Nevin Lianwen ZHANG",rank:"Professor",tel:"(852) 2358 7015",email:"lzhang@ust.hk",gs_id:"18_xlPUAAAAJ",orcid:"0000-0002-4662-3217",linked_arxiv:0,citedby:6476,citedby5y:1867,hindex:38,hindex5y:24,i10index:70,i10index5y:45,cites_per_year:{1994:16,1995:21,1996:11,1997:21,1998:64,1999:52,2e3:65,2001:84,2002:102,2003:130,2004:178,2005:199,2006:240,2007:228,2008:307,2009:279,2010:329,2011:308,2012:366,2013:359,2014:286,2015:343,2016:261,2017:250,2018:299,2019:288,2020:291,2021:300,2022:382,2023:305},url_picture:null,pub_per_year:[{1803:1,1986:2,1989:1,1992:2,1993:2,1994:9,1995:3,1996:5,1997:3,1998:6,1999:4,2e3:2,2001:10,2002:3,2003:6,2004:6,2005:6,2006:11,2007:5,2008:9,2009:7,2010:5,2011:17,2012:14,2013:17,2014:11,2015:6,2016:4,2017:9,2018:8,2019:8,2020:6,2021:5,2022:14,2023:6}]},{name:"Qian ZHANG",rank:"Chair Professor",tel:"(852) 2358 8766",email:"qianzh@ust.hk",gs_id:"XTlaQMkAAAAJ",orcid:"0000-0001-9205-1881",linked_arxiv:0,citedby:29921,citedby5y:8329,hindex:86,hindex5y:42,i10index:432,i10index5y:201,cites_per_year:{2002:94,2003:170,2004:330,2005:495,2006:680,2007:830,2008:1149,2009:1388,2010:1689,2011:1815,2012:2139,2013:2178,2014:2277,2015:2027,2016:1972,2017:1880,2018:1694,2019:1517,2020:1296,2021:1306,2022:1363,2023:1142},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=XTlaQMkAAAAJ&citpid=1",pub_per_year:[{1998:1,2e3:8,2001:24,2002:18,2003:35,2004:18,2005:35,2006:55,2007:57,2008:41,2009:65,2010:42,2011:22,2012:41,2013:36,2014:46,2015:44,2016:30,2017:14,2018:30,2019:25,2020:20,2021:35,2022:33,2023:28}]},{name:"Xiaofang ZHOU",rank:"Head and Chair Professor",tel:"(852) 2358 8340",email:"zxf@ust.hk",gs_id:"y6m820wAAAAJ",orcid:"0000-0001-6343-1455",linked_arxiv:0,citedby:21770,citedby5y:13315,hindex:69,hindex5y:55,i10index:302,i10index5y:209,cites_per_year:{2004:63,2005:79,2006:102,2007:121,2008:214,2009:276,2010:354,2011:501,2012:601,2013:809,2014:823,2015:1108,2016:1416,2017:1511,2018:1905,2019:1986,2020:2230,2021:2284,2022:2381,2023:2488},url_picture:"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=y6m820wAAAAJ&citpid=3",pub_per_year:[{1986:1,1993:5,1994:7,1995:3,1996:2,1997:5,1998:3,1999:9,2e3:12,2001:3,2002:4,2003:13,2004:13,2005:22,2006:27,2007:26,2008:23,2009:33,2010:30,2011:39,2012:30,2013:25,2014:35,2015:39,2016:35,2017:30,2018:27,2019:41,2020:37,2021:27,2022:24,2023:32}]}];var Xw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xw.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,p=4,g=1,y=2,v=1,b=2,x=4,_=8,A=16,E=32,$=64,S=128,k=256,O=512,N=30,F="...",W=800,I=16,M=1,D=2,L=3,j=1/0,z=9007199254740991,H=17976931348623157e292,U=0/0,V=4294967295,K=V-1,Q=V>>>1,ne=[["ary",S],["bind",v],["bindKey",b],["curry",_],["curryRight",A],["flip",O],["partial",E],["partialRight",$],["rearg",k]],ce="[object Arguments]",ye="[object Array]",fe="[object AsyncFunction]",pe="[object Boolean]",te="[object Date]",Se="[object DOMException]",Ae="[object Error]",re="[object Function]",qe="[object GeneratorFunction]",_e="[object Map]",Ze="[object Number]",Ve="[object Null]",ht="[object Object]",jr="[object Promise]",Mo="[object Proxy]",Lt="[object RegExp]",Te="[object Set]",un="[object String]",$t="[object Symbol]",Nt="[object Undefined]",On="[object WeakMap]",xi="[object WeakSet]",Ur="[object ArrayBuffer]",Wr="[object DataView]",Gg="[object Float32Array]",Nl="[object Float64Array]",Rl="[object Int8Array]",Nf="[object Int16Array]",Fl="[object Int32Array]",Vg="[object Uint8Array]",Yg="[object Uint8ClampedArray]",NS="[object Uint16Array]",RS="[object Uint32Array]",Rce=/\b__p \+= '';/g,Fce=/\b(__p \+=) '' \+/g,Dce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fF=/&(?:amp|lt|gt|quot|#39);/g,dF=/[&<>"']/g,Pce=RegExp(fF.source),Lce=RegExp(dF.source),Ice=/<%-([\s\S]+?)%>/g,zce=/<%([\s\S]+?)%>/g,hF=/<%=([\s\S]+?)%>/g,Bce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jce=/^\w*$/,Uce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FS=/[\\^$.*+?()[\]{}|]/g,Wce=RegExp(FS.source),DS=/^\s+/,Hce=/\s/,qce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gce=/\{\n\/\* \[wrapped with (.+)\] \*/,Vce=/,? & /,Yce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xce=/[()=,{}\[\]\/\s]/,Jce=/\\(\\)?/g,Kce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pF=/\w*$/,Qce=/^[-+]0x[0-9a-f]+$/i,Zce=/^0b[01]+$/i,efe=/^\[object .+?Constructor\]$/,tfe=/^0o[0-7]+$/i,nfe=/^(?:0|[1-9]\d*)$/,rfe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cv=/($^)/,ife=/['\n\r\u2028\u2029\\]/g,kv="\\ud800-\\udfff",ofe="\\u0300-\\u036f",afe="\\ufe20-\\ufe2f",sfe="\\u20d0-\\u20ff",gF=ofe+afe+sfe,mF="\\u2700-\\u27bf",yF="a-z\\xdf-\\xf6\\xf8-\\xff",ufe="\\xac\\xb1\\xd7\\xf7",lfe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cfe="\\u2000-\\u206f",ffe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vF="A-Z\\xc0-\\xd6\\xd8-\\xde",bF="\\ufe0e\\ufe0f",xF=ufe+lfe+cfe+ffe,PS="['’]",dfe="["+kv+"]",wF="["+xF+"]",Tv="["+gF+"]",_F="\\d+",hfe="["+mF+"]",AF="["+yF+"]",SF="[^"+kv+xF+_F+mF+yF+vF+"]",LS="\\ud83c[\\udffb-\\udfff]",pfe="(?:"+Tv+"|"+LS+")",EF="[^"+kv+"]",IS="(?:\\ud83c[\\udde6-\\uddff]){2}",zS="[\\ud800-\\udbff][\\udc00-\\udfff]",U0="["+vF+"]",$F="\\u200d",CF="(?:"+AF+"|"+SF+")",gfe="(?:"+U0+"|"+SF+")",kF="(?:"+PS+"(?:d|ll|m|re|s|t|ve))?",TF="(?:"+PS+"(?:D|LL|M|RE|S|T|VE))?",MF=pfe+"?",OF="["+bF+"]?",mfe="(?:"+$F+"(?:"+[EF,IS,zS].join("|")+")"+OF+MF+")*",yfe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vfe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",NF=OF+MF+mfe,bfe="(?:"+[hfe,IS,zS].join("|")+")"+NF,xfe="(?:"+[EF+Tv+"?",Tv,IS,zS,dfe].join("|")+")",wfe=RegExp(PS,"g"),_fe=RegExp(Tv,"g"),BS=RegExp(LS+"(?="+LS+")|"+xfe+NF,"g"),Afe=RegExp([U0+"?"+AF+"+"+kF+"(?="+[wF,U0,"$"].join("|")+")",gfe+"+"+TF+"(?="+[wF,U0+CF,"$"].join("|")+")",U0+"?"+CF+"+"+kF,U0+"+"+TF,vfe,yfe,_F,bfe].join("|"),"g"),Sfe=RegExp("["+$F+kv+gF+bF+"]"),Efe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cfe=-1,Xt={};Xt[Gg]=Xt[Nl]=Xt[Rl]=Xt[Nf]=Xt[Fl]=Xt[Vg]=Xt[Yg]=Xt[NS]=Xt[RS]=!0,Xt[ce]=Xt[ye]=Xt[Ur]=Xt[pe]=Xt[Wr]=Xt[te]=Xt[Ae]=Xt[re]=Xt[_e]=Xt[Ze]=Xt[ht]=Xt[Lt]=Xt[Te]=Xt[un]=Xt[On]=!1;var qt={};qt[ce]=qt[ye]=qt[Ur]=qt[Wr]=qt[pe]=qt[te]=qt[Gg]=qt[Nl]=qt[Rl]=qt[Nf]=qt[Fl]=qt[_e]=qt[Ze]=qt[ht]=qt[Lt]=qt[Te]=qt[un]=qt[$t]=qt[Vg]=qt[Yg]=qt[NS]=qt[RS]=!0,qt[Ae]=qt[re]=qt[On]=!1;var kfe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Tfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mfe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ofe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nfe=parseFloat,Rfe=parseInt,RF=typeof c1=="object"&&c1&&c1.Object===Object&&c1,Ffe=typeof self=="object"&&self&&self.Object===Object&&self,sr=RF||Ffe||Function("return this")(),jS=t&&!t.nodeType&&t,Rf=jS&&!0&&e&&!e.nodeType&&e,FF=Rf&&Rf.exports===jS,US=FF&&RF.process,Oo=function(){try{var G=Rf&&Rf.require&&Rf.require("util").types;return G||US&&US.binding&&US.binding("util")}catch{}}(),DF=Oo&&Oo.isArrayBuffer,PF=Oo&&Oo.isDate,LF=Oo&&Oo.isMap,IF=Oo&&Oo.isRegExp,zF=Oo&&Oo.isSet,BF=Oo&&Oo.isTypedArray;function Qi(G,oe,Z){switch(Z.length){case 0:return G.call(oe);case 1:return G.call(oe,Z[0]);case 2:return G.call(oe,Z[0],Z[1]);case 3:return G.call(oe,Z[0],Z[1],Z[2])}return G.apply(oe,Z)}function Dfe(G,oe,Z,Me){for(var Xe=-1,Ct=G==null?0:G.length;++Xe<Ct;){var Nn=G[Xe];oe(Me,Nn,Z(Nn),G)}return Me}function No(G,oe){for(var Z=-1,Me=G==null?0:G.length;++Z<Me&&oe(G[Z],Z,G)!==!1;);return G}function Pfe(G,oe){for(var Z=G==null?0:G.length;Z--&&oe(G[Z],Z,G)!==!1;);return G}function jF(G,oe){for(var Z=-1,Me=G==null?0:G.length;++Z<Me;)if(!oe(G[Z],Z,G))return!1;return!0}function Dl(G,oe){for(var Z=-1,Me=G==null?0:G.length,Xe=0,Ct=[];++Z<Me;){var Nn=G[Z];oe(Nn,Z,G)&&(Ct[Xe++]=Nn)}return Ct}function Mv(G,oe){var Z=G==null?0:G.length;return!!Z&&W0(G,oe,0)>-1}function WS(G,oe,Z){for(var Me=-1,Xe=G==null?0:G.length;++Me<Xe;)if(Z(oe,G[Me]))return!0;return!1}function tn(G,oe){for(var Z=-1,Me=G==null?0:G.length,Xe=Array(Me);++Z<Me;)Xe[Z]=oe(G[Z],Z,G);return Xe}function Pl(G,oe){for(var Z=-1,Me=oe.length,Xe=G.length;++Z<Me;)G[Xe+Z]=oe[Z];return G}function HS(G,oe,Z,Me){var Xe=-1,Ct=G==null?0:G.length;for(Me&&Ct&&(Z=G[++Xe]);++Xe<Ct;)Z=oe(Z,G[Xe],Xe,G);return Z}function Lfe(G,oe,Z,Me){var Xe=G==null?0:G.length;for(Me&&Xe&&(Z=G[--Xe]);Xe--;)Z=oe(Z,G[Xe],Xe,G);return Z}function qS(G,oe){for(var Z=-1,Me=G==null?0:G.length;++Z<Me;)if(oe(G[Z],Z,G))return!0;return!1}var Ife=GS("length");function zfe(G){return G.split("")}function Bfe(G){return G.match(Yce)||[]}function UF(G,oe,Z){var Me;return Z(G,function(Xe,Ct,Nn){if(oe(Xe,Ct,Nn))return Me=Ct,!1}),Me}function Ov(G,oe,Z,Me){for(var Xe=G.length,Ct=Z+(Me?1:-1);Me?Ct--:++Ct<Xe;)if(oe(G[Ct],Ct,G))return Ct;return-1}function W0(G,oe,Z){return oe===oe?Qfe(G,oe,Z):Ov(G,WF,Z)}function jfe(G,oe,Z,Me){for(var Xe=Z-1,Ct=G.length;++Xe<Ct;)if(Me(G[Xe],oe))return Xe;return-1}function WF(G){return G!==G}function HF(G,oe){var Z=G==null?0:G.length;return Z?YS(G,oe)/Z:U}function GS(G){return function(oe){return oe==null?n:oe[G]}}function VS(G){return function(oe){return G==null?n:G[oe]}}function qF(G,oe,Z,Me,Xe){return Xe(G,function(Ct,Nn,Ut){Z=Me?(Me=!1,Ct):oe(Z,Ct,Nn,Ut)}),Z}function Ufe(G,oe){var Z=G.length;for(G.sort(oe);Z--;)G[Z]=G[Z].value;return G}function YS(G,oe){for(var Z,Me=-1,Xe=G.length;++Me<Xe;){var Ct=oe(G[Me]);Ct!==n&&(Z=Z===n?Ct:Z+Ct)}return Z}function XS(G,oe){for(var Z=-1,Me=Array(G);++Z<G;)Me[Z]=oe(Z);return Me}function Wfe(G,oe){return tn(oe,function(Z){return[Z,G[Z]]})}function GF(G){return G&&G.slice(0,JF(G)+1).replace(DS,"")}function Zi(G){return function(oe){return G(oe)}}function JS(G,oe){return tn(oe,function(Z){return G[Z]})}function Xg(G,oe){return G.has(oe)}function VF(G,oe){for(var Z=-1,Me=G.length;++Z<Me&&W0(oe,G[Z],0)>-1;);return Z}function YF(G,oe){for(var Z=G.length;Z--&&W0(oe,G[Z],0)>-1;);return Z}function Hfe(G,oe){for(var Z=G.length,Me=0;Z--;)G[Z]===oe&&++Me;return Me}var qfe=VS(kfe),Gfe=VS(Tfe);function Vfe(G){return"\\"+Ofe[G]}function Yfe(G,oe){return G==null?n:G[oe]}function H0(G){return Sfe.test(G)}function Xfe(G){return Efe.test(G)}function Jfe(G){for(var oe,Z=[];!(oe=G.next()).done;)Z.push(oe.value);return Z}function KS(G){var oe=-1,Z=Array(G.size);return G.forEach(function(Me,Xe){Z[++oe]=[Xe,Me]}),Z}function XF(G,oe){return function(Z){return G(oe(Z))}}function Ll(G,oe){for(var Z=-1,Me=G.length,Xe=0,Ct=[];++Z<Me;){var Nn=G[Z];(Nn===oe||Nn===c)&&(G[Z]=c,Ct[Xe++]=Z)}return Ct}function Nv(G){var oe=-1,Z=Array(G.size);return G.forEach(function(Me){Z[++oe]=Me}),Z}function Kfe(G){var oe=-1,Z=Array(G.size);return G.forEach(function(Me){Z[++oe]=[Me,Me]}),Z}function Qfe(G,oe,Z){for(var Me=Z-1,Xe=G.length;++Me<Xe;)if(G[Me]===oe)return Me;return-1}function Zfe(G,oe,Z){for(var Me=Z+1;Me--;)if(G[Me]===oe)return Me;return Me}function q0(G){return H0(G)?tde(G):Ife(G)}function wa(G){return H0(G)?nde(G):zfe(G)}function JF(G){for(var oe=G.length;oe--&&Hce.test(G.charAt(oe)););return oe}var ede=VS(Mfe);function tde(G){for(var oe=BS.lastIndex=0;BS.test(G);)++oe;return oe}function nde(G){return G.match(BS)||[]}function rde(G){return G.match(Afe)||[]}var ide=function G(oe){oe=oe==null?sr:G0.defaults(sr.Object(),oe,G0.pick(sr,$fe));var Z=oe.Array,Me=oe.Date,Xe=oe.Error,Ct=oe.Function,Nn=oe.Math,Ut=oe.Object,QS=oe.RegExp,ode=oe.String,Ro=oe.TypeError,Rv=Z.prototype,ade=Ct.prototype,V0=Ut.prototype,Fv=oe["__core-js_shared__"],Dv=ade.toString,Rt=V0.hasOwnProperty,sde=0,KF=function(){var h=/[^.]+$/.exec(Fv&&Fv.keys&&Fv.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Pv=V0.toString,ude=Dv.call(Ut),lde=sr._,cde=QS("^"+Dv.call(Rt).replace(FS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lv=FF?oe.Buffer:n,Il=oe.Symbol,Iv=oe.Uint8Array,QF=Lv?Lv.allocUnsafe:n,zv=XF(Ut.getPrototypeOf,Ut),ZF=Ut.create,eD=V0.propertyIsEnumerable,Bv=Rv.splice,tD=Il?Il.isConcatSpreadable:n,Jg=Il?Il.iterator:n,Ff=Il?Il.toStringTag:n,jv=function(){try{var h=zf(Ut,"defineProperty");return h({},"",{}),h}catch{}}(),fde=oe.clearTimeout!==sr.clearTimeout&&oe.clearTimeout,dde=Me&&Me.now!==sr.Date.now&&Me.now,hde=oe.setTimeout!==sr.setTimeout&&oe.setTimeout,Uv=Nn.ceil,Wv=Nn.floor,ZS=Ut.getOwnPropertySymbols,pde=Lv?Lv.isBuffer:n,nD=oe.isFinite,gde=Rv.join,mde=XF(Ut.keys,Ut),Rn=Nn.max,xr=Nn.min,yde=Me.now,vde=oe.parseInt,rD=Nn.random,bde=Rv.reverse,eE=zf(oe,"DataView"),Kg=zf(oe,"Map"),tE=zf(oe,"Promise"),Y0=zf(oe,"Set"),Qg=zf(oe,"WeakMap"),Zg=zf(Ut,"create"),Hv=Qg&&new Qg,X0={},xde=Bf(eE),wde=Bf(Kg),_de=Bf(tE),Ade=Bf(Y0),Sde=Bf(Qg),qv=Il?Il.prototype:n,e1=qv?qv.valueOf:n,iD=qv?qv.toString:n;function R(h){if(pn(h)&&!Je(h)&&!(h instanceof lt)){if(h instanceof Fo)return h;if(Rt.call(h,"__wrapped__"))return oP(h)}return new Fo(h)}var J0=function(){function h(){}return function(m){if(!ln(m))return{};if(ZF)return ZF(m);h.prototype=m;var w=new h;return h.prototype=n,w}}();function Gv(){}function Fo(h,m){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}R.templateSettings={escape:Ice,evaluate:zce,interpolate:hF,variable:"",imports:{_:R}},R.prototype=Gv.prototype,R.prototype.constructor=R,Fo.prototype=J0(Gv.prototype),Fo.prototype.constructor=Fo;function lt(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function Ede(){var h=new lt(this.__wrapped__);return h.__actions__=wi(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=wi(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=wi(this.__views__),h}function $de(){if(this.__filtered__){var h=new lt(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Cde(){var h=this.__wrapped__.value(),m=this.__dir__,w=Je(h),C=m<0,T=w?h.length:0,P=z0e(0,T,this.__views__),B=P.start,q=P.end,X=q-B,ue=C?q:B-1,le=this.__iteratees__,de=le.length,Ce=0,Fe=xr(X,this.__takeCount__);if(!w||!C&&T==X&&Fe==X)return kD(h,this.__actions__);var We=[];e:for(;X--&&Ce<Fe;){ue+=m;for(var nt=-1,He=h[ue];++nt<de;){var st=le[nt],pt=st.iteratee,no=st.type,Gr=pt(He);if(no==D)He=Gr;else if(!Gr){if(no==M)continue e;break e}}We[Ce++]=He}return We}lt.prototype=J0(Gv.prototype),lt.prototype.constructor=lt;function Df(h){var m=-1,w=h==null?0:h.length;for(this.clear();++m<w;){var C=h[m];this.set(C[0],C[1])}}function kde(){this.__data__=Zg?Zg(null):{},this.size=0}function Tde(h){var m=this.has(h)&&delete this.__data__[h];return this.size-=m?1:0,m}function Mde(h){var m=this.__data__;if(Zg){var w=m[h];return w===u?n:w}return Rt.call(m,h)?m[h]:n}function Ode(h){var m=this.__data__;return Zg?m[h]!==n:Rt.call(m,h)}function Nde(h,m){var w=this.__data__;return this.size+=this.has(h)?0:1,w[h]=Zg&&m===n?u:m,this}Df.prototype.clear=kde,Df.prototype.delete=Tde,Df.prototype.get=Mde,Df.prototype.has=Ode,Df.prototype.set=Nde;function yu(h){var m=-1,w=h==null?0:h.length;for(this.clear();++m<w;){var C=h[m];this.set(C[0],C[1])}}function Rde(){this.__data__=[],this.size=0}function Fde(h){var m=this.__data__,w=Vv(m,h);if(w<0)return!1;var C=m.length-1;return w==C?m.pop():Bv.call(m,w,1),--this.size,!0}function Dde(h){var m=this.__data__,w=Vv(m,h);return w<0?n:m[w][1]}function Pde(h){return Vv(this.__data__,h)>-1}function Lde(h,m){var w=this.__data__,C=Vv(w,h);return C<0?(++this.size,w.push([h,m])):w[C][1]=m,this}yu.prototype.clear=Rde,yu.prototype.delete=Fde,yu.prototype.get=Dde,yu.prototype.has=Pde,yu.prototype.set=Lde;function vu(h){var m=-1,w=h==null?0:h.length;for(this.clear();++m<w;){var C=h[m];this.set(C[0],C[1])}}function Ide(){this.size=0,this.__data__={hash:new Df,map:new(Kg||yu),string:new Df}}function zde(h){var m=ob(this,h).delete(h);return this.size-=m?1:0,m}function Bde(h){return ob(this,h).get(h)}function jde(h){return ob(this,h).has(h)}function Ude(h,m){var w=ob(this,h),C=w.size;return w.set(h,m),this.size+=w.size==C?0:1,this}vu.prototype.clear=Ide,vu.prototype.delete=zde,vu.prototype.get=Bde,vu.prototype.has=jde,vu.prototype.set=Ude;function Pf(h){var m=-1,w=h==null?0:h.length;for(this.__data__=new vu;++m<w;)this.add(h[m])}function Wde(h){return this.__data__.set(h,u),this}function Hde(h){return this.__data__.has(h)}Pf.prototype.add=Pf.prototype.push=Wde,Pf.prototype.has=Hde;function _a(h){var m=this.__data__=new yu(h);this.size=m.size}function qde(){this.__data__=new yu,this.size=0}function Gde(h){var m=this.__data__,w=m.delete(h);return this.size=m.size,w}function Vde(h){return this.__data__.get(h)}function Yde(h){return this.__data__.has(h)}function Xde(h,m){var w=this.__data__;if(w instanceof yu){var C=w.__data__;if(!Kg||C.length<i-1)return C.push([h,m]),this.size=++w.size,this;w=this.__data__=new vu(C)}return w.set(h,m),this.size=w.size,this}_a.prototype.clear=qde,_a.prototype.delete=Gde,_a.prototype.get=Vde,_a.prototype.has=Yde,_a.prototype.set=Xde;function oD(h,m){var w=Je(h),C=!w&&jf(h),T=!w&&!C&&Wl(h),P=!w&&!C&&!T&&eh(h),B=w||C||T||P,q=B?XS(h.length,ode):[],X=q.length;for(var ue in h)(m||Rt.call(h,ue))&&!(B&&(ue=="length"||T&&(ue=="offset"||ue=="parent")||P&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||_u(ue,X)))&&q.push(ue);return q}function aD(h){var m=h.length;return m?h[dE(0,m-1)]:n}function Jde(h,m){return ab(wi(h),Lf(m,0,h.length))}function Kde(h){return ab(wi(h))}function nE(h,m,w){(w!==n&&!Aa(h[m],w)||w===n&&!(m in h))&&bu(h,m,w)}function t1(h,m,w){var C=h[m];(!(Rt.call(h,m)&&Aa(C,w))||w===n&&!(m in h))&&bu(h,m,w)}function Vv(h,m){for(var w=h.length;w--;)if(Aa(h[w][0],m))return w;return-1}function Qde(h,m,w,C){return zl(h,function(T,P,B){m(C,T,w(T),B)}),C}function sD(h,m){return h&&vs(m,Hn(m),h)}function Zde(h,m){return h&&vs(m,Ai(m),h)}function bu(h,m,w){m=="__proto__"&&jv?jv(h,m,{configurable:!0,enumerable:!0,value:w,writable:!0}):h[m]=w}function rE(h,m){for(var w=-1,C=m.length,T=Z(C),P=h==null;++w<C;)T[w]=P?n:LE(h,m[w]);return T}function Lf(h,m,w){return h===h&&(w!==n&&(h=h<=w?h:w),m!==n&&(h=h>=m?h:m)),h}function Do(h,m,w,C,T,P){var B,q=m&f,X=m&d,ue=m&p;if(w&&(B=T?w(h,C,T,P):w(h)),B!==n)return B;if(!ln(h))return h;var le=Je(h);if(le){if(B=j0e(h),!q)return wi(h,B)}else{var de=wr(h),Ce=de==re||de==qe;if(Wl(h))return OD(h,q);if(de==ht||de==ce||Ce&&!T){if(B=X||Ce?{}:JD(h),!q)return X?M0e(h,Zde(B,h)):T0e(h,sD(B,h))}else{if(!qt[de])return T?h:{};B=U0e(h,de,q)}}P||(P=new _a);var Fe=P.get(h);if(Fe)return Fe;P.set(h,B),EP(h)?h.forEach(function(He){B.add(Do(He,m,w,He,h,P))}):AP(h)&&h.forEach(function(He,st){B.set(st,Do(He,m,w,st,h,P))});var We=ue?X?AE:_E:X?Ai:Hn,nt=le?n:We(h);return No(nt||h,function(He,st){nt&&(st=He,He=h[st]),t1(B,st,Do(He,m,w,st,h,P))}),B}function e0e(h){var m=Hn(h);return function(w){return uD(w,h,m)}}function uD(h,m,w){var C=w.length;if(h==null)return!C;for(h=Ut(h);C--;){var T=w[C],P=m[T],B=h[T];if(B===n&&!(T in h)||!P(B))return!1}return!0}function lD(h,m,w){if(typeof h!="function")throw new Ro(a);return u1(function(){h.apply(n,w)},m)}function n1(h,m,w,C){var T=-1,P=Mv,B=!0,q=h.length,X=[],ue=m.length;if(!q)return X;w&&(m=tn(m,Zi(w))),C?(P=WS,B=!1):m.length>=i&&(P=Xg,B=!1,m=new Pf(m));e:for(;++T<q;){var le=h[T],de=w==null?le:w(le);if(le=C||le!==0?le:0,B&&de===de){for(var Ce=ue;Ce--;)if(m[Ce]===de)continue e;X.push(le)}else P(m,de,C)||X.push(le)}return X}var zl=PD(ys),cD=PD(oE,!0);function t0e(h,m){var w=!0;return zl(h,function(C,T,P){return w=!!m(C,T,P),w}),w}function Yv(h,m,w){for(var C=-1,T=h.length;++C<T;){var P=h[C],B=m(P);if(B!=null&&(q===n?B===B&&!to(B):w(B,q)))var q=B,X=P}return X}function n0e(h,m,w,C){var T=h.length;for(w=et(w),w<0&&(w=-w>T?0:T+w),C=C===n||C>T?T:et(C),C<0&&(C+=T),C=w>C?0:CP(C);w<C;)h[w++]=m;return h}function fD(h,m){var w=[];return zl(h,function(C,T,P){m(C,T,P)&&w.push(C)}),w}function ur(h,m,w,C,T){var P=-1,B=h.length;for(w||(w=H0e),T||(T=[]);++P<B;){var q=h[P];m>0&&w(q)?m>1?ur(q,m-1,w,C,T):Pl(T,q):C||(T[T.length]=q)}return T}var iE=LD(),dD=LD(!0);function ys(h,m){return h&&iE(h,m,Hn)}function oE(h,m){return h&&dD(h,m,Hn)}function Xv(h,m){return Dl(m,function(w){return Au(h[w])})}function If(h,m){m=jl(m,h);for(var w=0,C=m.length;h!=null&&w<C;)h=h[bs(m[w++])];return w&&w==C?h:n}function hD(h,m,w){var C=m(h);return Je(h)?C:Pl(C,w(h))}function Hr(h){return h==null?h===n?Nt:Ve:Ff&&Ff in Ut(h)?I0e(h):K0e(h)}function aE(h,m){return h>m}function r0e(h,m){return h!=null&&Rt.call(h,m)}function i0e(h,m){return h!=null&&m in Ut(h)}function o0e(h,m,w){return h>=xr(m,w)&&h<Rn(m,w)}function sE(h,m,w){for(var C=w?WS:Mv,T=h[0].length,P=h.length,B=P,q=Z(P),X=1/0,ue=[];B--;){var le=h[B];B&&m&&(le=tn(le,Zi(m))),X=xr(le.length,X),q[B]=!w&&(m||T>=120&&le.length>=120)?new Pf(B&&le):n}le=h[0];var de=-1,Ce=q[0];e:for(;++de<T&&ue.length<X;){var Fe=le[de],We=m?m(Fe):Fe;if(Fe=w||Fe!==0?Fe:0,!(Ce?Xg(Ce,We):C(ue,We,w))){for(B=P;--B;){var nt=q[B];if(!(nt?Xg(nt,We):C(h[B],We,w)))continue e}Ce&&Ce.push(We),ue.push(Fe)}}return ue}function a0e(h,m,w,C){return ys(h,function(T,P,B){m(C,w(T),P,B)}),C}function r1(h,m,w){m=jl(m,h),h=eP(h,m);var C=h==null?h:h[bs(Lo(m))];return C==null?n:Qi(C,h,w)}function pD(h){return pn(h)&&Hr(h)==ce}function s0e(h){return pn(h)&&Hr(h)==Ur}function u0e(h){return pn(h)&&Hr(h)==te}function i1(h,m,w,C,T){return h===m?!0:h==null||m==null||!pn(h)&&!pn(m)?h!==h&&m!==m:l0e(h,m,w,C,i1,T)}function l0e(h,m,w,C,T,P){var B=Je(h),q=Je(m),X=B?ye:wr(h),ue=q?ye:wr(m);X=X==ce?ht:X,ue=ue==ce?ht:ue;var le=X==ht,de=ue==ht,Ce=X==ue;if(Ce&&Wl(h)){if(!Wl(m))return!1;B=!0,le=!1}if(Ce&&!le)return P||(P=new _a),B||eh(h)?VD(h,m,w,C,T,P):P0e(h,m,X,w,C,T,P);if(!(w&g)){var Fe=le&&Rt.call(h,"__wrapped__"),We=de&&Rt.call(m,"__wrapped__");if(Fe||We){var nt=Fe?h.value():h,He=We?m.value():m;return P||(P=new _a),T(nt,He,w,C,P)}}return Ce?(P||(P=new _a),L0e(h,m,w,C,T,P)):!1}function c0e(h){return pn(h)&&wr(h)==_e}function uE(h,m,w,C){var T=w.length,P=T,B=!C;if(h==null)return!P;for(h=Ut(h);T--;){var q=w[T];if(B&&q[2]?q[1]!==h[q[0]]:!(q[0]in h))return!1}for(;++T<P;){q=w[T];var X=q[0],ue=h[X],le=q[1];if(B&&q[2]){if(ue===n&&!(X in h))return!1}else{var de=new _a;if(C)var Ce=C(ue,le,X,h,m,de);if(!(Ce===n?i1(le,ue,g|y,C,de):Ce))return!1}}return!0}function gD(h){if(!ln(h)||G0e(h))return!1;var m=Au(h)?cde:efe;return m.test(Bf(h))}function f0e(h){return pn(h)&&Hr(h)==Lt}function d0e(h){return pn(h)&&wr(h)==Te}function h0e(h){return pn(h)&&db(h.length)&&!!Xt[Hr(h)]}function mD(h){return typeof h=="function"?h:h==null?Si:typeof h=="object"?Je(h)?bD(h[0],h[1]):vD(h):IP(h)}function lE(h){if(!s1(h))return mde(h);var m=[];for(var w in Ut(h))Rt.call(h,w)&&w!="constructor"&&m.push(w);return m}function p0e(h){if(!ln(h))return J0e(h);var m=s1(h),w=[];for(var C in h)C=="constructor"&&(m||!Rt.call(h,C))||w.push(C);return w}function cE(h,m){return h<m}function yD(h,m){var w=-1,C=_i(h)?Z(h.length):[];return zl(h,function(T,P,B){C[++w]=m(T,P,B)}),C}function vD(h){var m=EE(h);return m.length==1&&m[0][2]?QD(m[0][0],m[0][1]):function(w){return w===h||uE(w,h,m)}}function bD(h,m){return CE(h)&&KD(m)?QD(bs(h),m):function(w){var C=LE(w,h);return C===n&&C===m?IE(w,h):i1(m,C,g|y)}}function Jv(h,m,w,C,T){h!==m&&iE(m,function(P,B){if(T||(T=new _a),ln(P))g0e(h,m,B,w,Jv,C,T);else{var q=C?C(TE(h,B),P,B+"",h,m,T):n;q===n&&(q=P),nE(h,B,q)}},Ai)}function g0e(h,m,w,C,T,P,B){var q=TE(h,w),X=TE(m,w),ue=B.get(X);if(ue){nE(h,w,ue);return}var le=P?P(q,X,w+"",h,m,B):n,de=le===n;if(de){var Ce=Je(X),Fe=!Ce&&Wl(X),We=!Ce&&!Fe&&eh(X);le=X,Ce||Fe||We?Je(q)?le=q:_n(q)?le=wi(q):Fe?(de=!1,le=OD(X,!0)):We?(de=!1,le=ND(X,!0)):le=[]:l1(X)||jf(X)?(le=q,jf(q)?le=kP(q):(!ln(q)||Au(q))&&(le=JD(X))):de=!1}de&&(B.set(X,le),T(le,X,C,P,B),B.delete(X)),nE(h,w,le)}function xD(h,m){var w=h.length;if(w)return m+=m<0?w:0,_u(m,w)?h[m]:n}function wD(h,m,w){m.length?m=tn(m,function(P){return Je(P)?function(B){return If(B,P.length===1?P[0]:P)}:P}):m=[Si];var C=-1;m=tn(m,Zi(Ue()));var T=yD(h,function(P,B,q){var X=tn(m,function(ue){return ue(P)});return{criteria:X,index:++C,value:P}});return Ufe(T,function(P,B){return k0e(P,B,w)})}function m0e(h,m){return _D(h,m,function(w,C){return IE(h,C)})}function _D(h,m,w){for(var C=-1,T=m.length,P={};++C<T;){var B=m[C],q=If(h,B);w(q,B)&&o1(P,jl(B,h),q)}return P}function y0e(h){return function(m){return If(m,h)}}function fE(h,m,w,C){var T=C?jfe:W0,P=-1,B=m.length,q=h;for(h===m&&(m=wi(m)),w&&(q=tn(h,Zi(w)));++P<B;)for(var X=0,ue=m[P],le=w?w(ue):ue;(X=T(q,le,X,C))>-1;)q!==h&&Bv.call(q,X,1),Bv.call(h,X,1);return h}function AD(h,m){for(var w=h?m.length:0,C=w-1;w--;){var T=m[w];if(w==C||T!==P){var P=T;_u(T)?Bv.call(h,T,1):gE(h,T)}}return h}function dE(h,m){return h+Wv(rD()*(m-h+1))}function v0e(h,m,w,C){for(var T=-1,P=Rn(Uv((m-h)/(w||1)),0),B=Z(P);P--;)B[C?P:++T]=h,h+=w;return B}function hE(h,m){var w="";if(!h||m<1||m>z)return w;do m%2&&(w+=h),m=Wv(m/2),m&&(h+=h);while(m);return w}function rt(h,m){return ME(ZD(h,m,Si),h+"")}function b0e(h){return aD(th(h))}function x0e(h,m){var w=th(h);return ab(w,Lf(m,0,w.length))}function o1(h,m,w,C){if(!ln(h))return h;m=jl(m,h);for(var T=-1,P=m.length,B=P-1,q=h;q!=null&&++T<P;){var X=bs(m[T]),ue=w;if(X==="__proto__"||X==="constructor"||X==="prototype")return h;if(T!=B){var le=q[X];ue=C?C(le,X,q):n,ue===n&&(ue=ln(le)?le:_u(m[T+1])?[]:{})}t1(q,X,ue),q=q[X]}return h}var SD=Hv?function(h,m){return Hv.set(h,m),h}:Si,w0e=jv?function(h,m){return jv(h,"toString",{configurable:!0,enumerable:!1,value:BE(m),writable:!0})}:Si;function _0e(h){return ab(th(h))}function Po(h,m,w){var C=-1,T=h.length;m<0&&(m=-m>T?0:T+m),w=w>T?T:w,w<0&&(w+=T),T=m>w?0:w-m>>>0,m>>>=0;for(var P=Z(T);++C<T;)P[C]=h[C+m];return P}function A0e(h,m){var w;return zl(h,function(C,T,P){return w=m(C,T,P),!w}),!!w}function Kv(h,m,w){var C=0,T=h==null?C:h.length;if(typeof m=="number"&&m===m&&T<=Q){for(;C<T;){var P=C+T>>>1,B=h[P];B!==null&&!to(B)&&(w?B<=m:B<m)?C=P+1:T=P}return T}return pE(h,m,Si,w)}function pE(h,m,w,C){var T=0,P=h==null?0:h.length;if(P===0)return 0;m=w(m);for(var B=m!==m,q=m===null,X=to(m),ue=m===n;T<P;){var le=Wv((T+P)/2),de=w(h[le]),Ce=de!==n,Fe=de===null,We=de===de,nt=to(de);if(B)var He=C||We;else ue?He=We&&(C||Ce):q?He=We&&Ce&&(C||!Fe):X?He=We&&Ce&&!Fe&&(C||!nt):Fe||nt?He=!1:He=C?de<=m:de<m;He?T=le+1:P=le}return xr(P,K)}function ED(h,m){for(var w=-1,C=h.length,T=0,P=[];++w<C;){var B=h[w],q=m?m(B):B;if(!w||!Aa(q,X)){var X=q;P[T++]=B===0?0:B}}return P}function $D(h){return typeof h=="number"?h:to(h)?U:+h}function eo(h){if(typeof h=="string")return h;if(Je(h))return tn(h,eo)+"";if(to(h))return iD?iD.call(h):"";var m=h+"";return m=="0"&&1/h==-j?"-0":m}function Bl(h,m,w){var C=-1,T=Mv,P=h.length,B=!0,q=[],X=q;if(w)B=!1,T=WS;else if(P>=i){var ue=m?null:F0e(h);if(ue)return Nv(ue);B=!1,T=Xg,X=new Pf}else X=m?[]:q;e:for(;++C<P;){var le=h[C],de=m?m(le):le;if(le=w||le!==0?le:0,B&&de===de){for(var Ce=X.length;Ce--;)if(X[Ce]===de)continue e;m&&X.push(de),q.push(le)}else T(X,de,w)||(X!==q&&X.push(de),q.push(le))}return q}function gE(h,m){return m=jl(m,h),h=eP(h,m),h==null||delete h[bs(Lo(m))]}function CD(h,m,w,C){return o1(h,m,w(If(h,m)),C)}function Qv(h,m,w,C){for(var T=h.length,P=C?T:-1;(C?P--:++P<T)&&m(h[P],P,h););return w?Po(h,C?0:P,C?P+1:T):Po(h,C?P+1:0,C?T:P)}function kD(h,m){var w=h;return w instanceof lt&&(w=w.value()),HS(m,function(C,T){return T.func.apply(T.thisArg,Pl([C],T.args))},w)}function mE(h,m,w){var C=h.length;if(C<2)return C?Bl(h[0]):[];for(var T=-1,P=Z(C);++T<C;)for(var B=h[T],q=-1;++q<C;)q!=T&&(P[T]=n1(P[T]||B,h[q],m,w));return Bl(ur(P,1),m,w)}function TD(h,m,w){for(var C=-1,T=h.length,P=m.length,B={};++C<T;){var q=C<P?m[C]:n;w(B,h[C],q)}return B}function yE(h){return _n(h)?h:[]}function vE(h){return typeof h=="function"?h:Si}function jl(h,m){return Je(h)?h:CE(h,m)?[h]:iP(Tt(h))}var S0e=rt;function Ul(h,m,w){var C=h.length;return w=w===n?C:w,!m&&w>=C?h:Po(h,m,w)}var MD=fde||function(h){return sr.clearTimeout(h)};function OD(h,m){if(m)return h.slice();var w=h.length,C=QF?QF(w):new h.constructor(w);return h.copy(C),C}function bE(h){var m=new h.constructor(h.byteLength);return new Iv(m).set(new Iv(h)),m}function E0e(h,m){var w=m?bE(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.byteLength)}function $0e(h){var m=new h.constructor(h.source,pF.exec(h));return m.lastIndex=h.lastIndex,m}function C0e(h){return e1?Ut(e1.call(h)):{}}function ND(h,m){var w=m?bE(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.length)}function RD(h,m){if(h!==m){var w=h!==n,C=h===null,T=h===h,P=to(h),B=m!==n,q=m===null,X=m===m,ue=to(m);if(!q&&!ue&&!P&&h>m||P&&B&&X&&!q&&!ue||C&&B&&X||!w&&X||!T)return 1;if(!C&&!P&&!ue&&h<m||ue&&w&&T&&!C&&!P||q&&w&&T||!B&&T||!X)return-1}return 0}function k0e(h,m,w){for(var C=-1,T=h.criteria,P=m.criteria,B=T.length,q=w.length;++C<B;){var X=RD(T[C],P[C]);if(X){if(C>=q)return X;var ue=w[C];return X*(ue=="desc"?-1:1)}}return h.index-m.index}function FD(h,m,w,C){for(var T=-1,P=h.length,B=w.length,q=-1,X=m.length,ue=Rn(P-B,0),le=Z(X+ue),de=!C;++q<X;)le[q]=m[q];for(;++T<B;)(de||T<P)&&(le[w[T]]=h[T]);for(;ue--;)le[q++]=h[T++];return le}function DD(h,m,w,C){for(var T=-1,P=h.length,B=-1,q=w.length,X=-1,ue=m.length,le=Rn(P-q,0),de=Z(le+ue),Ce=!C;++T<le;)de[T]=h[T];for(var Fe=T;++X<ue;)de[Fe+X]=m[X];for(;++B<q;)(Ce||T<P)&&(de[Fe+w[B]]=h[T++]);return de}function wi(h,m){var w=-1,C=h.length;for(m||(m=Z(C));++w<C;)m[w]=h[w];return m}function vs(h,m,w,C){var T=!w;w||(w={});for(var P=-1,B=m.length;++P<B;){var q=m[P],X=C?C(w[q],h[q],q,w,h):n;X===n&&(X=h[q]),T?bu(w,q,X):t1(w,q,X)}return w}function T0e(h,m){return vs(h,$E(h),m)}function M0e(h,m){return vs(h,YD(h),m)}function Zv(h,m){return function(w,C){var T=Je(w)?Dfe:Qde,P=m?m():{};return T(w,h,Ue(C,2),P)}}function K0(h){return rt(function(m,w){var C=-1,T=w.length,P=T>1?w[T-1]:n,B=T>2?w[2]:n;for(P=h.length>3&&typeof P=="function"?(T--,P):n,B&&qr(w[0],w[1],B)&&(P=T<3?n:P,T=1),m=Ut(m);++C<T;){var q=w[C];q&&h(m,q,C,P)}return m})}function PD(h,m){return function(w,C){if(w==null)return w;if(!_i(w))return h(w,C);for(var T=w.length,P=m?T:-1,B=Ut(w);(m?P--:++P<T)&&C(B[P],P,B)!==!1;);return w}}function LD(h){return function(m,w,C){for(var T=-1,P=Ut(m),B=C(m),q=B.length;q--;){var X=B[h?q:++T];if(w(P[X],X,P)===!1)break}return m}}function O0e(h,m,w){var C=m&v,T=a1(h);function P(){var B=this&&this!==sr&&this instanceof P?T:h;return B.apply(C?w:this,arguments)}return P}function ID(h){return function(m){m=Tt(m);var w=H0(m)?wa(m):n,C=w?w[0]:m.charAt(0),T=w?Ul(w,1).join(""):m.slice(1);return C[h]()+T}}function Q0(h){return function(m){return HS(PP(DP(m).replace(wfe,"")),h,"")}}function a1(h){return function(){var m=arguments;switch(m.length){case 0:return new h;case 1:return new h(m[0]);case 2:return new h(m[0],m[1]);case 3:return new h(m[0],m[1],m[2]);case 4:return new h(m[0],m[1],m[2],m[3]);case 5:return new h(m[0],m[1],m[2],m[3],m[4]);case 6:return new h(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new h(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var w=J0(h.prototype),C=h.apply(w,m);return ln(C)?C:w}}function N0e(h,m,w){var C=a1(h);function T(){for(var P=arguments.length,B=Z(P),q=P,X=Z0(T);q--;)B[q]=arguments[q];var ue=P<3&&B[0]!==X&&B[P-1]!==X?[]:Ll(B,X);if(P-=ue.length,P<w)return WD(h,m,eb,T.placeholder,n,B,ue,n,n,w-P);var le=this&&this!==sr&&this instanceof T?C:h;return Qi(le,this,B)}return T}function zD(h){return function(m,w,C){var T=Ut(m);if(!_i(m)){var P=Ue(w,3);m=Hn(m),w=function(q){return P(T[q],q,T)}}var B=h(m,w,C);return B>-1?T[P?m[B]:B]:n}}function BD(h){return wu(function(m){var w=m.length,C=w,T=Fo.prototype.thru;for(h&&m.reverse();C--;){var P=m[C];if(typeof P!="function")throw new Ro(a);if(T&&!B&&ib(P)=="wrapper")var B=new Fo([],!0)}for(C=B?C:w;++C<w;){P=m[C];var q=ib(P),X=q=="wrapper"?SE(P):n;X&&kE(X[0])&&X[1]==(S|_|E|k)&&!X[4].length&&X[9]==1?B=B[ib(X[0])].apply(B,X[3]):B=P.length==1&&kE(P)?B[q]():B.thru(P)}return function(){var ue=arguments,le=ue[0];if(B&&ue.length==1&&Je(le))return B.plant(le).value();for(var de=0,Ce=w?m[de].apply(this,ue):le;++de<w;)Ce=m[de].call(this,Ce);return Ce}})}function eb(h,m,w,C,T,P,B,q,X,ue){var le=m&S,de=m&v,Ce=m&b,Fe=m&(_|A),We=m&O,nt=Ce?n:a1(h);function He(){for(var st=arguments.length,pt=Z(st),no=st;no--;)pt[no]=arguments[no];if(Fe)var Gr=Z0(He),ro=Hfe(pt,Gr);if(C&&(pt=FD(pt,C,T,Fe)),P&&(pt=DD(pt,P,B,Fe)),st-=ro,Fe&&st<ue){var An=Ll(pt,Gr);return WD(h,m,eb,He.placeholder,w,pt,An,q,X,ue-st)}var Sa=de?w:this,Eu=Ce?Sa[h]:h;return st=pt.length,q?pt=Q0e(pt,q):We&&st>1&&pt.reverse(),le&&X<st&&(pt.length=X),this&&this!==sr&&this instanceof He&&(Eu=nt||a1(Eu)),Eu.apply(Sa,pt)}return He}function jD(h,m){return function(w,C){return a0e(w,h,m(C),{})}}function tb(h,m){return function(w,C){var T;if(w===n&&C===n)return m;if(w!==n&&(T=w),C!==n){if(T===n)return C;typeof w=="string"||typeof C=="string"?(w=eo(w),C=eo(C)):(w=$D(w),C=$D(C)),T=h(w,C)}return T}}function xE(h){return wu(function(m){return m=tn(m,Zi(Ue())),rt(function(w){var C=this;return h(m,function(T){return Qi(T,C,w)})})})}function nb(h,m){m=m===n?" ":eo(m);var w=m.length;if(w<2)return w?hE(m,h):m;var C=hE(m,Uv(h/q0(m)));return H0(m)?Ul(wa(C),0,h).join(""):C.slice(0,h)}function R0e(h,m,w,C){var T=m&v,P=a1(h);function B(){for(var q=-1,X=arguments.length,ue=-1,le=C.length,de=Z(le+X),Ce=this&&this!==sr&&this instanceof B?P:h;++ue<le;)de[ue]=C[ue];for(;X--;)de[ue++]=arguments[++q];return Qi(Ce,T?w:this,de)}return B}function UD(h){return function(m,w,C){return C&&typeof C!="number"&&qr(m,w,C)&&(w=C=n),m=Su(m),w===n?(w=m,m=0):w=Su(w),C=C===n?m<w?1:-1:Su(C),v0e(m,w,C,h)}}function rb(h){return function(m,w){return typeof m=="string"&&typeof w=="string"||(m=Io(m),w=Io(w)),h(m,w)}}function WD(h,m,w,C,T,P,B,q,X,ue){var le=m&_,de=le?B:n,Ce=le?n:B,Fe=le?P:n,We=le?n:P;m|=le?E:$,m&=~(le?$:E),m&x||(m&=~(v|b));var nt=[h,m,T,Fe,de,We,Ce,q,X,ue],He=w.apply(n,nt);return kE(h)&&tP(He,nt),He.placeholder=C,nP(He,h,m)}function wE(h){var m=Nn[h];return function(w,C){if(w=Io(w),C=C==null?0:xr(et(C),292),C&&nD(w)){var T=(Tt(w)+"e").split("e"),P=m(T[0]+"e"+(+T[1]+C));return T=(Tt(P)+"e").split("e"),+(T[0]+"e"+(+T[1]-C))}return m(w)}}var F0e=Y0&&1/Nv(new Y0([,-0]))[1]==j?function(h){return new Y0(h)}:WE;function HD(h){return function(m){var w=wr(m);return w==_e?KS(m):w==Te?Kfe(m):Wfe(m,h(m))}}function xu(h,m,w,C,T,P,B,q){var X=m&b;if(!X&&typeof h!="function")throw new Ro(a);var ue=C?C.length:0;if(ue||(m&=~(E|$),C=T=n),B=B===n?B:Rn(et(B),0),q=q===n?q:et(q),ue-=T?T.length:0,m&$){var le=C,de=T;C=T=n}var Ce=X?n:SE(h),Fe=[h,m,w,C,T,le,de,P,B,q];if(Ce&&X0e(Fe,Ce),h=Fe[0],m=Fe[1],w=Fe[2],C=Fe[3],T=Fe[4],q=Fe[9]=Fe[9]===n?X?0:h.length:Rn(Fe[9]-ue,0),!q&&m&(_|A)&&(m&=~(_|A)),!m||m==v)var We=O0e(h,m,w);else m==_||m==A?We=N0e(h,m,q):(m==E||m==(v|E))&&!T.length?We=R0e(h,m,w,C):We=eb.apply(n,Fe);var nt=Ce?SD:tP;return nP(nt(We,Fe),h,m)}function qD(h,m,w,C){return h===n||Aa(h,V0[w])&&!Rt.call(C,w)?m:h}function GD(h,m,w,C,T,P){return ln(h)&&ln(m)&&(P.set(m,h),Jv(h,m,n,GD,P),P.delete(m)),h}function D0e(h){return l1(h)?n:h}function VD(h,m,w,C,T,P){var B=w&g,q=h.length,X=m.length;if(q!=X&&!(B&&X>q))return!1;var ue=P.get(h),le=P.get(m);if(ue&&le)return ue==m&&le==h;var de=-1,Ce=!0,Fe=w&y?new Pf:n;for(P.set(h,m),P.set(m,h);++de<q;){var We=h[de],nt=m[de];if(C)var He=B?C(nt,We,de,m,h,P):C(We,nt,de,h,m,P);if(He!==n){if(He)continue;Ce=!1;break}if(Fe){if(!qS(m,function(st,pt){if(!Xg(Fe,pt)&&(We===st||T(We,st,w,C,P)))return Fe.push(pt)})){Ce=!1;break}}else if(!(We===nt||T(We,nt,w,C,P))){Ce=!1;break}}return P.delete(h),P.delete(m),Ce}function P0e(h,m,w,C,T,P,B){switch(w){case Wr:if(h.byteLength!=m.byteLength||h.byteOffset!=m.byteOffset)return!1;h=h.buffer,m=m.buffer;case Ur:return!(h.byteLength!=m.byteLength||!P(new Iv(h),new Iv(m)));case pe:case te:case Ze:return Aa(+h,+m);case Ae:return h.name==m.name&&h.message==m.message;case Lt:case un:return h==m+"";case _e:var q=KS;case Te:var X=C&g;if(q||(q=Nv),h.size!=m.size&&!X)return!1;var ue=B.get(h);if(ue)return ue==m;C|=y,B.set(h,m);var le=VD(q(h),q(m),C,T,P,B);return B.delete(h),le;case $t:if(e1)return e1.call(h)==e1.call(m)}return!1}function L0e(h,m,w,C,T,P){var B=w&g,q=_E(h),X=q.length,ue=_E(m),le=ue.length;if(X!=le&&!B)return!1;for(var de=X;de--;){var Ce=q[de];if(!(B?Ce in m:Rt.call(m,Ce)))return!1}var Fe=P.get(h),We=P.get(m);if(Fe&&We)return Fe==m&&We==h;var nt=!0;P.set(h,m),P.set(m,h);for(var He=B;++de<X;){Ce=q[de];var st=h[Ce],pt=m[Ce];if(C)var no=B?C(pt,st,Ce,m,h,P):C(st,pt,Ce,h,m,P);if(!(no===n?st===pt||T(st,pt,w,C,P):no)){nt=!1;break}He||(He=Ce=="constructor")}if(nt&&!He){var Gr=h.constructor,ro=m.constructor;Gr!=ro&&"constructor"in h&&"constructor"in m&&!(typeof Gr=="function"&&Gr instanceof Gr&&typeof ro=="function"&&ro instanceof ro)&&(nt=!1)}return P.delete(h),P.delete(m),nt}function wu(h){return ME(ZD(h,n,uP),h+"")}function _E(h){return hD(h,Hn,$E)}function AE(h){return hD(h,Ai,YD)}var SE=Hv?function(h){return Hv.get(h)}:WE;function ib(h){for(var m=h.name+"",w=X0[m],C=Rt.call(X0,m)?w.length:0;C--;){var T=w[C],P=T.func;if(P==null||P==h)return T.name}return m}function Z0(h){var m=Rt.call(R,"placeholder")?R:h;return m.placeholder}function Ue(){var h=R.iteratee||jE;return h=h===jE?mD:h,arguments.length?h(arguments[0],arguments[1]):h}function ob(h,m){var w=h.__data__;return q0e(m)?w[typeof m=="string"?"string":"hash"]:w.map}function EE(h){for(var m=Hn(h),w=m.length;w--;){var C=m[w],T=h[C];m[w]=[C,T,KD(T)]}return m}function zf(h,m){var w=Yfe(h,m);return gD(w)?w:n}function I0e(h){var m=Rt.call(h,Ff),w=h[Ff];try{h[Ff]=n;var C=!0}catch{}var T=Pv.call(h);return C&&(m?h[Ff]=w:delete h[Ff]),T}var $E=ZS?function(h){return h==null?[]:(h=Ut(h),Dl(ZS(h),function(m){return eD.call(h,m)}))}:HE,YD=ZS?function(h){for(var m=[];h;)Pl(m,$E(h)),h=zv(h);return m}:HE,wr=Hr;(eE&&wr(new eE(new ArrayBuffer(1)))!=Wr||Kg&&wr(new Kg)!=_e||tE&&wr(tE.resolve())!=jr||Y0&&wr(new Y0)!=Te||Qg&&wr(new Qg)!=On)&&(wr=function(h){var m=Hr(h),w=m==ht?h.constructor:n,C=w?Bf(w):"";if(C)switch(C){case xde:return Wr;case wde:return _e;case _de:return jr;case Ade:return Te;case Sde:return On}return m});function z0e(h,m,w){for(var C=-1,T=w.length;++C<T;){var P=w[C],B=P.size;switch(P.type){case"drop":h+=B;break;case"dropRight":m-=B;break;case"take":m=xr(m,h+B);break;case"takeRight":h=Rn(h,m-B);break}}return{start:h,end:m}}function B0e(h){var m=h.match(Gce);return m?m[1].split(Vce):[]}function XD(h,m,w){m=jl(m,h);for(var C=-1,T=m.length,P=!1;++C<T;){var B=bs(m[C]);if(!(P=h!=null&&w(h,B)))break;h=h[B]}return P||++C!=T?P:(T=h==null?0:h.length,!!T&&db(T)&&_u(B,T)&&(Je(h)||jf(h)))}function j0e(h){var m=h.length,w=new h.constructor(m);return m&&typeof h[0]=="string"&&Rt.call(h,"index")&&(w.index=h.index,w.input=h.input),w}function JD(h){return typeof h.constructor=="function"&&!s1(h)?J0(zv(h)):{}}function U0e(h,m,w){var C=h.constructor;switch(m){case Ur:return bE(h);case pe:case te:return new C(+h);case Wr:return E0e(h,w);case Gg:case Nl:case Rl:case Nf:case Fl:case Vg:case Yg:case NS:case RS:return ND(h,w);case _e:return new C;case Ze:case un:return new C(h);case Lt:return $0e(h);case Te:return new C;case $t:return C0e(h)}}function W0e(h,m){var w=m.length;if(!w)return h;var C=w-1;return m[C]=(w>1?"& ":"")+m[C],m=m.join(w>2?", ":" "),h.replace(qce,`{
/* [wrapped with `+m+`] */
`)}function H0e(h){return Je(h)||jf(h)||!!(tD&&h&&h[tD])}function _u(h,m){var w=typeof h;return m=m??z,!!m&&(w=="number"||w!="symbol"&&nfe.test(h))&&h>-1&&h%1==0&&h<m}function qr(h,m,w){if(!ln(w))return!1;var C=typeof m;return(C=="number"?_i(w)&&_u(m,w.length):C=="string"&&m in w)?Aa(w[m],h):!1}function CE(h,m){if(Je(h))return!1;var w=typeof h;return w=="number"||w=="symbol"||w=="boolean"||h==null||to(h)?!0:jce.test(h)||!Bce.test(h)||m!=null&&h in Ut(m)}function q0e(h){var m=typeof h;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?h!=="__proto__":h===null}function kE(h){var m=ib(h),w=R[m];if(typeof w!="function"||!(m in lt.prototype))return!1;if(h===w)return!0;var C=SE(w);return!!C&&h===C[0]}function G0e(h){return!!KF&&KF in h}var V0e=Fv?Au:qE;function s1(h){var m=h&&h.constructor,w=typeof m=="function"&&m.prototype||V0;return h===w}function KD(h){return h===h&&!ln(h)}function QD(h,m){return function(w){return w==null?!1:w[h]===m&&(m!==n||h in Ut(w))}}function Y0e(h){var m=cb(h,function(C){return w.size===l&&w.clear(),C}),w=m.cache;return m}function X0e(h,m){var w=h[1],C=m[1],T=w|C,P=T<(v|b|S),B=C==S&&w==_||C==S&&w==k&&h[7].length<=m[8]||C==(S|k)&&m[7].length<=m[8]&&w==_;if(!(P||B))return h;C&v&&(h[2]=m[2],T|=w&v?0:x);var q=m[3];if(q){var X=h[3];h[3]=X?FD(X,q,m[4]):q,h[4]=X?Ll(h[3],c):m[4]}return q=m[5],q&&(X=h[5],h[5]=X?DD(X,q,m[6]):q,h[6]=X?Ll(h[5],c):m[6]),q=m[7],q&&(h[7]=q),C&S&&(h[8]=h[8]==null?m[8]:xr(h[8],m[8])),h[9]==null&&(h[9]=m[9]),h[0]=m[0],h[1]=T,h}function J0e(h){var m=[];if(h!=null)for(var w in Ut(h))m.push(w);return m}function K0e(h){return Pv.call(h)}function ZD(h,m,w){return m=Rn(m===n?h.length-1:m,0),function(){for(var C=arguments,T=-1,P=Rn(C.length-m,0),B=Z(P);++T<P;)B[T]=C[m+T];T=-1;for(var q=Z(m+1);++T<m;)q[T]=C[T];return q[m]=w(B),Qi(h,this,q)}}function eP(h,m){return m.length<2?h:If(h,Po(m,0,-1))}function Q0e(h,m){for(var w=h.length,C=xr(m.length,w),T=wi(h);C--;){var P=m[C];h[C]=_u(P,w)?T[P]:n}return h}function TE(h,m){if(!(m==="constructor"&&typeof h[m]=="function")&&m!="__proto__")return h[m]}var tP=rP(SD),u1=hde||function(h,m){return sr.setTimeout(h,m)},ME=rP(w0e);function nP(h,m,w){var C=m+"";return ME(h,W0e(C,Z0e(B0e(C),w)))}function rP(h){var m=0,w=0;return function(){var C=yde(),T=I-(C-w);if(w=C,T>0){if(++m>=W)return arguments[0]}else m=0;return h.apply(n,arguments)}}function ab(h,m){var w=-1,C=h.length,T=C-1;for(m=m===n?C:m;++w<m;){var P=dE(w,T),B=h[P];h[P]=h[w],h[w]=B}return h.length=m,h}var iP=Y0e(function(h){var m=[];return h.charCodeAt(0)===46&&m.push(""),h.replace(Uce,function(w,C,T,P){m.push(T?P.replace(Jce,"$1"):C||w)}),m});function bs(h){if(typeof h=="string"||to(h))return h;var m=h+"";return m=="0"&&1/h==-j?"-0":m}function Bf(h){if(h!=null){try{return Dv.call(h)}catch{}try{return h+""}catch{}}return""}function Z0e(h,m){return No(ne,function(w){var C="_."+w[0];m&w[1]&&!Mv(h,C)&&h.push(C)}),h.sort()}function oP(h){if(h instanceof lt)return h.clone();var m=new Fo(h.__wrapped__,h.__chain__);return m.__actions__=wi(h.__actions__),m.__index__=h.__index__,m.__values__=h.__values__,m}function ehe(h,m,w){(w?qr(h,m,w):m===n)?m=1:m=Rn(et(m),0);var C=h==null?0:h.length;if(!C||m<1)return[];for(var T=0,P=0,B=Z(Uv(C/m));T<C;)B[P++]=Po(h,T,T+=m);return B}function the(h){for(var m=-1,w=h==null?0:h.length,C=0,T=[];++m<w;){var P=h[m];P&&(T[C++]=P)}return T}function nhe(){var h=arguments.length;if(!h)return[];for(var m=Z(h-1),w=arguments[0],C=h;C--;)m[C-1]=arguments[C];return Pl(Je(w)?wi(w):[w],ur(m,1))}var rhe=rt(function(h,m){return _n(h)?n1(h,ur(m,1,_n,!0)):[]}),ihe=rt(function(h,m){var w=Lo(m);return _n(w)&&(w=n),_n(h)?n1(h,ur(m,1,_n,!0),Ue(w,2)):[]}),ohe=rt(function(h,m){var w=Lo(m);return _n(w)&&(w=n),_n(h)?n1(h,ur(m,1,_n,!0),n,w):[]});function ahe(h,m,w){var C=h==null?0:h.length;return C?(m=w||m===n?1:et(m),Po(h,m<0?0:m,C)):[]}function she(h,m,w){var C=h==null?0:h.length;return C?(m=w||m===n?1:et(m),m=C-m,Po(h,0,m<0?0:m)):[]}function uhe(h,m){return h&&h.length?Qv(h,Ue(m,3),!0,!0):[]}function lhe(h,m){return h&&h.length?Qv(h,Ue(m,3),!0):[]}function che(h,m,w,C){var T=h==null?0:h.length;return T?(w&&typeof w!="number"&&qr(h,m,w)&&(w=0,C=T),n0e(h,m,w,C)):[]}function aP(h,m,w){var C=h==null?0:h.length;if(!C)return-1;var T=w==null?0:et(w);return T<0&&(T=Rn(C+T,0)),Ov(h,Ue(m,3),T)}function sP(h,m,w){var C=h==null?0:h.length;if(!C)return-1;var T=C-1;return w!==n&&(T=et(w),T=w<0?Rn(C+T,0):xr(T,C-1)),Ov(h,Ue(m,3),T,!0)}function uP(h){var m=h==null?0:h.length;return m?ur(h,1):[]}function fhe(h){var m=h==null?0:h.length;return m?ur(h,j):[]}function dhe(h,m){var w=h==null?0:h.length;return w?(m=m===n?1:et(m),ur(h,m)):[]}function hhe(h){for(var m=-1,w=h==null?0:h.length,C={};++m<w;){var T=h[m];C[T[0]]=T[1]}return C}function lP(h){return h&&h.length?h[0]:n}function phe(h,m,w){var C=h==null?0:h.length;if(!C)return-1;var T=w==null?0:et(w);return T<0&&(T=Rn(C+T,0)),W0(h,m,T)}function ghe(h){var m=h==null?0:h.length;return m?Po(h,0,-1):[]}var mhe=rt(function(h){var m=tn(h,yE);return m.length&&m[0]===h[0]?sE(m):[]}),yhe=rt(function(h){var m=Lo(h),w=tn(h,yE);return m===Lo(w)?m=n:w.pop(),w.length&&w[0]===h[0]?sE(w,Ue(m,2)):[]}),vhe=rt(function(h){var m=Lo(h),w=tn(h,yE);return m=typeof m=="function"?m:n,m&&w.pop(),w.length&&w[0]===h[0]?sE(w,n,m):[]});function bhe(h,m){return h==null?"":gde.call(h,m)}function Lo(h){var m=h==null?0:h.length;return m?h[m-1]:n}function xhe(h,m,w){var C=h==null?0:h.length;if(!C)return-1;var T=C;return w!==n&&(T=et(w),T=T<0?Rn(C+T,0):xr(T,C-1)),m===m?Zfe(h,m,T):Ov(h,WF,T,!0)}function whe(h,m){return h&&h.length?xD(h,et(m)):n}var _he=rt(cP);function cP(h,m){return h&&h.length&&m&&m.length?fE(h,m):h}function Ahe(h,m,w){return h&&h.length&&m&&m.length?fE(h,m,Ue(w,2)):h}function She(h,m,w){return h&&h.length&&m&&m.length?fE(h,m,n,w):h}var Ehe=wu(function(h,m){var w=h==null?0:h.length,C=rE(h,m);return AD(h,tn(m,function(T){return _u(T,w)?+T:T}).sort(RD)),C});function $he(h,m){var w=[];if(!(h&&h.length))return w;var C=-1,T=[],P=h.length;for(m=Ue(m,3);++C<P;){var B=h[C];m(B,C,h)&&(w.push(B),T.push(C))}return AD(h,T),w}function OE(h){return h==null?h:bde.call(h)}function Che(h,m,w){var C=h==null?0:h.length;return C?(w&&typeof w!="number"&&qr(h,m,w)?(m=0,w=C):(m=m==null?0:et(m),w=w===n?C:et(w)),Po(h,m,w)):[]}function khe(h,m){return Kv(h,m)}function The(h,m,w){return pE(h,m,Ue(w,2))}function Mhe(h,m){var w=h==null?0:h.length;if(w){var C=Kv(h,m);if(C<w&&Aa(h[C],m))return C}return-1}function Ohe(h,m){return Kv(h,m,!0)}function Nhe(h,m,w){return pE(h,m,Ue(w,2),!0)}function Rhe(h,m){var w=h==null?0:h.length;if(w){var C=Kv(h,m,!0)-1;if(Aa(h[C],m))return C}return-1}function Fhe(h){return h&&h.length?ED(h):[]}function Dhe(h,m){return h&&h.length?ED(h,Ue(m,2)):[]}function Phe(h){var m=h==null?0:h.length;return m?Po(h,1,m):[]}function Lhe(h,m,w){return h&&h.length?(m=w||m===n?1:et(m),Po(h,0,m<0?0:m)):[]}function Ihe(h,m,w){var C=h==null?0:h.length;return C?(m=w||m===n?1:et(m),m=C-m,Po(h,m<0?0:m,C)):[]}function zhe(h,m){return h&&h.length?Qv(h,Ue(m,3),!1,!0):[]}function Bhe(h,m){return h&&h.length?Qv(h,Ue(m,3)):[]}var jhe=rt(function(h){return Bl(ur(h,1,_n,!0))}),Uhe=rt(function(h){var m=Lo(h);return _n(m)&&(m=n),Bl(ur(h,1,_n,!0),Ue(m,2))}),Whe=rt(function(h){var m=Lo(h);return m=typeof m=="function"?m:n,Bl(ur(h,1,_n,!0),n,m)});function Hhe(h){return h&&h.length?Bl(h):[]}function qhe(h,m){return h&&h.length?Bl(h,Ue(m,2)):[]}function Ghe(h,m){return m=typeof m=="function"?m:n,h&&h.length?Bl(h,n,m):[]}function NE(h){if(!(h&&h.length))return[];var m=0;return h=Dl(h,function(w){if(_n(w))return m=Rn(w.length,m),!0}),XS(m,function(w){return tn(h,GS(w))})}function fP(h,m){if(!(h&&h.length))return[];var w=NE(h);return m==null?w:tn(w,function(C){return Qi(m,n,C)})}var Vhe=rt(function(h,m){return _n(h)?n1(h,m):[]}),Yhe=rt(function(h){return mE(Dl(h,_n))}),Xhe=rt(function(h){var m=Lo(h);return _n(m)&&(m=n),mE(Dl(h,_n),Ue(m,2))}),Jhe=rt(function(h){var m=Lo(h);return m=typeof m=="function"?m:n,mE(Dl(h,_n),n,m)}),Khe=rt(NE);function Qhe(h,m){return TD(h||[],m||[],t1)}function Zhe(h,m){return TD(h||[],m||[],o1)}var epe=rt(function(h){var m=h.length,w=m>1?h[m-1]:n;return w=typeof w=="function"?(h.pop(),w):n,fP(h,w)});function dP(h){var m=R(h);return m.__chain__=!0,m}function tpe(h,m){return m(h),h}function sb(h,m){return m(h)}var npe=wu(function(h){var m=h.length,w=m?h[0]:0,C=this.__wrapped__,T=function(P){return rE(P,h)};return m>1||this.__actions__.length||!(C instanceof lt)||!_u(w)?this.thru(T):(C=C.slice(w,+w+(m?1:0)),C.__actions__.push({func:sb,args:[T],thisArg:n}),new Fo(C,this.__chain__).thru(function(P){return m&&!P.length&&P.push(n),P}))});function rpe(){return dP(this)}function ipe(){return new Fo(this.value(),this.__chain__)}function ope(){this.__values__===n&&(this.__values__=$P(this.value()));var h=this.__index__>=this.__values__.length,m=h?n:this.__values__[this.__index__++];return{done:h,value:m}}function ape(){return this}function spe(h){for(var m,w=this;w instanceof Gv;){var C=oP(w);C.__index__=0,C.__values__=n,m?T.__wrapped__=C:m=C;var T=C;w=w.__wrapped__}return T.__wrapped__=h,m}function upe(){var h=this.__wrapped__;if(h instanceof lt){var m=h;return this.__actions__.length&&(m=new lt(this)),m=m.reverse(),m.__actions__.push({func:sb,args:[OE],thisArg:n}),new Fo(m,this.__chain__)}return this.thru(OE)}function lpe(){return kD(this.__wrapped__,this.__actions__)}var cpe=Zv(function(h,m,w){Rt.call(h,w)?++h[w]:bu(h,w,1)});function fpe(h,m,w){var C=Je(h)?jF:t0e;return w&&qr(h,m,w)&&(m=n),C(h,Ue(m,3))}function dpe(h,m){var w=Je(h)?Dl:fD;return w(h,Ue(m,3))}var hpe=zD(aP),ppe=zD(sP);function gpe(h,m){return ur(ub(h,m),1)}function mpe(h,m){return ur(ub(h,m),j)}function ype(h,m,w){return w=w===n?1:et(w),ur(ub(h,m),w)}function hP(h,m){var w=Je(h)?No:zl;return w(h,Ue(m,3))}function pP(h,m){var w=Je(h)?Pfe:cD;return w(h,Ue(m,3))}var vpe=Zv(function(h,m,w){Rt.call(h,w)?h[w].push(m):bu(h,w,[m])});function bpe(h,m,w,C){h=_i(h)?h:th(h),w=w&&!C?et(w):0;var T=h.length;return w<0&&(w=Rn(T+w,0)),hb(h)?w<=T&&h.indexOf(m,w)>-1:!!T&&W0(h,m,w)>-1}var xpe=rt(function(h,m,w){var C=-1,T=typeof m=="function",P=_i(h)?Z(h.length):[];return zl(h,function(B){P[++C]=T?Qi(m,B,w):r1(B,m,w)}),P}),wpe=Zv(function(h,m,w){bu(h,w,m)});function ub(h,m){var w=Je(h)?tn:yD;return w(h,Ue(m,3))}function _pe(h,m,w,C){return h==null?[]:(Je(m)||(m=m==null?[]:[m]),w=C?n:w,Je(w)||(w=w==null?[]:[w]),wD(h,m,w))}var Ape=Zv(function(h,m,w){h[w?0:1].push(m)},function(){return[[],[]]});function Spe(h,m,w){var C=Je(h)?HS:qF,T=arguments.length<3;return C(h,Ue(m,4),w,T,zl)}function Epe(h,m,w){var C=Je(h)?Lfe:qF,T=arguments.length<3;return C(h,Ue(m,4),w,T,cD)}function $pe(h,m){var w=Je(h)?Dl:fD;return w(h,fb(Ue(m,3)))}function Cpe(h){var m=Je(h)?aD:b0e;return m(h)}function kpe(h,m,w){(w?qr(h,m,w):m===n)?m=1:m=et(m);var C=Je(h)?Jde:x0e;return C(h,m)}function Tpe(h){var m=Je(h)?Kde:_0e;return m(h)}function Mpe(h){if(h==null)return 0;if(_i(h))return hb(h)?q0(h):h.length;var m=wr(h);return m==_e||m==Te?h.size:lE(h).length}function Ope(h,m,w){var C=Je(h)?qS:A0e;return w&&qr(h,m,w)&&(m=n),C(h,Ue(m,3))}var Npe=rt(function(h,m){if(h==null)return[];var w=m.length;return w>1&&qr(h,m[0],m[1])?m=[]:w>2&&qr(m[0],m[1],m[2])&&(m=[m[0]]),wD(h,ur(m,1),[])}),lb=dde||function(){return sr.Date.now()};function Rpe(h,m){if(typeof m!="function")throw new Ro(a);return h=et(h),function(){if(--h<1)return m.apply(this,arguments)}}function gP(h,m,w){return m=w?n:m,m=h&&m==null?h.length:m,xu(h,S,n,n,n,n,m)}function mP(h,m){var w;if(typeof m!="function")throw new Ro(a);return h=et(h),function(){return--h>0&&(w=m.apply(this,arguments)),h<=1&&(m=n),w}}var RE=rt(function(h,m,w){var C=v;if(w.length){var T=Ll(w,Z0(RE));C|=E}return xu(h,C,m,w,T)}),yP=rt(function(h,m,w){var C=v|b;if(w.length){var T=Ll(w,Z0(yP));C|=E}return xu(m,C,h,w,T)});function vP(h,m,w){m=w?n:m;var C=xu(h,_,n,n,n,n,n,m);return C.placeholder=vP.placeholder,C}function bP(h,m,w){m=w?n:m;var C=xu(h,A,n,n,n,n,n,m);return C.placeholder=bP.placeholder,C}function xP(h,m,w){var C,T,P,B,q,X,ue=0,le=!1,de=!1,Ce=!0;if(typeof h!="function")throw new Ro(a);m=Io(m)||0,ln(w)&&(le=!!w.leading,de="maxWait"in w,P=de?Rn(Io(w.maxWait)||0,m):P,Ce="trailing"in w?!!w.trailing:Ce);function Fe(An){var Sa=C,Eu=T;return C=T=n,ue=An,B=h.apply(Eu,Sa),B}function We(An){return ue=An,q=u1(st,m),le?Fe(An):B}function nt(An){var Sa=An-X,Eu=An-ue,zP=m-Sa;return de?xr(zP,P-Eu):zP}function He(An){var Sa=An-X,Eu=An-ue;return X===n||Sa>=m||Sa<0||de&&Eu>=P}function st(){var An=lb();if(He(An))return pt(An);q=u1(st,nt(An))}function pt(An){return q=n,Ce&&C?Fe(An):(C=T=n,B)}function no(){q!==n&&MD(q),ue=0,C=X=T=q=n}function Gr(){return q===n?B:pt(lb())}function ro(){var An=lb(),Sa=He(An);if(C=arguments,T=this,X=An,Sa){if(q===n)return We(X);if(de)return MD(q),q=u1(st,m),Fe(X)}return q===n&&(q=u1(st,m)),B}return ro.cancel=no,ro.flush=Gr,ro}var Fpe=rt(function(h,m){return lD(h,1,m)}),Dpe=rt(function(h,m,w){return lD(h,Io(m)||0,w)});function Ppe(h){return xu(h,O)}function cb(h,m){if(typeof h!="function"||m!=null&&typeof m!="function")throw new Ro(a);var w=function(){var C=arguments,T=m?m.apply(this,C):C[0],P=w.cache;if(P.has(T))return P.get(T);var B=h.apply(this,C);return w.cache=P.set(T,B)||P,B};return w.cache=new(cb.Cache||vu),w}cb.Cache=vu;function fb(h){if(typeof h!="function")throw new Ro(a);return function(){var m=arguments;switch(m.length){case 0:return!h.call(this);case 1:return!h.call(this,m[0]);case 2:return!h.call(this,m[0],m[1]);case 3:return!h.call(this,m[0],m[1],m[2])}return!h.apply(this,m)}}function Lpe(h){return mP(2,h)}var Ipe=S0e(function(h,m){m=m.length==1&&Je(m[0])?tn(m[0],Zi(Ue())):tn(ur(m,1),Zi(Ue()));var w=m.length;return rt(function(C){for(var T=-1,P=xr(C.length,w);++T<P;)C[T]=m[T].call(this,C[T]);return Qi(h,this,C)})}),FE=rt(function(h,m){var w=Ll(m,Z0(FE));return xu(h,E,n,m,w)}),wP=rt(function(h,m){var w=Ll(m,Z0(wP));return xu(h,$,n,m,w)}),zpe=wu(function(h,m){return xu(h,k,n,n,n,m)});function Bpe(h,m){if(typeof h!="function")throw new Ro(a);return m=m===n?m:et(m),rt(h,m)}function jpe(h,m){if(typeof h!="function")throw new Ro(a);return m=m==null?0:Rn(et(m),0),rt(function(w){var C=w[m],T=Ul(w,0,m);return C&&Pl(T,C),Qi(h,this,T)})}function Upe(h,m,w){var C=!0,T=!0;if(typeof h!="function")throw new Ro(a);return ln(w)&&(C="leading"in w?!!w.leading:C,T="trailing"in w?!!w.trailing:T),xP(h,m,{leading:C,maxWait:m,trailing:T})}function Wpe(h){return gP(h,1)}function Hpe(h,m){return FE(vE(m),h)}function qpe(){if(!arguments.length)return[];var h=arguments[0];return Je(h)?h:[h]}function Gpe(h){return Do(h,p)}function Vpe(h,m){return m=typeof m=="function"?m:n,Do(h,p,m)}function Ype(h){return Do(h,f|p)}function Xpe(h,m){return m=typeof m=="function"?m:n,Do(h,f|p,m)}function Jpe(h,m){return m==null||uD(h,m,Hn(m))}function Aa(h,m){return h===m||h!==h&&m!==m}var Kpe=rb(aE),Qpe=rb(function(h,m){return h>=m}),jf=pD(function(){return arguments}())?pD:function(h){return pn(h)&&Rt.call(h,"callee")&&!eD.call(h,"callee")},Je=Z.isArray,Zpe=DF?Zi(DF):s0e;function _i(h){return h!=null&&db(h.length)&&!Au(h)}function _n(h){return pn(h)&&_i(h)}function ege(h){return h===!0||h===!1||pn(h)&&Hr(h)==pe}var Wl=pde||qE,tge=PF?Zi(PF):u0e;function nge(h){return pn(h)&&h.nodeType===1&&!l1(h)}function rge(h){if(h==null)return!0;if(_i(h)&&(Je(h)||typeof h=="string"||typeof h.splice=="function"||Wl(h)||eh(h)||jf(h)))return!h.length;var m=wr(h);if(m==_e||m==Te)return!h.size;if(s1(h))return!lE(h).length;for(var w in h)if(Rt.call(h,w))return!1;return!0}function ige(h,m){return i1(h,m)}function oge(h,m,w){w=typeof w=="function"?w:n;var C=w?w(h,m):n;return C===n?i1(h,m,n,w):!!C}function DE(h){if(!pn(h))return!1;var m=Hr(h);return m==Ae||m==Se||typeof h.message=="string"&&typeof h.name=="string"&&!l1(h)}function age(h){return typeof h=="number"&&nD(h)}function Au(h){if(!ln(h))return!1;var m=Hr(h);return m==re||m==qe||m==fe||m==Mo}function _P(h){return typeof h=="number"&&h==et(h)}function db(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=z}function ln(h){var m=typeof h;return h!=null&&(m=="object"||m=="function")}function pn(h){return h!=null&&typeof h=="object"}var AP=LF?Zi(LF):c0e;function sge(h,m){return h===m||uE(h,m,EE(m))}function uge(h,m,w){return w=typeof w=="function"?w:n,uE(h,m,EE(m),w)}function lge(h){return SP(h)&&h!=+h}function cge(h){if(V0e(h))throw new Xe(o);return gD(h)}function fge(h){return h===null}function dge(h){return h==null}function SP(h){return typeof h=="number"||pn(h)&&Hr(h)==Ze}function l1(h){if(!pn(h)||Hr(h)!=ht)return!1;var m=zv(h);if(m===null)return!0;var w=Rt.call(m,"constructor")&&m.constructor;return typeof w=="function"&&w instanceof w&&Dv.call(w)==ude}var PE=IF?Zi(IF):f0e;function hge(h){return _P(h)&&h>=-z&&h<=z}var EP=zF?Zi(zF):d0e;function hb(h){return typeof h=="string"||!Je(h)&&pn(h)&&Hr(h)==un}function to(h){return typeof h=="symbol"||pn(h)&&Hr(h)==$t}var eh=BF?Zi(BF):h0e;function pge(h){return h===n}function gge(h){return pn(h)&&wr(h)==On}function mge(h){return pn(h)&&Hr(h)==xi}var yge=rb(cE),vge=rb(function(h,m){return h<=m});function $P(h){if(!h)return[];if(_i(h))return hb(h)?wa(h):wi(h);if(Jg&&h[Jg])return Jfe(h[Jg]());var m=wr(h),w=m==_e?KS:m==Te?Nv:th;return w(h)}function Su(h){if(!h)return h===0?h:0;if(h=Io(h),h===j||h===-j){var m=h<0?-1:1;return m*H}return h===h?h:0}function et(h){var m=Su(h),w=m%1;return m===m?w?m-w:m:0}function CP(h){return h?Lf(et(h),0,V):0}function Io(h){if(typeof h=="number")return h;if(to(h))return U;if(ln(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=ln(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=GF(h);var w=Zce.test(h);return w||tfe.test(h)?Rfe(h.slice(2),w?2:8):Qce.test(h)?U:+h}function kP(h){return vs(h,Ai(h))}function bge(h){return h?Lf(et(h),-z,z):h===0?h:0}function Tt(h){return h==null?"":eo(h)}var xge=K0(function(h,m){if(s1(m)||_i(m)){vs(m,Hn(m),h);return}for(var w in m)Rt.call(m,w)&&t1(h,w,m[w])}),TP=K0(function(h,m){vs(m,Ai(m),h)}),pb=K0(function(h,m,w,C){vs(m,Ai(m),h,C)}),wge=K0(function(h,m,w,C){vs(m,Hn(m),h,C)}),_ge=wu(rE);function Age(h,m){var w=J0(h);return m==null?w:sD(w,m)}var Sge=rt(function(h,m){h=Ut(h);var w=-1,C=m.length,T=C>2?m[2]:n;for(T&&qr(m[0],m[1],T)&&(C=1);++w<C;)for(var P=m[w],B=Ai(P),q=-1,X=B.length;++q<X;){var ue=B[q],le=h[ue];(le===n||Aa(le,V0[ue])&&!Rt.call(h,ue))&&(h[ue]=P[ue])}return h}),Ege=rt(function(h){return h.push(n,GD),Qi(MP,n,h)});function $ge(h,m){return UF(h,Ue(m,3),ys)}function Cge(h,m){return UF(h,Ue(m,3),oE)}function kge(h,m){return h==null?h:iE(h,Ue(m,3),Ai)}function Tge(h,m){return h==null?h:dD(h,Ue(m,3),Ai)}function Mge(h,m){return h&&ys(h,Ue(m,3))}function Oge(h,m){return h&&oE(h,Ue(m,3))}function Nge(h){return h==null?[]:Xv(h,Hn(h))}function Rge(h){return h==null?[]:Xv(h,Ai(h))}function LE(h,m,w){var C=h==null?n:If(h,m);return C===n?w:C}function Fge(h,m){return h!=null&&XD(h,m,r0e)}function IE(h,m){return h!=null&&XD(h,m,i0e)}var Dge=jD(function(h,m,w){m!=null&&typeof m.toString!="function"&&(m=Pv.call(m)),h[m]=w},BE(Si)),Pge=jD(function(h,m,w){m!=null&&typeof m.toString!="function"&&(m=Pv.call(m)),Rt.call(h,m)?h[m].push(w):h[m]=[w]},Ue),Lge=rt(r1);function Hn(h){return _i(h)?oD(h):lE(h)}function Ai(h){return _i(h)?oD(h,!0):p0e(h)}function Ige(h,m){var w={};return m=Ue(m,3),ys(h,function(C,T,P){bu(w,m(C,T,P),C)}),w}function zge(h,m){var w={};return m=Ue(m,3),ys(h,function(C,T,P){bu(w,T,m(C,T,P))}),w}var Bge=K0(function(h,m,w){Jv(h,m,w)}),MP=K0(function(h,m,w,C){Jv(h,m,w,C)}),jge=wu(function(h,m){var w={};if(h==null)return w;var C=!1;m=tn(m,function(P){return P=jl(P,h),C||(C=P.length>1),P}),vs(h,AE(h),w),C&&(w=Do(w,f|d|p,D0e));for(var T=m.length;T--;)gE(w,m[T]);return w});function Uge(h,m){return OP(h,fb(Ue(m)))}var Wge=wu(function(h,m){return h==null?{}:m0e(h,m)});function OP(h,m){if(h==null)return{};var w=tn(AE(h),function(C){return[C]});return m=Ue(m),_D(h,w,function(C,T){return m(C,T[0])})}function Hge(h,m,w){m=jl(m,h);var C=-1,T=m.length;for(T||(T=1,h=n);++C<T;){var P=h==null?n:h[bs(m[C])];P===n&&(C=T,P=w),h=Au(P)?P.call(h):P}return h}function qge(h,m,w){return h==null?h:o1(h,m,w)}function Gge(h,m,w,C){return C=typeof C=="function"?C:n,h==null?h:o1(h,m,w,C)}var NP=HD(Hn),RP=HD(Ai);function Vge(h,m,w){var C=Je(h),T=C||Wl(h)||eh(h);if(m=Ue(m,4),w==null){var P=h&&h.constructor;T?w=C?new P:[]:ln(h)?w=Au(P)?J0(zv(h)):{}:w={}}return(T?No:ys)(h,function(B,q,X){return m(w,B,q,X)}),w}function Yge(h,m){return h==null?!0:gE(h,m)}function Xge(h,m,w){return h==null?h:CD(h,m,vE(w))}function Jge(h,m,w,C){return C=typeof C=="function"?C:n,h==null?h:CD(h,m,vE(w),C)}function th(h){return h==null?[]:JS(h,Hn(h))}function Kge(h){return h==null?[]:JS(h,Ai(h))}function Qge(h,m,w){return w===n&&(w=m,m=n),w!==n&&(w=Io(w),w=w===w?w:0),m!==n&&(m=Io(m),m=m===m?m:0),Lf(Io(h),m,w)}function Zge(h,m,w){return m=Su(m),w===n?(w=m,m=0):w=Su(w),h=Io(h),o0e(h,m,w)}function e1e(h,m,w){if(w&&typeof w!="boolean"&&qr(h,m,w)&&(m=w=n),w===n&&(typeof m=="boolean"?(w=m,m=n):typeof h=="boolean"&&(w=h,h=n)),h===n&&m===n?(h=0,m=1):(h=Su(h),m===n?(m=h,h=0):m=Su(m)),h>m){var C=h;h=m,m=C}if(w||h%1||m%1){var T=rD();return xr(h+T*(m-h+Nfe("1e-"+((T+"").length-1))),m)}return dE(h,m)}var t1e=Q0(function(h,m,w){return m=m.toLowerCase(),h+(w?FP(m):m)});function FP(h){return zE(Tt(h).toLowerCase())}function DP(h){return h=Tt(h),h&&h.replace(rfe,qfe).replace(_fe,"")}function n1e(h,m,w){h=Tt(h),m=eo(m);var C=h.length;w=w===n?C:Lf(et(w),0,C);var T=w;return w-=m.length,w>=0&&h.slice(w,T)==m}function r1e(h){return h=Tt(h),h&&Lce.test(h)?h.replace(dF,Gfe):h}function i1e(h){return h=Tt(h),h&&Wce.test(h)?h.replace(FS,"\\$&"):h}var o1e=Q0(function(h,m,w){return h+(w?"-":"")+m.toLowerCase()}),a1e=Q0(function(h,m,w){return h+(w?" ":"")+m.toLowerCase()}),s1e=ID("toLowerCase");function u1e(h,m,w){h=Tt(h),m=et(m);var C=m?q0(h):0;if(!m||C>=m)return h;var T=(m-C)/2;return nb(Wv(T),w)+h+nb(Uv(T),w)}function l1e(h,m,w){h=Tt(h),m=et(m);var C=m?q0(h):0;return m&&C<m?h+nb(m-C,w):h}function c1e(h,m,w){h=Tt(h),m=et(m);var C=m?q0(h):0;return m&&C<m?nb(m-C,w)+h:h}function f1e(h,m,w){return w||m==null?m=0:m&&(m=+m),vde(Tt(h).replace(DS,""),m||0)}function d1e(h,m,w){return(w?qr(h,m,w):m===n)?m=1:m=et(m),hE(Tt(h),m)}function h1e(){var h=arguments,m=Tt(h[0]);return h.length<3?m:m.replace(h[1],h[2])}var p1e=Q0(function(h,m,w){return h+(w?"_":"")+m.toLowerCase()});function g1e(h,m,w){return w&&typeof w!="number"&&qr(h,m,w)&&(m=w=n),w=w===n?V:w>>>0,w?(h=Tt(h),h&&(typeof m=="string"||m!=null&&!PE(m))&&(m=eo(m),!m&&H0(h))?Ul(wa(h),0,w):h.split(m,w)):[]}var m1e=Q0(function(h,m,w){return h+(w?" ":"")+zE(m)});function y1e(h,m,w){return h=Tt(h),w=w==null?0:Lf(et(w),0,h.length),m=eo(m),h.slice(w,w+m.length)==m}function v1e(h,m,w){var C=R.templateSettings;w&&qr(h,m,w)&&(m=n),h=Tt(h),m=pb({},m,C,qD);var T=pb({},m.imports,C.imports,qD),P=Hn(T),B=JS(T,P),q,X,ue=0,le=m.interpolate||Cv,de="__p += '",Ce=QS((m.escape||Cv).source+"|"+le.source+"|"+(le===hF?Kce:Cv).source+"|"+(m.evaluate||Cv).source+"|$","g"),Fe="//# sourceURL="+(Rt.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Cfe+"]")+`
`;h.replace(Ce,function(He,st,pt,no,Gr,ro){return pt||(pt=no),de+=h.slice(ue,ro).replace(ife,Vfe),st&&(q=!0,de+=`' +
__e(`+st+`) +
'`),Gr&&(X=!0,de+=`';
`+Gr+`;
__p += '`),pt&&(de+=`' +
((__t = (`+pt+`)) == null ? '' : __t) +
'`),ue=ro+He.length,He}),de+=`';
`;var We=Rt.call(m,"variable")&&m.variable;if(!We)de=`with (obj) {
`+de+`
}
`;else if(Xce.test(We))throw new Xe(s);de=(X?de.replace(Rce,""):de).replace(Fce,"$1").replace(Dce,"$1;"),de="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var nt=LP(function(){return Ct(P,Fe+"return "+de).apply(n,B)});if(nt.source=de,DE(nt))throw nt;return nt}function b1e(h){return Tt(h).toLowerCase()}function x1e(h){return Tt(h).toUpperCase()}function w1e(h,m,w){if(h=Tt(h),h&&(w||m===n))return GF(h);if(!h||!(m=eo(m)))return h;var C=wa(h),T=wa(m),P=VF(C,T),B=YF(C,T)+1;return Ul(C,P,B).join("")}function _1e(h,m,w){if(h=Tt(h),h&&(w||m===n))return h.slice(0,JF(h)+1);if(!h||!(m=eo(m)))return h;var C=wa(h),T=YF(C,wa(m))+1;return Ul(C,0,T).join("")}function A1e(h,m,w){if(h=Tt(h),h&&(w||m===n))return h.replace(DS,"");if(!h||!(m=eo(m)))return h;var C=wa(h),T=VF(C,wa(m));return Ul(C,T).join("")}function S1e(h,m){var w=N,C=F;if(ln(m)){var T="separator"in m?m.separator:T;w="length"in m?et(m.length):w,C="omission"in m?eo(m.omission):C}h=Tt(h);var P=h.length;if(H0(h)){var B=wa(h);P=B.length}if(w>=P)return h;var q=w-q0(C);if(q<1)return C;var X=B?Ul(B,0,q).join(""):h.slice(0,q);if(T===n)return X+C;if(B&&(q+=X.length-q),PE(T)){if(h.slice(q).search(T)){var ue,le=X;for(T.global||(T=QS(T.source,Tt(pF.exec(T))+"g")),T.lastIndex=0;ue=T.exec(le);)var de=ue.index;X=X.slice(0,de===n?q:de)}}else if(h.indexOf(eo(T),q)!=q){var Ce=X.lastIndexOf(T);Ce>-1&&(X=X.slice(0,Ce))}return X+C}function E1e(h){return h=Tt(h),h&&Pce.test(h)?h.replace(fF,ede):h}var $1e=Q0(function(h,m,w){return h+(w?" ":"")+m.toUpperCase()}),zE=ID("toUpperCase");function PP(h,m,w){return h=Tt(h),m=w?n:m,m===n?Xfe(h)?rde(h):Bfe(h):h.match(m)||[]}var LP=rt(function(h,m){try{return Qi(h,n,m)}catch(w){return DE(w)?w:new Xe(w)}}),C1e=wu(function(h,m){return No(m,function(w){w=bs(w),bu(h,w,RE(h[w],h))}),h});function k1e(h){var m=h==null?0:h.length,w=Ue();return h=m?tn(h,function(C){if(typeof C[1]!="function")throw new Ro(a);return[w(C[0]),C[1]]}):[],rt(function(C){for(var T=-1;++T<m;){var P=h[T];if(Qi(P[0],this,C))return Qi(P[1],this,C)}})}function T1e(h){return e0e(Do(h,f))}function BE(h){return function(){return h}}function M1e(h,m){return h==null||h!==h?m:h}var O1e=BD(),N1e=BD(!0);function Si(h){return h}function jE(h){return mD(typeof h=="function"?h:Do(h,f))}function R1e(h){return vD(Do(h,f))}function F1e(h,m){return bD(h,Do(m,f))}var D1e=rt(function(h,m){return function(w){return r1(w,h,m)}}),P1e=rt(function(h,m){return function(w){return r1(h,w,m)}});function UE(h,m,w){var C=Hn(m),T=Xv(m,C);w==null&&!(ln(m)&&(T.length||!C.length))&&(w=m,m=h,h=this,T=Xv(m,Hn(m)));var P=!(ln(w)&&"chain"in w)||!!w.chain,B=Au(h);return No(T,function(q){var X=m[q];h[q]=X,B&&(h.prototype[q]=function(){var ue=this.__chain__;if(P||ue){var le=h(this.__wrapped__),de=le.__actions__=wi(this.__actions__);return de.push({func:X,args:arguments,thisArg:h}),le.__chain__=ue,le}return X.apply(h,Pl([this.value()],arguments))})}),h}function L1e(){return sr._===this&&(sr._=lde),this}function WE(){}function I1e(h){return h=et(h),rt(function(m){return xD(m,h)})}var z1e=xE(tn),B1e=xE(jF),j1e=xE(qS);function IP(h){return CE(h)?GS(bs(h)):y0e(h)}function U1e(h){return function(m){return h==null?n:If(h,m)}}var W1e=UD(),H1e=UD(!0);function HE(){return[]}function qE(){return!1}function q1e(){return{}}function G1e(){return""}function V1e(){return!0}function Y1e(h,m){if(h=et(h),h<1||h>z)return[];var w=V,C=xr(h,V);m=Ue(m),h-=V;for(var T=XS(C,m);++w<h;)m(w);return T}function X1e(h){return Je(h)?tn(h,bs):to(h)?[h]:wi(iP(Tt(h)))}function J1e(h){var m=++sde;return Tt(h)+m}var K1e=tb(function(h,m){return h+m},0),Q1e=wE("ceil"),Z1e=tb(function(h,m){return h/m},1),eme=wE("floor");function tme(h){return h&&h.length?Yv(h,Si,aE):n}function nme(h,m){return h&&h.length?Yv(h,Ue(m,2),aE):n}function rme(h){return HF(h,Si)}function ime(h,m){return HF(h,Ue(m,2))}function ome(h){return h&&h.length?Yv(h,Si,cE):n}function ame(h,m){return h&&h.length?Yv(h,Ue(m,2),cE):n}var sme=tb(function(h,m){return h*m},1),ume=wE("round"),lme=tb(function(h,m){return h-m},0);function cme(h){return h&&h.length?YS(h,Si):0}function fme(h,m){return h&&h.length?YS(h,Ue(m,2)):0}return R.after=Rpe,R.ary=gP,R.assign=xge,R.assignIn=TP,R.assignInWith=pb,R.assignWith=wge,R.at=_ge,R.before=mP,R.bind=RE,R.bindAll=C1e,R.bindKey=yP,R.castArray=qpe,R.chain=dP,R.chunk=ehe,R.compact=the,R.concat=nhe,R.cond=k1e,R.conforms=T1e,R.constant=BE,R.countBy=cpe,R.create=Age,R.curry=vP,R.curryRight=bP,R.debounce=xP,R.defaults=Sge,R.defaultsDeep=Ege,R.defer=Fpe,R.delay=Dpe,R.difference=rhe,R.differenceBy=ihe,R.differenceWith=ohe,R.drop=ahe,R.dropRight=she,R.dropRightWhile=uhe,R.dropWhile=lhe,R.fill=che,R.filter=dpe,R.flatMap=gpe,R.flatMapDeep=mpe,R.flatMapDepth=ype,R.flatten=uP,R.flattenDeep=fhe,R.flattenDepth=dhe,R.flip=Ppe,R.flow=O1e,R.flowRight=N1e,R.fromPairs=hhe,R.functions=Nge,R.functionsIn=Rge,R.groupBy=vpe,R.initial=ghe,R.intersection=mhe,R.intersectionBy=yhe,R.intersectionWith=vhe,R.invert=Dge,R.invertBy=Pge,R.invokeMap=xpe,R.iteratee=jE,R.keyBy=wpe,R.keys=Hn,R.keysIn=Ai,R.map=ub,R.mapKeys=Ige,R.mapValues=zge,R.matches=R1e,R.matchesProperty=F1e,R.memoize=cb,R.merge=Bge,R.mergeWith=MP,R.method=D1e,R.methodOf=P1e,R.mixin=UE,R.negate=fb,R.nthArg=I1e,R.omit=jge,R.omitBy=Uge,R.once=Lpe,R.orderBy=_pe,R.over=z1e,R.overArgs=Ipe,R.overEvery=B1e,R.overSome=j1e,R.partial=FE,R.partialRight=wP,R.partition=Ape,R.pick=Wge,R.pickBy=OP,R.property=IP,R.propertyOf=U1e,R.pull=_he,R.pullAll=cP,R.pullAllBy=Ahe,R.pullAllWith=She,R.pullAt=Ehe,R.range=W1e,R.rangeRight=H1e,R.rearg=zpe,R.reject=$pe,R.remove=$he,R.rest=Bpe,R.reverse=OE,R.sampleSize=kpe,R.set=qge,R.setWith=Gge,R.shuffle=Tpe,R.slice=Che,R.sortBy=Npe,R.sortedUniq=Fhe,R.sortedUniqBy=Dhe,R.split=g1e,R.spread=jpe,R.tail=Phe,R.take=Lhe,R.takeRight=Ihe,R.takeRightWhile=zhe,R.takeWhile=Bhe,R.tap=tpe,R.throttle=Upe,R.thru=sb,R.toArray=$P,R.toPairs=NP,R.toPairsIn=RP,R.toPath=X1e,R.toPlainObject=kP,R.transform=Vge,R.unary=Wpe,R.union=jhe,R.unionBy=Uhe,R.unionWith=Whe,R.uniq=Hhe,R.uniqBy=qhe,R.uniqWith=Ghe,R.unset=Yge,R.unzip=NE,R.unzipWith=fP,R.update=Xge,R.updateWith=Jge,R.values=th,R.valuesIn=Kge,R.without=Vhe,R.words=PP,R.wrap=Hpe,R.xor=Yhe,R.xorBy=Xhe,R.xorWith=Jhe,R.zip=Khe,R.zipObject=Qhe,R.zipObjectDeep=Zhe,R.zipWith=epe,R.entries=NP,R.entriesIn=RP,R.extend=TP,R.extendWith=pb,UE(R,R),R.add=K1e,R.attempt=LP,R.camelCase=t1e,R.capitalize=FP,R.ceil=Q1e,R.clamp=Qge,R.clone=Gpe,R.cloneDeep=Ype,R.cloneDeepWith=Xpe,R.cloneWith=Vpe,R.conformsTo=Jpe,R.deburr=DP,R.defaultTo=M1e,R.divide=Z1e,R.endsWith=n1e,R.eq=Aa,R.escape=r1e,R.escapeRegExp=i1e,R.every=fpe,R.find=hpe,R.findIndex=aP,R.findKey=$ge,R.findLast=ppe,R.findLastIndex=sP,R.findLastKey=Cge,R.floor=eme,R.forEach=hP,R.forEachRight=pP,R.forIn=kge,R.forInRight=Tge,R.forOwn=Mge,R.forOwnRight=Oge,R.get=LE,R.gt=Kpe,R.gte=Qpe,R.has=Fge,R.hasIn=IE,R.head=lP,R.identity=Si,R.includes=bpe,R.indexOf=phe,R.inRange=Zge,R.invoke=Lge,R.isArguments=jf,R.isArray=Je,R.isArrayBuffer=Zpe,R.isArrayLike=_i,R.isArrayLikeObject=_n,R.isBoolean=ege,R.isBuffer=Wl,R.isDate=tge,R.isElement=nge,R.isEmpty=rge,R.isEqual=ige,R.isEqualWith=oge,R.isError=DE,R.isFinite=age,R.isFunction=Au,R.isInteger=_P,R.isLength=db,R.isMap=AP,R.isMatch=sge,R.isMatchWith=uge,R.isNaN=lge,R.isNative=cge,R.isNil=dge,R.isNull=fge,R.isNumber=SP,R.isObject=ln,R.isObjectLike=pn,R.isPlainObject=l1,R.isRegExp=PE,R.isSafeInteger=hge,R.isSet=EP,R.isString=hb,R.isSymbol=to,R.isTypedArray=eh,R.isUndefined=pge,R.isWeakMap=gge,R.isWeakSet=mge,R.join=bhe,R.kebabCase=o1e,R.last=Lo,R.lastIndexOf=xhe,R.lowerCase=a1e,R.lowerFirst=s1e,R.lt=yge,R.lte=vge,R.max=tme,R.maxBy=nme,R.mean=rme,R.meanBy=ime,R.min=ome,R.minBy=ame,R.stubArray=HE,R.stubFalse=qE,R.stubObject=q1e,R.stubString=G1e,R.stubTrue=V1e,R.multiply=sme,R.nth=whe,R.noConflict=L1e,R.noop=WE,R.now=lb,R.pad=u1e,R.padEnd=l1e,R.padStart=c1e,R.parseInt=f1e,R.random=e1e,R.reduce=Spe,R.reduceRight=Epe,R.repeat=d1e,R.replace=h1e,R.result=Hge,R.round=ume,R.runInContext=G,R.sample=Cpe,R.size=Mpe,R.snakeCase=p1e,R.some=Ope,R.sortedIndex=khe,R.sortedIndexBy=The,R.sortedIndexOf=Mhe,R.sortedLastIndex=Ohe,R.sortedLastIndexBy=Nhe,R.sortedLastIndexOf=Rhe,R.startCase=m1e,R.startsWith=y1e,R.subtract=lme,R.sum=cme,R.sumBy=fme,R.template=v1e,R.times=Y1e,R.toFinite=Su,R.toInteger=et,R.toLength=CP,R.toLower=b1e,R.toNumber=Io,R.toSafeInteger=bge,R.toString=Tt,R.toUpper=x1e,R.trim=w1e,R.trimEnd=_1e,R.trimStart=A1e,R.truncate=S1e,R.unescape=E1e,R.uniqueId=J1e,R.upperCase=$1e,R.upperFirst=zE,R.each=hP,R.eachRight=pP,R.first=lP,UE(R,function(){var h={};return ys(R,function(m,w){Rt.call(R.prototype,w)||(h[w]=m)}),h}(),{chain:!1}),R.VERSION=r,No(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){R[h].placeholder=R}),No(["drop","take"],function(h,m){lt.prototype[h]=function(w){w=w===n?1:Rn(et(w),0);var C=this.__filtered__&&!m?new lt(this):this.clone();return C.__filtered__?C.__takeCount__=xr(w,C.__takeCount__):C.__views__.push({size:xr(w,V),type:h+(C.__dir__<0?"Right":"")}),C},lt.prototype[h+"Right"]=function(w){return this.reverse()[h](w).reverse()}}),No(["filter","map","takeWhile"],function(h,m){var w=m+1,C=w==M||w==L;lt.prototype[h]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:Ue(T,3),type:w}),P.__filtered__=P.__filtered__||C,P}}),No(["head","last"],function(h,m){var w="take"+(m?"Right":"");lt.prototype[h]=function(){return this[w](1).value()[0]}}),No(["initial","tail"],function(h,m){var w="drop"+(m?"":"Right");lt.prototype[h]=function(){return this.__filtered__?new lt(this):this[w](1)}}),lt.prototype.compact=function(){return this.filter(Si)},lt.prototype.find=function(h){return this.filter(h).head()},lt.prototype.findLast=function(h){return this.reverse().find(h)},lt.prototype.invokeMap=rt(function(h,m){return typeof h=="function"?new lt(this):this.map(function(w){return r1(w,h,m)})}),lt.prototype.reject=function(h){return this.filter(fb(Ue(h)))},lt.prototype.slice=function(h,m){h=et(h);var w=this;return w.__filtered__&&(h>0||m<0)?new lt(w):(h<0?w=w.takeRight(-h):h&&(w=w.drop(h)),m!==n&&(m=et(m),w=m<0?w.dropRight(-m):w.take(m-h)),w)},lt.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},lt.prototype.toArray=function(){return this.take(V)},ys(lt.prototype,function(h,m){var w=/^(?:filter|find|map|reject)|While$/.test(m),C=/^(?:head|last)$/.test(m),T=R[C?"take"+(m=="last"?"Right":""):m],P=C||/^find/.test(m);T&&(R.prototype[m]=function(){var B=this.__wrapped__,q=C?[1]:arguments,X=B instanceof lt,ue=q[0],le=X||Je(B),de=function(st){var pt=T.apply(R,Pl([st],q));return C&&Ce?pt[0]:pt};le&&w&&typeof ue=="function"&&ue.length!=1&&(X=le=!1);var Ce=this.__chain__,Fe=!!this.__actions__.length,We=P&&!Ce,nt=X&&!Fe;if(!P&&le){B=nt?B:new lt(this);var He=h.apply(B,q);return He.__actions__.push({func:sb,args:[de],thisArg:n}),new Fo(He,Ce)}return We&&nt?h.apply(this,q):(He=this.thru(de),We?C?He.value()[0]:He.value():He)})}),No(["pop","push","shift","sort","splice","unshift"],function(h){var m=Rv[h],w=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",C=/^(?:pop|shift)$/.test(h);R.prototype[h]=function(){var T=arguments;if(C&&!this.__chain__){var P=this.value();return m.apply(Je(P)?P:[],T)}return this[w](function(B){return m.apply(Je(B)?B:[],T)})}}),ys(lt.prototype,function(h,m){var w=R[m];if(w){var C=w.name+"";Rt.call(X0,C)||(X0[C]=[]),X0[C].push({name:m,func:w})}}),X0[eb(n,b).name]=[{name:"wrapper",func:n}],lt.prototype.clone=Ede,lt.prototype.reverse=$de,lt.prototype.value=Cde,R.prototype.at=npe,R.prototype.chain=rpe,R.prototype.commit=ipe,R.prototype.next=ope,R.prototype.plant=spe,R.prototype.reverse=upe,R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=lpe,R.prototype.first=R.prototype.head,Jg&&(R.prototype[Jg]=ape),R},G0=ide();Rf?((Rf.exports=G0)._=G0,jS._=G0):sr._=G0}).call(c1)})(Xw,Xw.exports);var lwe=Xw.exports;function Jw(e){var t=null;if(Array.isArray(e)||(t=e.split(" and ")),t.length==1?t=t[0]:t=t.find(n=>n.includes("Professor")),t=="Chair Professor")return"#0057e7";if(t=="Professor")return"#d62d20";if(t=="Associate Professor")return"#ffa700";if(t=="Assistant Professor")return"#008744"}function cwe(e){var t=null,n=null;Array.isArray(e)||(t=e.split(" and ")),t.length==1?n=t[0]:n=t.find(i=>i.includes("Professor"));var r=t.find(i=>i.includes("Head"));return r||(r="Non-head"),{finalRank:n,head:r}}const fwe=["Chair Professor","Professor","Associate Professor","Assistant Professor"];function Us(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gg(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function v0(e){let t,n,r;e.length!==2?(t=Us,n=(s,u)=>Us(e(s),u),r=(s,u)=>e(s)-u):(t=e===Us||e===gg?e:dwe,n=e,r=e);function i(s,u,l=0,c=s.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:a,right:o}}function dwe(){return 0}function tX(e){return e===null?NaN:+e}function*hwe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const nX=v0(Us),Kw=nX.right,pwe=nX.left;v0(tX).center;const b2=Kw;function gwe(e){return e.length|0}function mwe(e){return!(e>0)}function ywe(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function vwe(e){return t=>e(...t)}function bwe(...e){const t=typeof e[e.length-1]=="function"&&vwe(e.pop());e=e.map(ywe);const n=e.map(gwe),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(mwe))return o;for(;;){o.push(i.map((s,u)=>e[u][s]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function rX(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function iX(e,t){const n=rX(e,t);return n&&Math.sqrt(n)}function Cc(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class si{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class xy extends Map{constructor(t,n=sX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(x4(this,t))}has(t){return super.has(x4(this,t))}set(t,n){return super.set(oX(this,t),n)}delete(t){return super.delete(aX(this,t))}}class zc extends Set{constructor(t,n=sX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(x4(this,t))}add(t){return super.add(oX(this,t))}delete(t){return super.delete(aX(this,t))}}function x4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function oX({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function aX({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function sX(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xwe(e){return e}function _9(e,t,...n){return uX(e,xwe,t,n)}function wwe(e,t,...n){return uX(e,Array.from,t,n)}function uX(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new xy,u=r[a++];let l=-1;for(const c of o){const f=u(c,++l,o),d=s.get(f);d?d.push(c):s.set(f,[c])}for(const[c,f]of s)s.set(c,i(f,a));return t(s)}(e,0)}function lX(e,t){return Array.from(t,n=>e[n])}function _we(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const s=Qw(a[i],a[o]);if(s)return s}})):(n=e.map(n),r.sort((i,o)=>Qw(n[i],n[o]))),lX(e,r)}return e.sort(cX(n))}function cX(e=Us){if(e===Us)return Qw;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Qw(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Awe=Math.sqrt(50),Swe=Math.sqrt(10),Ewe=Math.sqrt(2);function Zw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Awe?10:o>=Swe?5:o>=Ewe?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=n&&n<2?Zw(e,t,n*2):[s,u,l]}function e_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?Zw(t,e,n):Zw(e,t,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function w4(e,t,n){return t=+t,e=+e,n=+n,Zw(e,t,n)[2]}function Bc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?w4(t,e,n):w4(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ui(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $we(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function _p(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Cwe(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function fX(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Qw:cX(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/u+d)),g=Math.min(r,Math.floor(t+(u-l)*f/u+d));fX(e,t,p,g,i)}const o=e[t];let a=n,s=r;for(x1(e,n,t),i(e[r],o)>0&&x1(e,n,r);a<s;){for(x1(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?x1(e,n,s):(++s,x1(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function x1(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ap(e,t,n){if(e=Float64Array.from(hwe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return _p(e);if(t>=1)return ui(e);var r,i=(r-1)*t,o=Math.floor(i),a=ui(fX(e,o).subarray(0,o+1)),s=_p(e.subarray(o+1));return a+(s-a)*(i-o)}}function dX(e,t,n=tX){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function hX(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function wy(e,t){return Ap(e,.5,t)}function*kwe(e){for(const t of e)yield*t}function pX(e){return Array.from(kwe(e))}function Twe(e,t){const n=new xy;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function Mwe(e,t=Owe){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function Owe(e,t){return[e,t]}function In(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function x2(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function t_(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Nwe(e,...t){e=new zc(e),t=t.map(Rwe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Rwe(e){return e instanceof zc?e:new zc(e)}function Fwe(...e){const t=new zc;for(const n of e)for(const r of n)t.add(r);return t}function Dwe(e){return e}var A9=1,S9=2,_4=3,Db=4,xI=1e-6;function Pwe(e){return"translate("+e+",0)"}function Lwe(e){return"translate(0,"+e+")"}function Iwe(e){return t=>+e(t)}function zwe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Bwe(){return!this.__axis}function jwe(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===A9||e===Db?-1:1,c=e===Db||e===S9?"x":"y",f=e===A9||e===_4?Pwe:Lwe;function d(p){var g=r??(t.ticks?t.ticks.apply(t,n):t.domain()),y=i??(t.tickFormat?t.tickFormat.apply(t,n):Dwe),v=Math.max(o,0)+s,b=t.range(),x=+b[0]+u,_=+b[b.length-1]+u,A=(t.bandwidth?zwe:Iwe)(t.copy(),u),E=p.selection?p.selection():p,$=E.selectAll(".domain").data([null]),S=E.selectAll(".tick").data(g,t).order(),k=S.exit(),O=S.enter().append("g").attr("class","tick"),N=S.select("line"),F=S.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(O),N=N.merge(O.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),F=F.merge(O.append("text").attr("fill","currentColor").attr(c,l*v).attr("dy",e===A9?"0em":e===_4?"0.71em":"0.32em")),p!==E&&($=$.transition(p),S=S.transition(p),N=N.transition(p),F=F.transition(p),k=k.transition(p).attr("opacity",xI).attr("transform",function(W){return isFinite(W=A(W))?f(W+u):this.getAttribute("transform")}),O.attr("opacity",xI).attr("transform",function(W){var I=this.parentNode.__axis;return f((I&&isFinite(I=I(W))?I:A(W))+u)})),k.remove(),$.attr("d",e===Db||e===S9?a?"M"+l*a+","+x+"H"+u+"V"+_+"H"+l*a:"M"+u+","+x+"V"+_:a?"M"+x+","+l*a+"V"+u+"H"+_+"V"+l*a:"M"+x+","+u+"H"+_),S.attr("opacity",1).attr("transform",function(W){return f(A(W)+u)}),N.attr(c+"2",l*o),F.attr(c,l*v).text(y),E.filter(Bwe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===S9?"start":e===Db?"end":"middle"),E.each(function(){this.__axis=A})}return d.scale=function(p){return arguments.length?(t=p,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),d):r&&r.slice()},d.tickFormat=function(p){return arguments.length?(i=p,d):i},d.tickSize=function(p){return arguments.length?(o=a=+p,d):o},d.tickSizeInner=function(p){return arguments.length?(o=+p,d):o},d.tickSizeOuter=function(p){return arguments.length?(a=+p,d):a},d.tickPadding=function(p){return arguments.length?(s=+p,d):s},d.offset=function(p){return arguments.length?(u=+p,d):u},d}function Uwe(e){return jwe(_4,e)}var Wwe={value:()=>{}};function w2(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yx(n)}function Yx(e){this._=e}function Hwe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yx.prototype=w2.prototype={constructor:Yx,on:function(e,t){var n=this._,r=Hwe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=qwe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=wI(n[i],e.name,t);else if(t==null)for(i in n)n[i]=wI(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yx(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function qwe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function wI(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Wwe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var A4="http://www.w3.org/1999/xhtml";const Sp={svg:"http://www.w3.org/2000/svg",xhtml:A4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o3(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Sp.hasOwnProperty(t)?{space:Sp[t],local:e}:e}function Gwe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===A4&&t.documentElement.namespaceURI===A4?t.createElement(e):t.createElementNS(n,e)}}function Vwe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a3(e){var t=o3(e);return(t.local?Vwe:Gwe)(t)}function Ywe(){}function ok(e){return e==null?Ywe:function(){return this.querySelector(e)}}function Xwe(e){typeof e!="function"&&(e=ok(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new fi(r,this._parents)}function gX(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Jwe(){return[]}function mX(e){return e==null?Jwe:function(){return this.querySelectorAll(e)}}function Kwe(e){return function(){return gX(e.apply(this,arguments))}}function Qwe(e){typeof e=="function"?e=Kwe(e):e=mX(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new fi(r,i)}function yX(e){return function(){return this.matches(e)}}function vX(e){return function(t){return t.matches(e)}}var Zwe=Array.prototype.find;function e_e(e){return function(){return Zwe.call(this.children,e)}}function t_e(){return this.firstElementChild}function n_e(e){return this.select(e==null?t_e:e_e(typeof e=="function"?e:vX(e)))}var r_e=Array.prototype.filter;function i_e(){return Array.from(this.children)}function o_e(e){return function(){return r_e.call(this.children,e)}}function a_e(e){return this.selectAll(e==null?i_e:o_e(typeof e=="function"?e:vX(e)))}function s_e(e){typeof e!="function"&&(e=yX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new fi(r,this._parents)}function bX(e){return new Array(e.length)}function u_e(){return new fi(this._enter||this._groups.map(bX),this._parents)}function n_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}n_.prototype={constructor:n_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function l_e(e){return function(){return e}}function c_e(e,t,n,r,i,o){for(var a=0,s,u=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new n_(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function f_e(e,t,n,r,i,o,a){var s,u,l=new Map,c=t.length,f=o.length,d=new Array(c),p;for(s=0;s<c;++s)(u=t[s])&&(d[s]=p=a.call(u,u.__data__,s,t)+"",l.has(p)?i[s]=u:l.set(p,u));for(s=0;s<f;++s)p=a.call(e,o[s],s,o)+"",(u=l.get(p))?(r[s]=u,u.__data__=o[s],l.delete(p)):n[s]=new n_(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(d[s])===u&&(i[s]=u)}function d_e(e){return e.__data__}function h_e(e,t){if(!arguments.length)return Array.from(this,d_e);var n=t?f_e:c_e,r=this._parents,i=this._groups;typeof e!="function"&&(e=l_e(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,p=p_e(e.call(c,c&&c.__data__,l,r)),g=p.length,y=s[l]=new Array(g),v=a[l]=new Array(g),b=u[l]=new Array(d);n(c,f,y,v,b,p,t);for(var x=0,_=0,A,E;x<g;++x)if(A=y[x]){for(x>=_&&(_=x+1);!(E=v[_])&&++_<g;);A._next=E||null}}return a=new fi(a,r),a._enter=s,a._exit=u,a}function p_e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g_e(){return new fi(this._exit||this._groups.map(bX),this._parents)}function m_e(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function y_e(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],f=l.length,d=s[u]=new Array(f),p,g=0;g<f;++g)(p=l[g]||c[g])&&(d[g]=p);for(;u<i;++u)s[u]=n[u];return new fi(s,this._parents)}function v_e(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function b_e(e){e||(e=x_e);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new fi(i,this._parents).order()}function x_e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w_e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function __e(){return Array.from(this)}function A_e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function S_e(){let e=0;for(const t of this)++e;return e}function E_e(){return!this.node()}function $_e(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function C_e(e){return function(){this.removeAttribute(e)}}function k_e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function T_e(e,t){return function(){this.setAttribute(e,t)}}function M_e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O_e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function N_e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function R_e(e,t){var n=o3(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?k_e:C_e:typeof t=="function"?n.local?N_e:O_e:n.local?M_e:T_e)(n,t))}function xX(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function F_e(e){return function(){this.style.removeProperty(e)}}function D_e(e,t,n){return function(){this.style.setProperty(e,t,n)}}function P_e(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function L_e(e,t,n){return arguments.length>1?this.each((t==null?F_e:typeof t=="function"?P_e:D_e)(e,t,n??"")):Ep(this.node(),e)}function Ep(e,t){return e.style.getPropertyValue(t)||xX(e).getComputedStyle(e,null).getPropertyValue(t)}function I_e(e){return function(){delete this[e]}}function z_e(e,t){return function(){this[e]=t}}function B_e(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function j_e(e,t){return arguments.length>1?this.each((t==null?I_e:typeof t=="function"?B_e:z_e)(e,t)):this.node()[e]}function wX(e){return e.trim().split(/^|\s+/)}function ak(e){return e.classList||new _X(e)}function _X(e){this._node=e,this._names=wX(e.getAttribute("class")||"")}_X.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function AX(e,t){for(var n=ak(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function SX(e,t){for(var n=ak(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function U_e(e){return function(){AX(this,e)}}function W_e(e){return function(){SX(this,e)}}function H_e(e,t){return function(){(t.apply(this,arguments)?AX:SX)(this,e)}}function q_e(e,t){var n=wX(e+"");if(arguments.length<2){for(var r=ak(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?H_e:t?U_e:W_e)(n,t))}function G_e(){this.textContent=""}function V_e(e){return function(){this.textContent=e}}function Y_e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function X_e(e){return arguments.length?this.each(e==null?G_e:(typeof e=="function"?Y_e:V_e)(e)):this.node().textContent}function J_e(){this.innerHTML=""}function K_e(e){return function(){this.innerHTML=e}}function Q_e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Z_e(e){return arguments.length?this.each(e==null?J_e:(typeof e=="function"?Q_e:K_e)(e)):this.node().innerHTML}function eAe(){this.nextSibling&&this.parentNode.appendChild(this)}function tAe(){return this.each(eAe)}function nAe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rAe(){return this.each(nAe)}function iAe(e){var t=typeof e=="function"?e:a3(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function oAe(){return null}function aAe(e,t){var n=typeof e=="function"?e:a3(e),r=t==null?oAe:typeof t=="function"?t:ok(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sAe(){var e=this.parentNode;e&&e.removeChild(this)}function uAe(){return this.each(sAe)}function lAe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cAe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fAe(e){return this.select(e?cAe:lAe)}function dAe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hAe(e){return function(t){e.call(this,t,this.__data__)}}function pAe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gAe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function mAe(e,t,n){return function(){var r=this.__on,i,o=hAe(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function yAe(e,t,n){var r=pAe(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?mAe:gAe,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function EX(e,t,n){var r=xX(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function vAe(e,t){return function(){return EX(this,e,t)}}function bAe(e,t){return function(){return EX(this,e,t.apply(this,arguments))}}function xAe(e,t){return this.each((typeof t=="function"?bAe:vAe)(e,t))}function*wAe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var sk=[null];function fi(e,t){this._groups=e,this._parents=t}function _2(){return new fi([[document.documentElement]],sk)}function _Ae(){return this}fi.prototype=_2.prototype={constructor:fi,select:Xwe,selectAll:Qwe,selectChild:n_e,selectChildren:a_e,filter:s_e,data:h_e,enter:u_e,exit:g_e,join:m_e,merge:y_e,selection:_Ae,order:v_e,sort:b_e,call:w_e,nodes:__e,node:A_e,size:S_e,empty:E_e,each:$_e,attr:R_e,style:L_e,property:j_e,classed:q_e,text:X_e,html:Z_e,raise:tAe,lower:rAe,append:iAe,insert:aAe,remove:uAe,clone:fAe,datum:dAe,on:yAe,dispatch:xAe,[Symbol.iterator]:wAe};function It(e){return typeof e=="string"?new fi([[document.querySelector(e)]],[document.documentElement]):new fi([[e]],sk)}function AAe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Cs(e,t){if(e=AAe(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function _I(e){return typeof e=="string"?new fi([document.querySelectorAll(e)],[document.documentElement]):new fi([gX(e)],sk)}const SAe={passive:!1},_y={capture:!0,passive:!1};function E9(e){e.stopImmediatePropagation()}function Kh(e){e.preventDefault(),e.stopImmediatePropagation()}function $X(e){var t=e.document.documentElement,n=It(e).on("dragstart.drag",Kh,_y);"onselectstart"in t?n.on("selectstart.drag",Kh,_y):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function CX(e,t){var n=e.document.documentElement,r=It(e).on("dragstart.drag",null);t&&(r.on("click.drag",Kh,_y),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Pb=e=>()=>e;function S4(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}S4.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function EAe(e){return!e.ctrlKey&&!e.button}function $Ae(){return this.parentNode}function CAe(e,t){return t??{x:e.x,y:e.y}}function kAe(){return navigator.maxTouchPoints||"ontouchstart"in this}function TAe(){var e=EAe,t=$Ae,n=CAe,r=kAe,i={},o=w2("start","drag","end"),a=0,s,u,l,c,f=0;function d(A){A.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,SAe).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(A,E){if(!(c||!e.call(this,A,E))){var $=_(this,t.call(this,A,E),A,E,"mouse");$&&(It(A.view).on("mousemove.drag",g,_y).on("mouseup.drag",y,_y),$X(A.view),E9(A),l=!1,s=A.clientX,u=A.clientY,$("start",A))}}function g(A){if(Kh(A),!l){var E=A.clientX-s,$=A.clientY-u;l=E*E+$*$>f}i.mouse("drag",A)}function y(A){It(A.view).on("mousemove.drag mouseup.drag",null),CX(A.view,l),Kh(A),i.mouse("end",A)}function v(A,E){if(e.call(this,A,E)){var $=A.changedTouches,S=t.call(this,A,E),k=$.length,O,N;for(O=0;O<k;++O)(N=_(this,S,A,E,$[O].identifier,$[O]))&&(E9(A),N("start",A,$[O]))}}function b(A){var E=A.changedTouches,$=E.length,S,k;for(S=0;S<$;++S)(k=i[E[S].identifier])&&(Kh(A),k("drag",A,E[S]))}function x(A){var E=A.changedTouches,$=E.length,S,k;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),S=0;S<$;++S)(k=i[E[S].identifier])&&(E9(A),k("end",A,E[S]))}function _(A,E,$,S,k,O){var N=o.copy(),F=Cs(O||$,E),W,I,M;if((M=n.call(A,new S4("beforestart",{sourceEvent:$,target:d,identifier:k,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:N}),S))!=null)return W=M.x-F[0]||0,I=M.y-F[1]||0,function D(L,j,z){var H=F,U;switch(L){case"start":i[k]=D,U=a++;break;case"end":delete i[k],--a;case"drag":F=Cs(z||j,E),U=a;break}N.call(L,A,new S4(L,{sourceEvent:j,subject:M,target:d,identifier:k,active:U,x:F[0]+W,y:F[1]+I,dx:F[0]-H[0],dy:F[1]-H[1],dispatch:N}),S)}}return d.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Pb(!!A),d):e},d.container=function(A){return arguments.length?(t=typeof A=="function"?A:Pb(A),d):t},d.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Pb(A),d):n},d.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Pb(!!A),d):r},d.on=function(){var A=o.on.apply(o,arguments);return A===o?d:A},d.clickDistance=function(A){return arguments.length?(f=(A=+A)*A,d):Math.sqrt(f)},d}function mg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function A2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function pf(){}var jd=.7,$p=1/jd,Qh="\\s*([+-]?\\d+)\\s*",Ay="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MAe=/^#([0-9a-f]{3,8})$/,OAe=new RegExp(`^rgb\\(${Qh},${Qh},${Qh}\\)$`),NAe=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),RAe=new RegExp(`^rgba\\(${Qh},${Qh},${Qh},${Ay}\\)$`),FAe=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${Ay}\\)$`),DAe=new RegExp(`^hsl\\(${Ay},${Ws},${Ws}\\)$`),PAe=new RegExp(`^hsla\\(${Ay},${Ws},${Ws},${Ay}\\)$`),AI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mg(pf,Ud,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:SI,formatHex:SI,formatHex8:LAe,formatHsl:IAe,formatRgb:EI,toString:EI});function SI(){return this.rgb().formatHex()}function LAe(){return this.rgb().formatHex8()}function IAe(){return kX(this).formatHsl()}function EI(){return this.rgb().formatRgb()}function Ud(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=MAe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$I(t):n===3?new Kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=OAe.exec(e))?new Kn(t[1],t[2],t[3],1):(t=NAe.exec(e))?new Kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RAe.exec(e))?Lb(t[1],t[2],t[3],t[4]):(t=FAe.exec(e))?Lb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DAe.exec(e))?TI(t[1],t[2]/100,t[3]/100,1):(t=PAe.exec(e))?TI(t[1],t[2]/100,t[3]/100,t[4]):AI.hasOwnProperty(e)?$I(AI[e]):e==="transparent"?new Kn(NaN,NaN,NaN,0):null}function $I(e){return new Kn(e>>16&255,e>>8&255,e&255,1)}function Lb(e,t,n,r){return r<=0&&(e=t=n=NaN),new Kn(e,t,n,r)}function uk(e){return e instanceof pf||(e=Ud(e)),e?(e=e.rgb(),new Kn(e.r,e.g,e.b,e.opacity)):new Kn}function sa(e,t,n,r){return arguments.length===1?uk(e):new Kn(e,t,n,r??1)}function Kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mg(Kn,sa,A2(pf,{brighter(e){return e=e==null?$p:Math.pow($p,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jd:Math.pow(jd,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kn(Sd(this.r),Sd(this.g),Sd(this.b),r_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CI,formatHex:CI,formatHex8:zAe,formatRgb:kI,toString:kI}));function CI(){return`#${pd(this.r)}${pd(this.g)}${pd(this.b)}`}function zAe(){return`#${pd(this.r)}${pd(this.g)}${pd(this.b)}${pd((isNaN(this.opacity)?1:this.opacity)*255)}`}function kI(){const e=r_(this.opacity);return`${e===1?"rgb(":"rgba("}${Sd(this.r)}, ${Sd(this.g)}, ${Sd(this.b)}${e===1?")":`, ${e})`}`}function r_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pd(e){return e=Sd(e),(e<16?"0":"")+e.toString(16)}function TI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ia(e,t,n,r)}function kX(e){if(e instanceof Ia)return new Ia(e.h,e.s,e.l,e.opacity);if(e instanceof pf||(e=Ud(e)),!e)return new Ia;if(e instanceof Ia)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ia(a,s,u,e.opacity)}function i_(e,t,n,r){return arguments.length===1?kX(e):new Ia(e,t,n,r??1)}function Ia(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mg(Ia,i_,A2(pf,{brighter(e){return e=e==null?$p:Math.pow($p,e),new Ia(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jd:Math.pow(jd,e),new Ia(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Kn($9(e>=240?e-240:e+120,i,r),$9(e,i,r),$9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ia(MI(this.h),Ib(this.s),Ib(this.l),r_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=r_(this.opacity);return`${e===1?"hsl(":"hsla("}${MI(this.h)}, ${Ib(this.s)*100}%, ${Ib(this.l)*100}%${e===1?")":`, ${e})`}`}}));function MI(e){return e=(e||0)%360,e<0?e+360:e}function Ib(e){return Math.max(0,Math.min(1,e||0))}function $9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const TX=Math.PI/180,MX=180/Math.PI,o_=18,OX=.96422,NX=1,RX=.82521,FX=4/29,Zh=6/29,DX=3*Zh*Zh,BAe=Zh*Zh*Zh;function PX(e){if(e instanceof Hs)return new Hs(e.l,e.a,e.b,e.opacity);if(e instanceof Yu)return LX(e);e instanceof Kn||(e=uk(e));var t=M9(e.r),n=M9(e.g),r=M9(e.b),i=C9((.2225045*t+.7168786*n+.0606169*r)/NX),o,a;return t===n&&n===r?o=a=i:(o=C9((.4360747*t+.3850649*n+.1430804*r)/OX),a=C9((.0139322*t+.0971045*n+.7141733*r)/RX)),new Hs(116*i-16,500*(o-i),200*(i-a),e.opacity)}function a_(e,t,n,r){return arguments.length===1?PX(e):new Hs(e,t,n,r??1)}function Hs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}mg(Hs,a_,A2(pf,{brighter(e){return new Hs(this.l+o_*(e??1),this.a,this.b,this.opacity)},darker(e){return new Hs(this.l-o_*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=OX*k9(t),e=NX*k9(e),n=RX*k9(n),new Kn(T9(3.1338561*t-1.6168667*e-.4906146*n),T9(-.9787684*t+1.9161415*e+.033454*n),T9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function C9(e){return e>BAe?Math.pow(e,1/3):e/DX+FX}function k9(e){return e>Zh?e*e*e:DX*(e-FX)}function T9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function M9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jAe(e){if(e instanceof Yu)return new Yu(e.h,e.c,e.l,e.opacity);if(e instanceof Hs||(e=PX(e)),e.a===0&&e.b===0)return new Yu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*MX;return new Yu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function s_(e,t,n,r){return arguments.length===1?jAe(e):new Yu(e,t,n,r??1)}function Yu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function LX(e){if(isNaN(e.h))return new Hs(e.l,0,0,e.opacity);var t=e.h*TX;return new Hs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mg(Yu,s_,A2(pf,{brighter(e){return new Yu(this.h,this.c,this.l+o_*(e??1),this.opacity)},darker(e){return new Yu(this.h,this.c,this.l-o_*(e??1),this.opacity)},rgb(){return LX(this).rgb()}}));var IX=-.14861,lk=1.78277,ck=-.29227,s3=-.90649,Sy=1.97294,OI=Sy*s3,NI=Sy*lk,RI=lk*ck-s3*IX;function UAe(e){if(e instanceof Ed)return new Ed(e.h,e.s,e.l,e.opacity);e instanceof Kn||(e=uk(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(RI*r+OI*t-NI*n)/(RI+OI-NI),o=r-i,a=(Sy*(n-i)-ck*o)/s3,s=Math.sqrt(a*a+o*o)/(Sy*i*(1-i)),u=s?Math.atan2(a,o)*MX-120:NaN;return new Ed(u<0?u+360:u,s,i,e.opacity)}function Xs(e,t,n,r){return arguments.length===1?UAe(e):new Ed(e,t,n,r??1)}function Ed(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mg(Ed,Xs,A2(pf,{brighter(e){return e=e==null?$p:Math.pow($p,e),new Ed(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jd:Math.pow(jd,e),new Ed(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*TX,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Kn(255*(t+n*(IX*r+lk*i)),255*(t+n*(ck*r+s3*i)),255*(t+n*(Sy*r)),this.opacity)}}));function zX(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function BX(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return zX((n-r/t)*t,a,i,o,s)}}function jX(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return zX((n-r/t)*t,i,o,a,s)}}const u3=e=>()=>e;function UX(e,t){return function(n){return e+n*t}}function WAe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function l3(e,t){var n=t-e;return n?UX(e,n>180||n<-180?n-360*Math.round(n/360):n):u3(isNaN(e)?t:e)}function HAe(e){return(e=+e)==1?Qn:function(t,n){return n-t?WAe(t,n,e):u3(isNaN(t)?n:t)}}function Qn(e,t){var n=t-e;return n?UX(e,n):u3(isNaN(e)?t:e)}const jc=function e(t){var n=HAe(t);function r(i,o){var a=n((i=sa(i)).r,(o=sa(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=Qn(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function WX(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=sa(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=o(u),s+""}}}var HX=WX(BX),qAe=WX(jX);function fk(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function qX(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function GAe(e,t){return(qX(t)?fk:GX)(e,t)}function GX(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=gf(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function VX(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function YX(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=gf(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var E4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O9=new RegExp(E4.source,"g");function VAe(e){return function(){return e}}function YAe(e){return function(t){return e(t)+""}}function dk(e,t){var n=E4.lastIndex=O9.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=E4.exec(e))&&(i=O9.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:fr(r,i)})),n=O9.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?YAe(u[0].x):VAe(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function gf(e,t){var n=typeof t,r;return t==null||n==="boolean"?u3(t):(n==="number"?fr:n==="string"?(r=Ud(t))?(t=r,jc):dk:t instanceof Ud?jc:t instanceof Date?VX:qX(t)?fk:Array.isArray(t)?GX:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YX:fr)(e,t)}function XAe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function JAe(e,t){var n=l3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function yg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var FI=180/Math.PI,$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XX(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*FI,skewX:Math.atan(u)*FI,scaleX:a,scaleY:s}}var zb;function KAe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$4:XX(t.a,t.b,t.c,t.d,t.e,t.f)}function QAe(e){return e==null||(zb||(zb=document.createElementNS("http://www.w3.org/2000/svg","g")),zb.setAttribute("transform",e),!(e=zb.transform.baseVal.consolidate()))?$4:(e=e.matrix,XX(e.a,e.b,e.c,e.d,e.e,e.f))}function JX(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,p,g){if(l!==f||c!==d){var y=p.push("translate(",null,t,null,n);g.push({i:y-4,x:fr(l,f)},{i:y-2,x:fr(c,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:fr(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:fr(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,p,g){if(l!==f||c!==d){var y=p.push(i(p)+"scale(",null,",",null,")");g.push({i:y-4,x:fr(l,f)},{i:y-2,x:fr(c,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),a(l.rotate,c.rotate,f,d),s(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(p){for(var g=-1,y=d.length,v;++g<y;)f[(v=d[g]).i]=v.x(p);return f.join("")}}}var KX=JX(KAe,"px, ","px)","deg)"),QX=JX(QAe,", ",")",")"),ZAe=1e-12;function DI(e){return((e=Math.exp(e))+1/e)/2}function e3e(e){return((e=Math.exp(e))-1/e)/2}function t3e(e){return((e=Math.exp(2*e))-1)/(e+1)}const ZX=function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],f=a[1],d=a[2],p=c-s,g=f-u,y=p*p+g*g,v,b;if(y<ZAe)b=Math.log(d/l)/t,v=function(S){return[s+S*p,u+S*g,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(y),_=(d*d-l*l+r*y)/(2*l*n*x),A=(d*d-l*l-r*y)/(2*d*n*x),E=Math.log(Math.sqrt(_*_+1)-_),$=Math.log(Math.sqrt(A*A+1)-A);b=($-E)/t,v=function(S){var k=S*b,O=DI(E),N=l/(n*x)*(O*t3e(t*k+E)-e3e(E));return[s+N*p,u+N*g,l*O/DI(t*k+E)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i}(Math.SQRT2,2,4);function eJ(e){return function(t,n){var r=e((t=i_(t)).h,(n=i_(n)).h),i=Qn(t.s,n.s),o=Qn(t.l,n.l),a=Qn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const tJ=eJ(l3);var n3e=eJ(Qn);function nJ(e,t){var n=Qn((e=a_(e)).l,(t=a_(t)).l),r=Qn(e.a,t.a),i=Qn(e.b,t.b),o=Qn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function rJ(e){return function(t,n){var r=e((t=s_(t)).h,(n=s_(n)).h),i=Qn(t.c,n.c),o=Qn(t.l,n.l),a=Qn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const iJ=rJ(l3);var r3e=rJ(Qn);function oJ(e){return function t(n){n=+n;function r(i,o){var a=e((i=Xs(i)).h,(o=Xs(o)).h),s=Qn(i.s,o.s),u=Qn(i.l,o.l),l=Qn(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=s(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const i3e=oJ(l3);var c3=oJ(Qn);function vg(e,t){t===void 0&&(t=e,e=gf);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function ua(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const o3e=Object.freeze(Object.defineProperty({__proto__:null,interpolate:gf,interpolateArray:GAe,interpolateBasis:BX,interpolateBasisClosed:jX,interpolateCubehelix:i3e,interpolateCubehelixLong:c3,interpolateDate:VX,interpolateDiscrete:XAe,interpolateHcl:iJ,interpolateHclLong:r3e,interpolateHsl:tJ,interpolateHslLong:n3e,interpolateHue:JAe,interpolateLab:nJ,interpolateNumber:fr,interpolateNumberArray:fk,interpolateObject:YX,interpolateRgb:jc,interpolateRgbBasis:HX,interpolateRgbBasisClosed:qAe,interpolateRound:yg,interpolateString:dk,interpolateTransformCss:KX,interpolateTransformSvg:QX,interpolateZoom:ZX,piecewise:vg,quantize:ua},Symbol.toStringTag,{value:"Module"}));var Cp=0,nm=0,w1=0,aJ=1e3,u_,rm,l_=0,Wd=0,f3=0,Ey=typeof performance=="object"&&performance.now?performance:Date,sJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d3(){return Wd||(sJ(a3e),Wd=Ey.now()+f3)}function a3e(){Wd=0}function $y(){this._call=this._time=this._next=null}$y.prototype=hk.prototype={constructor:$y,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?d3():+n)+(t==null?0:+t),!this._next&&rm!==this&&(rm?rm._next=this:u_=this,rm=this),this._call=e,this._time=n,C4()},stop:function(){this._call&&(this._call=null,this._time=1/0,C4())}};function hk(e,t,n){var r=new $y;return r.restart(e,t,n),r}function s3e(){d3(),++Cp;for(var e=u_,t;e;)(t=Wd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cp}function PI(){Wd=(l_=Ey.now())+f3,Cp=nm=0;try{s3e()}finally{Cp=0,l3e(),Wd=0}}function u3e(){var e=Ey.now(),t=e-l_;t>aJ&&(f3-=t,l_=e)}function l3e(){for(var e,t=u_,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:u_=n);rm=e,C4(r)}function C4(e){if(!Cp){nm&&(nm=clearTimeout(nm));var t=e-Wd;t>24?(e<1/0&&(nm=setTimeout(PI,e-Ey.now()-f3)),w1&&(w1=clearInterval(w1))):(w1||(l_=Ey.now(),w1=setInterval(u3e,aJ)),Cp=1,sJ(PI))}}function LI(e,t,n){var r=new $y;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function c3e(e,t,n){var r=new $y,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?d3():+s,r._restart(function u(l){l+=i,r._restart(u,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}var f3e=w2("start","end","cancel","interrupt"),d3e=[],uJ=0,II=1,k4=2,Xx=3,zI=4,T4=5,Jx=6;function h3(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;h3e(e,n,{name:t,index:r,group:i,on:f3e,tween:d3e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:uJ})}function pk(e,t){var n=os(e,t);if(n.state>uJ)throw new Error("too late; already scheduled");return n}function iu(e,t){var n=os(e,t);if(n.state>Xx)throw new Error("too late; already running");return n}function os(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function h3e(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=hk(o,0,n.time);function o(l){n.state=II,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,f,d,p;if(n.state!==II)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Xx)return LI(a);p.state===zI?(p.state=Jx,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Jx,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(LI(function(){n.state===Xx&&(n.state=zI,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=k4,n.on.call("start",e,e.__data__,n.index,n.group),n.state===k4){for(n.state=Xx,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=T4,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===T4&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Jx,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Kx(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>k4&&r.state<T4,r.state=Jx,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function p3e(e){return this.each(function(){Kx(this,e)})}function g3e(e,t){var n,r;return function(){var i=iu(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function m3e(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=iu(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function y3e(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=os(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?g3e:m3e)(n,e,t))}function gk(e,t,n){var r=e._id;return e.each(function(){var i=iu(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return os(i,r).value[t]}}function lJ(e,t){var n;return(typeof t=="number"?fr:t instanceof Ud?jc:(n=Ud(t))?(t=n,jc):dk)(e,t)}function v3e(e){return function(){this.removeAttribute(e)}}function b3e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function x3e(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function w3e(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function _3e(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function A3e(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function S3e(e,t){var n=o3(e),r=n==="transform"?QX:lJ;return this.attrTween(e,typeof t=="function"?(n.local?A3e:_3e)(n,r,gk(this,"attr."+e,t)):t==null?(n.local?b3e:v3e)(n):(n.local?w3e:x3e)(n,r,t))}function E3e(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $3e(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function C3e(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&$3e(e,o)),n}return i._value=t,i}function k3e(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&E3e(e,o)),n}return i._value=t,i}function T3e(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=o3(e);return this.tween(n,(r.local?C3e:k3e)(r,t))}function M3e(e,t){return function(){pk(this,e).delay=+t.apply(this,arguments)}}function O3e(e,t){return t=+t,function(){pk(this,e).delay=t}}function N3e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?M3e:O3e)(t,e)):os(this.node(),t).delay}function R3e(e,t){return function(){iu(this,e).duration=+t.apply(this,arguments)}}function F3e(e,t){return t=+t,function(){iu(this,e).duration=t}}function D3e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?R3e:F3e)(t,e)):os(this.node(),t).duration}function P3e(e,t){if(typeof t!="function")throw new Error;return function(){iu(this,e).ease=t}}function L3e(e){var t=this._id;return arguments.length?this.each(P3e(t,e)):os(this.node(),t).ease}function I3e(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;iu(this,e).ease=n}}function z3e(e){if(typeof e!="function")throw new Error;return this.each(I3e(this._id,e))}function B3e(e){typeof e!="function"&&(e=yX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new dl(r,this._parents,this._name,this._id)}function j3e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],l=n[s],c=u.length,f=a[s]=new Array(c),d,p=0;p<c;++p)(d=u[p]||l[p])&&(f[p]=d);for(;s<r;++s)a[s]=t[s];return new dl(a,this._parents,this._name,this._id)}function U3e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function W3e(e,t,n){var r,i,o=U3e(t)?pk:iu;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function H3e(e,t){var n=this._id;return arguments.length<2?os(this.node(),n).on.on(e):this.each(W3e(n,e,t))}function q3e(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function G3e(){return this.on("end.remove",q3e(this._id))}function V3e(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ok(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,f,d=0;d<u;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,h3(l[d],t,n,d,l,os(c,n)));return new dl(o,this._parents,t,n)}function Y3e(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mX(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),p,g=os(c,n),y=0,v=d.length;y<v;++y)(p=d[y])&&h3(p,t,n,y,d,g);o.push(d),a.push(c)}return new dl(o,a,t,n)}var X3e=_2.prototype.constructor;function J3e(){return new X3e(this._groups,this._parents)}function K3e(e,t){var n,r,i;return function(){var o=Ep(this,e),a=(this.style.removeProperty(e),Ep(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function cJ(e){return function(){this.style.removeProperty(e)}}function Q3e(e,t,n){var r,i=n+"",o;return function(){var a=Ep(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function Z3e(e,t,n){var r,i,o;return function(){var a=Ep(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Ep(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function e5e(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=iu(this,e),l=u.on,c=u.value[o]==null?s||(s=cJ(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function t5e(e,t,n){var r=(e+="")=="transform"?KX:lJ;return t==null?this.styleTween(e,K3e(e,r)).on("end.style."+e,cJ(e)):typeof t=="function"?this.styleTween(e,Z3e(e,r,gk(this,"style."+e,t))).each(e5e(this._id,e)):this.styleTween(e,Q3e(e,r,t),n).on("end.style."+e,null)}function n5e(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function r5e(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&n5e(e,a,n)),r}return o._value=t,o}function i5e(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,r5e(e,t,n??""))}function o5e(e){return function(){this.textContent=e}}function a5e(e){return function(){var t=e(this);this.textContent=t??""}}function s5e(e){return this.tween("text",typeof e=="function"?a5e(gk(this,"text",e)):o5e(e==null?"":e+""))}function u5e(e){return function(t){this.textContent=e.call(this,t)}}function l5e(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&u5e(i)),t}return r._value=e,r}function c5e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,l5e(e))}function f5e(){for(var e=this._name,t=this._id,n=fJ(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=os(u,t);h3(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new dl(r,this._parents,e,n)}function d5e(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var l=iu(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&o()})}var h5e=0;function dl(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fJ(){return++h5e}var Cu=_2.prototype;dl.prototype={constructor:dl,select:V3e,selectAll:Y3e,selectChild:Cu.selectChild,selectChildren:Cu.selectChildren,filter:B3e,merge:j3e,selection:J3e,transition:f5e,call:Cu.call,nodes:Cu.nodes,node:Cu.node,size:Cu.size,empty:Cu.empty,each:Cu.each,on:H3e,attr:S3e,attrTween:T3e,style:t5e,styleTween:i5e,text:s5e,textTween:c5e,remove:G3e,tween:y3e,delay:N3e,duration:D3e,ease:L3e,easeVarying:z3e,end:d5e,[Symbol.iterator]:Cu[Symbol.iterator]};function p5e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var g5e={time:null,delay:0,duration:250,ease:p5e};function m5e(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function y5e(e){var t,n;e instanceof dl?(t=e._id,e=e._name):(t=fJ(),(n=g5e).time=d3(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&h3(u,e,t,l,a,n||m5e(u,t));return new dl(r,this._parents,e,t)}_2.prototype.interrupt=p3e;_2.prototype.transition=y5e;const M4=Math.PI,O4=2*M4,td=1e-6,v5e=O4-td;function dJ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function b5e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dJ;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let p3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?dJ:b5e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-t,l=i-n,c=a-t,f=s-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>td)if(!(Math.abs(f*u-l*c)>td)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,g=i-s,y=u*u+l*l,v=p*p+g*g,b=Math.sqrt(y),x=Math.sqrt(d),_=o*Math.tan((M4-Math.acos((y+d-v)/(2*b*x)))/2),A=_/x,E=_/b;Math.abs(A-1)>td&&this._append`L${t+A*c},${n+A*f}`,this._append`A${o},${o},0,0,${+(f*p>c*g)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=t+s,c=n+u,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>td||Math.abs(this._y1-c)>td)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%O4+O4),d>v5e?this._append`A${r},${r},0,1,${f},${t-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>td&&this._append`A${r},${r},0,${+(d>=M4)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function g3(){return new p3}g3.prototype=p3.prototype;function gd(e=3){return new p3(+e)}const tl=11102230246251565e-32,Sr=134217729,x5e=(3+8*tl)*tl;function N9(e,t,n,r,i){let o,a,s,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let p=0;if(f<e&&d<n)for(c>l==c>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=c+o,s=o-(a-c),c=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)c>l==c>-l?(a=o+l,u=a-o,s=o-(a-u)+(l-u),l=t[++f]):(a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,u=a-o,s=o-(a-u)+(l-u),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function w5e(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function S2(e){return new Float64Array(e)}const _5e=(3+16*tl)*tl,A5e=(2+12*tl)*tl,S5e=(9+64*tl)*tl*tl,oh=S2(4),BI=S2(8),jI=S2(12),UI=S2(16),Vr=S2(4);function E5e(e,t,n,r,i,o,a){let s,u,l,c,f,d,p,g,y,v,b,x,_,A,E,$,S,k;const O=e-i,N=n-i,F=t-o,W=r-o;A=O*W,d=Sr*O,p=d-(d-O),g=O-p,d=Sr*W,y=d-(d-W),v=W-y,E=g*v-(A-p*y-g*y-p*v),$=F*N,d=Sr*F,p=d-(d-F),g=F-p,d=Sr*N,y=d-(d-N),v=N-y,S=g*v-($-p*y-g*y-p*v),b=E-S,f=E-b,oh[0]=E-(b+f)+(f-S),x=A+b,f=x-A,_=A-(x-f)+(b-f),b=_-$,f=_-b,oh[1]=_-(b+f)+(f-$),k=x+b,f=k-x,oh[2]=x-(k-f)+(b-f),oh[3]=k;let I=w5e(4,oh),M=A5e*a;if(I>=M||-I>=M||(f=e-O,s=e-(O+f)+(f-i),f=n-N,l=n-(N+f)+(f-i),f=t-F,u=t-(F+f)+(f-o),f=r-W,c=r-(W+f)+(f-o),s===0&&u===0&&l===0&&c===0)||(M=S5e*a+x5e*Math.abs(I),I+=O*c+W*s-(F*l+N*u),I>=M||-I>=M))return I;A=s*W,d=Sr*s,p=d-(d-s),g=s-p,d=Sr*W,y=d-(d-W),v=W-y,E=g*v-(A-p*y-g*y-p*v),$=u*N,d=Sr*u,p=d-(d-u),g=u-p,d=Sr*N,y=d-(d-N),v=N-y,S=g*v-($-p*y-g*y-p*v),b=E-S,f=E-b,Vr[0]=E-(b+f)+(f-S),x=A+b,f=x-A,_=A-(x-f)+(b-f),b=_-$,f=_-b,Vr[1]=_-(b+f)+(f-$),k=x+b,f=k-x,Vr[2]=x-(k-f)+(b-f),Vr[3]=k;const D=N9(4,oh,4,Vr,BI);A=O*c,d=Sr*O,p=d-(d-O),g=O-p,d=Sr*c,y=d-(d-c),v=c-y,E=g*v-(A-p*y-g*y-p*v),$=F*l,d=Sr*F,p=d-(d-F),g=F-p,d=Sr*l,y=d-(d-l),v=l-y,S=g*v-($-p*y-g*y-p*v),b=E-S,f=E-b,Vr[0]=E-(b+f)+(f-S),x=A+b,f=x-A,_=A-(x-f)+(b-f),b=_-$,f=_-b,Vr[1]=_-(b+f)+(f-$),k=x+b,f=k-x,Vr[2]=x-(k-f)+(b-f),Vr[3]=k;const L=N9(D,BI,4,Vr,jI);A=s*c,d=Sr*s,p=d-(d-s),g=s-p,d=Sr*c,y=d-(d-c),v=c-y,E=g*v-(A-p*y-g*y-p*v),$=u*l,d=Sr*u,p=d-(d-u),g=u-p,d=Sr*l,y=d-(d-l),v=l-y,S=g*v-($-p*y-g*y-p*v),b=E-S,f=E-b,Vr[0]=E-(b+f)+(f-S),x=A+b,f=x-A,_=A-(x-f)+(b-f),b=_-$,f=_-b,Vr[1]=_-(b+f)+(f-$),k=x+b,f=k-x,Vr[2]=x-(k-f)+(b-f),Vr[3]=k;const j=N9(L,jI,4,Vr,UI);return UI[j-1]}function Bb(e,t,n,r,i,o){const a=(t-o)*(n-i),s=(e-i)*(r-o),u=a-s,l=Math.abs(a+s);return Math.abs(u)>=_5e*l?u:-E5e(e,t,n,r,i,o,l)}const WI=Math.pow(2,-52),jb=new Uint32Array(512);class c_{static from(t,n=M5e,r=O5e){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new c_(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1;let s=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<a;N++){const F=t[2*N],W=t[2*N+1];F<s&&(s=F),W<u&&(u=W),F>l&&(l=F),W>c&&(c=W),this._ids[N]=N}const f=(s+l)/2,d=(u+c)/2;let p=1/0,g,y,v;for(let N=0;N<a;N++){const F=R9(f,d,t[2*N],t[2*N+1]);F<p&&(g=N,p=F)}const b=t[2*g],x=t[2*g+1];p=1/0;for(let N=0;N<a;N++){if(N===g)continue;const F=R9(b,x,t[2*N],t[2*N+1]);F<p&&F>0&&(y=N,p=F)}let _=t[2*y],A=t[2*y+1],E=1/0;for(let N=0;N<a;N++){if(N===g||N===y)continue;const F=k5e(b,x,_,A,t[2*N],t[2*N+1]);F<E&&(v=N,E=F)}let $=t[2*v],S=t[2*v+1];if(E===1/0){for(let W=0;W<a;W++)this._dists[W]=t[2*W]-t[0]||t[2*W+1]-t[1];Ph(this._ids,this._dists,0,a-1);const N=new Uint32Array(a);let F=0;for(let W=0,I=-1/0;W<a;W++){const M=this._ids[W];this._dists[M]>I&&(N[F++]=M,I=this._dists[M])}this.hull=N.subarray(0,F),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Bb(b,x,_,A,$,S)<0){const N=y,F=_,W=A;y=v,_=$,A=S,v=N,$=F,S=W}const k=T5e(b,x,_,A,$,S);this._cx=k.x,this._cy=k.y;for(let N=0;N<a;N++)this._dists[N]=R9(t[2*N],t[2*N+1],k.x,k.y);Ph(this._ids,this._dists,0,a-1),this._hullStart=g;let O=3;r[g]=n[v]=y,r[y]=n[g]=v,r[v]=n[y]=g,i[g]=0,i[y]=1,i[v]=2,o.fill(-1),o[this._hashKey(b,x)]=g,o[this._hashKey(_,A)]=y,o[this._hashKey($,S)]=v,this.trianglesLen=0,this._addTriangle(g,y,v,-1,-1,-1);for(let N=0,F,W;N<this._ids.length;N++){const I=this._ids[N],M=t[2*I],D=t[2*I+1];if(N>0&&Math.abs(M-F)<=WI&&Math.abs(D-W)<=WI||(F=M,W=D,I===g||I===y||I===v))continue;let L=0;for(let V=0,K=this._hashKey(M,D);V<this._hashSize&&(L=o[(K+V)%this._hashSize],!(L!==-1&&L!==r[L]));V++);L=n[L];let j=L,z;for(;z=r[j],Bb(M,D,t[2*j],t[2*j+1],t[2*z],t[2*z+1])>=0;)if(j=z,j===L){j=-1;break}if(j===-1)continue;let H=this._addTriangle(j,I,r[j],-1,-1,i[j]);i[I]=this._legalize(H+2),i[j]=H,O++;let U=r[j];for(;z=r[U],Bb(M,D,t[2*U],t[2*U+1],t[2*z],t[2*z+1])<0;)H=this._addTriangle(U,I,z,i[I],-1,i[U]),i[I]=this._legalize(H+2),r[U]=U,O--,U=z;if(j===L)for(;z=n[j],Bb(M,D,t[2*z],t[2*z+1],t[2*j],t[2*j+1])<0;)H=this._addTriangle(z,I,j,-1,i[j],i[z]),this._legalize(H+2),i[z]=H,r[j]=j,O--,j=z;this._hullStart=n[I]=j,r[j]=n[U]=I,r[I]=U,o[this._hashKey(M,D)]=I,o[this._hashKey(t[2*j],t[2*j+1])]=j}this.hull=new Uint32Array(O);for(let N=0,F=this._hullStart;N<O;N++)this.hull[N]=F,F=r[F];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor($5e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const s=r[t],u=t-t%3;if(a=u+(t+2)%3,s===-1){if(o===0)break;t=jb[--o];continue}const l=s-s%3,c=u+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],g=n[c],y=n[f];if(C5e(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1],i[2*y],i[2*y+1])){n[t]=y,n[s]=d;const b=r[f];if(b===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,b),this._link(s,r[a]),this._link(a,f);const x=l+(s+1)%3;o<jb.length&&(jb[o++]=x)}else{if(o===0)break;t=jb[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function $5e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function R9(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function C5e(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,p=o-s,g=u*u+l*l,y=c*c+f*f,v=d*d+p*p;return u*(f*v-y*p)-l*(c*v-y*d)+g*(c*p-f*d)<0}function k5e(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),p=(l*c-s*f)*d,g=(a*f-u*c)*d;return p*p+g*g}function T5e(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),p=e+(l*c-s*f)*d,g=t+(a*f-u*c)*d;return{x:p,y:g}}function Ph(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],a=t[o];let s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const i=n+r>>1;let o=n+1,a=r;_1(e,i,o),t[e[n]]>t[e[r]]&&_1(e,n,r),t[e[o]]>t[e[r]]&&_1(e,o,r),t[e[n]]>t[e[o]]&&_1(e,n,o);const s=e[o],u=t[s];for(;;){do o++;while(t[e[o]]<u);do a--;while(t[e[a]]>u);if(a<o)break;_1(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(Ph(e,t,o,r),Ph(e,t,n,a-1)):(Ph(e,t,n,a-1),Ph(e,t,o,r))}}function _1(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function M5e(e){return e[0]}function O5e(e){return e[1]}const HI=1e-6;class md{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>HI||Math.abs(this._y1-o)>HI)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class N4{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let N5e=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,a;const s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let y=0,v=0,b=r.length,x,_;y<b;y+=3,v+=2){const A=r[y]*2,E=r[y+1]*2,$=r[y+2]*2,S=t[A],k=t[A+1],O=t[E],N=t[E+1],F=t[$],W=t[$+1],I=O-S,M=N-k,D=F-S,L=W-k,j=(I*L-M*D)*2;if(Math.abs(j)<1e-9){if(o===void 0){o=a=0;for(const H of n)o+=t[H*2],a+=t[H*2+1];o/=n.length,a/=n.length}const z=1e9*Math.sign((o-S)*L-(a-k)*D);x=(S+F)/2-z*L,_=(k+W)/2+z*D}else{const z=1/j,H=I*I+M*M,U=D*D+L*L;x=S+(L*H-M*U)*z,_=k+(I*U-D*H)*z}s[v]=x,s[v+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],p,g=t[2*u+1];i.fill(0);for(let y=0;y<n.length;++y)u=n[y],l=c,f=d,p=g,c=u*4,d=t[2*u],g=t[2*u+1],i[l+2]=i[c]=p-g,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new md:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const p=Math.floor(c/3)*2,g=Math.floor(d/3)*2,y=a[p],v=a[p+1],b=a[g],x=a[g+1];this._renderSegment(y,v,b,x,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],g=u*4,y=this._project(d,p,s[g+2],s[g+3]);y&&this._renderSegment(d,p,y[0],y[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new md:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new md:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new N4;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a;const s=this._regioncode(t,n),u=this._regioncode(r,i);s===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,u))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,u=i.length;s<u;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+u-2)%u]&&n[(o+3)%a]===i[(s+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;const s=[];let u=a;do{const l=Math.floor(u/3);if(s.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==a&&u!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,a,s=n[r-2],u=n[r-1],l,c=this._regioncode(s,u),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=u,s=n[p],u=n[p+1],l=c,c=this._regioncode(s,u),l===0&&c===0)f=d,d=0,i?i.push(s,u):i=[s,u];else{let g,y,v,b,x;if(l===0){if((g=this._clipSegment(o,a,s,u,l,c))===null)continue;[y,v,b,x]=g}else{if((g=this._clipSegment(s,u,o,a,c,l))===null)continue;[b,x,y,v]=g,f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}f=d,d=this._edgecode(b,x),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,x):i=[b,x]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){const s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let u,l,c=o||a;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),u;if((u=this._project(s[0],s[1],r,i))&&s.unshift(u[0],u[1]),(u=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(u[0],u[1]),s=this._clipFinite(t,s))for(let l=0,c=s.length,f,d=this._edgecode(s[c-2],s[c-1]);l<c;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),c=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(u=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(u=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,u=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,u=n+(o=a)*i)}return[s,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const R5e=2*Math.PI,ah=Math.pow;function F5e(e){return e[0]}function D5e(e){return e[1]}function P5e(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function L5e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class mk{static from(t,n=F5e,r=D5e,i){return new mk("length"in t?I5e(t,n,r,i):Float64Array.from(z5e(t,n,r,i)))}constructor(t){this._delaunator=new c_(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&P5e(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,p=n.length/2;d<p;++d){const g=L5e(n[2*d],n[2*d+1],f);n[2*d]=g[0],n[2*d+1]=g[1]}this._delaunator=new c_(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||a[c]===-1)&&(a[c]=u)}for(let u=0,l=i.length;u<l;++u)s[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new N5e(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){const f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=ah(n-l[t*2],2)+ah(r-l[t*2+1],2);const d=i[t];let p=d;do{let g=u[p];const y=ah(n-l[g*2],2)+ah(r-l[g*2+1],2);if(y<f&&(f=y,c=g),p=p%3===2?p-2:p+1,u[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==g&&ah(n-l[p*2],2)+ah(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return c}render(t){const n=t==null?t=new md:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){const u=i[a];if(u<a)continue;const l=o[a]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new md:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const s=i[o],u=i[o+1];t.moveTo(s+n,u),t.arc(s,u,n,0,R5e)}return r&&r.value()}renderHull(t){const n=t==null?t=new md:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){const u=2*r[s];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new N4;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new md:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new N4;return this.renderTriangle(t,n),n.value()}}function I5e(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*z5e(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var qI={},F9={},D9=34,A1=10,P9=13;function hJ(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function B5e(e,t){var n=hJ(e);return function(r,i){return t(n(r),i,e)}}function GI(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ei(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function j5e(e){return e<0?"-"+Ei(-e,6):e>9999?"+"+Ei(e,6):Ei(e,4)}function U5e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":j5e(e.getUTCFullYear())+"-"+Ei(e.getUTCMonth()+1,2)+"-"+Ei(e.getUTCDate(),2)+(i?"T"+Ei(t,2)+":"+Ei(n,2)+":"+Ei(r,2)+"."+Ei(i,3)+"Z":r?"T"+Ei(t,2)+":"+Ei(n,2)+":"+Ei(r,2)+"Z":n||t?"T"+Ei(t,2)+":"+Ei(n,2)+"Z":"")}function pJ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,g,y=i(f,function(v,b){if(p)return p(v,b-1);g=v,p=d?B5e(v,d):hJ(v)});return y.columns=g||[],y}function i(f,d){var p=[],g=f.length,y=0,v=0,b,x=g<=0,_=!1;f.charCodeAt(g-1)===A1&&--g,f.charCodeAt(g-1)===P9&&--g;function A(){if(x)return F9;if(_)return _=!1,qI;var $,S=y,k;if(f.charCodeAt(S)===D9){for(;y++<g&&f.charCodeAt(y)!==D9||f.charCodeAt(++y)===D9;);return($=y)>=g?x=!0:(k=f.charCodeAt(y++))===A1?_=!0:k===P9&&(_=!0,f.charCodeAt(y)===A1&&++y),f.slice(S+1,$-1).replace(/""/g,'"')}for(;y<g;){if((k=f.charCodeAt($=y++))===A1)_=!0;else if(k===P9)_=!0,f.charCodeAt(y)===A1&&++y;else if(k!==n)continue;return f.slice(S,$)}return x=!0,f.slice(S,g)}for(;(b=A())!==F9;){for(var E=[];b!==qI&&b!==F9;)E.push(b),b=A();d&&(E=d(E,v++))==null||p.push(E)}return p}function o(f,d){return f.map(function(p){return d.map(function(g){return c(p[g])}).join(e)})}function a(f,d){return d==null&&(d=GI(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=GI(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?U5e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:l,formatValue:c}}var W5e=pJ(","),H5e=W5e.parse;function q5e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function G5e(e,t){return fetch(e,t).then(q5e)}function V5e(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),G5e(t,n).then(function(i){return e(i,r)})}}var Y5e=V5e(H5e);function X5e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function VI(e,t){return fetch(e,t).then(X5e)}function gJ(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,u=0,l=0;for(o=0;o<a;++o)s=n[o],u+=s.x,l+=s.y;for(u=(u/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=u,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function J5e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return mJ(this.cover(t,n),t,n,e)}function mJ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,p,g,y,v,b,x;if(!o)return e._root=a,e;for(;o.length;)if((y=t>=(f=(s+l)/2))?s=f:l=f,(v=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[b=v<<1|y]))return i[b]=a,e;if(p=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===p&&n===g)return a.next=o,i?i[b]=a:e._root=a,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(y=t>=(f=(s+l)/2))?s=f:l=f,(v=n>=(d=(u+c)/2))?u=d:c=d;while((b=v<<1|y)===(x=(g>=d)<<1|p>=f));return i[x]=o,i[b]=a,e}function K5e(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)mJ(this,a[n],s[n],e[n]);return this}function Q5e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=s,s=u,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Z5e(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function eSe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ni(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tSe(e,t,n){var r,i=this._x0,o=this._y0,a,s,u,l,c=this._x1,f=this._y1,d=[],p=this._root,g,y;for(p&&d.push(new ni(p,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);g=d.pop();)if(!(!(p=g.node)||(a=g.x0)>c||(s=g.y0)>f||(u=g.x1)<i||(l=g.y1)<o))if(p.length){var v=(a+u)/2,b=(s+l)/2;d.push(new ni(p[3],v,b,u,l),new ni(p[2],a,b,v,l),new ni(p[1],v,s,u,b),new ni(p[0],a,s,v,b)),(y=(t>=b)<<1|e>=v)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=g)}else{var x=e-+this._x.call(null,p.data),_=t-+this._y.call(null,p.data),A=x*x+_*_;if(A<n){var E=Math.sqrt(n=A);i=e-E,o=t-E,c=e+E,f=t+E,r=p.data}}return r}function nSe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,u=this._x1,l=this._y1,c,f,d,p,g,y,v,b;if(!n)return this;if(n.length)for(;;){if((g=c>=(d=(a+u)/2))?a=d:u=d,(y=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[v=y<<1|g]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,b=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[v]=o:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=o,this)}function rSe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function iSe(){return this._root}function oSe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function aSe(e){var t=[],n,r=this._root,i,o,a,s,u;for(r&&t.push(new ni(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,u=n.y1)&&r.length){var l=(o+s)/2,c=(a+u)/2;(i=r[3])&&t.push(new ni(i,l,c,s,u)),(i=r[2])&&t.push(new ni(i,o,c,l,u)),(i=r[1])&&t.push(new ni(i,l,a,s,c)),(i=r[0])&&t.push(new ni(i,o,a,l,c))}return this}function sSe(e){var t=[],n=[],r;for(this._root&&t.push(new ni(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,u=r.x1,l=r.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&t.push(new ni(o,a,s,c,f)),(o=i[1])&&t.push(new ni(o,c,s,u,f)),(o=i[2])&&t.push(new ni(o,a,f,c,l)),(o=i[3])&&t.push(new ni(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function uSe(e){return e[0]}function lSe(e){return arguments.length?(this._x=e,this):this._x}function cSe(e){return e[1]}function fSe(e){return arguments.length?(this._y=e,this):this._y}function yk(e,t,n){var r=new vk(t??uSe,n??cSe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function vk(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function YI(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var yi=yk.prototype=vk.prototype;yi.copy=function(){var e=new vk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=YI(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=YI(r));return e};yi.add=J5e;yi.addAll=K5e;yi.cover=Q5e;yi.data=Z5e;yi.extent=eSe;yi.find=tSe;yi.remove=nSe;yi.removeAll=rSe;yi.root=iSe;yi.size=oSe;yi.visit=aSe;yi.visitAfter=sSe;yi.x=lSe;yi.y=fSe;function ii(e){return function(){return e}}function cc(e){return(e()-.5)*1e-6}function dSe(e){return e.x+e.vx}function hSe(e){return e.y+e.vy}function pSe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=ii(e==null?1:+e));function a(){for(var l,c=t.length,f,d,p,g,y,v,b=0;b<o;++b)for(f=yk(t,dSe,hSe).visitAfter(s),l=0;l<c;++l)d=t[l],y=n[d.index],v=y*y,p=d.x+d.vx,g=d.y+d.vy,f.visit(x);function x(_,A,E,$,S){var k=_.data,O=_.r,N=y+O;if(k){if(k.index>d.index){var F=p-k.x-k.vx,W=g-k.y-k.vy,I=F*F+W*W;I<N*N&&(F===0&&(F=cc(r),I+=F*F),W===0&&(W=cc(r),I+=W*W),I=(N-(I=Math.sqrt(I)))/I*i,d.vx+=(F*=I)*(N=(O*=O)/(v+O)),d.vy+=(W*=I)*N,k.vx-=F*(N=1-N),k.vy-=W*N)}return}return A>p+N||$<p-N||E>g+N||S<g-N}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,c){t=l,r=c,u()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ii(+l),u(),a):e},a}function gSe(e){return e.index}function XI(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function yJ(e){var t=gSe,n=f,r,i=ii(30),o,a,s,u,l,c=1;e==null&&(e=[]);function f(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function d(v){for(var b=0,x=e.length;b<c;++b)for(var _=0,A,E,$,S,k,O,N;_<x;++_)A=e[_],E=A.source,$=A.target,S=$.x+$.vx-E.x-E.vx||cc(l),k=$.y+$.vy-E.y-E.vy||cc(l),O=Math.sqrt(S*S+k*k),O=(O-o[_])/O*v*r[_],S*=O,k*=O,$.vx-=S*(N=u[_]),$.vy-=k*N,E.vx+=S*(N=1-N),E.vy+=k*N}function p(){if(a){var v,b=a.length,x=e.length,_=new Map(a.map((E,$)=>[t(E,$,a),E])),A;for(v=0,s=new Array(b);v<x;++v)A=e[v],A.index=v,typeof A.source!="object"&&(A.source=XI(_,A.source)),typeof A.target!="object"&&(A.target=XI(_,A.target)),s[A.source.index]=(s[A.source.index]||0)+1,s[A.target.index]=(s[A.target.index]||0)+1;for(v=0,u=new Array(x);v<x;++v)A=e[v],u[v]=s[A.source.index]/(s[A.source.index]+s[A.target.index]);r=new Array(x),g(),o=new Array(x),y()}}function g(){if(a)for(var v=0,b=e.length;v<b;++v)r[v]=+n(e[v],v,e)}function y(){if(a)for(var v=0,b=e.length;v<b;++v)o[v]=+i(e[v],v,e)}return d.initialize=function(v,b){a=v,l=b,p()},d.links=function(v){return arguments.length?(e=v,p(),d):e},d.id=function(v){return arguments.length?(t=v,d):t},d.iterations=function(v){return arguments.length?(c=+v,d):c},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:ii(+v),g(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:ii(+v),y(),d):i},d}const mSe=1664525,ySe=1013904223,JI=4294967296;function vSe(){let e=1;return()=>(e=(mSe*e+ySe)%JI)/JI}function bSe(e){return e.x}function xSe(e){return e.y}var wSe=10,_Se=Math.PI*(3-Math.sqrt(5));function vJ(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=hk(f),l=w2("tick","end"),c=vSe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(y){var v,b=e.length,x;y===void 0&&(y=1);for(var _=0;_<y;++_)for(n+=(o-n)*i,s.forEach(function(A){A(n)}),v=0;v<b;++v)x=e[v],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return t}function p(){for(var y=0,v=e.length,b;y<v;++y){if(b=e[y],b.index=y,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var x=wSe*Math.sqrt(.5+y),_=y*_Se;b.x=x*Math.cos(_),b.y=x*Math.sin(_)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return p(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(y){return arguments.length?(e=y,p(),s.forEach(g),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(r=+y,t):r},alphaDecay:function(y){return arguments.length?(i=+y,t):+i},alphaTarget:function(y){return arguments.length?(o=+y,t):o},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(c=y,s.forEach(g),t):c},force:function(y,v){return arguments.length>1?(v==null?s.delete(y):s.set(y,g(v)),t):s.get(y)},find:function(y,v,b){var x=0,_=e.length,A,E,$,S,k;for(b==null?b=1/0:b*=b,x=0;x<_;++x)S=e[x],A=y-S.x,E=v-S.y,$=A*A+E*E,$<b&&(k=S,b=$);return k},on:function(y,v){return arguments.length>1?(l.on(y,v),t):l.on(y)}}}function bJ(){var e,t,n,r,i=ii(-30),o,a=1,s=1/0,u=.81;function l(p){var g,y=e.length,v=yk(e,bSe,xSe).visitAfter(f);for(r=p,g=0;g<y;++g)t=e[g],v.visit(d)}function c(){if(e){var p,g=e.length,y;for(o=new Array(g),p=0;p<g;++p)y=e[p],o[y.index]=+i(y,p,e)}}function f(p){var g=0,y,v,b=0,x,_,A;if(p.length){for(x=_=A=0;A<4;++A)(y=p[A])&&(v=Math.abs(y.value))&&(g+=y.value,b+=v,x+=v*y.x,_+=v*y.y);p.x=x/b,p.y=_/b}else{y=p,y.x=y.data.x,y.y=y.data.y;do g+=o[y.data.index];while(y=y.next)}p.value=g}function d(p,g,y,v){if(!p.value)return!0;var b=p.x-t.x,x=p.y-t.y,_=v-g,A=b*b+x*x;if(_*_/u<A)return A<s&&(b===0&&(b=cc(n),A+=b*b),x===0&&(x=cc(n),A+=x*x),A<a&&(A=Math.sqrt(a*A)),t.vx+=b*p.value*r/A,t.vy+=x*p.value*r/A),!0;if(p.length||A>=s)return;(p.data!==t||p.next)&&(b===0&&(b=cc(n),A+=b*b),x===0&&(x=cc(n),A+=x*x),A<a&&(A=Math.sqrt(a*A)));do p.data!==t&&(_=o[p.data.index]*r/A,t.vx+=b*_,t.vy+=x*_);while(p=p.next)}return l.initialize=function(p,g){e=p,n=g,c()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:ii(+p),c(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(u=p*p,l):Math.sqrt(u)},l}function ASe(e){var t=ii(.1),n,r,i;typeof e!="function"&&(e=ii(e==null?0:+e));function o(s){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ii(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:ii(+s),a(),o):e},o}function SSe(e){var t=ii(.1),n,r,i;typeof e!="function"&&(e=ii(e==null?0:+e));function o(s){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ii(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:ii(+s),a(),o):e},o}function ESe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function f_(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function kp(e){return e=f_(Math.abs(e)),e?e[1]:NaN}function $Se(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function CSe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var kSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hd(e){if(!(t=kSe.exec(e)))throw new Error("invalid format: "+e);var t;return new bk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hd.prototype=bk.prototype;function bk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TSe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xJ;function MSe(e,t){var n=f_(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(xJ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+f_(e,Math.max(0,t+o-1))[0]}function KI(e,t){var n=f_(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const QI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ESe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KI(e*100,t),r:KI,s:MSe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ZI(e){return e}var ez=Array.prototype.map,tz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wJ(e){var t=e.grouping===void 0||e.thousands===void 0?ZI:$Se(ez.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?ZI:CSe(ez.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Hd(f);var d=f.fill,p=f.align,g=f.sign,y=f.symbol,v=f.zero,b=f.width,x=f.comma,_=f.precision,A=f.trim,E=f.type;E==="n"?(x=!0,E="g"):QI[E]||(_===void 0&&(_=12),A=!0,E="g"),(v||d==="0"&&p==="=")&&(v=!0,d="0",p="=");var $=y==="$"?n:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=y==="$"?r:/[%p]/.test(E)?a:"",k=QI[E],O=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(F){var W=$,I=S,M,D,L;if(E==="c")I=k(F)+I,F="";else{F=+F;var j=F<0||1/F<0;if(F=isNaN(F)?u:k(Math.abs(F),_),A&&(F=TSe(F)),j&&+F==0&&g!=="+"&&(j=!1),W=(j?g==="("?g:s:g==="-"||g==="("?"":g)+W,I=(E==="s"?tz[8+xJ/3]:"")+I+(j&&g==="("?")":""),O){for(M=-1,D=F.length;++M<D;)if(L=F.charCodeAt(M),48>L||L>57){I=(L===46?i+F.slice(M+1):F.slice(M))+I,F=F.slice(0,M);break}}}x&&!v&&(F=t(F,1/0));var z=W.length+F.length+I.length,H=z<b?new Array(b-z+1).join(d):"";switch(x&&v&&(F=t(H+F,H.length?b-I.length:1/0),H=""),p){case"<":F=W+F+I+H;break;case"=":F=W+H+F+I;break;case"^":F=H.slice(0,z=H.length>>1)+W+F+I+H.slice(z);break;default:F=H+W+F+I;break}return o(F)}return N.toString=function(){return f+""},N}function c(f,d){var p=l((f=Hd(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(kp(d)/3)))*3,y=Math.pow(10,-g),v=tz[8+g/3];return function(b){return p(y*b)+v}}return{format:l,formatPrefix:c}}var Ub,mf,xk;OSe({thousands:",",grouping:[3],currency:["$",""]});function OSe(e){return Ub=wJ(e),mf=Ub.format,xk=Ub.formatPrefix,Ub}function _J(e){return Math.max(0,-kp(Math.abs(e)))}function AJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kp(t)/3)))*3-kp(Math.abs(e)))}function SJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kp(t)-kp(e))+1}var Be=1e-6,d_=1e-12,at=Math.PI,bn=at/2,h_=at/4,di=at*2,Sn=180/at,ot=at/180,gt=Math.abs,bg=Math.atan,la=Math.atan2,je=Math.cos,Wb=Math.ceil,EJ=Math.exp,R4=Math.hypot,p_=Math.log,L9=Math.pow,Ie=Math.sin,Yo=Math.sign||function(e){return e>0?1:e<0?-1:0},hi=Math.sqrt,wk=Math.tan;function $J(e){return e>1?0:e<-1?at:Math.acos(e)}function Wi(e){return e>1?bn:e<-1?-bn:Math.asin(e)}function dr(){}function g_(e,t){e&&rz.hasOwnProperty(e.type)&&rz[e.type](e,t)}var nz={Feature:function(e,t){g_(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)g_(n[r].geometry,t)}},rz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){F4(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)F4(n[r],t,0)},Polygon:function(e,t){iz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)iz(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)g_(n[r],t)}};function F4(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function iz(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)F4(e[n],t,1);t.polygonEnd()}function Ns(e,t){e&&nz.hasOwnProperty(e.type)?nz[e.type](e,t):g_(e,t)}var m_=new si,y_=new si,CJ,kJ,D4,P4,L4,Js={point:dr,lineStart:dr,lineEnd:dr,polygonStart:function(){m_=new si,Js.lineStart=NSe,Js.lineEnd=RSe},polygonEnd:function(){var e=+m_;y_.add(e<0?di+e:e),this.lineStart=this.lineEnd=this.point=dr},sphere:function(){y_.add(di)}};function NSe(){Js.point=FSe}function RSe(){TJ(CJ,kJ)}function FSe(e,t){Js.point=TJ,CJ=e,kJ=t,e*=ot,t*=ot,D4=e,P4=je(t=t/2+h_),L4=Ie(t)}function TJ(e,t){e*=ot,t*=ot,t=t/2+h_;var n=e-D4,r=n>=0?1:-1,i=r*n,o=je(t),a=Ie(t),s=L4*a,u=P4*o+s*je(i),l=s*r*Ie(i);m_.add(la(l,u)),D4=e,P4=o,L4=a}function DSe(e){return y_=new si,Ns(e,Js),y_*2}function v_(e){return[la(e[1],e[0]),Wi(e[2])]}function qd(e){var t=e[0],n=e[1],r=je(n);return[r*je(t),r*Ie(t),Ie(n)]}function Hb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Tp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function I9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function qb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function b_(e){var t=hi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var cn,Ti,gn,lo,nd,MJ,OJ,ep,zm,Zl,hl,Uu={point:I4,lineStart:oz,lineEnd:az,polygonStart:function(){Uu.point=RJ,Uu.lineStart=PSe,Uu.lineEnd=LSe,zm=new si,Js.polygonStart()},polygonEnd:function(){Js.polygonEnd(),Uu.point=I4,Uu.lineStart=oz,Uu.lineEnd=az,m_<0?(cn=-(gn=180),Ti=-(lo=90)):zm>Be?lo=90:zm<-Be&&(Ti=-90),hl[0]=cn,hl[1]=gn},sphere:function(){cn=-(gn=180),Ti=-(lo=90)}};function I4(e,t){Zl.push(hl=[cn=e,gn=e]),t<Ti&&(Ti=t),t>lo&&(lo=t)}function NJ(e,t){var n=qd([e*ot,t*ot]);if(ep){var r=Tp(ep,n),i=[r[1],-r[0],0],o=Tp(i,r);b_(o),o=v_(o);var a=e-nd,s=a>0?1:-1,u=o[0]*Sn*s,l,c=gt(a)>180;c^(s*nd<u&&u<s*e)?(l=o[1]*Sn,l>lo&&(lo=l)):(u=(u+360)%360-180,c^(s*nd<u&&u<s*e)?(l=-o[1]*Sn,l<Ti&&(Ti=l)):(t<Ti&&(Ti=t),t>lo&&(lo=t))),c?e<nd?so(cn,e)>so(cn,gn)&&(gn=e):so(e,gn)>so(cn,gn)&&(cn=e):gn>=cn?(e<cn&&(cn=e),e>gn&&(gn=e)):e>nd?so(cn,e)>so(cn,gn)&&(gn=e):so(e,gn)>so(cn,gn)&&(cn=e)}else Zl.push(hl=[cn=e,gn=e]);t<Ti&&(Ti=t),t>lo&&(lo=t),ep=n,nd=e}function oz(){Uu.point=NJ}function az(){hl[0]=cn,hl[1]=gn,Uu.point=I4,ep=null}function RJ(e,t){if(ep){var n=e-nd;zm.add(gt(n)>180?n+(n>0?360:-360):n)}else MJ=e,OJ=t;Js.point(e,t),NJ(e,t)}function PSe(){Js.lineStart()}function LSe(){RJ(MJ,OJ),Js.lineEnd(),gt(zm)>Be&&(cn=-(gn=180)),hl[0]=cn,hl[1]=gn,ep=null}function so(e,t){return(t-=e)<0?t+360:t}function ISe(e,t){return e[0]-t[0]}function sz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zSe(e){var t,n,r,i,o,a,s;if(lo=gn=-(cn=Ti=1/0),Zl=[],Ns(e,Uu),n=Zl.length){for(Zl.sort(ISe),t=1,r=Zl[0],o=[r];t<n;++t)i=Zl[t],sz(r,i[0])||sz(r,i[1])?(so(r[0],i[1])>so(r[0],r[1])&&(r[1]=i[1]),so(i[0],r[1])>so(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=so(r[1],i[0]))>a&&(a=s,cn=i[0],gn=r[1])}return Zl=hl=null,cn===1/0||Ti===1/0?[[NaN,NaN],[NaN,NaN]]:[[cn,Ti],[gn,lo]]}var im,x_,w_,__,A_,S_,E_,$_,z4,B4,j4,FJ,DJ,Zr,ei,ti,ja={sphere:dr,point:_k,lineStart:uz,lineEnd:lz,polygonStart:function(){ja.lineStart=USe,ja.lineEnd=WSe},polygonEnd:function(){ja.lineStart=uz,ja.lineEnd=lz}};function _k(e,t){e*=ot,t*=ot;var n=je(t);E2(n*je(e),n*Ie(e),Ie(t))}function E2(e,t,n){++im,w_+=(e-w_)/im,__+=(t-__)/im,A_+=(n-A_)/im}function uz(){ja.point=BSe}function BSe(e,t){e*=ot,t*=ot;var n=je(t);Zr=n*je(e),ei=n*Ie(e),ti=Ie(t),ja.point=jSe,E2(Zr,ei,ti)}function jSe(e,t){e*=ot,t*=ot;var n=je(t),r=n*je(e),i=n*Ie(e),o=Ie(t),a=la(hi((a=ei*o-ti*i)*a+(a=ti*r-Zr*o)*a+(a=Zr*i-ei*r)*a),Zr*r+ei*i+ti*o);x_+=a,S_+=a*(Zr+(Zr=r)),E_+=a*(ei+(ei=i)),$_+=a*(ti+(ti=o)),E2(Zr,ei,ti)}function lz(){ja.point=_k}function USe(){ja.point=HSe}function WSe(){PJ(FJ,DJ),ja.point=_k}function HSe(e,t){FJ=e,DJ=t,e*=ot,t*=ot,ja.point=PJ;var n=je(t);Zr=n*je(e),ei=n*Ie(e),ti=Ie(t),E2(Zr,ei,ti)}function PJ(e,t){e*=ot,t*=ot;var n=je(t),r=n*je(e),i=n*Ie(e),o=Ie(t),a=ei*o-ti*i,s=ti*r-Zr*o,u=Zr*i-ei*r,l=R4(a,s,u),c=Wi(l),f=l&&-c/l;z4.add(f*a),B4.add(f*s),j4.add(f*u),x_+=c,S_+=c*(Zr+(Zr=r)),E_+=c*(ei+(ei=i)),$_+=c*(ti+(ti=o)),E2(Zr,ei,ti)}function qSe(e){im=x_=w_=__=A_=S_=E_=$_=0,z4=new si,B4=new si,j4=new si,Ns(e,ja);var t=+z4,n=+B4,r=+j4,i=R4(t,n,r);return i<d_&&(t=S_,n=E_,r=$_,x_<Be&&(t=w_,n=__,r=A_),i=R4(t,n,r),i<d_)?[NaN,NaN]:[la(n,t)*Sn,Wi(r/i)*Sn]}function U4(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function W4(e,t){return gt(e)>at&&(e-=Math.round(e/di)*di),[e,t]}W4.invert=W4;function LJ(e,t,n){return(e%=di)?t||n?U4(fz(e),dz(t,n)):fz(e):t||n?dz(t,n):W4}function cz(e){return function(t,n){return t+=e,gt(t)>at&&(t-=Math.round(t/di)*di),[t,n]}}function fz(e){var t=cz(e);return t.invert=cz(-e),t}function dz(e,t){var n=je(e),r=Ie(e),i=je(t),o=Ie(t);function a(s,u){var l=je(u),c=je(s)*l,f=Ie(s)*l,d=Ie(u),p=d*n+c*r;return[la(f*i-p*o,c*n-d*r),Wi(p*i+f*o)]}return a.invert=function(s,u){var l=je(u),c=je(s)*l,f=Ie(s)*l,d=Ie(u),p=d*i-f*o;return[la(f*i+d*o,c*n+p*r),Wi(p*n-c*r)]},a}function GSe(e){e=LJ(e[0]*ot,e[1]*ot,e.length>2?e[2]*ot:0);function t(n){return n=e(n[0]*ot,n[1]*ot),n[0]*=Sn,n[1]*=Sn,n}return t.invert=function(n){return n=e.invert(n[0]*ot,n[1]*ot),n[0]*=Sn,n[1]*=Sn,n},t}function VSe(e,t,n,r,i,o){if(n){var a=je(t),s=Ie(t),u=r*n;i==null?(i=t+r*di,o=t-u/2):(i=hz(a,i),o=hz(a,o),(r>0?i<o:i>o)&&(i+=r*di));for(var l,c=i;r>0?c>o:c<o;c-=u)l=v_([a,-s*je(c),-s*Ie(c)]),e.point(l[0],l[1])}}function hz(e,t){t=qd(t),t[0]-=e,b_(t);var n=$J(-t[1]);return((-t[2]<0?-n:n)+di-Be)%di}function IJ(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:dr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qx(e,t){return gt(e[0]-t[0])<Be&&gt(e[1]-t[1])<Be}function Gb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function zJ(e,t,n,r,i){var o=[],a=[],s,u;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,v=g[0],b=g[y],x;if(Qx(v,b)){if(!v[2]&&!b[2]){for(i.lineStart(),s=0;s<y;++s)i.point((v=g[s])[0],v[1]);i.lineEnd();return}b[0]+=2*Be}o.push(x=new Gb(v,g,null,!0)),a.push(x.o=new Gb(v,null,x,!1)),o.push(x=new Gb(b,g,null,!1)),a.push(x.o=new Gb(b,null,x,!0))}}),!!o.length){for(a.sort(t),pz(o),pz(a),s=0,u=a.length;s<u;++s)a[s].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,u=c.length;s<u;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(c=d.p.z,s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);i.lineEnd()}}}function pz(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function z9(e){return gt(e[0])<=at?e[0]:Yo(e[0])*((gt(e[0])+at)%di-at)}function YSe(e,t){var n=z9(t),r=t[1],i=Ie(r),o=[Ie(n),-je(n),0],a=0,s=0,u=new si;i===1?r=bn+Be:i===-1&&(r=-bn-Be);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],g=z9(p),y=p[1]/2+h_,v=Ie(y),b=je(y),x=0;x<d;++x,g=A,v=$,b=S,p=_){var _=f[x],A=z9(_),E=_[1]/2+h_,$=Ie(E),S=je(E),k=A-g,O=k>=0?1:-1,N=O*k,F=N>at,W=v*$;if(u.add(la(W*O*Ie(N),b*S+W*je(N))),a+=F?k+O*di:k,F^g>=n^A>=n){var I=Tp(qd(p),qd(_));b_(I);var M=Tp(o,I);b_(M);var D=(F^k>=0?-1:1)*Wi(M[2]);(r>D||r===D&&(I[0]||I[1]))&&(s+=F^k>=0?1:-1)}}return(a<-Be||a<Be&&u<-d_)^s&1}function BJ(e,t,n,r){return function(i){var o=t(i),a=IJ(),s=t(a),u=!1,l,c,f,d={point:p,lineStart:y,lineEnd:v,polygonStart:function(){d.point=b,d.lineStart=x,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=y,d.lineEnd=v,c=pX(c);var A=YSe(l,r);c.length?(u||(i.polygonStart(),u=!0),zJ(c,JSe,A,n,i)):A&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(A,E){e(A,E)&&i.point(A,E)}function g(A,E){o.point(A,E)}function y(){d.point=g,o.lineStart()}function v(){d.point=p,o.lineEnd()}function b(A,E){f.push([A,E]),s.point(A,E)}function x(){s.lineStart(),f=[]}function _(){b(f[0][0],f[0][1]),s.lineEnd();var A=s.clean(),E=a.result(),$,S=E.length,k,O,N;if(f.pop(),l.push(f),f=null,!!S){if(A&1){if(O=E[0],(k=O.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),$=0;$<k;++$)i.point((N=O[$])[0],N[1]);i.lineEnd()}return}S>1&&A&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(XSe))}}return d}}function XSe(e){return e.length>1}function JSe(e,t){return((e=e.x)[0]<0?e[1]-bn-Be:bn-e[1])-((t=t.x)[0]<0?t[1]-bn-Be:bn-t[1])}const gz=BJ(function(){return!0},KSe,ZSe,[-at,-bn]);function KSe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?at:-at,u=gt(o-t);gt(u-at)<Be?(e.point(t,n=(n+a)/2>0?bn:-bn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&u>=at&&(gt(t-r)<Be&&(t-=r*Be),gt(o-s)<Be&&(o-=s*Be),n=QSe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function QSe(e,t,n,r){var i,o,a=Ie(e-n);return gt(a)>Be?bg((Ie(t)*(o=je(r))*Ie(n)-Ie(r)*(i=je(t))*Ie(e))/(i*o*a)):(t+r)/2}function ZSe(e,t,n,r){var i;if(e==null)i=n*bn,r.point(-at,i),r.point(0,i),r.point(at,i),r.point(at,0),r.point(at,-i),r.point(0,-i),r.point(-at,-i),r.point(-at,0),r.point(-at,i);else if(gt(e[0]-t[0])>Be){var o=e[0]<t[0]?at:-at;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function eEe(e){var t=je(e),n=6*ot,r=t>0,i=gt(t)>Be;function o(c,f,d,p){VSe(p,e,n,d,c,f)}function a(c,f){return je(c)*je(f)>t}function s(c){var f,d,p,g,y;return{lineStart:function(){g=p=!1,y=1},point:function(v,b){var x=[v,b],_,A=a(v,b),E=r?A?0:l(v,b):A?l(v+(v<0?at:-at),b):0;if(!f&&(g=p=A)&&c.lineStart(),A!==p&&(_=u(f,x),(!_||Qx(f,_)||Qx(x,_))&&(x[2]=1)),A!==p)y=0,A?(c.lineStart(),_=u(x,f),c.point(_[0],_[1])):(_=u(f,x),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^A){var $;!(E&d)&&($=u(x,f,!0))&&(y=0,r?(c.lineStart(),c.point($[0][0],$[0][1]),c.point($[1][0],$[1][1]),c.lineEnd()):(c.point($[1][0],$[1][1]),c.lineEnd(),c.lineStart(),c.point($[0][0],$[0][1],3)))}A&&(!f||!Qx(f,x))&&c.point(x[0],x[1]),f=x,p=A,d=E},lineEnd:function(){p&&c.lineEnd(),f=null},clean:function(){return y|(g&&p)<<1}}}function u(c,f,d){var p=qd(c),g=qd(f),y=[1,0,0],v=Tp(p,g),b=Hb(v,v),x=v[0],_=b-x*x;if(!_)return!d&&c;var A=t*b/_,E=-t*x/_,$=Tp(y,v),S=qb(y,A),k=qb(v,E);I9(S,k);var O=$,N=Hb(S,O),F=Hb(O,O),W=N*N-F*(Hb(S,S)-1);if(!(W<0)){var I=hi(W),M=qb(O,(-N-I)/F);if(I9(M,S),M=v_(M),!d)return M;var D=c[0],L=f[0],j=c[1],z=f[1],H;L<D&&(H=D,D=L,L=H);var U=L-D,V=gt(U-at)<Be,K=V||U<Be;if(!V&&z<j&&(H=j,j=z,z=H),K?V?j+z>0^M[1]<(gt(M[0]-D)<Be?j:z):j<=M[1]&&M[1]<=z:U>at^(D<=M[0]&&M[0]<=L)){var Q=qb(O,(-N+I)/F);return I9(Q,S),[M,v_(Q)]}}}function l(c,f){var d=r?e:at-e,p=0;return c<-d?p|=1:c>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return BJ(a,s,o,r?[0,-e]:[-at,e-at])}function tEe(e,t,n,r,i,o){var a=e[0],s=e[1],u=t[0],l=t[1],c=0,f=1,d=u-a,p=l-s,g;if(g=n-a,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=i-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}if(g=r-s,!(!p&&g>0)){if(g/=p,p<0){if(g<c)return;g<f&&(f=g)}else if(p>0){if(g>f)return;g>c&&(c=g)}if(g=o-s,!(!p&&g<0)){if(g/=p,p<0){if(g>f)return;g>c&&(c=g)}else if(p>0){if(g<c)return;g<f&&(f=g)}return c>0&&(e[0]=a+c*d,e[1]=s+c*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var om=1e9,Vb=-om;function Ak(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var p=0,g=0;if(l==null||(p=a(l,f))!==(g=a(c,f))||u(l,c)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==g);else d.point(c[0],c[1])}function a(l,c){return gt(l[0]-e)<Be?c>0?0:3:gt(l[0]-n)<Be?c>0?2:1:gt(l[1]-t)<Be?c>0?1:0:c>0?3:2}function s(l,c){return u(l.x,c.x)}function u(l,c){var f=a(l,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=IJ(),d,p,g,y,v,b,x,_,A,E,$,S={point:k,lineStart:W,lineEnd:I,polygonStart:N,polygonEnd:F};function k(D,L){i(D,L)&&c.point(D,L)}function O(){for(var D=0,L=0,j=p.length;L<j;++L)for(var z=p[L],H=1,U=z.length,V=z[0],K,Q,ne=V[0],ce=V[1];H<U;++H)K=ne,Q=ce,V=z[H],ne=V[0],ce=V[1],Q<=r?ce>r&&(ne-K)*(r-Q)>(ce-Q)*(e-K)&&++D:ce<=r&&(ne-K)*(r-Q)<(ce-Q)*(e-K)&&--D;return D}function N(){c=f,d=[],p=[],$=!0}function F(){var D=O(),L=$&&D,j=(d=pX(d)).length;(L||j)&&(l.polygonStart(),L&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),j&&zJ(d,s,D,o,l),l.polygonEnd()),c=l,d=p=g=null}function W(){S.point=M,p&&p.push(g=[]),E=!0,A=!1,x=_=NaN}function I(){d&&(M(y,v),b&&A&&f.rejoin(),d.push(f.result())),S.point=k,A&&c.lineEnd()}function M(D,L){var j=i(D,L);if(p&&g.push([D,L]),E)y=D,v=L,b=j,E=!1,j&&(c.lineStart(),c.point(D,L));else if(j&&A)c.point(D,L);else{var z=[x=Math.max(Vb,Math.min(om,x)),_=Math.max(Vb,Math.min(om,_))],H=[D=Math.max(Vb,Math.min(om,D)),L=Math.max(Vb,Math.min(om,L))];tEe(z,H,e,t,n,r)?(A||(c.lineStart(),c.point(z[0],z[1])),c.point(H[0],H[1]),j||c.lineEnd(),$=!1):j&&(c.lineStart(),c.point(D,L),$=!1)}x=D,_=L,A=j}return S}}function mz(e,t,n){var r=In(e,t-Be,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function yz(e,t,n){var r=In(e,t-Be,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function nEe(){var e,t,n,r,i,o,a,s,u=10,l=u,c=90,f=360,d,p,g,y,v=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return In(Wb(r/c)*c,n,c).map(g).concat(In(Wb(s/f)*f,a,f).map(y)).concat(In(Wb(t/u)*u,e,u).filter(function(_){return gt(_%c)>Be}).map(d)).concat(In(Wb(o/l)*l,i,l).filter(function(_){return gt(_%f)>Be}).map(p))}return b.lines=function(){return x().map(function(_){return{type:"LineString",coordinates:_}})},b.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(y(a).slice(1),g(n).reverse().slice(1),y(s).reverse().slice(1))]}},b.extent=function(_){return arguments.length?b.extentMajor(_).extentMinor(_):b.extentMinor()},b.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],s=+_[0][1],a=+_[1][1],r>n&&(_=r,r=n,n=_),s>a&&(_=s,s=a,a=_),b.precision(v)):[[r,s],[n,a]]},b.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],o=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),o>i&&(_=o,o=i,i=_),b.precision(v)):[[t,o],[e,i]]},b.step=function(_){return arguments.length?b.stepMajor(_).stepMinor(_):b.stepMinor()},b.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],b):[c,f]},b.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],b):[u,l]},b.precision=function(_){return arguments.length?(v=+_,d=mz(o,i,90),p=yz(t,e,v),g=mz(s,a,90),y=yz(r,n,v),b):v},b.extentMajor([[-180,-90+Be],[180,90-Be]]).extentMinor([[-180,-80-Be],[180,80+Be]])}const Cy=e=>e;var B9=new si,H4=new si,jJ,UJ,q4,G4,ac={point:dr,lineStart:dr,lineEnd:dr,polygonStart:function(){ac.lineStart=rEe,ac.lineEnd=oEe},polygonEnd:function(){ac.lineStart=ac.lineEnd=ac.point=dr,B9.add(gt(H4)),H4=new si},result:function(){var e=B9/2;return B9=new si,e}};function rEe(){ac.point=iEe}function iEe(e,t){ac.point=WJ,jJ=q4=e,UJ=G4=t}function WJ(e,t){H4.add(G4*e-q4*t),q4=e,G4=t}function oEe(){WJ(jJ,UJ)}const vz=ac;var Mp=1/0,C_=Mp,ky=-Mp,k_=ky,aEe={point:sEe,lineStart:dr,lineEnd:dr,polygonStart:dr,polygonEnd:dr,result:function(){var e=[[Mp,C_],[ky,k_]];return ky=k_=-(C_=Mp=1/0),e}};function sEe(e,t){e<Mp&&(Mp=e),e>ky&&(ky=e),t<C_&&(C_=t),t>k_&&(k_=t)}const T_=aEe;var V4=0,Y4=0,am=0,M_=0,O_=0,Lh=0,X4=0,J4=0,sm=0,HJ,qJ,Rs,Fs,za={point:Gd,lineStart:bz,lineEnd:xz,polygonStart:function(){za.lineStart=cEe,za.lineEnd=fEe},polygonEnd:function(){za.point=Gd,za.lineStart=bz,za.lineEnd=xz},result:function(){var e=sm?[X4/sm,J4/sm]:Lh?[M_/Lh,O_/Lh]:am?[V4/am,Y4/am]:[NaN,NaN];return V4=Y4=am=M_=O_=Lh=X4=J4=sm=0,e}};function Gd(e,t){V4+=e,Y4+=t,++am}function bz(){za.point=uEe}function uEe(e,t){za.point=lEe,Gd(Rs=e,Fs=t)}function lEe(e,t){var n=e-Rs,r=t-Fs,i=hi(n*n+r*r);M_+=i*(Rs+e)/2,O_+=i*(Fs+t)/2,Lh+=i,Gd(Rs=e,Fs=t)}function xz(){za.point=Gd}function cEe(){za.point=dEe}function fEe(){GJ(HJ,qJ)}function dEe(e,t){za.point=GJ,Gd(HJ=Rs=e,qJ=Fs=t)}function GJ(e,t){var n=e-Rs,r=t-Fs,i=hi(n*n+r*r);M_+=i*(Rs+e)/2,O_+=i*(Fs+t)/2,Lh+=i,i=Fs*e-Rs*t,X4+=i*(Rs+e),J4+=i*(Fs+t),sm+=i*3,Gd(Rs=e,Fs=t)}const wz=za;function VJ(e){this._context=e}VJ.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,di);break}}},result:dr};var K4=new si,j9,YJ,XJ,um,lm,N_={point:dr,lineStart:function(){N_.point=hEe},lineEnd:function(){j9&&JJ(YJ,XJ),N_.point=dr},polygonStart:function(){j9=!0},polygonEnd:function(){j9=null},result:function(){var e=+K4;return K4=new si,e}};function hEe(e,t){N_.point=JJ,YJ=um=e,XJ=lm=t}function JJ(e,t){um-=e,lm-=t,K4.add(hi(um*um+lm*lm)),um=e,lm=t}const _z=N_;let Az,R_,Sz,Ez;class $z{constructor(t){this._append=t==null?KJ:pEe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Sz||this._append!==R_){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Sz=r,R_=this._append,Ez=this._,this._=i}this._+=Ez;break}}}result(){const t=this._;return this._="",t.length?t:null}}function KJ(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function pEe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return KJ;if(t!==Az){const n=10**t;Az=t,R_=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return R_}function $2(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Ns(s,i(o))),o.result()}return a.area=function(s){return Ns(s,i(vz)),vz.result()},a.measure=function(s){return Ns(s,i(_z)),_z.result()},a.bounds=function(s){return Ns(s,i(T_)),T_.result()},a.centroid=function(s){return Ns(s,i(wz)),wz.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,Cy):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new $z(n)):new VJ(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return t===null&&(o=new $z(n)),a},a.projection(e).digits(n).context(t)}function Q4(e){return{stream:C2(e)}}function C2(e){return function(t){var n=new Z4;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Z4(){}Z4.prototype={constructor:Z4,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Sk(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ns(n,e.stream(T_)),t(T_.result()),r!=null&&e.clipExtent(r),e}function m3(e,t,n){return Sk(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,u])},n)}function Ek(e,t,n){return m3(e,[[0,0],t],n)}function $k(e,t,n){return Sk(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Ck(e,t,n){return Sk(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Cz=16,gEe=je(30*ot);function kz(e,t){return+t?yEe(e,t):mEe(e)}function mEe(e){return C2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function yEe(e,t){function n(r,i,o,a,s,u,l,c,f,d,p,g,y,v){var b=l-r,x=c-i,_=b*b+x*x;if(_>4*t&&y--){var A=a+d,E=s+p,$=u+g,S=hi(A*A+E*E+$*$),k=Wi($/=S),O=gt(gt($)-1)<Be||gt(o-f)<Be?(o+f)/2:la(E,A),N=e(O,k),F=N[0],W=N[1],I=F-r,M=W-i,D=x*I-b*M;(D*D/_>t||gt((b*I+x*M)/_-.5)>.3||a*d+s*p+u*g<gEe)&&(n(r,i,o,a,s,u,F,W,O,A/=S,E/=S,$,y,v),v.point(F,W),n(F,W,O,A,E,$,l,c,f,d,p,g,y,v))}}return function(r){var i,o,a,s,u,l,c,f,d,p,g,y,v={point:b,lineStart:x,lineEnd:A,polygonStart:function(){r.polygonStart(),v.lineStart=E},polygonEnd:function(){r.polygonEnd(),v.lineStart=x}};function b(k,O){k=e(k,O),r.point(k[0],k[1])}function x(){f=NaN,v.point=_,r.lineStart()}function _(k,O){var N=qd([k,O]),F=e(k,O);n(f,d,c,p,g,y,f=F[0],d=F[1],c=k,p=N[0],g=N[1],y=N[2],Cz,r),r.point(f,d)}function A(){v.point=b,r.lineEnd()}function E(){x(),v.point=$,v.lineEnd=S}function $(k,O){_(i=k,O),o=f,a=d,s=p,u=g,l=y,v.point=_}function S(){n(f,d,c,p,g,y,o,a,i,s,u,l,Cz,r),v.lineEnd=A,A()}return v}}var vEe=C2({point:function(e,t){this.stream.point(e*ot,t*ot)}});function bEe(e){return C2({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function xEe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function Tz(e,t,n,r,i,o){if(!o)return xEe(e,t,n,r,i);var a=je(o),s=Ie(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function g(y,v){return y*=r,v*=i,[u*y-l*v+t,n-l*y-u*v]}return g.invert=function(y,v){return[r*(c*y-f*v+d),i*(p-f*y-c*v)]},g}function ou(e){return QJ(function(){return e})()}function QJ(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,u=0,l=0,c,f=0,d=1,p=1,g=null,y=gz,v=null,b,x,_,A=Cy,E=.5,$,S,k,O,N;function F(D){return k(D[0]*ot,D[1]*ot)}function W(D){return D=k.invert(D[0],D[1]),D&&[D[0]*Sn,D[1]*Sn]}F.stream=function(D){return O&&N===D?O:O=vEe(bEe(c)(y($(A(N=D)))))},F.preclip=function(D){return arguments.length?(y=D,g=void 0,M()):y},F.postclip=function(D){return arguments.length?(A=D,v=b=x=_=null,M()):A},F.clipAngle=function(D){return arguments.length?(y=+D?eEe(g=D*ot):(g=null,gz),M()):g*Sn},F.clipExtent=function(D){return arguments.length?(A=D==null?(v=b=x=_=null,Cy):Ak(v=+D[0][0],b=+D[0][1],x=+D[1][0],_=+D[1][1]),M()):v==null?null:[[v,b],[x,_]]},F.scale=function(D){return arguments.length?(n=+D,I()):n},F.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],I()):[r,i]},F.center=function(D){return arguments.length?(o=D[0]%360*ot,a=D[1]%360*ot,I()):[o*Sn,a*Sn]},F.rotate=function(D){return arguments.length?(s=D[0]%360*ot,u=D[1]%360*ot,l=D.length>2?D[2]%360*ot:0,I()):[s*Sn,u*Sn,l*Sn]},F.angle=function(D){return arguments.length?(f=D%360*ot,I()):f*Sn},F.reflectX=function(D){return arguments.length?(d=D?-1:1,I()):d<0},F.reflectY=function(D){return arguments.length?(p=D?-1:1,I()):p<0},F.precision=function(D){return arguments.length?($=kz(S,E=D*D),M()):hi(E)},F.fitExtent=function(D,L){return m3(F,D,L)},F.fitSize=function(D,L){return Ek(F,D,L)},F.fitWidth=function(D,L){return $k(F,D,L)},F.fitHeight=function(D,L){return Ck(F,D,L)};function I(){var D=Tz(n,0,0,d,p,f).apply(null,t(o,a)),L=Tz(n,r-D[0],i-D[1],d,p,f);return c=LJ(s,u,l),S=U4(t,L),k=U4(c,S),$=kz(S,E),M()}function M(){return O=N=null,F}return function(){return t=e.apply(this,arguments),F.invert=t.invert&&W,I()}}function kk(e){var t=0,n=at/3,r=QJ(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*ot,n=o[1]*ot):[t*Sn,n*Sn]},i}function wEe(e){var t=je(e);function n(r,i){return[r*t,Ie(i)/t]}return n.invert=function(r,i){return[r/t,Wi(i*t)]},n}function _Ee(e,t){var n=Ie(e),r=(n+Ie(t))/2;if(gt(r)<Be)return wEe(e);var i=1+n*(2*r-n),o=hi(i)/r;function a(s,u){var l=hi(i-2*r*Ie(u))/r;return[l*Ie(s*=r),o-l*je(s)]}return a.invert=function(s,u){var l=o-u,c=la(s,gt(l))*Yo(l);return l*r<0&&(c-=at*Yo(s)*Yo(l)),[c/r,Wi((i-(s*s+l*l)*r*r)/(2*r))]},a}function Ty(){return kk(_Ee).scale(155.424).center([0,33.6442])}function Tk(){return Ty().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function AEe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ZJ(){var e,t,n=Tk(),r,i=Ty().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ty().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,l={point:function(d,p){u=[d,p]}};function c(d){var p=d[0],g=d[1];return u=null,r.point(p,g),u||(o.point(p,g),u)||(s.point(p,g),u)}c.invert=function(d){var p=n.scale(),g=n.translate(),y=(d[0]-g[0])/p,v=(d[1]-g[1])/p;return(v>=.12&&v<.234&&y>=-.425&&y<-.214?i:v>=.166&&v<.234&&y>=-.214&&y<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=AEe([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),g=+d[0],y=+d[1];return r=n.translate(d).clipExtent([[g-.455*p,y-.238*p],[g+.455*p,y+.238*p]]).stream(l),o=i.translate([g-.307*p,y+.201*p]).clipExtent([[g-.425*p+Be,y+.12*p+Be],[g-.214*p-Be,y+.234*p-Be]]).stream(l),s=a.translate([g-.205*p,y+.212*p]).clipExtent([[g-.214*p+Be,y+.166*p+Be],[g-.115*p-Be,y+.234*p-Be]]).stream(l),f()},c.fitExtent=function(d,p){return m3(c,d,p)},c.fitSize=function(d,p){return Ek(c,d,p)},c.fitWidth=function(d,p){return $k(c,d,p)},c.fitHeight=function(d,p){return Ck(c,d,p)};function f(){return e=t=null,c}return c.scale(1070)}function eK(e){return function(t,n){var r=je(t),i=je(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Ie(t),o*Ie(n)]}}function k2(e){return function(t,n){var r=hi(t*t+n*n),i=e(r),o=Ie(i),a=je(i);return[la(t*o,r*a),Wi(r&&n*o/r)]}}var tK=eK(function(e){return hi(2/(1+e))});tK.invert=k2(function(e){return 2*Wi(e/2)});function nK(){return ou(tK).scale(124.75).clipAngle(180-.001)}var rK=eK(function(e){return(e=$J(e))&&e/Ie(e)});rK.invert=k2(function(e){return e});function iK(){return ou(rK).scale(79.4188).clipAngle(180-.001)}function y3(e,t){return[e,p_(wk((bn+t)/2))]}y3.invert=function(e,t){return[e,2*bg(EJ(t))-bn]};function Mk(){return oK(y3).scale(961/di)}function oK(e){var t=ou(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=u=l=null:(a=+f[0][0],s=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):a==null?null:[[a,s],[u,l]]};function c(){var f=at*r(),d=t(GSe(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===y3?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,u),l]]:[[a,Math.max(d[1]-f,s)],[u,Math.min(d[1]+f,l)]])}return c()}function Yb(e){return wk((bn+e)/2)}function SEe(e,t){var n=je(e),r=e===t?Ie(e):p_(n/je(t))/p_(Yb(t)/Yb(e)),i=n*L9(Yb(e),r)/r;if(!r)return y3;function o(a,s){i>0?s<-bn+Be&&(s=-bn+Be):s>bn-Be&&(s=bn-Be);var u=i/L9(Yb(s),r);return[u*Ie(r*a),i-u*je(r*a)]}return o.invert=function(a,s){var u=i-s,l=Yo(r)*hi(a*a+u*u),c=la(a,gt(u))*Yo(u);return u*r<0&&(c-=at*Yo(a)*Yo(u)),[c/r,2*bg(L9(i/l,1/r))-bn]},o}function aK(){return kk(SEe).scale(109.5).parallels([30,30])}function F_(e,t){return[e,t]}F_.invert=F_;function sK(){return ou(F_).scale(152.63)}function EEe(e,t){var n=je(e),r=e===t?Ie(e):(n-je(t))/(t-e),i=n/r+e;if(gt(r)<Be)return F_;function o(a,s){var u=i-s,l=r*a;return[u*Ie(l),i-u*je(l)]}return o.invert=function(a,s){var u=i-s,l=la(a,gt(u))*Yo(u);return u*r<0&&(l-=at*Yo(a)*Yo(u)),[l/r,i-Yo(r)*hi(a*a+u*u)]},o}function uK(){return kk(EEe).scale(131.154).center([0,13.9389])}var Bm=1.340264,jm=-.081106,Um=893e-6,Wm=.003796,D_=hi(3)/2,$Ee=12;function lK(e,t){var n=Wi(D_*Ie(t)),r=n*n,i=r*r*r;return[e*je(n)/(D_*(Bm+3*jm*r+i*(7*Um+9*Wm*r))),n*(Bm+jm*r+i*(Um+Wm*r))]}lK.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,u;o<$Ee&&(s=n*(Bm+jm*r+i*(Um+Wm*r))-t,u=Bm+3*jm*r+i*(7*Um+9*Wm*r),n-=a=s/u,r=n*n,i=r*r*r,!(gt(a)<d_));++o);return[D_*e*(Bm+3*jm*r+i*(7*Um+9*Wm*r))/je(n),Wi(Ie(n)/D_)]};function cK(){return ou(lK).scale(177.158)}function fK(e,t){var n=je(t),r=je(e)*n;return[n*Ie(e)/r,Ie(t)/r]}fK.invert=k2(bg);function dK(){return ou(fK).scale(144.049).clipAngle(60)}function CEe(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,u=null,l,c,f,d=1,p=1,g=C2({point:function(A,E){var $=_([A,E]);this.stream.point($[0],$[1])}}),y=Cy,v,b;function x(){return d=e*r,p=e*i,v=b=null,_}function _(A){var E=A[0]*d,$=A[1]*p;if(o){var S=$*a-E*s;E=E*a+$*s,$=S}return[E+t,$+n]}return _.invert=function(A){var E=A[0]-t,$=A[1]-n;if(o){var S=$*a+E*s;E=E*a-$*s,$=S}return[E/d,$/p]},_.stream=function(A){return v&&b===A?v:v=g(y(b=A))},_.postclip=function(A){return arguments.length?(y=A,u=l=c=f=null,x()):y},_.clipExtent=function(A){return arguments.length?(y=A==null?(u=l=c=f=null,Cy):Ak(u=+A[0][0],l=+A[0][1],c=+A[1][0],f=+A[1][1]),x()):u==null?null:[[u,l],[c,f]]},_.scale=function(A){return arguments.length?(e=+A,x()):e},_.translate=function(A){return arguments.length?(t=+A[0],n=+A[1],x()):[t,n]},_.angle=function(A){return arguments.length?(o=A%360*ot,s=Ie(o),a=je(o),x()):o*Sn},_.reflectX=function(A){return arguments.length?(r=A?-1:1,x()):r<0},_.reflectY=function(A){return arguments.length?(i=A?-1:1,x()):i<0},_.fitExtent=function(A,E){return m3(_,A,E)},_.fitSize=function(A,E){return Ek(_,A,E)},_.fitWidth=function(A,E){return $k(_,A,E)},_.fitHeight=function(A,E){return Ck(_,A,E)},_}function hK(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}hK.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(gt(i)>Be&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function kEe(){return ou(hK).scale(175.295)}function pK(e,t){return[je(t)*Ie(e),Ie(t)]}pK.invert=k2(Wi);function gK(){return ou(pK).scale(249.5).clipAngle(90+Be)}function mK(e,t){var n=je(t),r=1+je(e)*n;return[n*Ie(e)/r,Ie(t)/r]}mK.invert=k2(function(e){return 2*bg(e)});function yK(){return ou(mK).scale(250).clipAngle(142)}function vK(e,t){return[p_(wk((bn+t)/2)),-e]}vK.invert=function(e,t){return[-t,2*bg(EJ(e))-bn]};function bK(){var e=oK(vK),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function TEe(e,t){return e.parent===t.parent?1:2}function MEe(e){return e.reduce(OEe,0)/e.length}function OEe(e,t){return e+t.x}function NEe(e){return 1+e.reduce(REe,0)}function REe(e,t){return Math.max(e,t.y)}function FEe(e){for(var t;t=e.children;)e=t[0];return e}function DEe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function PEe(){var e=TEe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=MEe(p),d.y=NEe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var u=FEe(o),l=DEe(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function LEe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function IEe(){return this.eachAfter(LEe)}function zEe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function BEe(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function jEe(e,t){for(var n=this,r=[n],i=[],o,a,s,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function UEe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function WEe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function HEe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function qEe(e){for(var t=this,n=GEe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function GEe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function VEe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function YEe(){return Array.from(this)}function XEe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function JEe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*KEe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Ok(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=e9e)):t===void 0&&(t=ZEe);for(var n=new Op(e),r,i=[n],o,a,s,u;r=i.pop();)if((a=t(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,s=u-1;s>=0;--s)i.push(o=a[s]=new Op(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(xK)}function QEe(){return Ok(this).eachBefore(t9e)}function ZEe(e){return e.children}function e9e(e){return Array.isArray(e)?e[1]:null}function t9e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function xK(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Op(e){this.data=e,this.depth=this.height=0,this.parent=null}Op.prototype=Ok.prototype={constructor:Op,count:IEe,each:zEe,eachAfter:jEe,eachBefore:BEe,find:UEe,sum:WEe,sort:HEe,path:qEe,ancestors:VEe,descendants:YEe,leaves:XEe,links:JEe,copy:QEe,[Symbol.iterator]:KEe};function Zx(e){return e==null?null:wK(e)}function wK(e){if(typeof e!="function")throw new Error;return e}function od(){return 0}function wh(e){return function(){return e}}const n9e=1664525,r9e=1013904223,Mz=4294967296;function i9e(){let e=1;return()=>(e=(n9e*e+r9e)%Mz)/Mz}function o9e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function a9e(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function s9e(e,t){for(var n=0,r=(e=a9e(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&_K(a,o)?++n:(a=l9e(i=u9e(i,o)),n=0);return a}function u9e(e,t){var n,r;if(U9(t,e))return[t];for(n=0;n<e.length;++n)if(Xb(t,e[n])&&U9(cm(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Xb(cm(e[n],e[r]),t)&&Xb(cm(e[n],t),e[r])&&Xb(cm(e[r],t),e[n])&&U9(AK(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Xb(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function _K(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function U9(e,t){for(var n=0;n<t.length;++n)if(!_K(e,t[n]))return!1;return!0}function l9e(e){switch(e.length){case 1:return c9e(e[0]);case 2:return cm(e[0],e[1]);case 3:return AK(e[0],e[1],e[2])}}function c9e(e){return{x:e.x,y:e.y,r:e.r}}function cm(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function AK(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,p=r-l,g=i-s,y=i-c,v=u-o,b=f-o,x=r*r+i*i-o*o,_=x-a*a-s*s+u*u,A=x-l*l-c*c+f*f,E=p*g-d*y,$=(g*A-y*_)/(E*2)-r,S=(y*v-g*b)/E,k=(p*_-d*A)/(E*2)-i,O=(d*b-p*v)/E,N=S*S+O*O-1,F=2*(o+$*S+k*O),W=$*$+k*k-o*o,I=-(Math.abs(N)>1e-6?(F+Math.sqrt(F*F-4*N*W))/(2*N):W/F);return{x:r+$+S*I,y:i+k+O*I,r:I}}function Oz(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,u,l=r*r+a*a;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),s=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-u)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function Nz(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Rz(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Jb(e){this._=e,this.next=null,this.previous=null}function f9e(e,t){if(!(o=(e=o9e(e)).length))return 0;var n,r,i,o,a,s,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Oz(r,n,i=e[2]),n=new Jb(n),r=new Jb(r),i=new Jb(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){Oz(n._,r._,i=e[u]),i=new Jb(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Nz(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Nz(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Rz(n);(i=i.next)!==r;)(s=Rz(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=s9e(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function d9e(e){return Math.sqrt(e.value)}function h9e(){var e=null,t=1,n=1,r=od;function i(o){const a=i9e();return o.x=t/2,o.y=n/2,e?o.eachBefore(Fz(e)).eachAfter(W9(r,.5,a)).eachBefore(Dz(1)):o.eachBefore(Fz(d9e)).eachAfter(W9(od,1,a)).eachAfter(W9(r,o.r/Math.min(t,n),a)).eachBefore(Dz(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Zx(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:wh(+o),i):r},i}function Fz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function W9(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,u;if(s)for(o=0;o<a;++o)i[o].r+=s;if(u=f9e(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=u+s}}}function Dz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function SK(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function T2(e,t,n,r,i){for(var o=e.children,a,s=-1,u=o.length,l=e.value&&(r-t)/e.value;++s<u;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function p9e(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(SK),a}function o(a,s){return function(u){u.children&&T2(u,u.x0,a*(u.depth+1)/s,u.x1,a*(u.depth+2)/s);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var g9e={depth:-1},Pz={},H9={};function m9e(e){return e.id}function y9e(e){return e.parentId}function Lz(){var e=m9e,t=y9e,n;function r(i){var o=Array.from(i),a=e,s=t,u,l,c,f,d,p,g,y,v=new Map;if(n!=null){const b=o.map((A,E)=>v9e(n(A,E,i))),x=b.map(Iz),_=new Set(b).add("");for(const A of x)_.has(A)||(_.add(A),b.push(A),x.push(Iz(A)),o.push(H9));a=(A,E)=>b[E],s=(A,E)=>x[E]}for(c=0,u=o.length;c<u;++c)l=o[c],p=o[c]=new Op(l),(g=a(l,c,i))!=null&&(g+="")&&(y=p.id=g,v.set(y,v.has(y)?Pz:p)),(g=s(l,c,i))!=null&&(g+="")&&(p.parent=g);for(c=0;c<u;++c)if(p=o[c],g=p.parent){if(d=v.get(g),!d)throw new Error("missing: "+g);if(d===Pz)throw new Error("ambiguous: "+g);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===H9&&f.children.length===1;)f=f.children[0],--u;for(let b=o.length-1;b>=0&&(p=o[b],p.data===H9);--b)p.data=null}if(f.parent=g9e,f.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(xK),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zx(i),r):e},r.parentId=function(i){return arguments.length?(t=Zx(i),r):t},r.path=function(i){return arguments.length?(n=Zx(i),r):n},r}function v9e(e){e=`${e}`;let t=e.length;return e$(e,t-1)&&!e$(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Iz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!e$(e,t););return e.slice(0,t)}function e$(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function b9e(e,t){return e.parent===t.parent?1:2}function q9(e){var t=e.children;return t?t[0]:e.t}function G9(e){var t=e.children;return t?t[t.length-1]:e.t}function x9e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function w9e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function _9e(e,t,n){return e.a.parent===t.parent?e.a:n}function ew(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ew.prototype=Object.create(Op.prototype);function A9e(e){for(var t=new ew(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new ew(o[a],a)),i.parent=n;return(t.parent=new ew(null,0)).children=[t],t}function S9e(){var e=b9e,t=1,n=1,r=null;function i(l){var c=A9e(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)l.eachBefore(u);else{var f=l,d=l,p=l;l.eachBefore(function(x){x.x<f.x&&(f=x),x.x>d.x&&(d=x),x.depth>p.depth&&(p=x)});var g=f===d?1:e(f,d)/2,y=g-f.x,v=t/(d.x+g+y),b=n/(p.depth||1);l.eachBefore(function(x){x.x=(x.x+y)*v,x.y=x.depth*b})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){w9e(l);var p=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,c,f){if(c){for(var d=l,p=l,g=c,y=d.parent.children[0],v=d.m,b=p.m,x=g.m,_=y.m,A;g=G9(g),d=q9(d),g&&d;)y=q9(y),p=G9(p),p.a=l,A=g.z+x-d.z-v+e(g._,d._),A>0&&(x9e(_9e(g,l,f),l,A),v+=A,b+=A),x+=g.m,v+=d.m,_+=y.m,b+=p.m;g&&!G9(p)&&(p.t=g,p.m+=x-b),d&&!q9(y)&&(y.t=d,y.m+=v-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function v3(e,t,n,r,i){for(var o=e.children,a,s=-1,u=o.length,l=e.value&&(i-n)/e.value;++s<u;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var EK=(1+Math.sqrt(5))/2;function $K(e,t,n,r,i,o){for(var a=[],s=t.children,u,l,c=0,f=0,d=s.length,p,g,y=t.value,v,b,x,_,A,E,$;c<d;){p=i-n,g=o-r;do v=s[f++].value;while(!v&&f<d);for(b=x=v,E=Math.max(g/p,p/g)/(y*e),$=v*v*E,A=Math.max(x/$,$/b);f<d;++f){if(v+=l=s[f].value,l<b&&(b=l),l>x&&(x=l),$=v*v*E,_=Math.max(x/$,$/b),_>A){v-=l;break}A=_}a.push(u={value:v,dice:p<g,children:s.slice(c,f)}),u.dice?T2(u,n,r,i,y?r+=g*v/y:o):v3(u,n,r,y?n+=p*v/y:i,o),y-=v,c=f}return a}const CK=function e(t){function n(r,i,o,a,s){$K(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EK);function E9e(){var e=CK,t=!1,n=1,r=1,i=[0],o=od,a=od,s=od,u=od,l=od;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(SK),d}function f(d){var p=i[d.depth],g=d.x0+p,y=d.y0+p,v=d.x1-p,b=d.y1-p;v<g&&(g=v=(g+v)/2),b<y&&(y=b=(y+b)/2),d.x0=g,d.y0=y,d.x1=v,d.y1=b,d.children&&(p=i[d.depth+1]=o(d)/2,g+=l(d)-p,y+=a(d)-p,v-=s(d)-p,b-=u(d)-p,v<g&&(g=v=(g+v)/2),b<y&&(y=b=(y+b)/2),e(d,g,y,v,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=wK(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:wh(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:wh(+d),c):a},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:wh(+d),c):s},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:wh(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:wh(+d),c):l},c}function $9e(e,t,n,r,i){var o=e.children,a,s=o.length,u,l=new Array(s+1);for(l[0]=u=a=0;a<s;++a)l[a+1]=u+=o[a].value;c(0,s,e.value,t,n,r,i);function c(f,d,p,g,y,v,b){if(f>=d-1){var x=o[f];x.x0=g,x.y0=y,x.x1=v,x.y1=b;return}for(var _=l[f],A=p/2+_,E=f+1,$=d-1;E<$;){var S=E+$>>>1;l[S]<A?E=S+1:$=S}A-l[E-1]<l[E]-A&&f+1<E&&--E;var k=l[E]-_,O=p-k;if(v-g>b-y){var N=p?(g*O+v*k)/p:v;c(f,E,k,g,y,N,b),c(E,d,O,N,y,v,b)}else{var F=p?(y*O+b*k)/p:b;c(f,E,k,g,y,v,F),c(E,d,O,g,F,v,b)}}}function C9e(e,t,n,r,i){(e.depth&1?v3:T2)(e,t,n,r,i)}const k9e=function e(t){function n(r,i,o,a,s){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,p,g=u.length,y=r.value;++d<g;){for(l=u[d],c=l.children,f=l.value=0,p=c.length;f<p;++f)l.value+=c[f].value;l.dice?T2(l,i,o,a,y?o+=(s-o)*l.value/y:s):v3(l,i,o,y?i+=(a-i)*l.value/y:a,s),y-=l.value}else r._squarify=u=$K(t,r,i,o,a,s),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EK);function as(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const P_=Symbol("implicit");function M2(){var e=new xy,t=[],n=[],r=P_;function i(o){let a=e.get(o);if(a===void 0){if(r!==P_)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new xy;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return M2(t,n).unknown(r)},as.apply(i,arguments),i}function b3(){var e=M2().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,s=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,p=i<r,g=p?i:r,y=p?r:i;o=(y-g)/Math.max(1,d-u+l*2),s&&(o=Math.floor(o)),g+=(y-g-o*(d-u))*c,a=o*(1-u),s&&(g=Math.round(g),a=Math.round(a));var v=In(d).map(function(b){return g+o*b});return n(p?v.reverse():v)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,f()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return b3(t(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},as.apply(f(),arguments)}function kK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return kK(t())},e}function T9e(){return kK(b3.apply(null,arguments).paddingInner(1))}function M9e(e){return function(){return e}}function t$(e){return+e}var zz=[0,1];function Di(e){return e}function n$(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:M9e(isNaN(t)?NaN:.5)}function O9e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function N9e(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=n$(i,r),o=n(a,o)):(r=n$(r,i),o=n(o,a)),function(s){return o(r(s))}}function R9e(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=n$(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var u=b2(e,s,1,r)-1;return o[u](i[u](s))}}function O2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x3(){var e=zz,t=zz,n=gf,r,i,o,a=Di,s,u,l;function c(){var d=Math.min(e.length,t.length);return a!==Di&&(a=O9e(e[0],e[d-1])),s=d>2?R9e:N9e,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),fr)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,t$),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=yg,c()},f.clamp=function(d){return arguments.length?(a=d?!0:Di,c()):a!==Di},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,c()}}function TK(){return x3()(Di,Di)}function MK(e,t,n,r){var i=Bc(e,t,n),o;switch(r=Hd(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=AJ(i,a))&&(r.precision=o),xk(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=SJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=_J(i))&&(r.precision=o-(r.type==="%")*2);break}}return mf(r)}function b0(e){var t=e.domain;return e.ticks=function(n){var r=t();return e_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return MK(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,c=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);c-- >0;){if(l=w4(a,s,n),l===u)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function Uc(){var e=TK();return e.copy=function(){return O2(e,Uc())},as.apply(e,arguments),b0(e)}function Nk(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,t$),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Nk(e).unknown(t)},e=arguments.length?Array.from(e,t$):[0,1],b0(n)}function OK(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Bz(e){return Math.log(e)}function jz(e){return Math.exp(e)}function F9e(e){return-Math.log(-e)}function D9e(e){return-Math.exp(-e)}function P9e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L9e(e){return e===10?P9e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function I9e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Uz(e){return(t,n)=>-e(-t,n)}function Rk(e){const t=e(Bz,jz),n=t.domain;let r=10,i,o;function a(){return i=I9e(r),o=L9e(r),n()[0]<0?(i=Uz(i),o=Uz(o),e(F9e,D9e)):e(Bz,jz),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),p=i(c),g,y;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-d<v){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(g=1;g<r;++g)if(y=d<0?g/o(-d):g*o(d),!(y<l)){if(y>c)break;b.push(y)}}else for(;d<=p;++d)for(g=r-1;g>=1;--g)if(y=d>0?g/o(-d):g*o(d),!(y<l)){if(y>c)break;b.push(y)}b.length*2<v&&(b=e_(l,c,v))}else b=e_(d,p,Math.min(p-d,v)).map(o);return f?b.reverse():b},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Hd(u)).precision==null&&(u.trim=!0),u=mf(u)),s===1/0)return u;const l=Math.max(1,r*s/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(OK(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function Fk(){const e=Rk(x3()).domain([1,10]);return e.copy=()=>O2(e,Fk()).base(e.base()),as.apply(e,arguments),e}function Wz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Hz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dk(e){var t=1,n=e(Wz(t),Hz(t));return n.constant=function(r){return arguments.length?e(Wz(t=+r),Hz(t)):t},b0(n)}function Pk(){var e=Dk(x3());return e.copy=function(){return O2(e,Pk()).constant(e.constant())},as.apply(e,arguments)}function qz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function z9e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function B9e(e){return e<0?-e*e:e*e}function Lk(e){var t=e(Di,Di),n=1;function r(){return n===1?e(Di,Di):n===.5?e(z9e,B9e):e(qz(n),qz(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},b0(t)}function w3(){var e=Lk(x3());return e.copy=function(){return O2(e,w3()).exponent(e.exponent())},as.apply(e,arguments),e}function j9e(){return w3.apply(null,arguments).exponent(.5)}function Ik(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=dX(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[b2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Us),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Ik().domain(e).range(t).unknown(r)},as.apply(o,arguments)}function NK(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[b2(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return a}return a.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,s()):[e,t]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return NK().domain([e,t]).range(i).unknown(o)},as.apply(b0(a),arguments)}function _3(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[b2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return _3().domain(e).range(t).unknown(n)},as.apply(i,arguments)}const V9=new Date,Y9=new Date;function Un(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let l;do u.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return u},i.filter=o=>Un(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(V9.setTime(+o),Y9.setTime(+a),e(V9),e(Y9),Math.floor(n(V9,Y9))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Np=Un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Np.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Un(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Np);Np.range;const Xu=1e3,Xo=Xu*60,Ju=Xo*60,pl=Ju*24,zk=pl*7,Gz=pl*30,X9=pl*365,Jo=Un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xu)},(e,t)=>(t-e)/Xu,e=>e.getUTCSeconds());Jo.range;const N2=Un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xu)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getMinutes());N2.range;const xg=Un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getUTCMinutes());xg.range;const R2=Un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xu-e.getMinutes()*Xo)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getHours());R2.range;const wg=Un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getUTCHours());wg.range;const Xa=Un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xo)/pl,e=>e.getDate()-1);Xa.range;const kc=Un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pl,e=>e.getUTCDate()-1);kc.range;const A3=Un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pl,e=>Math.floor(e/pl));A3.range;function x0(e){return Un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xo)/zk)}const Wc=x0(0),My=x0(1),RK=x0(2),FK=x0(3),Vd=x0(4),DK=x0(5),PK=x0(6);Wc.range;My.range;RK.range;FK.range;Vd.range;DK.range;PK.range;function w0(e){return Un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zk)}const Hc=w0(0),Oy=w0(1),LK=w0(2),IK=w0(3),Yd=w0(4),zK=w0(5),BK=w0(6);Hc.range;Oy.range;LK.range;IK.range;Yd.range;zK.range;BK.range;const Xd=Un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Xd.range;const Jd=Un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jd.range;const ca=Un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ca.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ca.range;const fa=Un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fa.range;function jK(e,t,n,r,i,o){const a=[[Jo,1,Xu],[Jo,5,5*Xu],[Jo,15,15*Xu],[Jo,30,30*Xu],[o,1,Xo],[o,5,5*Xo],[o,15,15*Xo],[o,30,30*Xo],[i,1,Ju],[i,3,3*Ju],[i,6,6*Ju],[i,12,12*Ju],[r,1,pl],[r,2,2*pl],[n,1,zk],[t,1,Gz],[t,3,3*Gz],[e,1,X9]];function s(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const p=f&&typeof f.range=="function"?f:u(l,c,f),g=p?p.range(l,+c+1):[];return d?g.reverse():g}function u(l,c,f){const d=Math.abs(c-l)/f,p=v0(([,,v])=>v).right(a,d);if(p===a.length)return e.every(Bc(l/X9,c/X9,f));if(p===0)return Np.every(Math.max(Bc(l,c,f),1));const[g,y]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return g.every(y)}return[s,u]}const[U9e,W9e]=jK(fa,Jd,Hc,A3,wg,xg),[H9e,q9e]=jK(ca,Xd,Wc,Xa,R2,N2);function J9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function K9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function S1(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function UK(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=E1(i),c=$1(i),f=E1(o),d=$1(o),p=E1(a),g=$1(a),y=E1(s),v=$1(s),b=E1(u),x=$1(u),_={a:j,A:z,b:H,B:U,c:null,d:Qz,e:Qz,f:p6e,g:S6e,G:$6e,H:f6e,I:d6e,j:h6e,L:WK,m:g6e,M:m6e,p:V,q:K,Q:tB,s:nB,S:y6e,u:v6e,U:b6e,V:x6e,w:w6e,W:_6e,x:null,X:null,y:A6e,Y:E6e,Z:C6e,"%":eB},A={a:Q,A:ne,b:ce,B:ye,c:null,d:Zz,e:Zz,f:O6e,g:j6e,G:W6e,H:k6e,I:T6e,j:M6e,L:qK,m:N6e,M:R6e,p:fe,q:pe,Q:tB,s:nB,S:F6e,u:D6e,U:P6e,V:L6e,w:I6e,W:z6e,x:null,X:null,y:B6e,Y:U6e,Z:H6e,"%":eB},E={a:N,A:F,b:W,B:I,c:M,d:Jz,e:Jz,f:s6e,g:Xz,G:Yz,H:Kz,I:Kz,j:r6e,L:a6e,m:n6e,M:i6e,p:O,q:t6e,Q:l6e,s:c6e,S:o6e,u:J9e,U:K9e,V:Q9e,w:X9e,W:Z9e,x:D,X:L,y:Xz,Y:Yz,Z:e6e,"%":u6e};_.x=$(n,_),_.X=$(r,_),_.c=$(t,_),A.x=$(n,A),A.X=$(r,A),A.c=$(t,A);function $(te,Se){return function(Ae){var re=[],qe=-1,_e=0,Ze=te.length,Ve,ht,jr;for(Ae instanceof Date||(Ae=new Date(+Ae));++qe<Ze;)te.charCodeAt(qe)===37&&(re.push(te.slice(_e,qe)),(ht=Vz[Ve=te.charAt(++qe)])!=null?Ve=te.charAt(++qe):ht=Ve==="e"?" ":"0",(jr=Se[Ve])&&(Ve=jr(Ae,ht)),re.push(Ve),_e=qe+1);return re.push(te.slice(_e,qe)),re.join("")}}function S(te,Se){return function(Ae){var re=S1(1900,void 0,1),qe=k(re,te,Ae+="",0),_e,Ze;if(qe!=Ae.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(Se&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(_e=K9(S1(re.y,0,1)),Ze=_e.getUTCDay(),_e=Ze>4||Ze===0?Oy.ceil(_e):Oy(_e),_e=kc.offset(_e,(re.V-1)*7),re.y=_e.getUTCFullYear(),re.m=_e.getUTCMonth(),re.d=_e.getUTCDate()+(re.w+6)%7):(_e=J9(S1(re.y,0,1)),Ze=_e.getDay(),_e=Ze>4||Ze===0?My.ceil(_e):My(_e),_e=Xa.offset(_e,(re.V-1)*7),re.y=_e.getFullYear(),re.m=_e.getMonth(),re.d=_e.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ze="Z"in re?K9(S1(re.y,0,1)).getUTCDay():J9(S1(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ze+5)%7:re.w+re.U*7-(Ze+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,K9(re)):J9(re)}}function k(te,Se,Ae,re){for(var qe=0,_e=Se.length,Ze=Ae.length,Ve,ht;qe<_e;){if(re>=Ze)return-1;if(Ve=Se.charCodeAt(qe++),Ve===37){if(Ve=Se.charAt(qe++),ht=E[Ve in Vz?Se.charAt(qe++):Ve],!ht||(re=ht(te,Ae,re))<0)return-1}else if(Ve!=Ae.charCodeAt(re++))return-1}return re}function O(te,Se,Ae){var re=l.exec(Se.slice(Ae));return re?(te.p=c.get(re[0].toLowerCase()),Ae+re[0].length):-1}function N(te,Se,Ae){var re=p.exec(Se.slice(Ae));return re?(te.w=g.get(re[0].toLowerCase()),Ae+re[0].length):-1}function F(te,Se,Ae){var re=f.exec(Se.slice(Ae));return re?(te.w=d.get(re[0].toLowerCase()),Ae+re[0].length):-1}function W(te,Se,Ae){var re=b.exec(Se.slice(Ae));return re?(te.m=x.get(re[0].toLowerCase()),Ae+re[0].length):-1}function I(te,Se,Ae){var re=y.exec(Se.slice(Ae));return re?(te.m=v.get(re[0].toLowerCase()),Ae+re[0].length):-1}function M(te,Se,Ae){return k(te,t,Se,Ae)}function D(te,Se,Ae){return k(te,n,Se,Ae)}function L(te,Se,Ae){return k(te,r,Se,Ae)}function j(te){return a[te.getDay()]}function z(te){return o[te.getDay()]}function H(te){return u[te.getMonth()]}function U(te){return s[te.getMonth()]}function V(te){return i[+(te.getHours()>=12)]}function K(te){return 1+~~(te.getMonth()/3)}function Q(te){return a[te.getUTCDay()]}function ne(te){return o[te.getUTCDay()]}function ce(te){return u[te.getUTCMonth()]}function ye(te){return s[te.getUTCMonth()]}function fe(te){return i[+(te.getUTCHours()>=12)]}function pe(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var Se=$(te+="",_);return Se.toString=function(){return te},Se},parse:function(te){var Se=S(te+="",!1);return Se.toString=function(){return te},Se},utcFormat:function(te){var Se=$(te+="",A);return Se.toString=function(){return te},Se},utcParse:function(te){var Se=S(te+="",!0);return Se.toString=function(){return te},Se}}}var Vz={"-":"",_:" ",0:"0"},or=/^\s*\d+/,G9e=/^%/,V9e=/[\\^$*+?|[\]().{}]/g;function _t(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Y9e(e){return e.replace(V9e,"\\$&")}function E1(e){return new RegExp("^(?:"+e.map(Y9e).join("|")+")","i")}function $1(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function X9e(e,t,n){var r=or.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function J9e(e,t,n){var r=or.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function K9e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Q9e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Z9e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yz(e,t,n){var r=or.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xz(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function e6e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function t6e(e,t,n){var r=or.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function n6e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Jz(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function r6e(e,t,n){var r=or.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Kz(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function i6e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function o6e(e,t,n){var r=or.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function a6e(e,t,n){var r=or.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function s6e(e,t,n){var r=or.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function u6e(e,t,n){var r=G9e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function l6e(e,t,n){var r=or.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function c6e(e,t,n){var r=or.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Qz(e,t){return _t(e.getDate(),t,2)}function f6e(e,t){return _t(e.getHours(),t,2)}function d6e(e,t){return _t(e.getHours()%12||12,t,2)}function h6e(e,t){return _t(1+Xa.count(ca(e),e),t,3)}function WK(e,t){return _t(e.getMilliseconds(),t,3)}function p6e(e,t){return WK(e,t)+"000"}function g6e(e,t){return _t(e.getMonth()+1,t,2)}function m6e(e,t){return _t(e.getMinutes(),t,2)}function y6e(e,t){return _t(e.getSeconds(),t,2)}function v6e(e){var t=e.getDay();return t===0?7:t}function b6e(e,t){return _t(Wc.count(ca(e)-1,e),t,2)}function HK(e){var t=e.getDay();return t>=4||t===0?Vd(e):Vd.ceil(e)}function x6e(e,t){return e=HK(e),_t(Vd.count(ca(e),e)+(ca(e).getDay()===4),t,2)}function w6e(e){return e.getDay()}function _6e(e,t){return _t(My.count(ca(e)-1,e),t,2)}function A6e(e,t){return _t(e.getFullYear()%100,t,2)}function S6e(e,t){return e=HK(e),_t(e.getFullYear()%100,t,2)}function E6e(e,t){return _t(e.getFullYear()%1e4,t,4)}function $6e(e,t){var n=e.getDay();return e=n>=4||n===0?Vd(e):Vd.ceil(e),_t(e.getFullYear()%1e4,t,4)}function C6e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_t(t/60|0,"0",2)+_t(t%60,"0",2)}function Zz(e,t){return _t(e.getUTCDate(),t,2)}function k6e(e,t){return _t(e.getUTCHours(),t,2)}function T6e(e,t){return _t(e.getUTCHours()%12||12,t,2)}function M6e(e,t){return _t(1+kc.count(fa(e),e),t,3)}function qK(e,t){return _t(e.getUTCMilliseconds(),t,3)}function O6e(e,t){return qK(e,t)+"000"}function N6e(e,t){return _t(e.getUTCMonth()+1,t,2)}function R6e(e,t){return _t(e.getUTCMinutes(),t,2)}function F6e(e,t){return _t(e.getUTCSeconds(),t,2)}function D6e(e){var t=e.getUTCDay();return t===0?7:t}function P6e(e,t){return _t(Hc.count(fa(e)-1,e),t,2)}function GK(e){var t=e.getUTCDay();return t>=4||t===0?Yd(e):Yd.ceil(e)}function L6e(e,t){return e=GK(e),_t(Yd.count(fa(e),e)+(fa(e).getUTCDay()===4),t,2)}function I6e(e){return e.getUTCDay()}function z6e(e,t){return _t(Oy.count(fa(e)-1,e),t,2)}function B6e(e,t){return _t(e.getUTCFullYear()%100,t,2)}function j6e(e,t){return e=GK(e),_t(e.getUTCFullYear()%100,t,2)}function U6e(e,t){return _t(e.getUTCFullYear()%1e4,t,4)}function W6e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Yd(e):Yd.ceil(e),_t(e.getUTCFullYear()%1e4,t,4)}function H6e(){return"+0000"}function eB(){return"%"}function tB(e){return+e}function nB(e){return Math.floor(+e/1e3)}var sh,S3,VK,_g,YK;q6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function q6e(e){return sh=UK(e),S3=sh.format,VK=sh.parse,_g=sh.utcFormat,YK=sh.utcParse,sh}function G6e(e){return new Date(e)}function V6e(e){return e instanceof Date?+e:+new Date(+e)}function Bk(e,t,n,r,i,o,a,s,u,l){var c=TK(),f=c.invert,d=c.domain,p=l(".%L"),g=l(":%S"),y=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),_=l("%B"),A=l("%Y");function E($){return(u($)<$?p:s($)<$?g:a($)<$?y:o($)<$?v:r($)<$?i($)<$?b:x:n($)<$?_:A)($)}return c.invert=function($){return new Date(f($))},c.domain=function($){return arguments.length?d(Array.from($,V6e)):d().map(G6e)},c.ticks=function($){var S=d();return e(S[0],S[S.length-1],$??10)},c.tickFormat=function($,S){return S==null?E:l(S)},c.nice=function($){var S=d();return(!$||typeof $.range!="function")&&($=t(S[0],S[S.length-1],$??10)),$?d(OK(S,$)):c},c.copy=function(){return O2(c,Bk(e,t,n,r,i,o,a,s,u,l))},c}function XK(){return as.apply(Bk(H9e,q9e,ca,Xd,Wc,Xa,R2,N2,Jo,S3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JK(){return as.apply(Bk(U9e,W9e,fa,Jd,Hc,kc,wg,xg,Jo,_g).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function E3(){var e=0,t=1,n,r,i,o,a=Di,s=!1,u;function l(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(d){var p,g;return arguments.length?([p,g]=d,a=f(p,g),l):[a(0),a(1)]}}return l.range=c(gf),l.rangeRound=c(yg),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function vf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jk(){var e=b0(E3()(Di));return e.copy=function(){return vf(e,jk())},yf.apply(e,arguments)}function KK(){var e=Rk(E3()).domain([1,10]);return e.copy=function(){return vf(e,KK()).base(e.base())},yf.apply(e,arguments)}function QK(){var e=Dk(E3());return e.copy=function(){return vf(e,QK()).constant(e.constant())},yf.apply(e,arguments)}function Uk(){var e=Lk(E3());return e.copy=function(){return vf(e,Uk()).exponent(e.exponent())},yf.apply(e,arguments)}function Y6e(){return Uk.apply(null,arguments).exponent(.5)}function $3(){var e=0,t=.5,n=1,r=1,i,o,a,s,u,l=Di,c,f=!1,d;function p(y){return isNaN(y=+y)?d:(y=.5+((y=+c(y))-o)*(r*y<r*o?s:u),l(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,n]=y,i=c(e=+e),o=c(t=+t),a=c(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(l=y,p):l};function g(y){return function(v){var b,x,_;return arguments.length?([b,x,_]=v,l=vg(y,[b,x,_]),p):[l(0),l(.5),l(1)]}}return p.range=g(gf),p.rangeRound=g(yg),p.unknown=function(y){return arguments.length?(d=y,p):d},function(y){return c=y,i=y(e),o=y(t),a=y(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function Wk(){var e=b0($3()(Di));return e.copy=function(){return vf(e,Wk())},yf.apply(e,arguments)}function Hk(){var e=Rk($3()).domain([.1,1,10]);return e.copy=function(){return vf(e,Hk()).base(e.base())},yf.apply(e,arguments)}function qk(){var e=Dk($3());return e.copy=function(){return vf(e,qk()).constant(e.constant())},yf.apply(e,arguments)}function C3(){var e=Lk($3());return e.copy=function(){return vf(e,C3()).exponent(e.exponent())},yf.apply(e,arguments)}function X6e(){return C3.apply(null,arguments).exponent(.5)}function tt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const J6e=tt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),K6e=tt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Q6e=tt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Z6e=tt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),e8e=tt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),t8e=tt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),n8e=tt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),r8e=tt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),i8e=tt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),o8e=tt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ht=e=>HX(e[e.length-1]);var ZK=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(tt);const eQ=Ht(ZK);var tQ=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(tt);const nQ=Ht(tQ);var rQ=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(tt);const iQ=Ht(rQ);var oQ=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(tt);const aQ=Ht(oQ);var r$=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(tt);const L_=Ht(r$);var sQ=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(tt);const uQ=Ht(sQ);var i$=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(tt);const I_=Ht(i$);var lQ=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(tt);const cQ=Ht(lQ);var fQ=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(tt);const dQ=Ht(fQ);var hQ=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(tt);const pQ=Ht(hQ);var gQ=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(tt);const mQ=Ht(gQ);var yQ=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(tt);const vQ=Ht(yQ);var bQ=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(tt);const xQ=Ht(bQ);var wQ=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(tt);const _Q=Ht(wQ);var AQ=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(tt);const SQ=Ht(AQ);var EQ=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(tt);const $Q=Ht(EQ);var CQ=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(tt);const kQ=Ht(CQ);var TQ=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(tt);const MQ=Ht(TQ);var OQ=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(tt);const NQ=Ht(OQ);var RQ=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(tt);const FQ=Ht(RQ);var DQ=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(tt);const PQ=Ht(DQ);var LQ=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(tt);const IQ=Ht(LQ);var zQ=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(tt);const BQ=Ht(zQ);var jQ=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(tt);const UQ=Ht(jQ);var WQ=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(tt);const HQ=Ht(WQ);var qQ=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(tt);const GQ=Ht(qQ);var VQ=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(tt);const YQ=Ht(VQ);function XQ(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const JQ=c3(Xs(300,.5,0),Xs(-240,.5,1));var KQ=c3(Xs(-100,.75,.35),Xs(80,1.5,.8)),QQ=c3(Xs(260,.75,.35),Xs(80,1.5,.8)),Kb=Xs();function ZQ(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Kb.h=360*e-100,Kb.s=1.5-1.5*t,Kb.l=.8-.9*t,Kb+""}var Qb=sa(),a8e=Math.PI/3,s8e=Math.PI*2/3;function eZ(e){var t;return e=(.5-e)*Math.PI,Qb.r=255*(t=Math.sin(e))*t,Qb.g=255*(t=Math.sin(e+a8e))*t,Qb.b=255*(t=Math.sin(e+s8e))*t,Qb+""}function tZ(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function k3(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const nZ=k3(tt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var rZ=k3(tt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),iZ=k3(tt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),oZ=k3(tt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Mt(e){return function(){return e}}const rB=Math.abs,Er=Math.atan2,Iu=Math.cos,u8e=Math.max,tp=Math.min,$i=Math.sin,en=Math.sqrt,$r=1e-12,qc=Math.PI,z_=qc/2,F2=2*qc;function l8e(e){return e>1?0:e<-1?qc:Math.acos(e)}function iB(e){return e>=1?z_:e<=-1?-z_:Math.asin(e)}function T3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new p3(t)}function c8e(e){return e.innerRadius}function f8e(e){return e.outerRadius}function d8e(e){return e.startAngle}function h8e(e){return e.endAngle}function p8e(e){return e&&e.padAngle}function g8e(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<$r))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function Zb(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/en(s*s+u*u),c=l*u,f=-l*s,d=e+c,p=t+f,g=n+c,y=r+f,v=(d+g)/2,b=(p+y)/2,x=g-d,_=y-p,A=x*x+_*_,E=i-o,$=d*y-g*p,S=(_<0?-1:1)*en(u8e(0,E*E*A-$*$)),k=($*_-x*S)/A,O=(-$*x-_*S)/A,N=($*_+x*S)/A,F=(-$*x+_*S)/A,W=k-v,I=O-b,M=N-v,D=F-b;return W*W+I*I>M*M+D*D&&(k=N,O=F),{cx:k,cy:O,x01:-c,y01:-f,x11:k*(i/E-1),y11:O*(i/E-1)}}function aZ(){var e=c8e,t=f8e,n=Mt(0),r=null,i=d8e,o=h8e,a=p8e,s=null,u=T3(l);function l(){var c,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),g=i.apply(this,arguments)-z_,y=o.apply(this,arguments)-z_,v=rB(y-g),b=y>g;if(s||(s=c=u()),p<d&&(f=p,p=d,d=f),!(p>$r))s.moveTo(0,0);else if(v>F2-$r)s.moveTo(p*Iu(g),p*$i(g)),s.arc(0,0,p,g,y,!b),d>$r&&(s.moveTo(d*Iu(y),d*$i(y)),s.arc(0,0,d,y,g,b));else{var x=g,_=y,A=g,E=y,$=v,S=v,k=a.apply(this,arguments)/2,O=k>$r&&(r?+r.apply(this,arguments):en(d*d+p*p)),N=tp(rB(p-d)/2,+n.apply(this,arguments)),F=N,W=N,I,M;if(O>$r){var D=iB(O/d*$i(k)),L=iB(O/p*$i(k));($-=D*2)>$r?(D*=b?1:-1,A+=D,E-=D):($=0,A=E=(g+y)/2),(S-=L*2)>$r?(L*=b?1:-1,x+=L,_-=L):(S=0,x=_=(g+y)/2)}var j=p*Iu(x),z=p*$i(x),H=d*Iu(E),U=d*$i(E);if(N>$r){var V=p*Iu(_),K=p*$i(_),Q=d*Iu(A),ne=d*$i(A),ce;if(v<qc)if(ce=g8e(j,z,Q,ne,V,K,H,U)){var ye=j-ce[0],fe=z-ce[1],pe=V-ce[0],te=K-ce[1],Se=1/$i(l8e((ye*pe+fe*te)/(en(ye*ye+fe*fe)*en(pe*pe+te*te)))/2),Ae=en(ce[0]*ce[0]+ce[1]*ce[1]);F=tp(N,(d-Ae)/(Se-1)),W=tp(N,(p-Ae)/(Se+1))}else F=W=0}S>$r?W>$r?(I=Zb(Q,ne,j,z,p,W,b),M=Zb(V,K,H,U,p,W,b),s.moveTo(I.cx+I.x01,I.cy+I.y01),W<N?s.arc(I.cx,I.cy,W,Er(I.y01,I.x01),Er(M.y01,M.x01),!b):(s.arc(I.cx,I.cy,W,Er(I.y01,I.x01),Er(I.y11,I.x11),!b),s.arc(0,0,p,Er(I.cy+I.y11,I.cx+I.x11),Er(M.cy+M.y11,M.cx+M.x11),!b),s.arc(M.cx,M.cy,W,Er(M.y11,M.x11),Er(M.y01,M.x01),!b))):(s.moveTo(j,z),s.arc(0,0,p,x,_,!b)):s.moveTo(j,z),!(d>$r)||!($>$r)?s.lineTo(H,U):F>$r?(I=Zb(H,U,V,K,d,-F,b),M=Zb(j,z,Q,ne,d,-F,b),s.lineTo(I.cx+I.x01,I.cy+I.y01),F<N?s.arc(I.cx,I.cy,F,Er(I.y01,I.x01),Er(M.y01,M.x01),!b):(s.arc(I.cx,I.cy,F,Er(I.y01,I.x01),Er(I.y11,I.x11),!b),s.arc(0,0,d,Er(I.cy+I.y11,I.cx+I.x11),Er(M.cy+M.y11,M.cx+M.x11),b),s.arc(M.cx,M.cy,F,Er(M.y11,M.x11),Er(M.y01,M.x01),!b))):s.arc(0,0,d,E,A,b)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-qc/2;return[Iu(f)*c,$i(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Mt(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Mt(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Mt(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Mt(+c),l):o},l.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Mt(+c),l):a},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function sZ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uZ(e){this._context=e}uZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Gk(e){return new uZ(e)}function lZ(e){return e[0]}function cZ(e){return e[1]}function fZ(e,t){var n=Mt(!0),r=null,i=Gk,o=null,a=T3(s);e=typeof e=="function"?e:e===void 0?lZ:Mt(e),t=typeof t=="function"?t:t===void 0?cZ:Mt(t);function s(u){var l,c=(u=sZ(u)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(p)return o=null,p+""||null}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:Mt(+u),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:Mt(+u),s):t},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Mt(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}function dZ(e,t,n){var r=null,i=Mt(!0),o=null,a=Gk,s=null,u=T3(l);e=typeof e=="function"?e:e===void 0?lZ:Mt(+e),t=typeof t=="function"?t:Mt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?cZ:Mt(+n);function l(f){var d,p,g,y=(f=sZ(f)).length,v,b=!1,x,_=new Array(y),A=new Array(y);for(o==null&&(s=a(x=u())),d=0;d<=y;++d){if(!(d<y&&i(v=f[d],d,f))===b)if(b=!b)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=d-1;g>=p;--g)s.point(_[g],A[g]);s.lineEnd(),s.areaEnd()}b&&(_[d]=+e(v,d,f),A[d]=+t(v,d,f),s.point(r?+r(v,d,f):_[d],n?+n(v,d,f):A[d]))}if(x)return s=null,x+""||null}function c(){return fZ().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Mt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Mt(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Mt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}const m8e=en(3),hZ={draw(e,t){const n=en(t+tp(t/28,.75))*.59436,r=n/2,i=r*m8e;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Rp={draw(e,t){const n=en(t/qc);e.moveTo(n,0),e.arc(0,0,n,0,F2)}},pZ={draw(e,t){const n=en(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},gZ=en(1/3),y8e=gZ*2,mZ={draw(e,t){const n=en(t/y8e),r=n*gZ;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},yZ={draw(e,t){const n=en(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},vZ={draw(e,t){const n=en(t-tp(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},bZ={draw(e,t){const n=en(t),r=-n/2;e.rect(r,r,n,n)}},xZ={draw(e,t){const n=en(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},v8e=.8908130915292852,wZ=$i(qc/10)/$i(7*qc/10),b8e=$i(F2/10)*wZ,x8e=-Iu(F2/10)*wZ,_Z={draw(e,t){const n=en(t*v8e),r=b8e*n,i=x8e*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=F2*o/5,s=Iu(a),u=$i(a);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},Q9=en(3),AZ={draw(e,t){const n=-en(t/(Q9*3));e.moveTo(0,n*2),e.lineTo(-Q9*n,-n),e.lineTo(Q9*n,-n),e.closePath()}},w8e=en(3),SZ={draw(e,t){const n=en(t)*.6824,r=n/2,i=n*w8e/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},zo=-.5,Bo=en(3)/2,o$=1/en(12),_8e=(o$/2+1)*3,EZ={draw(e,t){const n=en(t/_8e),r=n/2,i=n*o$,o=r,a=n*o$+n,s=-o,u=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,u),e.lineTo(zo*r-Bo*i,Bo*r+zo*i),e.lineTo(zo*o-Bo*a,Bo*o+zo*a),e.lineTo(zo*s-Bo*u,Bo*s+zo*u),e.lineTo(zo*r+Bo*i,zo*i-Bo*r),e.lineTo(zo*o+Bo*a,zo*a-Bo*o),e.lineTo(zo*s+Bo*u,zo*u-Bo*s),e.closePath()}},$Z={draw(e,t){const n=en(t-tp(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},A8e=[Rp,pZ,mZ,bZ,_Z,AZ,EZ],S8e=[Rp,vZ,$Z,SZ,hZ,xZ,yZ];function E8e(e,t){let n=null,r=T3(i);e=typeof e=="function"?e:Mt(e||Rp),t=typeof t=="function"?t:Mt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Mt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Mt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Gc(){}function B_(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function M3(e){this._context=e}M3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $8e(e){return new M3(e)}function CZ(e){this._context=e}CZ.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C8e(e){return new CZ(e)}function kZ(e){this._context=e}kZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k8e(e){return new kZ(e)}function TZ(e,t){this._basis=new M3(e),this._beta=t}TZ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+u*o),this._beta*t[s]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const T8e=function e(t){function n(r){return t===1?new M3(r):new TZ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function j_(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Vk(e,t){this._context=e,this._k=(1-t)/6}Vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:j_(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:j_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M8e=function e(t){function n(r){return new Vk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Yk(e,t){this._context=e,this._k=(1-t)/6}Yk.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:j_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O8e=function e(t){function n(r){return new Yk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Xk(e,t){this._context=e,this._k=(1-t)/6}Xk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:j_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N8e=function e(t){function n(r){return new Xk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Jk(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>$r){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>$r){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function MZ(e,t){this._context=e,this._alpha=t}MZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Jk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R8e=function e(t){function n(r){return t?new MZ(r,t):new Vk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function OZ(e,t){this._context=e,this._alpha=t}OZ.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Jk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const F8e=function e(t){function n(r){return t?new OZ(r,t):new Yk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function NZ(e,t){this._context=e,this._alpha=t}NZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jk(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const D8e=function e(t){function n(r){return t?new NZ(r,t):new Xk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function RZ(e){this._context=e}RZ.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function P8e(e){return new RZ(e)}function oB(e){return e<0?-1:1}function aB(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(oB(o)+oB(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function sB(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Z9(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function U_(e){this._context=e}U_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Z9(this,this._t0,sB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Z9(this,sB(this,n=aB(this,e,t)),n);break;default:Z9(this,this._t0,n=aB(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function FZ(e){this._context=new DZ(e)}(FZ.prototype=Object.create(U_.prototype)).point=function(e,t){U_.prototype.point.call(this,t,e)};function DZ(e){this._context=e}DZ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function L8e(e){return new U_(e)}function I8e(e){return new FZ(e)}function PZ(e){this._context=e}PZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=uB(e),i=uB(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uB(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function z8e(e){return new PZ(e)}function O3(e,t){this._context=e,this._t=t}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function B8e(e){return new O3(e,.5)}function j8e(e){return new O3(e,0)}function U8e(e){return new O3(e,1)}const ex=e=>()=>e;function W8e(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ku(e,t,n){this.k=e,this.x=t,this.y=n}Ku.prototype={constructor:Ku,scale:function(e){return e===1?this:new Ku(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ku(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var LZ=new Ku(1,0,0);Ku.prototype;function e6(e){e.stopImmediatePropagation()}function C1(e){e.preventDefault(),e.stopImmediatePropagation()}function H8e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function q8e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lB(){return this.__zoom||LZ}function G8e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function V8e(){return navigator.maxTouchPoints||"ontouchstart"in this}function Y8e(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function X8e(){var e=H8e,t=q8e,n=Y8e,r=G8e,i=V8e,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=ZX,l=w2("start","zoom","end"),c,f,d,p=500,g=150,y=0,v=10;function b(M){M.property("__zoom",lB).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",N).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(M,D,L,j){var z=M.selection?M.selection():M;z.property("__zoom",lB),M!==z?E(M,D,L,j):z.interrupt().each(function(){$(this,arguments).event(j).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(M,D,L,j){b.scaleTo(M,function(){var z=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return z*H},L,j)},b.scaleTo=function(M,D,L,j){b.transform(M,function(){var z=t.apply(this,arguments),H=this.__zoom,U=L==null?A(z):typeof L=="function"?L.apply(this,arguments):L,V=H.invert(U),K=typeof D=="function"?D.apply(this,arguments):D;return n(_(x(H,K),U,V),z,a)},L,j)},b.translateBy=function(M,D,L,j){b.transform(M,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),a)},null,j)},b.translateTo=function(M,D,L,j,z){b.transform(M,function(){var H=t.apply(this,arguments),U=this.__zoom,V=j==null?A(H):typeof j=="function"?j.apply(this,arguments):j;return n(LZ.translate(V[0],V[1]).scale(U.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof L=="function"?-L.apply(this,arguments):-L),H,a)},j,z)};function x(M,D){return D=Math.max(o[0],Math.min(o[1],D)),D===M.k?M:new Ku(D,M.x,M.y)}function _(M,D,L){var j=D[0]-L[0]*M.k,z=D[1]-L[1]*M.k;return j===M.x&&z===M.y?M:new Ku(M.k,j,z)}function A(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function E(M,D,L,j){M.on("start.zoom",function(){$(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(j).end()}).tween("zoom",function(){var z=this,H=arguments,U=$(z,H).event(j),V=t.apply(z,H),K=L==null?A(V):typeof L=="function"?L.apply(z,H):L,Q=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),ne=z.__zoom,ce=typeof D=="function"?D.apply(z,H):D,ye=u(ne.invert(K).concat(Q/ne.k),ce.invert(K).concat(Q/ce.k));return function(fe){if(fe===1)fe=ce;else{var pe=ye(fe),te=Q/pe[2];fe=new Ku(te,K[0]-pe[0]*te,K[1]-pe[1]*te)}U.zoom(null,fe)}})}function $(M,D,L){return!L&&M.__zooming||new S(M,D)}function S(M,D){this.that=M,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,D),this.taps=0}S.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,D){return this.mouse&&M!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var D=It(this.that).datum();l.call(M,this.that,new W8e(M,{sourceEvent:this.sourceEvent,target:b,type:M,transform:this.that.__zoom,dispatch:l}),D)}};function k(M,...D){if(!e.apply(this,arguments))return;var L=$(this,D).event(M),j=this.__zoom,z=Math.max(o[0],Math.min(o[1],j.k*Math.pow(2,r.apply(this,arguments)))),H=Cs(M);if(L.wheel)(L.mouse[0][0]!==H[0]||L.mouse[0][1]!==H[1])&&(L.mouse[1]=j.invert(L.mouse[0]=H)),clearTimeout(L.wheel);else{if(j.k===z)return;L.mouse=[H,j.invert(H)],Kx(this),L.start()}C1(M),L.wheel=setTimeout(U,g),L.zoom("mouse",n(_(x(j,z),L.mouse[0],L.mouse[1]),L.extent,a));function U(){L.wheel=null,L.end()}}function O(M,...D){if(d||!e.apply(this,arguments))return;var L=M.currentTarget,j=$(this,D,!0).event(M),z=It(M.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",Q,!0),H=Cs(M,L),U=M.clientX,V=M.clientY;$X(M.view),e6(M),j.mouse=[H,this.__zoom.invert(H)],Kx(this),j.start();function K(ne){if(C1(ne),!j.moved){var ce=ne.clientX-U,ye=ne.clientY-V;j.moved=ce*ce+ye*ye>y}j.event(ne).zoom("mouse",n(_(j.that.__zoom,j.mouse[0]=Cs(ne,L),j.mouse[1]),j.extent,a))}function Q(ne){z.on("mousemove.zoom mouseup.zoom",null),CX(ne.view,j.moved),C1(ne),j.event(ne).end()}}function N(M,...D){if(e.apply(this,arguments)){var L=this.__zoom,j=Cs(M.changedTouches?M.changedTouches[0]:M,this),z=L.invert(j),H=L.k*(M.shiftKey?.5:2),U=n(_(x(L,H),j,z),t.apply(this,D),a);C1(M),s>0?It(this).transition().duration(s).call(E,U,j,M):It(this).call(b.transform,U,j,M)}}function F(M,...D){if(e.apply(this,arguments)){var L=M.touches,j=L.length,z=$(this,D,M.changedTouches.length===j).event(M),H,U,V,K;for(e6(M),U=0;U<j;++U)V=L[U],K=Cs(V,this),K=[K,this.__zoom.invert(K),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==K[2]&&(z.touch1=K,z.taps=0):(z.touch0=K,H=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),H&&(z.taps<2&&(f=K[0],c=setTimeout(function(){c=null},p)),Kx(this),z.start())}}function W(M,...D){if(this.__zooming){var L=$(this,D).event(M),j=M.changedTouches,z=j.length,H,U,V,K;for(C1(M),H=0;H<z;++H)U=j[H],V=Cs(U,this),L.touch0&&L.touch0[2]===U.identifier?L.touch0[0]=V:L.touch1&&L.touch1[2]===U.identifier&&(L.touch1[0]=V);if(U=L.that.__zoom,L.touch1){var Q=L.touch0[0],ne=L.touch0[1],ce=L.touch1[0],ye=L.touch1[1],fe=(fe=ce[0]-Q[0])*fe+(fe=ce[1]-Q[1])*fe,pe=(pe=ye[0]-ne[0])*pe+(pe=ye[1]-ne[1])*pe;U=x(U,Math.sqrt(fe/pe)),V=[(Q[0]+ce[0])/2,(Q[1]+ce[1])/2],K=[(ne[0]+ye[0])/2,(ne[1]+ye[1])/2]}else if(L.touch0)V=L.touch0[0],K=L.touch0[1];else return;L.zoom("touch",n(_(U,V,K),L.extent,a))}}function I(M,...D){if(this.__zooming){var L=$(this,D).event(M),j=M.changedTouches,z=j.length,H,U;for(e6(M),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),H=0;H<z;++H)U=j[H],L.touch0&&L.touch0[2]===U.identifier?delete L.touch0:L.touch1&&L.touch1[2]===U.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(U=Cs(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var V=It(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return b.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:ex(+M),b):r},b.filter=function(M){return arguments.length?(e=typeof M=="function"?M:ex(!!M),b):e},b.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:ex(!!M),b):i},b.extent=function(M){return arguments.length?(t=typeof M=="function"?M:ex([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),b):t},b.scaleExtent=function(M){return arguments.length?(o[0]=+M[0],o[1]=+M[1],b):[o[0],o[1]]},b.translateExtent=function(M){return arguments.length?(a[0][0]=+M[0][0],a[1][0]=+M[1][0],a[0][1]=+M[0][1],a[1][1]=+M[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(M){return arguments.length?(n=M,b):n},b.duration=function(M){return arguments.length?(s=+M,b):s},b.interpolate=function(M){return arguments.length?(u=M,b):u},b.on=function(){var M=l.on.apply(l,arguments);return M===l?b:M},b.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,b):Math.sqrt(y)},b.tapDistance=function(M){return arguments.length?(v=+M,b):v},b}const tx=[{id:"MVf7Lq0AAAAJ",label:"Albert Chi Shing CHUNG",group:"Professor"},{id:"SLgWQLEAAAAJ",label:"Bo LI",group:"Chair Professor"},{id:"EWfpM74AAAAJ",label:"Chi Keung TANG",group:"Professor"},{id:"DORzgBQAAAAJ",label:"Chiew Lan TAI",group:"Professor"},{id:"H9zO5eYAAAAJ",label:"Cunsheng DING",group:"Professor"},{id:"nEsOOx8AAAAJ",label:"Dit Yan YEUNG",group:"Chair Professor"},{id:"uiCSOycAAAAJ",label:"Gary Shueng Han CHAN",group:"Professor"},{id:"Z_t5DjwAAAAJ",label:"Hao CHEN",group:"Assistant Professor"},{id:"J7a5zGEAAAAJ",label:"Huamin QU",group:"Chair Professor"},{id:"-oTraZ4AAAAJ",label:"James Tin Yau KWOK",group:"Professor"},{id:"dWcZPFEAAAAJ",label:"Ke YI",group:"Professor"},{id:"gtglwgYAAAAJ",label:"Lei CHEN",group:"Chair Professor"},{id:"kjiwE6IAAAAJ",label:"Mo LI",group:"Professor"},{id:"YooPxQwAAAAJ",label:"Mordecai Jay GOLIN",group:"Professor"},{id:"GIToYFwAAAAJ",label:"Pedro SANDER",group:"Professor"},{id:"XTlaQMkAAAAJ",label:"Qian ZHANG",group:"Chair Professor"},{id:"SqAsppUAAAAJ",label:"Qiong LUO",group:"Professor"},{id:"5RIgb3wAAAAJ",label:"Shing Chi CHEUNG",group:"Chair Professor"},{id:"0nquEkQAAAAJ",label:"Siu Wing CHENG",group:"Professor"},{id:"NJ6YPT4AAAAJ",label:"Wilfred Siu Hung NG",group:"Associate Professor"},{id:"y6m820wAAAAJ",label:"Xiaofang ZHOU",group:"Head and Chair Professor"},{id:"FeJrzPMAAAAJ",label:"Wei WANG",group:"Associate Professor"},{id:"lLMX9hcAAAAJ",label:"Qifeng CHEN",group:"Assistant Professor"},{id:"ZMLhZJ8AAAAJ",label:"Long QUAN",group:"Professor"},{id:"18_xlPUAAAAJ",label:"Nevin Lianwen ZHANG",group:"Professor"},{id:"MdQZ-q8AAAAJ",label:"Yangqiu SONG",group:"Associate Professor"},{id:"TN0zm80AAAAJ",label:"Xiaojuan MA",group:"Associate Head and Associate Professor"},{id:"IKgiD0AAAAAJ",label:"Raymond Chi Wing WONG",group:"Professor and Associate Head"},{id:"Azu2w_MAAAAJ",label:"Sunil ARYA",group:"Associate Professor"},{id:"JE_m2UgAAAAJ",label:"Sung Hun KIM",group:"Associate Professor"}],t6=[{source:"MVf7Lq0AAAAJ",target:"nEsOOx8AAAAJ"},{source:"SLgWQLEAAAAJ",target:"YooPxQwAAAAJ"},{source:"SLgWQLEAAAAJ",target:"XTlaQMkAAAAJ"},{source:"SLgWQLEAAAAJ",target:"FeJrzPMAAAAJ"},{source:"EWfpM74AAAAJ",target:"lLMX9hcAAAAJ"},{source:"EWfpM74AAAAJ",target:"0nquEkQAAAAJ"},{source:"DORzgBQAAAAJ",target:"ZMLhZJ8AAAAJ"},{source:"H9zO5eYAAAAJ",target:"YooPxQwAAAAJ"},{source:"nEsOOx8AAAAJ",target:"-oTraZ4AAAAJ"},{source:"nEsOOx8AAAAJ",target:"18_xlPUAAAAJ"},{source:"nEsOOx8AAAAJ",target:"lLMX9hcAAAAJ"},{source:"nEsOOx8AAAAJ",target:"MdQZ-q8AAAAJ"},{source:"uiCSOycAAAAJ",target:"-oTraZ4AAAAJ"},{source:"uiCSOycAAAAJ",target:"XTlaQMkAAAAJ"},{source:"Z_t5DjwAAAAJ",target:"lLMX9hcAAAAJ"},{source:"J7a5zGEAAAAJ",target:"SqAsppUAAAAJ"},{source:"J7a5zGEAAAAJ",target:"5RIgb3wAAAAJ"},{source:"J7a5zGEAAAAJ",target:"TN0zm80AAAAJ"},{source:"J7a5zGEAAAAJ",target:"MdQZ-q8AAAAJ"},{source:"-oTraZ4AAAAJ",target:"MdQZ-q8AAAAJ"},{source:"dWcZPFEAAAAJ",target:"gtglwgYAAAAJ"},{source:"dWcZPFEAAAAJ",target:"SqAsppUAAAAJ"},{source:"dWcZPFEAAAAJ",target:"0nquEkQAAAAJ"},{source:"gtglwgYAAAAJ",target:"kjiwE6IAAAAJ"},{source:"gtglwgYAAAAJ",target:"XTlaQMkAAAAJ"},{source:"gtglwgYAAAAJ",target:"SqAsppUAAAAJ"},{source:"gtglwgYAAAAJ",target:"IKgiD0AAAAAJ"},{source:"gtglwgYAAAAJ",target:"y6m820wAAAAJ"},{source:"gtglwgYAAAAJ",target:"MdQZ-q8AAAAJ"},{source:"kjiwE6IAAAAJ",target:"XTlaQMkAAAAJ"},{source:"YooPxQwAAAAJ",target:"0nquEkQAAAAJ"},{source:"YooPxQwAAAAJ",target:"Azu2w_MAAAAJ"},{source:"GIToYFwAAAAJ",target:"SqAsppUAAAAJ"},{source:"XTlaQMkAAAAJ",target:"FeJrzPMAAAAJ"},{source:"SqAsppUAAAAJ",target:"5RIgb3wAAAAJ"},{source:"SqAsppUAAAAJ",target:"TN0zm80AAAAJ"},{source:"5RIgb3wAAAAJ",target:"JE_m2UgAAAAJ"},{source:"0nquEkQAAAAJ",target:"Azu2w_MAAAAJ"},{source:"NJ6YPT4AAAAJ",target:"MdQZ-q8AAAAJ"},{source:"y6m820wAAAAJ",target:"MdQZ-q8AAAAJ"}];function J8e({selectedProfId:e,setSelectedProfId:t}){const n=Y.useRef(null),[r,i]=Y.useState(!0);return Y.useEffect(()=>{const o=It(n.current),a=800,s=600,u=8;o.selectAll("*").remove();const l=o.append("svg").attr("width",a).attr("height",s),c=vJ().force("link",yJ().id(S=>S.id)).force("charge",bJ().strength(-200)).force("center",gJ(a/2,s/2));var f=TAe().on("start",(S,k)=>{c.alphaTarget(.7).restart(),k.fx=k.x,k.fy=k.y}).on("drag",(S,k)=>{k.fx=S.x,k.fy=S.y}).on("end",(S,k)=>{S.active||c.alphaTarget(0),k.fx=null,k.fy=null});function d(S){return t6.reduce((k,O)=>(O.target.id===S.id?k.push(O.source.id):O.source.id===S.id&&k.push(O.target.id),k),[S.id])}function p(S,k){return k.target.id===S.id||k.source.id===S.id}function g(S,k){if(e!=""){var O=x(e);if(O==null)return i(!1),"gray";i(!0),k=d(O)}return Array.isArray(k)&&k.indexOf(S.id)>-1||!Array.isArray(k)?Jw(S.group):"gray"}function y(S){if(e!="")var k=x(e);return k==null?"#E5E5E5":p(k,S)?"black":"#E5E5E5"}function v(S){if(e!="")var k=x(e);return k==null?1:p(k,S)?2:1}function b(S,k){if(e!=""){var O=x(e);if(O==null)return 10;k=d(O)}return Array.isArray(k)&&k.indexOf(S.id)>-1?15:10}function x(S){return S==""?null:tx.find(k=>k.id==S)}function _(S,k){t(k.id)}var A=l.append("g").attr("class","links").selectAll("line").data(t6).enter().append("line"),E=l.append("g").attr("class","nodes").selectAll("circle").data(tx).enter().append("circle").attr("r",u).call(f).on("click",_),$=l.append("g").attr("class","texts").selectAll("text").data(tx).enter().append("text").text(S=>S.label).attr("dx",15).attr("dy",4);c.nodes(tx).on("tick",()=>{E.attr("cx",S=>S.x=Math.max(u,Math.min(a-u-100,S.x))).attr("cy",S=>S.y=Math.max(u,Math.min(s-u,S.y))),$.attr("x",S=>S.x).attr("y",S=>S.y),A.attr("x1",S=>S.source.x).attr("y1",S=>S.source.y).attr("x2",S=>S.target.x).attr("y2",S=>S.target.y)}),c.force("link").links(t6),E.attr("fill",g),A.attr("stroke",S=>y(S)),A.attr("stroke-width",S=>v(S)),$.attr("font-size",S=>b(S))},[e]),J.jsx("div",{children:J.jsxs(Jh,{children:[J.jsxs(qo,{children:[J.jsx("p",{style:{textAlign:"justify"},children:"In the academia, it is often that researchers collaborate with one another in publishing a research paper. The force-directed network graph here shows the coauthorship between HKUST CSE Department's regular faculty members. Feel free to click on the node to select the member, or drag the nodes to move the nodes."}),J.jsx("div",{className:"mt-3",style:{color:"red"},children:!r&&J.jsx("p",{children:"This faculty member has no co-author stated in Google Scholar."})})]}),J.jsx(qo,{children:J.jsx("div",{className:"intra-dept-network-graph",ref:n})})]})})}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var K8e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q8e=Object.prototype.hasOwnProperty;function a$(e,t){return Q8e.call(e,t)}function s$(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)a$(e,i)&&r.push(i);return r}function ho(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function u$(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function rd(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function IZ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l$(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(l$(e[t]))return!0}else if(typeof e=="object"){for(var r=s$(e),i=r.length,o=0;o<i;o++)if(l$(e[r[o]]))return!0}}return!1}function cB(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var zZ=function(e){K8e(t,e);function t(n,r,i,o,a){var s=this.constructor,u=e.call(this,cB(n,{name:r,index:i,operation:o,tree:a}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=a,Object.setPrototypeOf(u,s.prototype),u.message=cB(n,{name:r,index:i,operation:o,tree:a}),u}return t}(Error),mn=zZ,Z8e=ho,Ih={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=W_(n,this.path);r&&(r=ho(r));var i=$d(n,{op:"remove",path:this.from}).removed;return $d(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=W_(n,this.from);return $d(n,{op:"add",path:this.path,value:ho(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Ny(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},e4e={add:function(e,t,n){return u$(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ih.move,copy:Ih.copy,test:Ih.test,_get:Ih._get};function W_(e,t){if(t=="")return e;var n={op:"_get",path:t};return $d(e,n),n.value}function $d(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):H_(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=W_(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=Ny(e,t.value),a.test===!1)throw new mn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=ho(e));var s=t.path||"",u=s.split("/"),l=e,c=1,f=u.length,d=void 0,p=void 0,g=void 0;for(typeof n=="function"?g=n:g=H_;;){if(p=u[c],p&&p.indexOf("~")!=-1&&(p=IZ(p)),i&&(p=="__proto__"||p=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&g(t,0,e,d)),c++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!u$(p))throw new mn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);u$(p)&&(p=~~p)}if(c>=f){if(n&&t.op==="add"&&p>l.length)throw new mn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=e4e[t.op].call(t,l,p,e);if(a.test===!1)throw new mn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=f){var a=Ih[t.op].call(t,l,p,e);if(a.test===!1)throw new mn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&c<f&&(!l||typeof l!="object"))throw new mn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function N3(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ho(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=$d(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function t4e(e,t,n){var r=$d(e,t);if(r.test===!1)throw new mn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function H_(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new mn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ih[e.op]){if(typeof e.path!="string")throw new mn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new mn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new mn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&l$(e.value))throw new mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new mn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new mn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=BZ([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new mn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function BZ(e,t,n){try{if(!Array.isArray(e))throw new mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)N3(ho(t),ho(e),n||!0);else{n=n||H_;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof mn)return i;throw i}}function Ny(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Ny(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!Ny(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const n4e=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:mn,_areEquals:Ny,applyOperation:$d,applyPatch:N3,applyReducer:t4e,deepClone:Z8e,getValueByPointer:W_,validate:BZ,validator:H_},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Kk=new WeakMap,r4e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),i4e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function o4e(e){return Kk.get(e)}function a4e(e,t){return e.observers.get(t)}function s4e(e,t){e.observers.delete(t.callback)}function u4e(e,t){t.unobserve()}function l4e(e,t){var n=[],r,i=o4e(e);if(!i)i=new r4e(e),Kk.set(e,i);else{var o=a4e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=ho(e),t){r.callback=t,r.next=null;var a=function(){c$(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){c$(r),clearTimeout(r.next),s4e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new i4e(t,r)),r}function c$(e,t){t===void 0&&(t=!1);var n=Kk.get(e.object);Qk(n.value,e.object,e.patches,"",t),e.patches.length&&N3(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Qk(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=s$(t),a=s$(e),s=!1,u=a.length-1;u>=0;u--){var l=a[u],c=e[l];if(a$(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Qk(c,f,n,r+"/"+rd(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+rd(l),value:ho(c)}),n.push({op:"replace",path:r+"/"+rd(l),value:ho(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+rd(l),value:ho(c)}),n.push({op:"remove",path:r+"/"+rd(l)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!s&&o.length==a.length))for(var u=0;u<o.length;u++){var l=o[u];!a$(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+rd(l),value:ho(t[l])})}}}function c4e(e,t,n){n===void 0&&(n=!1);var r=[];return Qk(e,t,r,"",n),r}const f4e=Object.freeze(Object.defineProperty({__proto__:null,compare:c4e,generate:c$,observe:l4e,unobserve:u4e},Symbol.toStringTag,{value:"Module"}));Object.assign({},n4e,f4e,{JsonPatchError:zZ,deepClone:ho,escapePathComponent:rd,unescapePathComponent:IZ});var d4e=/("(?:[^\\"]|\\.)*")|[:,]/g,h4e=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,u,l){var c,f,d,p,g,y,v,b,x,_,A,E;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),A=JSON.stringify(s,o),A===void 0)return A;if(v=i-u.length-l,A.length<=v&&(x=A.replace(d4e,function($,S){return S||$+" "}),x.length<=v))return x;if(o!=null&&(s=JSON.parse(A),o=void 0),typeof s=="object"&&s!==null){if(b=u+r,d=[],f=0,Array.isArray(s))for(_="[",c="]",v=s.length;f<v;f++)d.push(a(s[f],b,f===v-1?0:1)||"null");else for(_="{",c="}",y=Object.keys(s),v=y.length;f<v;f++)p=y[f],g=JSON.stringify(p)+": ",E=a(s[p],b,g.length+(f===v-1?0:1)),E!==void 0&&d.push(g+E);if(d.length>0)return[_,r+d.join(`,
`+b),c].join(`
`+u)}return A}(t,"",0)};const n6=cg(h4e);function Xi(e,t,n){return e.fields=t||[],e.fname=n,e}function wn(e){return e==null?null:e.fname}function Fr(e){return e==null?null:e.fields}function jZ(e){return e.length===1?p4e(e[0]):g4e(e)}const p4e=e=>function(t){return t[e]},g4e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ae(e){throw Error(e)}function au(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,u;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(u=e[s],u==="\\")o+=e.substring(a,s++),a=s;else if(u===r)l(),r=null,i=-1;else{if(r)continue;a===i&&u==='"'||a===i&&u==="'"?(a=s+1,r=u):u==="."&&!i?s>a?l():a=s+1:u==="["?(s>a&&l(),i=a=s+1):u==="]"&&(i||ae("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&ae("Access path missing closing bracket: "+e),r&&ae("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function da(e,t,n){const r=au(e);return e=r.length===1?r[0]:e,Xi((n&&n.get||jZ)(r),[e],t||e)}const D2=da("id"),zr=Xi(e=>e,[],"identity"),sc=Xi(()=>0,[],"zero"),Ag=Xi(()=>1,[],"one"),ha=Xi(()=>!0,[],"true"),Gl=Xi(()=>!1,[],"false");function m4e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const UZ=0,Zk=1,eT=2,WZ=3,HZ=4;function tT(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m4e,r=e||UZ;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Zk&&n(t||"error","ERROR",arguments),this},warn(){return r>=eT&&n(t||"warn","WARN",arguments),this},info(){return r>=WZ&&n(t||"log","INFO",arguments),this},debug(){return r>=HZ&&n(t||"log","DEBUG",arguments),this}}}var se=Array.isArray;function ke(e){return e===Object(e)}const fB=e=>e!=="__proto__";function Sg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=y4e(r.signals,i.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;Eg(r,o,i[o],a)}return r},{})}function Eg(e,t,n,r){if(!fB(t))return;let i,o;if(ke(n)&&!se(n)){o=ke(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Eg(o,i,n[i]):fB(i)&&(o[i]=n[i])}else e[t]=n}function y4e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function mt(e){return e[e.length-1]}function Or(e){return e==null||e===""?null:+e}const qZ=e=>t=>e*Math.exp(t),GZ=e=>t=>Math.log(e*t),VZ=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),YZ=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,q_=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function R3(e,t,n,r){const i=n(e[0]),o=n(mt(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function XZ(e,t){return R3(e,t,Or,zr)}function JZ(e,t){var n=Math.sign(e[0]);return R3(e,t,GZ(n),qZ(n))}function KZ(e,t,n){return R3(e,t,q_(n),q_(1/n))}function QZ(e,t,n){return R3(e,t,VZ(n),YZ(n))}function F3(e,t,n,r,i){const o=r(e[0]),a=r(mt(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function nT(e,t,n){return F3(e,t,n,Or,zr)}function rT(e,t,n){const r=Math.sign(e[0]);return F3(e,t,n,GZ(r),qZ(r))}function G_(e,t,n,r){return F3(e,t,n,q_(r),q_(1/r))}function iT(e,t,n,r){return F3(e,t,n,VZ(r),YZ(r))}function ZZ(e){return 1+~~(new Date(e).getMonth()/3)}function eee(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ee(e){return e!=null?se(e)?e:[e]:[]}function tee(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Qe(e){return typeof e=="function"}const v4e="descending";function oT(e,t,n){n=n||{},t=Ee(t)||[];const r=[],i=[],o={},a=n.comparator||b4e;return Ee(e).forEach((s,u)=>{s!=null&&(r.push(t[u]===v4e?-1:1),i.push(s=Qe(s)?s:da(s,null,n)),(Fr(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Xi(a(i,r),Object.keys(o))}const D3=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),b4e=(e,t)=>e.length===1?x4e(e[0],t[0]):w4e(e,t,e.length),x4e=(e,t)=>function(n,r){return D3(e(n),e(r))*t},w4e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=D3(o(r),o(i));return a*t[s]});function Br(e){return Qe(e)?e:()=>e}function aT(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ke(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ks(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function nee(e,t){const n=e.length;let r=-1,i,o,a,s,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,u=r))}return[s,u]}const _4e=Object.prototype.hasOwnProperty;function ze(e,t){return _4e.call(e,t)}const nx={};function $g(e){let t={},n;function r(o){return ze(t,o)&&t[o]!==nx}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===nx&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=nx),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let a=0;for(const s in t){const u=t[s];u!==nx&&(!n||!n(u))&&(o[s]=u,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function ree(e,t,n,r,i,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],u=mt(e),l;u<s&&(l=s,s=u,u=l),l=Math.abs(t-s);const c=Math.abs(u-t);return l<c&&l<=a?r:c<=a?i:o}function be(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ke(r,n)}function zh(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function bf(e){return typeof e=="boolean"}function Tc(e){return Object.prototype.toString.call(e)==="[object Date]"}function iee(e){return e&&Qe(e[Symbol.iterator])}function xt(e){return typeof e=="number"}function oee(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function $e(e){return typeof e=="string"}function sT(e,t,n){e&&(e=t?Ee(e).map(s=>s.replace(/\\(.)/g,"$1")):Ee(e));const r=e&&e.length,i=n&&n.get||jZ,o=s=>i(t?[s]:au(s));let a;if(!r)a=function(){return""};else if(r===1){const s=o(e[0]);a=function(u){return""+s(u)}}else{const s=e.map(o);a=function(u){let l=""+s[0](u),c=0;for(;++c<r;)l+="|"+s[c](u);return l}}return Xi(a,e,"key")}function aee(e,t){const n=e[0],r=mt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const A4e=1e4;function see(e){e=+e||A4e;let t,n,r;const i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>ze(t,a)||ze(n,a),get:a=>ze(t,a)?t[a]:ze(n,a)?o(a,n[a]):void 0,set:(a,s)=>ze(t,a)?t[a]=s:o(a,s)}}function uee(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function fm(e,t){let n="";for(;--t>=0;)n+=e;return n}function lee(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?fm(i,a)+o:r==="center"?fm(i,~~(a/2))+o+fm(i,Math.ceil(a/2)):o+fm(i,a)}function P2(e){return e&&mt(e)-e[0]||0}function xe(e){return se(e)?"["+e.map(xe)+"]":ke(e)||$e(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function uT(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const S4e=e=>xt(e)||Tc(e)?e:Date.parse(e);function lT(e,t){return t=t||S4e,e==null||e===""?null:t(e)}function cT(e){return e==null||e===""?null:e+""}function es(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function cee(e,t,n,r){const i=r??"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function ec(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function E4e(e){return e}function $4e(e){if(e==null)return E4e;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,u){u||(t=n=0);var l=2,c=s.length,f=new Array(c);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<c;)f[l]=s[l],++l;return f}}function C4e(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function f$(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return dB(e,n)})}:dB(e,t)}function dB(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=fee(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function fee(e,t){var n=$4e(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],p=0,g=d.length;p<g;++p)f.push(n(d[p],p));c<0&&C4e(f,g)}function o(c){return n(c)}function a(c){for(var f=[],d=0,p=c.length;d<p;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function s(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(s)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function k4e(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[c]=d)}),t.forEach(function(l){var c=s(l),f=c[0],d=c[1],p,g;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,g=r[d]){delete r[g.start];var y=g===p?p:p.concat(g);r[y.start=p.start]=i[y.end=g.end]=y}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,g=i[f]){delete i[g.end];var v=g===p?p:g.concat(p);r[v.start=g.start]=i[v.end=p.end]=v}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function T4e(e){return fee(e,M4e.apply(this,arguments))}function M4e(e,t,n){var r,i,o;if(arguments.length>1)r=O4e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:k4e(e,r)}}function O4e(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function u(f){f.forEach(s)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const gr="year",Hi="quarter",Dr="month",zn="week",qi="date",Mr="day",Qs="dayofyear",wo="hours",_o="minutes",pa="seconds",ts="milliseconds",fT=[gr,Hi,Dr,zn,qi,Mr,Qs,wo,_o,pa,ts],r6=fT.reduce((e,t,n)=>(e[t]=1+n,e),{});function dT(e){const t=Ee(e).slice(),n={};return t.length||ae("Missing time unit."),t.forEach(i=>{ze(r6,i)?n[i]=1:ae(`Invalid time unit: ${i}.`)}),(n[zn]||n[Mr]?1:0)+(n[Hi]||n[Dr]||n[qi]?1:0)+(n[Qs]?1:0)>1&&ae(`Incompatible time units: ${e}`),t.sort((i,o)=>r6[i]-r6[o]),t}const N4e={[gr]:"%Y ",[Hi]:"Q%q ",[Dr]:"%b ",[qi]:"%d ",[zn]:"W%U ",[Mr]:"%a ",[Qs]:"%j ",[wo]:"%H:00",[_o]:"00:%M",[pa]:":%S",[ts]:".%L",[`${gr}-${Dr}`]:"%Y-%m ",[`${gr}-${Dr}-${qi}`]:"%Y-%m-%d ",[`${wo}-${_o}`]:"%H:%M"};function dee(e,t){const n=Ke({},N4e,t),r=dT(e),i=r.length;let o="",a=0,s,u;for(a=0;a<i;)for(s=r.length;s>a;--s)if(u=r.slice(a,s).join("-"),n[u]!=null){o+=n[u],a=s;break}return o.trim()}const ad=new Date;function hT(e){return ad.setFullYear(e),ad.setMonth(0),ad.setDate(1),ad.setHours(0,0,0,0),ad}function hee(e){return gee(new Date(e))}function pee(e){return d$(new Date(e))}function gee(e){return Xa.count(hT(e.getFullYear())-1,e)}function d$(e){return Wc.count(hT(e.getFullYear())-1,e)}function h$(e){return hT(e).getDay()}function R4e(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function mee(e){return vee(new Date(e))}function yee(e){return p$(new Date(e))}function vee(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return kc.count(t-1,e)}function p$(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Hc.count(t-1,e)}function g$(e){return ad.setTime(Date.UTC(e,0,1)),ad.getUTCDay()}function F4e(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function bee(e,t,n,r,i){const o=t||1,a=mt(e),s=(b,x,_)=>(_=_||b,D4e(n[_],r[_],b===a&&o,x)),u=new Date,l=es(e),c=l[gr]?s(gr):Br(2012),f=l[Dr]?s(Dr):l[Hi]?s(Hi):sc,d=l[zn]&&l[Mr]?s(Mr,1,zn+Mr):l[zn]?s(zn,1):l[Mr]?s(Mr,1):l[qi]?s(qi,1):l[Qs]?s(Qs,1):Ag,p=l[wo]?s(wo):sc,g=l[_o]?s(_o):sc,y=l[pa]?s(pa):sc,v=l[ts]?s(ts):sc;return function(b){u.setTime(+b);const x=c(u);return i(x,f(u),d(u,x),p(u),g(u),y(u),v(u))}}function D4e(e,t,n,r){const i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function Fp(e,t,n){return t+e*7-(n+6)%7}const P4e={[gr]:e=>e.getFullYear(),[Hi]:e=>Math.floor(e.getMonth()/3),[Dr]:e=>e.getMonth(),[qi]:e=>e.getDate(),[wo]:e=>e.getHours(),[_o]:e=>e.getMinutes(),[pa]:e=>e.getSeconds(),[ts]:e=>e.getMilliseconds(),[Qs]:e=>gee(e),[zn]:e=>d$(e),[zn+Mr]:(e,t)=>Fp(d$(e),e.getDay(),h$(t)),[Mr]:(e,t)=>Fp(1,e.getDay(),h$(t))},L4e={[Hi]:e=>3*e,[zn]:(e,t)=>Fp(e,0,h$(t))};function xee(e,t){return bee(e,t||1,P4e,L4e,R4e)}const I4e={[gr]:e=>e.getUTCFullYear(),[Hi]:e=>Math.floor(e.getUTCMonth()/3),[Dr]:e=>e.getUTCMonth(),[qi]:e=>e.getUTCDate(),[wo]:e=>e.getUTCHours(),[_o]:e=>e.getUTCMinutes(),[pa]:e=>e.getUTCSeconds(),[ts]:e=>e.getUTCMilliseconds(),[Qs]:e=>vee(e),[zn]:e=>p$(e),[Mr]:(e,t)=>Fp(1,e.getUTCDay(),g$(t)),[zn+Mr]:(e,t)=>Fp(p$(e),e.getUTCDay(),g$(t))},z4e={[Hi]:e=>3*e,[zn]:(e,t)=>Fp(e,0,g$(t))};function wee(e,t){return bee(e,t||1,I4e,z4e,F4e)}const B4e={[gr]:ca,[Hi]:Xd.every(3),[Dr]:Xd,[zn]:Wc,[qi]:Xa,[Mr]:Xa,[Qs]:Xa,[wo]:R2,[_o]:N2,[pa]:Jo,[ts]:Np},j4e={[gr]:fa,[Hi]:Jd.every(3),[Dr]:Jd,[zn]:Hc,[qi]:kc,[Mr]:kc,[Qs]:kc,[wo]:wg,[_o]:xg,[pa]:Jo,[ts]:Np};function Cg(e){return B4e[e]}function kg(e){return j4e[e]}function _ee(e,t,n){return e?e.offset(t,n):void 0}function Aee(e,t,n){return _ee(Cg(e),t,n)}function See(e,t,n){return _ee(kg(e),t,n)}function Eee(e,t,n,r){return e?e.range(t,n,r):void 0}function $ee(e,t,n,r){return Eee(Cg(e),t,n,r)}function Cee(e,t,n,r){return Eee(kg(e),t,n,r)}const dm=1e3,hm=dm*60,pm=hm*60,P3=pm*24,U4e=P3*7,hB=P3*30,m$=P3*365,kee=[gr,Dr,qi,wo,_o,pa,ts],gm=kee.slice(0,-1),mm=gm.slice(0,-1),ym=mm.slice(0,-1),W4e=ym.slice(0,-1),H4e=[gr,zn],pB=[gr,Dr],Tee=[gr],k1=[[gm,1,dm],[gm,5,5*dm],[gm,15,15*dm],[gm,30,30*dm],[mm,1,hm],[mm,5,5*hm],[mm,15,15*hm],[mm,30,30*hm],[ym,1,pm],[ym,3,3*pm],[ym,6,6*pm],[ym,12,12*pm],[W4e,1,P3],[H4e,1,U4e],[pB,1,hB],[pB,3,3*hB],[Tee,1,m$]];function Mee(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(P2(t))/n;let i=v0(s=>s[2]).right(k1,r),o,a;return i===k1.length?(o=Tee,a=Bc(t[0]/m$,t[1]/m$,n)):i?(i=k1[r/k1[i-1][2]<k1[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=kee,a=Math.max(Bc(t[0],t[1],n),1)),{units:o,step:a}}function vm(e){const t={};return n=>t[n]||(t[n]=e(n))}function q4e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=G4e(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function G4e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Oee(e){const t=vm(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Hd(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return q4e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=Hd(a??",f");const s=Bc(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=AJ(s,u))||(a.precision=l),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=SJ(s,u))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=_J(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}let y$;Nee();function Nee(){return y$=Oee({format:mf,formatPrefix:xk})}function Ree(e){return Oee(wJ(e))}function V_(e){return arguments.length?y$=Ree(e):y$}function gB(e,t,n){n=n||{},ke(n)||ae(`Invalid time multi-format specifier: ${n}`);const r=t(pa),i=t(_o),o=t(wo),a=t(qi),s=t(zn),u=t(Dr),l=t(Hi),c=t(gr),f=e(n[ts]||".%L"),d=e(n[pa]||":%S"),p=e(n[_o]||"%I:%M"),g=e(n[wo]||"%I %p"),y=e(n[qi]||n[Mr]||"%a %d"),v=e(n[zn]||"%b %d"),b=e(n[Dr]||"%B"),x=e(n[Hi]||"%B"),_=e(n[gr]||"%Y");return A=>(r(A)<A?f:i(A)<A?d:o(A)<A?p:a(A)<A?g:u(A)<A?s(A)<A?y:v:c(A)<A?l(A)<A?b:x:_)(A)}function Fee(e){const t=vm(e.format),n=vm(e.utcFormat);return{timeFormat:r=>$e(r)?t(r):gB(t,Cg,r),utcFormat:r=>$e(r)?n(r):gB(n,kg,r),timeParse:vm(e.parse),utcParse:vm(e.utcParse)}}let v$;Dee();function Dee(){return v$=Fee({format:S3,parse:VK,utcFormat:_g,utcParse:YK})}function Pee(e){return Fee(UK(e))}function Ry(e){return arguments.length?v$=Pee(e):v$}const b$=(e,t)=>Ke({},e,t);function Lee(e,t){const n=e?Ree(e):V_(),r=t?Pee(t):Ry();return b$(n,r)}function pT(e,t){const n=arguments.length;return n&&n!==2&&ae("defaultLocale expects either zero or two arguments."),n?b$(V_(e),Ry(t)):b$(V_(),Ry())}function V4e(){return Nee(),Dee(),pT()}const Y4e=/^(data:|([A-Za-z]+:)?\/\/)/,X4e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,J4e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mB="file://";function K4e(e,t){return n=>({options:n||{},sanitize:Z4e,load:Q4e,fileAccess:!!t,file:e$e(t),http:n$e(e)})}async function Q4e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Z4e(e,t){t=Ke({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=X4e.test(e.replace(J4e,""));(e==null||typeof e!="string"||!s)&&ae("Sanitize failure, invalid URI: "+xe(e));const u=Y4e.test(e);return(a=t.baseURL)&&!u&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(mB))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(mB.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function e$e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):t$e}async function t$e(){ae("No file system access.")}function n$e(e){return e?async function(t,n){const r=Ke({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Qe(o[i])?o[i]():o.text():ae(o.status+""+o.statusText)}:r$e}async function r$e(){ae("No HTTP fetch method available.")}const i$e=e=>e!=null&&e===e,o$e=e=>e==="true"||e==="false"||e===!0||e===!1,a$e=e=>!Number.isNaN(Date.parse(e)),Iee=e=>!Number.isNaN(+e)&&!(e instanceof Date),s$e=e=>Iee(e)&&Number.isInteger(+e),x$={boolean:uT,integer:Or,number:Or,date:lT,string:cT,unknown:zr},rx=[o$e,s$e,Iee,a$e],u$e=["boolean","integer","number","date"];function zee(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=rx.length,i=rx.map((o,a)=>a+1);for(let o=0,a=0,s,u;o<n;++o)for(u=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&i$e(u)&&!rx[s](u)&&(i[s]=0,++a,a===rx.length))return"string";return u$e[i.reduce((o,a)=>o===0?a:o,0)-1]}function Bee(e,t){return t.reduce((n,r)=>(n[r]=zee(e,r),n),{})}function yB(e){const t=function(n,r){const i={delimiter:e};return gT(n,r?Ke(r,i):i)};return t.responseType="text",t}function gT(e,t){return t.header&&(e=t.header.map(xe).join(t.delimiter)+`
`+e),pJ(t.delimiter).parse(e+"")}gT.responseType="text";function l$e(e){return typeof Buffer=="function"&&Qe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function mT(e,t){const n=t&&t.property?da(t.property):zr;return ke(e)&&!l$e(e)?c$e(n(e),t):n(JSON.parse(e))}mT.responseType="json";function c$e(e,t){return!se(e)&&iee(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const f$e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function jee(e,t){let n,r,i,o;return e=mT(e,t),t&&t.feature?(n=f$,i=t.feature):t&&t.mesh?(n=T4e,i=t.mesh,o=f$e[t.filter]):ae("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):ae("Invalid TopoJSON object: "+i),r&&r.features||[r]}jee.responseType="json";const tw={dsv:gT,csv:yB(","),tsv:yB("	"),json:mT,topojson:jee};function yT(e,t){return arguments.length>1?(tw[e]=t,this):ze(tw,e)?tw[e]:null}function Uee(e){const t=yT(e);return t&&t.responseType||"text"}function Wee(e,t,n,r){t=t||{};const i=yT(t.type||"json");return i||ae("Unknown data format type: "+t.type),e=i(e,t),t.parse&&d$e(e,t.parse,n,r),ze(e,"columns")&&delete e.columns,e}function d$e(e,t,n,r){if(!e.length)return;const i=Ry();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,u,l,c,f;t==="auto"&&(t=Bee(e,o)),o=Object.keys(t);const d=o.map(p=>{const g=t[p];let y,v;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return y=g.split(/:(.+)?/,2),v=y[1],(v[0]==="'"&&v[v.length-1]==="'"||v[0]==='"'&&v[v.length-1]==='"')&&(v=v.slice(1,-1)),(y[0]==="utc"?r:n)(v);if(!x$[g])throw Error("Illegal format pattern: "+p+":"+g);return x$[g]});for(u=0,c=e.length,f=o.length;u<c;++u)for(a=e[u],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}const L3=K4e(typeof fetch<"u"&&fetch,null);function I3(e){const t=e||zr,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function nw(e,t){try{await t(e)}catch(n){e.error(n)}}const Hee=Symbol("vega_id");let h$e=1;function z3(e){return!!(e&&Le(e))}function Le(e){return e[Hee]}function qee(e,t){return e[Hee]=t,e}function kt(e){const t=e===Object(e)?e:{data:e};return Le(t)?t:qee(t,h$e++)}function vT(e){return B3(e,kt({}))}function B3(e,t){for(const n in e)t[n]=e[n];return t}function Gee(e,t){return qee(t,Le(e))}function _0(e,t){return e?t?(n,r)=>e(n,r)||Le(t(n))-Le(t(r)):(n,r)=>e(n,r)||Le(n)-Le(r):null}function Vee(e){return e&&e.constructor===A0}function A0(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:A0,insert(s){const u=Ee(s),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(s){const u=Qe(s)?r:t,l=Ee(s),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(s,u,l){const c={field:u,value:Br(l)};return Qe(s)?(c.filter=s,i.push(c)):(c.tuple=s,n.push(c)),this},encode(s,u){return Qe(s)?i.push({filter:s,field:u}):n.push({tuple:s,field:u}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,u){const l={},c={};let f,d,p,g,y,v;for(f=0,d=u.length;f<d;++f)l[Le(u[f])]=1;for(f=0,d=t.length;f<d;++f)y=t[f],l[Le(y)]=-1;for(f=0,d=r.length;f<d;++f)g=r[f],u.forEach(x=>{g(x)&&(l[Le(x)]=-1)});for(f=0,d=e.length;f<d;++f)y=e[f],v=Le(y),l[v]?l[v]=1:s.add.push(kt(e[f]));for(f=0,d=u.length;f<d;++f)y=u[f],l[Le(y)]<0&&s.rem.push(y);function b(x,_,A){A?x[_]=A(x):s.encode=_,a||(c[Le(x)]=x)}for(f=0,d=n.length;f<d;++f)p=n[f],y=p.tuple,g=p.field,v=l[Le(y)],v>0&&(b(y,g,p.value),s.modifies(g));for(f=0,d=i.length;f<d;++f)p=i[f],g=p.filter,u.forEach(x=>{g(x)&&l[Le(x)]>0&&b(x,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?u.filter(x=>l[Le(x)]>0):u.slice();else for(v in c)s.mod.push(c[v]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}const rw="_:mod:_";function j3(){Object.defineProperty(this,rw,{writable:!0,value:{}})}j3.prototype={set(e,t,n,r){const i=this,o=i[e],a=i[rw];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=se(n)?1+n.length:-1),i},modified(e,t){const n=this[rw];if(arguments.length){if(se(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[rw]={},this}};let p$e=0;const g$e="pulse",m$e=new j3,y$e=1,v$e=2;function Wt(e,t,n,r){this.id=++p$e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function vB(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wt.prototype={targets(){return this._targets||(this._targets=I3(D2))},set(e){return this.value!==e?(this.value=e,1):0},skip:vB(y$e),modified:vB(v$e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new j3,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(f,d,p)=>{p instanceof Wt?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===g$e)Ee(s).forEach(f=>{f instanceof Wt?f!==this&&(f.targets().add(this),o.push(f)):ae("Pulse parameters must be operator instances.")}),this.source=s;else if(se(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||m$e,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function b$e(e,t,n,r){let i=1,o;return e instanceof Wt?o=e:e&&e.prototype instanceof Wt?o=new e:Qe(e)?o=new Wt(null,e):(i=0,o=new Wt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function x$e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let w$e=0;function U3(e,t,n){this.id=++w$e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Vl(e,t,n){return new U3(e,t,n)}U3.prototype={_filter:ha,_apply:zr,targets(){return this._targets||(this._targets=I3(D2))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Vl(e);return this.targets().add(t),t},apply(e){const t=Vl(null,e);return this.targets().add(t),t},merge(){const e=Vl();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Vl();return this.targets().add(Vl(null,null,aT(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Vl(null,null,()=>n=!0)),t.targets().add(Vl(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ha,this._targets=null}};function _$e(e,t,n,r){const i=this,o=Vl(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=Ee(e);const u=s.length;for(let l=0;l<u;++l)s[l].addEventListener(t,a);return o}function A$e(e,t){const n=this.locale();return Wee(e,t,n.timeParse,n.utcParse)}function S$e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function E$e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Uee(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function $$e(e,t,n){const r=this,i=r._pending||C$e(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(ha).insert(o.data||[])),i.done(),o}function C$e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const k$e={skip:!0};function T$e(e,t,n,r,i){return(e instanceof Wt?O$e:M$e)(this,e,t,n,r,i),this}function M$e(e,t,n,r,i,o){const a=Ke({},o,k$e);let s,u;Qe(n)||(n=Br(n)),r===void 0?s=l=>e.touch(n(l)):Qe(r)?(u=new Wt(null,r,i,!1),s=l=>{u.evaluate(l);const c=n(l),f=u.value;Vee(f)?e.pulse(c,f,o):e.update(c,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function O$e(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const a=o||{},s=new Wt(null,N$e(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function N$e(e,t){return t=Qe(t)?t:Br(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function R$e(e){e.rank=++this._rank}function F$e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ae("Cycle detected in dataflow graph.")}const Y_={},ks=1,tc=2,zu=4,D$e=ks|tc,bB=ks|zu,uh=ks|tc|zu,xB=8,T1=16,wB=32,_B=64;function Mc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function i6(e,t){const n=[];return ec(e,t,r=>n.push(r)),n}function AB(e,t){const n={};return e.visit(t,r=>{n[Le(r)]=1}),r=>n[Le(r)]?null:r}function ix(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Mc.prototype={StopPropagation:Y_,ADD:ks,REM:tc,MOD:zu,ADD_REM:D$e,ADD_MOD:bB,ALL:uh,REFLOW:xB,SOURCE:T1,NO_SOURCE:wB,NO_FIELDS:_B,fork(e){return new Mc(this.dataflow).init(this,e)},clone(){const e=this.fork(uh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(uh|T1)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Mc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&_B)&&(n.fields=e.fields),t&ks?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&tc?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&zu?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&wB?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||uh;return t&ks&&this.add.length||t&tc&&this.rem.length||t&zu&&this.mod.length},reflow(e){if(e)return this.fork(uh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(zu,AB(this,ks))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return se(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?se(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ks&&(n.addF=ix(n.addF,t)),e&tc&&(n.remF=ix(n.remF,t)),e&zu&&(n.modF=ix(n.modF,t)),e&T1&&(n.srcF=ix(n.srcF,t)),n},materialize(e){e=e||uh;const t=this;return e&ks&&t.addF&&(t.add=i6(t.add,t.addF),t.addF=null),e&tc&&t.remF&&(t.rem=i6(t.rem,t.remF),t.remF=null),e&zu&&t.modF&&(t.mod=i6(t.mod,t.modF),t.modF=null),e&T1&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&T1)return ec(n.source,n.srcF,r),n;e&ks&&ec(n.add,n.addF,r),e&tc&&ec(n.rem,n.remF,r),e&zu&&ec(n.mod,n.modF,r);const i=n.source;if(e&xB&&i){const o=n.add.length+n.mod.length;o===i.length||(o?ec(i,AB(n,bB),r):ec(i,n.srcF,r))}return n}};function bT(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const s=i.fields||(i.fields={});for(const u in a.fields)s[u]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}be(bT,Mc,{fork(e){const t=new Mc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?se(e)?e.some(r=>n[r]):n[e]:0},filter(){ae("MultiPulse does not support filtering.")},materialize(){ae("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function P$e(e,t,n){const r=this,i=[];if(r._pulse)return Yee(r);if(r._pending&&await r._pending,t&&await nw(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Mc(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=I3(D2);let a=0,s,u,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}u=s.run(r._getPulse(s,e)),u.then?u=await u:u.async&&(i.push(u.async),u=Y_),u!==Y_&&s._targets&&s._targets.forEach(c=>r._enqueue(c)),++a}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await nw(r,c[f].callback)}return n&&await nw(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function L$e(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function I$e(e,t,n){return this._pulse?Yee(this):(this.evaluate(e,t,n),this)}function z$e(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function Yee(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function B$e(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function j$e(e,t){const n=e.source,r=this._clock;return n&&se(n)?new bT(this,r,n.map(i=>i.pulse),t):this._input[e.id]||U$e(this._pulse,n&&n.pulse)}function U$e(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Y_&&(e.source=t.source),e)}const xT={skip:!1,force:!1};function W$e(e,t){const n=t||xT;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function H$e(e,t,n){const r=n||xT;return(e.set(t)||r.force)&&this.touch(e,r),this}function q$e(e,t,n){this.touch(e,n||xT);const r=new Mc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function G$e(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Xee(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,V$e(t,0,e)):r=n,r}}}function Xee(e,t,n,r){let i,o;const a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function V$e(e,t,n){const r=t,i=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,Xee(e,r,t,n)}function np(){this.logger(tT()),this.logLevel(Zk),this._clock=0,this._rank=0,this._locale=pT();try{this._loader=L3()}catch{}this._touched=I3(D2),this._input={},this._pulse=null,this._heap=G$e((e,t)=>e.qrank-t.qrank),this._postrun=[]}function M1(e){return function(){return this._log[e].apply(this,arguments)}}np.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:M1("error"),warn:M1("warn"),info:M1("info"),debug:M1("debug"),logLevel:M1("level"),cleanThreshold:1e4,add:b$e,connect:x$e,rank:R$e,rerank:F$e,pulse:q$e,touch:W$e,update:H$e,changeset:A0,ingest:S$e,parse:A$e,preload:$$e,request:E$e,events:_$e,on:T$e,evaluate:P$e,run:I$e,runAsync:L$e,runAfter:z$e,_enqueue:B$e,_getPulse:j$e};function ee(e,t){Wt.call(this,e,null,t)}be(ee,Wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Dp={};function Jee(e){const t=Kee(e);return t&&t.Definition||null}function Kee(e){return e=e&&e.toLowerCase(),ze(Dp,e)?Dp[e]:null}function*Qee(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function wT(e,t,n){const r=Float64Array.from(Qee(e,n));return r.sort(Us),t.map(i=>dX(r,i))}function _T(e,t){return wT(e,[.25,.5,.75],t)}function AT(e,t){const n=e.length,r=iX(e,t),i=_T(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Zee(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,u,l,c,f,d;const p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);s=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-u));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)c=s/i[f],c>=l&&p/c<=t&&(s=c)}c=Math.log(s);const g=c>=0?0:~~(-c/r)+1,y=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+y)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var ga=Math.random;function Y$e(e){ga=e}function ete(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Qee(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(ga()*o)];c[l]=s/o}return c.sort(Us),[Ap(c,n/2),Ap(c,1-n/2)]}function tte(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let a=0,s=1,u=r(e[0]),l=u,c=u+t,f;for(;s<i;++s){if(f=r(e[s]),f>=c){for(l=(u+l)/2;a<s;++a)o[a]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;a<s;++a)o[a]=l;return n?X$e(o,t+t/4):o}function X$e(e,t){const n=e.length;let r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function J$e(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function K$e(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*ga())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}const nte=Math.sqrt(2*Math.PI),Q$e=Math.SQRT2;let O1=NaN;function W3(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(O1===O1)n=O1,O1=NaN;else{do n=ga()*2-1,r=ga()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,O1=r*o}return e+n*t}function ST(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*nte)}function H3(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const a=Math.exp(-i*i/2);let s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function q3(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Q$e*Z$e(2*e-1)}function Z$e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function ET(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>W3(n,r),pdf:o=>ST(o,n,r),cdf:o=>H3(o,n,r),icdf:o=>q3(o,n,r)};return i.mean(e).stdev(t)}function $T(e,t){const n=ET();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=AT(e)),i):t},sample(){return e[~~(ga()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function CT(e,t){return e=e||0,t=t??1,Math.exp(e+W3()*t)}function kT(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*nte*e)}function TT(e,t,n){return H3(Math.log(e),t,n)}function MT(e,t,n){return Math.exp(q3(e,t,n))}function rte(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>CT(n,r),pdf:o=>kT(o,n,r),cdf:o=>TT(o,n,r),icdf:o=>MT(o,n,r)};return i.mean(e).stdev(t)}function ite(e,t){let n=0,r;function i(a){const s=[];let u=0,l;for(l=0;l<n;++l)u+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=u;return s}const o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=ga();let s=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(a<u){s=e[l];break}return s.sample()},pdf(a){let s=0,u=0;for(;u<n;++u)s+=r[u]*e[u].pdf(a);return s},cdf(a){let s=0,u=0;for(;u<n;++u)s+=r[u]*e[u].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function OT(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ga()}function NT(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function RT(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function FT(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function ote(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>OT(n,r),pdf:o=>NT(o,n,r),cdf:o=>RT(o,n,r),icdf:o=>FT(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function DT(e,t,n){let r=0,i=0;for(const o of e){const a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function L2(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function G3(e,t,n,r){e=e.filter(p=>{let g=t(p),y=n(p);return g!=null&&(g=+g)>=g&&y!=null&&(y=+y)>=y}),r&&e.sort((p,g)=>t(p)-t(g));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s=0,u=0,l=0,c,f,d;for(d of e)o[s]=c=+t(d),a[s]=f=+n(d),++s,u+=(c-u)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=u,a[s]-=l;return[o,a,u,l]}function I2(e,t,n,r){let i=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function Tg(e,t,n,r,i){let o=0,a=0;return I2(e,t,n,(s,u)=>{const l=u-i(s),c=u-r;o+=l*l,a+=c*c}),1-o/a}function PT(e,t,n){let r=0,i=0,o=0,a=0,s=0;I2(e,t,n,(c,f)=>{++s,r+=(c-r)/s,i+=(f-i)/s,o+=(c*f-o)/s,a+=(c*c-a)/s});const u=L2(r,i,o,a),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:Tg(e,t,n,i,l)}}function ate(e,t,n){let r=0,i=0,o=0,a=0,s=0;I2(e,t,n,(c,f)=>{++s,c=Math.log(c),r+=(c-r)/s,i+=(f-i)/s,o+=(c*f-o)/s,a+=(c*c-a)/s});const u=L2(r,i,o,a),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:Tg(e,t,n,i,l)}}function ste(e,t,n){const[r,i,o,a]=G3(e,t,n);let s=0,u=0,l=0,c=0,f=0,d,p,g;I2(e,t,n,(x,_)=>{d=r[f++],p=Math.log(_),g=d*_,s+=(_*p-s)/f,u+=(g-u)/f,l+=(g*p-l)/f,c+=(d*g-c)/f});const[y,v]=L2(u/a,s/a,l/a,c/a),b=x=>Math.exp(y+v*(x-o));return{coef:[Math.exp(y-v*o),v],predict:b,rSquared:Tg(e,t,n,a,b)}}function ute(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;I2(e,t,n,(f,d)=>{const p=Math.log(f),g=Math.log(d);++u,r+=(p-r)/u,i+=(g-i)/u,o+=(p*g-o)/u,a+=(p*p-a)/u,s+=(d-s)/u});const l=L2(r,i,o,a),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Tg(e,t,n,s,c)}}function LT(e,t,n){const[r,i,o,a]=G3(e,t,n),s=r.length;let u=0,l=0,c=0,f=0,d=0,p,g,y,v;for(p=0;p<s;)g=r[p],y=i[p++],v=g*g,u+=(v-u)/p,l+=(v*g-l)/p,c+=(v*v-c)/p,f+=(g*y-f)/p,d+=(v*y-d)/p;const b=c-u*u,x=u*b-l*l,_=(d*u-f*l)/x,A=(f*b-d*l)/x,E=-_*u,$=S=>(S=S-o,_*S*S+A*S+E+a);return{coef:[E-A*o+_*o*o+a,A-2*_*o,_],predict:$,rSquared:Tg(e,t,n,a,$)}}function lte(e,t,n,r){if(r===0)return DT(e,t,n);if(r===1)return PT(e,t,n);if(r===2)return LT(e,t,n);const[i,o,a,s]=G3(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,p,g,y,v;for(d=0;d<f;++d){for(g=0,y=0;g<u;++g)y+=Math.pow(i[g],d)*o[g];for(l.push(y),v=new Float64Array(f),p=0;p<f;++p){for(g=0,y=0;g<u;++g)y+=Math.pow(i[g],d+p);v[p]=y}c.push(v)}c.push(l);const b=tCe(c),x=_=>{_-=a;let A=s+b[0]+b[1]*_+b[2]*_*_;for(d=3;d<f;++d)A+=b[d]*Math.pow(_,d);return A};return{coef:eCe(f,b,-a,s),predict:x,rSquared:Tg(e,t,n,s,x)}}function eCe(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function tCe(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}const SB=2,EB=1e-12;function cte(e,t,n,r){const[i,o,a,s]=G3(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let p=-1;++p<=SB;){const g=[0,l-1];for(let v=0;v<u;++v){const b=i[v],x=g[0],_=g[1],A=b-i[x]>i[_]-b?x:_;let E=0,$=0,S=0,k=0,O=0;const N=1/Math.abs(i[A]-b||1);for(let I=x;I<=_;++I){const M=i[I],D=o[I],L=nCe(Math.abs(b-M)*N)*d[I],j=M*L;E+=L,$+=j,S+=D*L,k+=D*j,O+=M*j}const[F,W]=L2($/E,S/E,k/E,O/E);c[v]=F+W*b,f[v]=Math.abs(o[v]-c[v]),rCe(i,v+1,g)}if(p===SB)break;const y=wy(f);if(Math.abs(y)<EB)break;for(let v=0,b,x;v<u;++v)b=f[v]/(6*y),d[v]=b>=1?EB:(x=1-b*b)*x}return iCe(i,c,a,s)}function nCe(e){return(e=1-e*e*e)*e*e}function rCe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function iCe(e,t,n,r){const i=e.length,o=[];let a=0,s=0,u=[],l;for(;a<i;++a)l=e[a]+n,u[0]===l?u[1]+=(t[a]-u[1])/++s:(s=0,u[1]+=r,u=[l,t[a]],o.push(u));return u[1]+=r,o}const oCe=.5*Math.PI/180;function V3(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=y=>[y,e(y)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let y=1;y<r;++y)l.push(i(o+y/n*s));return l.push(i(a)),l}else{c.push(i(a));for(let y=n;--y>0;)c.push(i(o+y/n*s))}let f=l[0],d=c[c.length-1];const p=1/s,g=aCe(f[1],c);for(;d;){const y=i((f[0]+d[0])/2);y[0]-f[0]>=u&&sCe(f,y,d,p,g)>oCe?c.push(y):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function aCe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function sCe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function uCe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function w$(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:uCe(e)}function fte(e,t,n){return n||e+(t?"_"+t:"")}const o6=()=>{},lCe={init:o6,add:o6,rem:o6,idx:0},Fy={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},z2=Object.keys(Fy).filter(e=>e!=="__count__");function cCe(e,t){return(n,r)=>Ke({name:e,aggregate_param:r,out:n||e},lCe,t)}[...z2,"__count__"].forEach(e=>{Fy[e]=cCe(e,Fy[e])});function dte(e,t,n){return Fy[e](n,t)}function hte(e,t){return e.idx-t.idx}function fCe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Fy[i]())})};return e.forEach(n),Object.values(t).sort(hte)}function dCe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function hCe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function pCe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function gCe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function pte(e,t){const n=t||zr,r=fCe(e),i=e.slice().sort(hte);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=dCe,o.prototype.add=hCe,o.prototype.rem=pCe,o.prototype.set=gCe,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function IT(e){this._key=e?da(e):Le,this.reset()}const br=IT.prototype;br.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};br.add=function(e){this._add.push(e)};br.rem=function(e){this._rem.push(e)};br.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};br.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ze(n,o)||(n[o]=1,++i);return i};br.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=nee(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};br.argmin=function(e){return this.extent(e)[0]||{}};br.argmax=function(e){return this.extent(e)[1]||{}};br.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};br.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};br.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=_T(this.values(),e),this._get=e),this._q};br.q1=function(e){return this.quartile(e)[0]};br.q2=function(e){return this.quartile(e)[1]};br.q3=function(e){return this.quartile(e)[2]};br.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=ete(this.values(),1e3,.05,e),this._get=e),this._ci};br.ci0=function(e){return this.ci(e)[0]};br.ci1=function(e){return this.ci(e)[1]};function Vc(e){ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:z2},{name:"aggregate_params",type:"field",null:!0,array:!0,default:[null]},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(Vc,ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let u,l,c,f;for(u in s)for(c=s[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function a(s,u,l){const c=n[l],f=r[l++];for(const d in f){const p=s?s+"|"+d:d;u[c]=f[d],l<i?a(p,u,l):t[p]||e.cell(p,u)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(x){const _=Ee(Fr(x)),A=_.length;let E=0,$;for(;E<A;++E)r[$=_[E]]||(r[$]=1,t.push($))}this._dims=Ee(e.groupby),this._dnames=this._dims.map(x=>{const _=wn(x);return i(x),n.push(_),_}),this.cellkey=e.key?e.key:w$(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],u=e.as||[],l=o.length,c={};let f,d,p,g,y,v,b;for(l!==a.length&&ae("Unmatched number of fields and aggregate ops."),b=0;b<l;++b){if(f=o[b],d=a[b],p=s[b]||null,f==null&&d!=="count"&&ae("Null aggregate field specified."),y=wn(f),v=fte(d,y,u[b]),n.push(v),d==="count"){this._counts.push(v);continue}g=c[y],g||(i(f),g=c[y]=[],g.field=f,this._measures.push(g)),d!=="count"&&(this._countOnly=!1),g.push(dte(d,p,v))}return this._measures=this._measures.map(x=>pte(x,x.field)),Object.create(null)},cellkey:w$(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new IT),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Gee(t.tuple,o):kt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const mCe=1e-14;function zT(e){ee.call(this,null,e)}zT.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(zT,ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Fr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[s]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[s]=r(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Zee(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);const u=function(l){let c=Or(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(mCe+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Xi(u,Fr(t),e.name||"bin_"+wn(t))}});function gte(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:u=>o.push(u),remove:u=>a[r(u)]=++s,size:()=>i.length,data:(u,l)=>(s&&(i=i.filter(c=>!a[r(c)]),a={},s=0),l&&u&&i.sort(u),o.length&&(i=u?uee(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function BT(e){ee.call(this,[],e)}BT.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(BT,ee,{transform(e,t){const n=t.fork(t.ALL),r=gte(Le,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(_0(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function mte(e){Wt.call(this,null,yCe,e)}be(mte,Wt);function yCe(e){return this.value&&!e.modified()?this.value:oT(e.fields,e.orders)}function jT(e){ee.call(this,null,e)}jT.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function vCe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(jT,ee,{transform(e,t){const n=f=>d=>{for(var p=vCe(s(d),e.case,o)||[],g,y=0,v=p.length;y<v;++y)a.test(g=p[y])||f(g)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=kt({}),u[i]=s,u[o]=l,a.add.push(u)):l===0?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}});function UT(e){ee.call(this,null,e)}UT.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(UT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=bCe(s,i,o,e.filter||ha)):n.mod=s,n.source=this.value,n.modifies(r)}});function bCe(e,t,n,r){for(var i=[],o={},a=e.length,s=0,u,l;s<a;++s)for(o[t]=l=e[s],u=0;u<a;++u)o[n]=e[u],r(o)&&(i.push(kt(o)),o={},o[t]=l);return i}const $B={kde:$T,mixture:ite,normal:ET,lognormal:rte,uniform:ote},xCe="distributions",CB="function",wCe="field";function yte(e,t){const n=e[CB];ze($B,n)||ae("Unknown distribution function: "+n);const r=$B[n]();for(const i in e)i===wCe?r.data((e.from||t()).map(e[i])):i===xCe?r[i](e[i].map(o=>yte(o,t))):typeof r[i]===CB&&r[i](e[i]);return r}function WT(e){ee.call(this,null,e)}const vte=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_Ce={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:vte},{name:"weights",type:"number",array:!0}]};WT.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:vte.concat(_Ce)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(WT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=yte(e.distribution,ACe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&ae("Invalid density method: "+a),!e.extent&&!r.data&&ae("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=e.extent||Ks(r.data()),l=V3(a,u,i,o).map(c=>{const f={};return f[s[0]]=c[0],f[s[1]]=c[1],kt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function ACe(e){return()=>e.materialize(e.SOURCE).source}function bte(e,t){return e?e.map((n,r)=>t[r]||wn(n)):null}function HT(e,t,n){const r=[],i=f=>f(u);let o,a,s,u,l,c;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const xte="bin";function qT(e){ee.call(this,null,e)}qT.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:xte}]};const SCe=(e,t)=>P2(Ks(e,t))/30;be(qT,ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=HT(t.source,e.groupby,zr),i=e.smooth||!1,o=e.field,a=e.step||SCe(n,o),s=_0((g,y)=>o(g)-o(y)),u=e.as||xte,l=r.length;let c=1/0,f=-1/0,d=0,p;for(;d<l;++d){const g=r[d].sort(s);p=-1;for(const y of tte(g,a,i,o))y<c&&(c=y),y>f&&(f=y),g[++p][u]=y}return this.value={start:c,stop:f,step:a},t.reflow(!0).modifies(u)}});function wte(e){Wt.call(this,null,ECe,e),this.modified(!0)}be(wte,Wt);function ECe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Xi(n=>t(n,e),Fr(t),wn(t))}function GT(e){ee.call(this,[void 0,void 0],e)}GT.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(GT,ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{const u=Or(r(s));u!=null&&(u<o&&(o=u),u>a&&(a=u))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=wn(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function VT(e,t){Wt.call(this,e),this.parent=t,this.count=0}be(VT,Wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Y3(e){ee.call(this,{},e),this._keys=$g();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}be(Y3,ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ze(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new VT(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Le(u),c=o.get(l);c!==void 0&&(o.delete(l),s(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(Le(u),l),s(l).add(u)}),a||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Le(u),c=o.get(l),f=r(u);c===f?s(f).mod(u):(o.set(l,f),s(c).rem(u),s(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{s(o.get(Le(u))).mod(u)}),a&&t.visit(t.REFLOW,u=>{const l=Le(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),s(c).rem(u),s(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function _te(e){Wt.call(this,null,$Ce,e)}be(_te,Wt);function $Ce(e){return this.value&&!e.modified()?this.value:se(e.name)?Ee(e.name).map(t=>da(t)):da(e.name,e.as)}function YT(e){ee.call(this,$g(),e)}YT.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(YT,ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Le(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(Le(f),1)});function c(f){const d=Le(f),p=u(f,e),g=r.get(d);p&&g?(r.delete(d),o.push(f)):!p&&!g?(r.set(d,1),a.push(f)):l&&p&&!g&&s.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function XT(e){ee.call(this,[],e)}XT.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(XT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=bte(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const u=r.map(g=>g(s)),l=u.reduce((g,y)=>Math.max(g,y.length),0);let c=0,f,d,p;for(;c<l;++c){for(d=vT(s),f=0;f<a;++f)d[i[f]]=(p=u[f][c])==null?null:p;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function JT(e){ee.call(this,[],e)}JT.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(JT,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(wn),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=vT(l),f[a]=i[c],f[s]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function KT(e){ee.call(this,null,e)}KT.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(KT,ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function Ate(e){ee.call(this,[],e)}be(Ate,ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,a,s,u;if(o>0){for(a=[];--o>=0;)a.push(u=kt(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});const ox={value:"value",median:wy,mean:hX,min:_p,max:ui},CCe=[];function QT(e){ee.call(this,[],e)}QT.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function kCe(e){var t=e.method||ox.value,n;if(ox[t]==null)ae("Unrecognized imputation method: "+t);else return t===ox.value?(n=e.value!==void 0?e.value:0,()=>n):ox[t]}function TCe(e){const t=e.field;return n=>n?t(n):NaN}be(QT,ee,{transform(e,t){var n=t.fork(t.ALL),r=kCe(e),i=TCe(e),o=wn(e.field),a=wn(e.key),s=(e.groupby||[]).map(wn),u=MCe(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,p,g,y,v,b,x,_,A,E;for(v=0,_=u.length;v<_;++v)for(d=u[v],g=d.values,p=NaN,x=0;x<f;++x)if(d[x]==null){for(y=u.domain[x],E={_impute:!0},b=0,A=g.length;b<A;++b)E[s[b]]=g[b];E[a]=y,E[o]=Number.isNaN(p)?p=r(d,i):p,l.push(kt(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function MCe(e,t,n,r){var i=b=>b(v),o=[],a=r?r.slice():[],s={},u={},l,c,f,d,p,g,y,v;for(a.forEach((b,x)=>s[b]=x+1),d=0,y=e.length;d<y;++d)v=e[d],g=n(v),p=s[g]||(s[g]=a.push(g)),c=(l=t?t.map(i):CCe)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[p-1]=v;return o.domain=a,o}function ZT(e){Vc.call(this,e)}ZT.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:z2},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(ZT,Vc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Ke(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function eM(e){ee.call(this,null,e)}eM.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(eM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HT(r,e.groupby,e.field),o=(e.groupby||[]).map(wn),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&ae("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=Ks(r,e.field)),f=d=e.steps||d),i.forEach(p=>{const g=$T(p,a)[s],y=e.counts?p.length:1,v=c||Ks(p);V3(g,v,f,d).forEach(b=>{const x={};for(let _=0;_<o.length;++_)x[o[_]]=p.dims[_];x[u[0]]=b[0],x[u[1]]=b[1]*y,l.push(kt(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Ste(e){Wt.call(this,null,OCe,e)}be(Ste,Wt);function OCe(e){return this.value&&!e.modified()?this.value:sT(e.fields,e.flat)}function Ete(e){ee.call(this,[],e),this._pending=null}be(Ete,ee,{transform(e,t){const n=t.dataflow;return this._pending?a6(this,t,this._pending):NCe(e)?t.StopPropagation:e.values?a6(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Ee(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>a6(this,t,Ee(r.data)))}});function NCe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function a6(e,t,n){n.forEach(kt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function tM(e){ee.call(this,{},e)}tM.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(tM,ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let u=a?t.SOURCE:t.ADD,l=t,c=e.as,f,d,p;return i?(d=i.length,s>1&&!c&&ae('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*d&&ae('The "as" parameter has too few output field names.'),c=c||i.map(wn),f=function(g){for(var y=0,v=0,b,x;y<s;++y)if(x=r.get(n[y](g)),x==null)for(b=0;b<d;++b,++v)g[c[v]]=o;else for(b=0;b<d;++b,++v)g[c[v]]=i[b](x)}):(c||ae("Missing output field names."),f=function(g){for(var y=0,v;y<s;++y)v=r.get(n[y](g)),g[c[y]]=v??o}),a?l=t.reflow(!0):(p=n.some(g=>t.modified(g.fields)),u|=p?t.MOD:0),t.visit(u,f),l.modifies(c)}});function $te(e){Wt.call(this,null,RCe,e)}be($te,Wt);function RCe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function Cte(e){Wt.call(this,null,FCe,e)}be(Cte,Wt);function FCe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function kte(e){ee.call(this,null,e)}be(kte,ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nM(e){Vc.call(this,e)}nM.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:z2,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be(nM,Vc,{_transform:Vc.prototype.transform,transform(e,t){return this._transform(DCe(e,t),t)}});function DCe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Fr(n).concat(Fr(r)),a=LCe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>PCe(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function PCe(e,t,n,r){return Xi(i=>t(i)===e?n(i):NaN,r,e+"")}function LCe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(D3),t?i.slice(0,t):i}function Tte(e){Y3.call(this,e)}be(Tte,Y3,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Le(o),n,t,o);return(e.modified("field")||r&&t.modified(Fr(r)))&&ae("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=i(o);r(o).forEach(s=>a.add(kt(s)))}),t.visit(t.REM,o=>{const a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function rM(e){ee.call(this,null,e)}rM.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(rM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=bte(e.fields,e.as||[]),o=r?(s,u)=>ICe(s,u,r,i):B3;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const u=Le(s);n.rem.push(a[u]),a[u]=null}),t.visit(t.ADD,s=>{const u=o(s,kt({}));a[Le(s)]=u,n.add.push(u)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Le(s)]))}),n}});function ICe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function Mte(e){ee.call(this,null,e)}be(Mte,ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function iM(e){ee.call(this,null,e)}iM.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const zCe=1e-14;be(iM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=HT(i,e.groupby,e.field),a=(e.groupby||[]).map(wn),s=[],u=e.step||.01,l=e.probs||In(u/2,1-zCe,u),c=l.length;return o.forEach(f=>{const d=wT(f,l);for(let p=0;p<c;++p){const g={};for(let y=0;y<a.length;++y)g[a[y]]=f.dims[y];g[r[0]]=l[p],g[r[1]]=d[p],s.push(kt(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function Ote(e){ee.call(this,null,e)}be(Ote,ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Le(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=vT(i);r[Le(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Le(i)];for(const a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function oM(e){ee.call(this,[],e),this.count=0}oM.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be(oM,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[Le(f)]=1,c),{});let a=this.value,s=this.count,u=0;function l(c){let f,d;a.length<i?a.push(c):(d=~~((s+1)*ga()),d<a.length&&d>=u&&(f=a[d],o[Le(f)]&&n.rem.push(f),a[d]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Le(c);o[f]&&(o[f]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[Le(c)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,c=>{o[Le(c)]||l(c)}),u=-1),r&&a.length>i){const c=a.length-i;for(let f=0;f<c;++f)o[Le(a[f])]=-1,n.rem.push(a[f]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Le(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter(c=>!o[Le(c)])),this.count=s,this.value=n.source=a,n}});function aM(e){ee.call(this,null,e)}aM.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(aM,ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=In(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,kt(o)}),n.add=t.add.concat(this.value),n}});function Nte(e){ee.call(this,null,e),this.modified(!0)}be(Nte,ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function sM(e){ee.call(this,null,e)}const Rte=["unit0","unit1"];sM.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:fT,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Rte}]};be(sM,ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?kg:Cg)(o.unit).offset,s=e.as||Rte,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Fr(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,g=>{const y=n(g);let v,b;y==null?(g[u]=null,r&&(g[l]=null)):(g[u]=v=b=o(y),r&&(g[l]=b=a(v,c)),v<f&&(f=v),b>d&&(d=b))}),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Mee({extent:e.extent||Ks(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=dT(r),a=this.value||{},s=(n?wee:xee)(o,i);return s.unit=mt(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function Fte(e){ee.call(this,$g(),e)}be(Fte,ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Dte(e){ee.call(this,null,e)}be(Dte,ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(_0(e.sort)):t.source).map(e.field))}});function BCe(e,t,n,r){const i=Dy[e](t,n);return{init:i.init||sc,update:function(o,a){a[r]=i.next(o)}}}const Dy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Dy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ae("ntile num must be greater than zero.");const n=Dy.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ae("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=jCe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function jCe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const UCe=Object.keys(Dy);function Pte(e){const t=Ee(e.ops),n=Ee(e.fields),r=Ee(e.params),i=Ee(e.aggregate_params),o=Ee(e.as),a=this.outputs=[],s=this.windows=[],u={},l={},c=[],f=[];let d=!0;function p(g){Ee(Fr(g)).forEach(y=>u[y]=1)}p(e.sort),t.forEach((g,y)=>{const v=n[y],b=r[y],x=i[y]||null,_=wn(v),A=fte(g,_,o[y]);if(p(v),a.push(A),ze(Dy,g))s.push(BCe(g,v,b,A));else{if(v==null&&g!=="count"&&ae("Null aggregate field specified."),g==="count"){c.push(A);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=v,f.push(E)),E.push(dte(g,x,A))}}),(c.length||f.length)&&(this.cell=WCe(f,c,d)),this.inputs=Object.keys(u)}const Lte=Pte.prototype;Lte.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Lte.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function WCe(e,t,n){e=e.map(u=>pte(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new IT;return r.add=function(u){if(r.num+=1,!n){s&&s.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){s&&s.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(s&&s.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,s&&s.reset();for(let u=0;u<i;++u)o[u].init()},r}function uM(e){ee.call(this,{},e),this._mlen=0,this._mods=[]}uM.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:UCe.concat(z2)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"field",null:!0,array:!0,default:[null]},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(uM,ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=_0(e.sort),i=w$(e.groupby),o=s=>this.group(i(s));let a=this.state;(!a||n)&&(a=this.state=new Pte(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,u=this._mlen;s<u;++s)HCe(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=gte(Le),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function HCe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?v0(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Br(-1)};t.init();for(let f=0;f<u;++f)qCe(c,a,f,u),o&&GCe(c,l),t.update(c,s[f])}function qCe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function GCe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const VCe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Vc,bin:zT,collect:BT,compare:mte,countpattern:jT,cross:UT,density:WT,dotbin:qT,expression:wte,extent:GT,facet:Y3,field:_te,filter:YT,flatten:XT,fold:JT,formula:KT,generate:Ate,impute:QT,joinaggregate:ZT,kde:eM,key:Ste,load:Ete,lookup:tM,multiextent:$te,multivalues:Cte,params:kte,pivot:nM,prefacet:Tte,project:rM,proxy:Mte,quantile:iM,relay:Ote,sample:oM,sequence:aM,sieve:Nte,subflow:VT,timeunit:sM,tupleindex:Fte,values:Dte,window:uM},Symbol.toStringTag,{value:"Module"}));function Oc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const YCe=()=>typeof Image<"u"?Image:null;function lM(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const XCe="identity",Pp="linear",gl="log",B2="pow",j2="sqrt",X3="symlog",Kd="time",Qd="utc",qs="sequential",Mg="diverging",Lp="quantile",J3="quantize",K3="threshold",cM="ordinal",_$="point",Ite="band",fM="bin-ordinal",Wn="continuous",U2="discrete",W2="discretizing",va="interpolating",dM="temporal";function JCe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function KCe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,a,s,u,l;for(i<r&&(s=r,r=i,i=s),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),a=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function hM(){const e=M2().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,a=!1,s=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],p=r[1-d],g=lM(f,s,u);let y=r[d-0];i=(p-y)/(g||1),a&&(i=Math.floor(i)),y+=(p-y-i*(f-s))*l,o=i*(1-s),a&&(y=Math.round(y),o=Math.round(o));const v=In(f).map(b=>y+i*b);return n(d?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),s=u,c()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),c()):s},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],p=d?n().reverse():n(),g=p.length-1;let y=+f[0],v=+f[1],b,x,_;if(!(y!==y||v!==v)&&(v<y&&(_=y,y=v,v=_),!(v<p[0]||y>r[1-d])))return b=Math.max(0,Kw(p,y)-1),x=y===v?b:Kw(p,v)-1,y-p[b]>o+1e-10&&++b,d&&(_=b,b=g-x,x=g-_),b>x?void 0:t().slice(b,x+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return hM().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function zte(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return zte(t())},e}function QCe(){return zte(hM().paddingInner(1))}var ZCe=Array.prototype.map;function e7e(e){return ZCe.call(e,Or)}const t7e=Array.prototype.slice;function Bte(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(b2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=e7e(r),n):e.slice()},n.range=function(r){return arguments.length?(t=t7e.call(r),n):t.slice()},n.tickFormat=function(r,i){return MK(e[0],mt(e),r??10,i)},n.copy=function(){return Bte().domain(n.domain()).range(n.range())},n}const X_=new Map,jte=Symbol("vega_scale");function Ute(e){return e[jte]=!0,e}function n7e(e){return e&&e[jte]===!0}function r7e(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?JCe(o):o.invertExtent?KCe(o):void 0),o.type=e,Ute(o)};return r.metadata=es(Ee(n)),r}function At(e,t,n){return arguments.length>1?(X_.set(e,r7e(e,t,n)),this):Wte(e)?X_.get(e):void 0}At(XCe,Nk);At(Pp,Uc,Wn);At(gl,Fk,[Wn,gl]);At(B2,w3,Wn);At(j2,j9e,Wn);At(X3,Pk,Wn);At(Kd,XK,[Wn,dM]);At(Qd,JK,[Wn,dM]);At(qs,jk,[Wn,va]);At(`${qs}-${Pp}`,jk,[Wn,va]);At(`${qs}-${gl}`,KK,[Wn,va,gl]);At(`${qs}-${B2}`,Uk,[Wn,va]);At(`${qs}-${j2}`,Y6e,[Wn,va]);At(`${qs}-${X3}`,QK,[Wn,va]);At(`${Mg}-${Pp}`,Wk,[Wn,va]);At(`${Mg}-${gl}`,Hk,[Wn,va,gl]);At(`${Mg}-${B2}`,C3,[Wn,va]);At(`${Mg}-${j2}`,X6e,[Wn,va]);At(`${Mg}-${X3}`,qk,[Wn,va]);At(Lp,Ik,[W2,Lp]);At(J3,NK,W2);At(K3,_3,W2);At(fM,Bte,[U2,W2]);At(cM,M2,U2);At(Ite,hM,U2);At(_$,QCe,U2);function Wte(e){return X_.has(e)}function S0(e,t){const n=X_.get(e);return n&&n.metadata[t]}function pM(e){return S0(e,Wn)}function Ip(e){return S0(e,U2)}function A$(e){return S0(e,W2)}function Hte(e){return S0(e,gl)}function i7e(e){return S0(e,dM)}function qte(e){return S0(e,va)}function Gte(e){return S0(e,Lp)}const o7e=["clamp","base","constant","exponent"];function Vte(e,t){const n=t[0],r=mt(t)-n;return function(i){return e(n+i*r)}}function Q3(e,t,n){return vg(gM(t||"rgb",n),e)}function Yte(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Xte(e,t,n){const r=n-t;let i,o,a;return!r||!Number.isFinite(r)?Br(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=At(o)().domain([t,n]).range([0,1]),o7e.forEach(s=>e[s]?a[s](e[s]()):0),a)}function gM(e,t){const n=o3e[a7e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function a7e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const s7e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},u7e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Jte(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Kte(e,t){for(const n in e)mM(n,t(e[n]))}const kB={};Kte(u7e,Jte);Kte(s7e,e=>Q3(Jte(e)));function mM(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(kB[e]=t,this):kB[e]}const iw="symbol",l7e="discrete",c7e="gradient",f7e=e=>se(e)?e.map(t=>String(t)):String(e),d7e=(e,t)=>e[1]-t[1],h7e=(e,t)=>t[1]-e[1];function yM(e,t,n){let r;return xt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(P2(e.domain())/n||1)+1))),ke(t)&&(r=t.step,t=t.interval),$e(t)&&(t=e.type===Kd?Cg(t):e.type==Qd?kg(t):ae("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Qte(e,t,n){let r=e.range(),i=r[0],o=mt(r),a=d7e;if(i>o&&(r=o,o=i,i=r,a=h7e),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],mt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=s)}return t}function vM(e,t){return e.bins?Qte(e,e.bins):e.ticks?e.ticks(t):e.domain()}function Zte(e,t,n,r,i,o){const a=t.type;let s=f7e;if(a===Kd||i===Kd)s=e.timeFormat(r);else if(a===Qd||i===Qd)s=e.utcFormat(r);else if(Hte(a)){const u=e.formatFloat(r);if(o||t.bins)s=u;else{const l=ene(t,n,!1);s=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();s=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(s=e.format(r));return s}function ene(e,t,n){const r=vM(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}const S$={[Lp]:"quantiles",[J3]:"thresholds",[K3]:"domain"},tne={[Lp]:"quantiles",[J3]:"domain"};function nne(e,t){return e.bins?m7e(e.bins):e.type===gl?ene(e,t,!0):S$[e.type]?g7e(e[S$[e.type]]()):vM(e,t)}function p7e(e,t,n){const r=t[tne[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function g7e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function m7e(e){const t=e.slice(0,-1);return t.max=mt(e),t}const y7e=e=>S$[e.type]||e.bins;function rne(e,t,n,r,i,o,a){const s=tne[t.type]&&o!==Kd&&o!==Qd?p7e(e,t,i):Zte(e,t,n,i,o,a);return r===iw&&y7e(t)?v7e(s):r===l7e?b7e(s):x7e(s)}const v7e=e=>(t,n,r)=>{const i=TB(r[n+1],TB(r.max,1/0)),o=MB(t,e),a=MB(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},TB=(e,t)=>e??t,b7e=e=>(t,n)=>n?e(t):null,x7e=e=>t=>e(t),MB=(e,t)=>Number.isFinite(e)?t(e):null;function w7e(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+mt(t),o=i-r;if(e.type===K3){const a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function _7e(e,t,n,r){const i=r||t.type;return $e(n)&&i7e(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Kd?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Qd?e.utcFormat("%A, %d %B %Y, %X UTC"):rne(e,t,5,null,n,r,!0)}function ine(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=_7e(e,t,n.format,n.formatType);if(A$(t.type)){const o=nne(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(Ip(t.type)){const o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(mt(o))}`}}let one=0;function A7e(){one=0}const J_="p_";function bM(e){return e&&e.gradient}function ane(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?J_:"";return i||(i=e.id="gradient_"+one++,r==="radial"?(e.x1=ws(e.x1,.5),e.y1=ws(e.y1,.5),e.r1=ws(e.r1,0),e.x2=ws(e.x2,.5),e.y2=ws(e.y2,.5),e.r2=ws(e.r2,.5),o=J_):(e.x1=ws(e.x1,0),e.y1=ws(e.y1,0),e.x2=ws(e.x2,1),e.y2=ws(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function ws(e,t){return e??t}function sne(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const OB={basis:{curve:$8e},"basis-closed":{curve:C8e},"basis-open":{curve:k8e},bundle:{curve:T8e,tension:"beta",value:.85},cardinal:{curve:M8e,tension:"tension",value:0},"cardinal-open":{curve:N8e,tension:"tension",value:0},"cardinal-closed":{curve:O8e,tension:"tension",value:0},"catmull-rom":{curve:R8e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:F8e,tension:"alpha",value:.5},"catmull-rom-open":{curve:D8e,tension:"alpha",value:.5},linear:{curve:Gk},"linear-closed":{curve:P8e},monotone:{horizontal:I8e,vertical:L8e},natural:{curve:z8e},step:{curve:B8e},"step-after":{curve:U8e},"step-before":{curve:j8e}};function xM(e,t,n){var r=ze(OB,e)&&OB[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const S7e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},E7e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$7e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,C7e=/^((\s+,?\s*)|(,\s*))/,k7e=/^[01]/;function zp(e){const t=[];return(e.match(E7e)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),a=S7e[o],s=T7e(o,a,r.slice(1).trim()),u=s.length;if(u<a||u&&u%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),u!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<u;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function T7e(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?k7e:$7e,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);const u=n.slice(i).match(C7e);u!==null&&(i+=u[0].length)}return r}const Yc=Math.PI/180,M7e=1e-14,sd=Math.PI/2,Ds=Math.PI*2,lh=Math.sqrt(3)/2;var s6={},u6={},une=[].join;function O7e(e,t,n,r,i,o,a,s,u){const l=une.call(arguments);if(s6[l])return s6[l];const c=a*Yc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const p=d*(s-e)*.5+f*(u-t)*.5,g=d*(u-t)*.5-f*(s-e)*.5;let y=p*p/(n*n)+g*g/(r*r);y>1&&(y=Math.sqrt(y),n*=y,r*=y);const v=d/n,b=f/n,x=-f/r,_=d/r,A=v*s+b*u,E=x*s+_*u,$=v*e+b*t,S=x*e+_*t;let O=1/(($-A)*($-A)+(S-E)*(S-E))-.25;O<0&&(O=0);let N=Math.sqrt(O);o==i&&(N=-N);const F=.5*(A+$)-N*(S-E),W=.5*(E+S)+N*($-A),I=Math.atan2(E-W,A-F);let D=Math.atan2(S-W,$-F)-I;D<0&&o===1?D+=Ds:D>0&&o===0&&(D-=Ds);const L=Math.ceil(Math.abs(D/(sd+.001))),j=[];for(let z=0;z<L;++z){const H=I+z*D/L,U=I+(z+1)*D/L;j[z]=[F,W,H,U,n,r,f,d]}return s6[l]=j}function N7e(e){const t=une.call(e);if(u6[t])return u6[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,p=l*s,g=Math.cos(i),y=Math.sin(i),v=Math.cos(o),b=Math.sin(o),x=.5*(o-i),_=Math.sin(x*.5),A=8/3*_*_/Math.sin(x),E=n+g-A*y,$=r+y+A*g,S=n+v,k=r+b,O=S+A*b,N=k-A*v;return u6[t]=[c*E+f*$,d*E+p*$,c*O+f*N,d*O+p*N,c*S+f*k,d*S+p*k]}const jo=["l",0,0,0,0,0,0,0];function R7e(e,t,n){const r=jo[0]=e[0];if(r==="a"||r==="A")jo[1]=t*e[1],jo[2]=n*e[2],jo[3]=e[3],jo[4]=e[4],jo[5]=e[5],jo[6]=t*e[6],jo[7]=n*e[7];else if(r==="h"||r==="H")jo[1]=t*e[1];else if(r==="v"||r==="V")jo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)jo[i]=(i%2==1?t:n)*e[i];return jo}function Py(e,t,n,r,i,o){var a,s=null,u=0,l=0,c=0,f=0,d,p,g,y,v=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var x=0,_=t.length;x<_;++x){switch(a=t[x],(i!==1||o!==1)&&(a=R7e(a,i,o)),a[0]){case"l":u+=a[1],l+=a[2],e.lineTo(u+n,l+r);break;case"L":u=a[1],l=a[2],e.lineTo(u+n,l+r);break;case"h":u+=a[1],e.lineTo(u+n,l+r);break;case"H":u=a[1],e.lineTo(u+n,l+r);break;case"v":l+=a[1],e.lineTo(u+n,l+r);break;case"V":l=a[1],e.lineTo(u+n,l+r);break;case"m":u+=a[1],l+=a[2],v=u,b=l,e.moveTo(u+n,l+r);break;case"M":u=a[1],l=a[2],v=u,b=l,e.moveTo(u+n,l+r);break;case"c":d=u+a[5],p=l+a[6],c=u+a[3],f=l+a[4],e.bezierCurveTo(u+a[1]+n,l+a[2]+r,c+n,f+r,d+n,p+r),u=d,l=p;break;case"C":u=a[5],l=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+a[3],p=l+a[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+a[1]+n,l+a[2]+r,d+n,p+r),c=u+a[1],f=l+a[2],u=d,l=p;break;case"S":d=a[3],p=a[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,p+r),u=d,l=p,c=a[1],f=a[2];break;case"q":d=u+a[3],p=l+a[4],c=u+a[1],f=l+a[2],e.quadraticCurveTo(c+n,f+r,d+n,p+r),u=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),u=d,l=p,c=a[1],f=a[2];break;case"t":d=u+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(c=u,f=l):s[0]==="t"?(c=2*u-g,f=2*l-y):s[0]==="q"&&(c=2*u-c,f=2*l-f),g=c,y=f,e.quadraticCurveTo(c+n,f+r,d+n,p+r),u=d,l=p,c=u+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,p+r),u=d,l=p;break;case"a":NB(e,u+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+l+r]),u+=a[6],l+=a[7];break;case"A":NB(e,u+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),u=a[6],l=a[7];break;case"z":case"Z":u=v,l=b,e.closePath();break}s=a}}function NB(e,t,n,r){const i=O7e(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const a=N7e(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const RB=.5773502691896257,FB={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ds)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n,i=r-n*RB,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n,i=r-n*RB;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lh*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function lne(e){return ze(FB,e)?FB[e]:F7e(e)}var l6={};function F7e(e){if(!ze(l6,e)){const t=zp(e);l6[e]={draw:function(n,r){Py(n,t,0,0,Math.sqrt(r)/2)}}}return l6[e]}const ql=.448084975506;function D7e(e){return e.x}function P7e(e){return e.y}function L7e(e){return e.width}function I7e(e){return e.height}function ku(e){return typeof e=="function"?e:()=>+e}function ax(e,t,n){return Math.max(t,Math.min(e,n))}function cne(){var e=D7e,t=P7e,n=L7e,r=I7e,i=ku(0),o=i,a=i,s=i,u=null;function l(c,f,d){var p,g=f??+e.call(this,c),y=d??+t.call(this,c),v=+n.call(this,c),b=+r.call(this,c),x=Math.min(v,b)/2,_=ax(+i.call(this,c),0,x),A=ax(+o.call(this,c),0,x),E=ax(+a.call(this,c),0,x),$=ax(+s.call(this,c),0,x);if(u||(u=p=g3()),_<=0&&A<=0&&E<=0&&$<=0)u.rect(g,y,v,b);else{var S=g+v,k=y+b;u.moveTo(g+_,y),u.lineTo(S-A,y),u.bezierCurveTo(S-ql*A,y,S,y+ql*A,S,y+A),u.lineTo(S,k-$),u.bezierCurveTo(S,k-ql*$,S-ql*$,k,S-$,k),u.lineTo(g+E,k),u.bezierCurveTo(g+ql*E,k,g,k-ql*E,g,k-E),u.lineTo(g,y+_),u.bezierCurveTo(g,y+ql*_,g+ql*_,y,g+_,y),u.closePath()}if(p)return u=null,p+""||null}return l.x=function(c){return arguments.length?(e=ku(c),l):e},l.y=function(c){return arguments.length?(t=ku(c),l):t},l.width=function(c){return arguments.length?(n=ku(c),l):n},l.height=function(c){return arguments.length?(r=ku(c),l):r},l.cornerRadius=function(c,f,d,p){return arguments.length?(i=ku(c),o=f!=null?ku(f):i,s=d!=null?ku(d):i,a=p!=null?ku(p):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function fne(){var e,t,n,r,i=null,o,a,s,u;function l(f,d,p){const g=p/2;if(o){var y=s-d,v=f-a;if(y||v){var b=Math.hypot(y,v),x=(y/=b)*u,_=(v/=b)*u,A=Math.atan2(v,y);i.moveTo(a-x,s-_),i.lineTo(f-y*g,d-v*g),i.arc(f,d,g,A-Math.PI,A),i.lineTo(a+x,s+_),i.arc(a,s,u,A,A+Math.PI)}else i.arc(f,d,g,0,Ds);i.closePath()}else o=1;a=f,s=d,u=g}function c(f){var d,p=f.length,g,y=!1,v;for(i==null&&(i=v=g3()),d=0;d<=p;++d)!(d<p&&r(g=f[d],d,f))===y&&(y=!y)&&(o=0),y&&l(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(v)return i=null,v+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function H2(e,t){return e??t}const q2=e=>e.x||0,G2=e=>e.y||0,z7e=e=>e.width||0,B7e=e=>e.height||0,j7e=e=>(e.x||0)+(e.width||0),U7e=e=>(e.y||0)+(e.height||0),W7e=e=>e.startAngle||0,H7e=e=>e.endAngle||0,q7e=e=>e.padAngle||0,G7e=e=>e.innerRadius||0,V7e=e=>e.outerRadius||0,Y7e=e=>e.cornerRadius||0,X7e=e=>H2(e.cornerRadiusTopLeft,e.cornerRadius)||0,J7e=e=>H2(e.cornerRadiusTopRight,e.cornerRadius)||0,K7e=e=>H2(e.cornerRadiusBottomRight,e.cornerRadius)||0,Q7e=e=>H2(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Z7e=e=>H2(e.size,64),eke=e=>e.size||1,Z3=e=>e.defined!==!1,tke=e=>lne(e.shape||"circle"),nke=aZ().startAngle(W7e).endAngle(H7e).padAngle(q7e).innerRadius(G7e).outerRadius(V7e).cornerRadius(Y7e),rke=dZ().x(q2).y1(G2).y0(U7e).defined(Z3),ike=dZ().y(G2).x1(q2).x0(j7e).defined(Z3),oke=fZ().x(q2).y(G2).defined(Z3),ake=cne().x(q2).y(G2).width(z7e).height(B7e).cornerRadius(X7e,J7e,K7e,Q7e),ske=E8e().type(tke).size(Z7e),uke=fne().x(q2).y(G2).defined(Z3).size(eke);function wM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function lke(e,t){return nke.context(e)(t)}function cke(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?ike:rke).curve(xM(r,n.orient,n.tension)).context(e)(t)}function fke(e,t){const n=t[0],r=n.interpolate||"linear";return oke.curve(xM(r,n.orient,n.tension)).context(e)(t)}function Og(e,t,n,r){return ake.context(e)(t,n,r)}function dke(e,t){return(t.mark.shape||t.shape).context(e)(t)}function hke(e,t){return ske.context(e)(t)}function pke(e,t){return uke.context(e)(t)}var dne=1;function hne(){dne=1}function _M(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+dne++),a=i.clipping[o]||(i.clipping[o]={id:o});return Qe(r)?a.path=r(null):wM(n)?a.path=Og(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Mn(e){this.clear(),e&&this.union(e)}Mn.prototype={clone(){return new Mn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function e5(e){this.mark=e,this.bounds=this.bounds||new Mn}function t5(e){e5.call(this,e),this.items=this.items||[]}be(t5,e5);function AM(e){this._pending=0,this._loader=e||L3()}function DB(e){e._pending+=1}function N1(e){e._pending-=1}AM.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return DB(t),t._loader.sanitize(e,{context:"href"}).then(n=>(N1(t),n)).catch(()=>(N1(t),null))},loadImage(e){const t=this,n=YCe();return DB(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,a=ze(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>N1(t),o.onerror=()=>N1(t),o.src=i,o}).catch(r=>(N1(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function wl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?gke(t,r):0))}return e}function gke(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const mke=Ds-1e-8;let n5,ow,aw,yd,E$,sw,$$,C$;const fc=(e,t)=>n5.add(e,t),uw=(e,t)=>fc(ow=e,aw=t),PB=e=>fc(e,n5.y1),LB=e=>fc(n5.x1,e),ud=(e,t)=>E$*e+$$*t,ld=(e,t)=>sw*e+C$*t,c6=(e,t)=>fc(ud(e,t),ld(e,t)),f6=(e,t)=>uw(ud(e,t),ld(e,t));function V2(e,t){return n5=e,t?(yd=t*Yc,E$=C$=Math.cos(yd),sw=Math.sin(yd),$$=-sw):(E$=C$=1,yd=sw=$$=0),yke}const yke={beginPath(){},closePath(){},moveTo:f6,lineTo:f6,rect(e,t,n,r){yd?(c6(e+n,t),c6(e+n,t+r),c6(e,t+r),f6(e,t)):(fc(e+n,t+r),uw(e,t))},quadraticCurveTo(e,t,n,r){const i=ud(e,t),o=ld(e,t),a=ud(n,r),s=ld(n,r);IB(ow,i,a,PB),IB(aw,o,s,LB),uw(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=ud(e,t),s=ld(e,t),u=ud(n,r),l=ld(n,r),c=ud(i,o),f=ld(i,o);zB(ow,a,u,c,PB),zB(aw,s,l,f,LB),uw(c,f)},arc(e,t,n,r,i,o){if(r+=yd,i+=yd,ow=n*Math.cos(i)+e,aw=n*Math.sin(i)+t,Math.abs(i-r)>mke)fc(e-n,t-n),fc(e+n,t+n);else{const a=l=>fc(n*Math.cos(l)+e,n*Math.sin(l)+t);let s,u;if(a(r),a(i),i!==r)if(r=r%Ds,r<0&&(r+=Ds),i=i%Ds,i<0&&(i+=Ds),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Ds,s=r-r%sd,u=0;u<4&&s>i;++u,s-=sd)a(s);else for(s=r-r%sd+sd,u=0;u<4&&s<i;++u,s=s+sd)a(s)}}};function IB(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function zB(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u=0,l=0,c;Math.abs(o)>M7e?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),u=(-a+c)/o,l=(-a-c)/o)):u=.5*s/a,0<u&&u<1&&i(BB(u,e,t,n,r)),0<l&&l<1&&i(BB(l,e,t,n,r))}function BB(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var Nc=(Nc=Oc(1,1))?Nc.getContext("2d"):null;const k$=new Mn;function SM(e){return function(t,n){if(!Nc)return!0;e(Nc,t),k$.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=k$;for(let s=i;s<=a;++s)for(let u=r;u<=o;++u)if(Nc.isPointInPath(u,s))return!0;return!1}}function EM(e,t){return t.contains(e.x||0,e.y||0)}function pne(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(k$.set(n,r,n+i,r+o))}function gne(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Bh(t,n,r,i,o)}function Bh(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,p,g,y,v;for(v=0;v<4;++v){if(v===0&&(p=-l,g=-(o-t)),v===1&&(p=l,g=s-t),v===2&&(p=-c,g=-(a-n)),v===3&&(p=c,g=u-n),Math.abs(p)<1e-10&&g<0)return!1;if(y=g/p,p<0){if(y>d)return!1;y>f&&(f=y)}else if(p>0){if(y<f)return!1;y<d&&(d=y)}}return!0}function Bp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ca(e,t){return e??t}function jB(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function vke(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Ca(t.x1,.5)*r,n.y1+Ca(t.y1,.5)*i,Math.max(r,i)*Ca(t.r1,0),n.x1+Ca(t.x2,.5)*r,n.y1+Ca(t.y2,.5)*i,Math.max(r,i)*Ca(t.r2,.5));else{const a=Ca(t.x1,0),s=Ca(t.y1,0),u=Ca(t.x2,1),l=Ca(t.y2,0);if(a===u||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i);else{const c=Oc(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=jB(f.createLinearGradient(a,s,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return jB(o,t.stops)}function mne(e,t,n){return bM(n)?vke(e,n,t.bounds):n}function K_(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=mne(e,t,t.fill),!0):!1}var bke=[];function jp(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=mne(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||bke),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function xke(e,t){return e.zindex-t.zindex||e.index-t.index}function $M(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(xke)}function ns(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=$M(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Q_(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=$M(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function CM(e){return function(t,n,r){ns(n,i=>{(!r||r.intersects(i.bounds))&&yne(e,t,i,i)})}}function wke(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&yne(e,t,n.items[0],n.items)}}function yne(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Bp(t,n),n.fill&&K_(t,n,i)&&t.fill(),n.stroke&&jp(t,n,i)&&t.stroke()))}function r5(e){return e=e||ha,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,Q_(n,s=>{const u=s.bounds;if(!(u&&!u.contains(o,a)||!u)&&e(t,s,r,i,o,a))return s})}}function Y2(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,u=a.stroke&&n.isPointInStroke,l,c;return u&&(l=a.strokeWidth,c=a.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function kM(e){return r5(Y2(e))}function Cd(e,t){return"translate("+e+","+t+")"}function TM(e){return"rotate("+e+")"}function _ke(e,t){return"scale("+e+","+t+")"}function vne(e){return Cd(e.x||0,e.y||0)}function Ake(e){return Cd(e.x||0,e.y||0)+(e.angle?" "+TM(e.angle):"")}function Ske(e){return Cd(e.x||0,e.y||0)+(e.angle?" "+TM(e.angle):"")+(e.scaleX||e.scaleY?" "+_ke(e.scaleX||1,e.scaleY||1):"")}function MM(e,t,n){function r(a,s){a("transform",Ake(s)),a("d",t(null,s))}function i(a,s){return t(V2(a,s.angle),s),wl(a,s).translate(s.x||0,s.y||0)}function o(a,s){var u=s.x||0,l=s.y||0,c=s.angle||0;a.translate(u,l),c&&a.rotate(c*=Yc),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:CM(o),pick:kM(o),isect:n||SM(o)}}var Eke=MM("arc",lke);function $ke(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function Cke(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function kke(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function OM(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(V2(u),c),wl(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const a=Y2(o);function s(u,l,c,f,d,p){var g=l.items,y=l.bounds;return!g||!g.length||y&&!y.contains(d,p)?null:(c*=u.pixelRatio,f*=u.pixelRatio,a(u,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:wke(o),pick:s,isect:EM,tip:n}}var Tke=OM("area",cke,$ke);function Mke(e,t){var n=t.clip;e.save(),Qe(n)?(e.beginPath(),n(e),e.clip()):bne(e,t.group)}function bne(e,t){e.beginPath(),wM(t)?Og(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function xne(e){const t=Ca(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Oke(e,t){e("transform",vne(t))}function wne(e,t){const n=xne(t);e("d",Og(null,t,n,n))}function Nke(e,t){e("class","background"),e("aria-hidden",!0),wne(e,t)}function Rke(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?wne(e,t):e("d","")}function Fke(e,t,n){const r=t.clip?_M(n,t,t):null;e("clip-path",r)}function Dke(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),wl(e,t),e.translate(t.x||0,t.y||0)}function Ly(e,t,n,r){const i=xne(t);e.beginPath(),Og(e,t,(n||0)+i,(r||0)+i)}const Pke=Y2(Ly),Lke=Y2(Ly,!1),Ike=Y2(Ly,!0);function zke(e,t,n,r){ns(t,i=>{const o=i.x||0,a=i.y||0,s=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(Ly(e,i,o,a),Bp(e,i),i.fill&&K_(e,i,u)&&e.fill(),i.stroke&&!s&&jp(e,i,u)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&bne(e,i),n&&n.translate(-o,-a),ns(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&u&&(Ly(e,i,o,a),Bp(e,i),jp(e,i,u)&&e.stroke())})}function Bke(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return Q_(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const p=c+(u.width||0),g=f+(u.height||0),y=u.clip;if(y&&(i<c||i>p||o<f||o>g))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,y&&wM(u)&&!Ike(e,u,a,s))return e.restore(),null;const v=u.strokeForeground,b=t.interactive!==!1;return b&&v&&u.stroke&&Lke(e,u,a,s)?(e.restore(),u):(l=Q_(u,x=>jke(x,c,f)?this.pick(x,n,r,c,f):null),!l&&b&&(u.fill||!v&&u.stroke)&&Pke(e,u,a,s)&&(l=u),e.restore(),l||null)})}function jke(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Uke={type:"group",tag:"g",nested:!1,attr:Oke,bound:Dke,draw:zke,pick:Bke,isect:pne,content:Fke,background:Nke,foreground:Rke},Iy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function NM(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function RM(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function FM(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function i5(e,t){return e==="center"?t/2:e==="right"?t:0}function o5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Wke(e,t,n){const r=NM(t,n),i=RM(t,r),o=FM(t,r),a=(t.x||0)-i5(t.align,i),s=(t.y||0)-o5(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,Iy["xmlns:xlink"],"xlink:href"),e("transform",Cd(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Hke(e,t){const n=t.image,r=RM(t,n),i=FM(t,n),o=(t.x||0)-i5(t.align,r),a=(t.y||0)-o5(t.baseline,i);return e.set(o,a,o+r,a+i)}function qke(e,t,n){ns(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=NM(r,this);let o=RM(r,i),a=FM(r,i);if(o===0||a===0)return;let s=(r.x||0)-i5(r.align,o),u=(r.y||0)-o5(r.baseline,a),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(a-d)/2,a=d):(d=a*c,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Bp(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,u,o,a))})}var Gke={type:"image",tag:"image",nested:!1,attr:Wke,bound:Hke,draw:qke,pick:r5(),isect:ha,get:NM,xOffset:i5,yOffset:o5},Vke=OM("line",fke,Cke);function Yke(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Ske(t)),e("d",t.path)}function lw(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*Yc,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=zp(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Py(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Py(e,u,r,i,o,a)}function Xke(e,t){return lw(V2(e,t.angle),t)?e.set(0,0,0,0):wl(e,t,!0)}var Jke={type:"path",tag:"path",nested:!1,attr:Yke,bound:Xke,draw:CM(lw),pick:kM(lw),isect:SM(lw)};function Kke(e,t){e("d",Og(null,t))}function Qke(e,t){var n,r;return wl(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function UB(e,t){e.beginPath(),Og(e,t)}var Zke={type:"rect",tag:"path",nested:!1,attr:Kke,bound:Qke,draw:CM(UB),pick:kM(UB),isect:pne};function eTe(e,t){e("transform",vne(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function tTe(e,t){var n,r;return wl(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function _ne(e,t,n){var r,i,o,a;return t.stroke&&jp(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function nTe(e,t,n){ns(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&_ne(e,r,i)&&(Bp(e,r),e.stroke())}})}function rTe(e,t,n,r){return e.isPointInStroke?_ne(e,t,1)&&e.isPointInStroke(n,r):!1}var iTe={type:"rule",tag:"line",nested:!1,attr:eTe,bound:tTe,draw:nTe,pick:r5(rTe),isect:gne},oTe=MM("shape",dke),aTe=MM("symbol",hke,EM);const WB=see();var yo={height:su,measureWidth:DM,estimateWidth:Z_,width:Z_,canvas:Ane};Ane(!0);function Ane(e){yo.width=e&&Nc?DM:Z_}function Z_(e,t){return Sne(Jc(e,t),su(e))}function Sne(e,t){return~~(.8*e.length*t)}function DM(e,t){return su(e)<=0||!(t=Jc(e,t))?0:Ene(t,a5(e))}function Ene(e,t){const n=`(${t}) ${e}`;let r=WB.get(n);return r===void 0&&(Nc.font=t,r=Nc.measureText(e).width,WB.set(n,r)),r}function su(e){return e.fontSize!=null?+e.fontSize||0:11}function Xc(e){return e.lineHeight!=null?e.lineHeight:su(e)+2}function sTe(e){return se(e)?e.length>1?e:e[0]:e}function X2(e){return sTe(e.lineBreak&&e.text&&!se(e.text)?e.text.split(e.lineBreak):e.text)}function PM(e){const t=X2(e);return(se(t)?t.length-1:0)*Xc(e)}function Jc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?lTe(e,n):n}function uTe(e){if(yo.width===DM){const t=a5(e);return n=>Ene(n,t)}else if(yo.width===Z_){const t=su(e);return n=>Sne(n,t)}else return t=>yo.width(e,t)}function lTe(e,t){var n=+e.limit,r=uTe(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",a=0,s=t.length,u;if(n-=r(i),o){for(;a<s;)u=a+s>>>1,r(t.slice(u))>n?a=u+1:s=u;return i+t.slice(a)}else{for(;a<s;)u=1+(a+s>>>1),r(t.slice(0,u))<n?a=u:s=u-1;return t.slice(0,a)+i}}function J2(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function a5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+su(e)+"px "+J2(e,t)}function LM(e){var t=e.baseline,n=su(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Xc(e):t==="line-bottom"?.29*n-.5*Xc(e):0)}const cTe={left:"start",center:"middle",right:"end"},Hm=new Mn;function s5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-sd,t+=r*Math.cos(i),n+=r*Math.sin(i)),Hm.x1=t,Hm.y1=n,Hm}function fTe(e,t){var n=t.dx||0,r=(t.dy||0)+LM(t),i=s5(t),o=i.x1,a=i.y1,s=t.angle||0,u;e("text-anchor",cTe[t.align]||"start"),s?(u=Cd(o,a)+" "+TM(s),(n||r)&&(u+=" "+Cd(n,r))):u=Cd(o+n,a+r),e("transform",u)}function IM(e,t,n){var r=yo.height(t),i=t.align,o=s5(t),a=o.x1,s=o.y1,u=t.dx||0,l=(t.dy||0)+LM(t)-Math.round(.8*r),c=X2(t),f;if(se(c)?(r+=Xc(t)*(c.length-1),f=c.reduce((d,p)=>Math.max(d,yo.width(t,p)),0)):f=yo.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=a,l+=s,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Yc,a,s);else if(n===2)return e.rotatedPoints(t.angle*Yc,a,s);return e}function dTe(e,t,n){ns(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=a5(r),e.textAlign=r.align||"left",o=s5(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*Yc),a=s=0),a+=r.dx||0,s+=(r.dy||0)+LM(r),c=X2(r),Bp(e,r),se(c))for(l=Xc(r),u=0;u<c.length;++u)f=Jc(r,c[u]),r.fill&&K_(e,r,i)&&e.fillText(f,a,s),r.stroke&&jp(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=Jc(r,c),r.fill&&K_(e,r,i)&&e.fillText(f,a,s),r.stroke&&jp(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function hTe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=s5(t),s=a.x1,u=a.y1,l=IM(Hm,t,1),c=-t.angle*Yc,f=Math.cos(c),d=Math.sin(c),p=f*i-d*o+(s-f*s+d*u),g=d*i+f*o+(u-d*s-f*u);return l.contains(p,g)}function pTe(e,t){const n=IM(Hm,e,2);return Bh(t,n[0],n[1],n[2],n[3])||Bh(t,n[0],n[1],n[4],n[5])||Bh(t,n[4],n[5],n[6],n[7])||Bh(t,n[2],n[3],n[6],n[7])}var gTe={type:"text",tag:"text",nested:!1,attr:fTe,bound:IM,draw:dTe,pick:r5(hTe),isect:pTe},mTe=OM("trail",pke,kke),Ao={arc:Eke,area:Tke,group:Uke,image:Gke,line:Vke,path:Jke,rect:Zke,rule:iTe,shape:oTe,symbol:aTe,text:gTe,trail:mTe};function T$(e,t,n){var r=Ao[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Mn),e,n)}var HB={mark:null};function $ne(e,t,n){var r=Ao[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,u,l,c;if(r.nested)return a?l=o[0]:(HB.mark=e,l=HB),c=T$(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Mn,a)for(s=0,u=o.length;s<u;++s)t.union(T$(o[s],i,n));return e.bounds=t}const yTe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Cne(e,t){return JSON.stringify(e,yTe,t)}function kne(e){const t=typeof e=="string"?JSON.parse(e):e;return Tne(t)}function Tne(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Tne(n[i]);return t&&$ne(e),e}function zM(e){arguments.length?this.root=kne(e):(this.root=Mne({marktype:"group",name:"root",role:"frame"}),this.root.items=[new t5(this.root)])}zM.prototype={toJSON(e){return Cne(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=Mne(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function Mne(e,t){const n={bounds:new Mn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function dc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function BM(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Pn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=dc(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Go(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function One(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function u5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function vTe(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=Ao[i.marktype]).tip){for(a=u5(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function Kc(e,t){this._active=null,this._handlers={},this._loader=e||L3(),this._tooltip=t||bTe}function bTe(e,t,n,r){e.element().setAttribute("title",r||"")}Kc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=dc(null,"a");for(const a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=vTe(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}};function To(e){this._el=null,this._bgcolor=null,this._loader=new AM(e)}To.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const xTe="keydown",wTe="keypress",_Te="keyup",Nne="dragenter",cw="dragleave",Rne="dragover",M$="pointerdown",ATe="pointerup",eA="pointermove",qm="pointerout",Fne="pointerover",O$="mousedown",STe="mouseup",Dne="mousemove",N$="mouseout",Pne="mouseover",tA="click",ETe="dblclick",$Te="wheel",Lne="mousewheel",nA="touchstart",rA="touchmove",iA="touchend",CTe=[xTe,wTe,_Te,Nne,cw,Rne,M$,ATe,eA,qm,Fne,O$,STe,Dne,N$,Pne,tA,ETe,$Te,Lne,nA,rA,iA],R$=eA,zy=qm,F$=tA;function Qc(e,t){Kc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const kTe=e=>e===nA||e===rA||e===iA?[nA,rA,iA]:[e];function qB(e,t){kTe(t).forEach(n=>TTe(e,n))}function TTe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function bm(e,t,n){t.forEach(r=>e.fire(r,n))}function GB(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?bm(this,e,r):((!i||!i.exit)&&bm(this,n,r),this._active=o,bm(this,t,r),bm(this,e,r))}}function VB(e){return function(t){bm(this,e,t),this._active=null}}be(Qc,Kc,{initialize(e,t,n){return this._canvas=e&&BM(e,"canvas"),[tA,O$,M$,eA,qm,cw].forEach(r=>qB(this,r)),Kc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:CTe,DOMMouseScroll(e){this.fire(Lne,e)},pointermove:GB([eA,Dne],[Fne,Pne],[qm,N$]),dragover:GB([Rne],[Nne],[cw]),pointerout:VB([qm,N$]),dragleave:VB([cw]),pointerdown(e){this._down=this._active,this.fire(M$,e)},mousedown(e){this._down=this._active,this.fire(O$,e)},click(e){this._down===this._active&&(this.fire(tA,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nA,e,!0)},touchmove(e){this.fire(rA,e,!0)},touchend(e){this.fire(iA,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===F$&&r&&r.href?this.handleHref(t,r,r.href):(e===R$||e===zy)&&this.handleTooltip(t,r,e!==zy),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(qB(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=u5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return Ao[e.marktype].pick.call(this,o,e,t,n,r,i)}});function MTe(){return typeof window<"u"&&window.devicePixelRatio||1}var OTe=MTe();function NTe(e,t,n,r,i,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),u=a?OTe:i;e.width=t*u,e.height=n*u;for(const l in o)s[l]=o[l];return a&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function By(e){To.call(this,e),this._options={},this._redraw=!1,this._dirty=new Mn,this._tempb=new Mn}const YB=To.prototype,RTe=(e,t,n)=>new Mn().set(0,0,t,n).translate(-e[0],-e[1]);function FTe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}be(By,To,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Oc(1,1,this._options.type),e&&this._canvas&&(Go(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),YB.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(YB.resize.call(this,e,t,n,r),this._canvas)NTe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||ae("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=RTe(r,i,o);n.save();const u=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):FTe(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,u,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=Ao[t.marktype];t.clip&&Mke(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function jM(e,t){Kc.call(this,e,t);const n=this;n._hrefHandler=D$(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=D$(n,(r,i)=>{n.handleTooltip(r,i,r.type!==zy)})}const D$=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};be(jM,Kc,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(F$,this._hrefHandler),r.removeEventListener(R$,this._tooltipHandler),r.removeEventListener(zy,this._tooltipHandler)),this._svg=r=e&&BM(e,"svg"),r&&(r.addEventListener(F$,this._hrefHandler),r.addEventListener(R$,this._tooltipHandler),r.addEventListener(zy,this._tooltipHandler)),Kc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:D$(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const Ine="aria-hidden",UM="aria-label",WM="role",HM="aria-roledescription",zne="graphics-object",qM="graphics-symbol",Bne=(e,t,n)=>({[WM]:e,[HM]:t,[UM]:n||void 0}),DTe=es(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),XB={axis:{desc:"axis",caption:ITe},legend:{desc:"legend",caption:zTe},"title-text":{desc:"title",caption:e=>`Title text '${KB(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${KB(e)}'`}},JB={ariaRole:WM,ariaRoleDescription:HM,description:UM};function jne(e,t){const n=t.aria===!1;if(e(Ine,n||void 0),n||t.description==null)for(const r in JB)e(JB[r],void 0);else{const r=t.mark.marktype;e(UM,t.description),e(WM,t.ariaRole||(r==="group"?zne:qM)),e(HM,t.ariaRoleDescription||`${r} mark`)}}function Une(e){return e.aria===!1?{[Ine]:!0}:DTe[e.role]?null:XB[e.role]?LTe(e,XB[e.role]):PTe(e)}function PTe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Bne(n?zne:qM,`${t} mark container`,e.description)}function LTe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Bne(t.role||qM,t.desc,n.description||r(n))}catch{return null}}function KB(e){return Ee(e.text).join(" ")}function ITe(e){const t=e.datum,n=e.orient,r=t.title?Wne(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ip(s)?"discrete":s} scale with ${ine(a,o,e)}`}function zTe(e){const t=e.datum,n=t.title?Wne(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return jTe(r)+(n?` titled '${n}'`:"")+` for ${BTe(o)} with ${ine(u,s,e)}`}function Wne(e){try{return Ee(mt(e.items).items[0].text).join(" ")}catch{return null}}function BTe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+mt(e)}function jTe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Hne=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),UTe=e=>Hne(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function GM(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},a=(u,l)=>(l!=null&&(t+=` ${u}="${UTe(l)}"`),s),s={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const p in d)a(p,d[p]);return s},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),s},attr:a,text:u=>(n+=Hne(u),s),toString:()=>e};return s}const qne=e=>Gne(GM(),e)+"";function Gne(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Gne(e,r)}return e.close()}const oA={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aA={blend:"mix-blend-mode"},Vne={fill:"none","stroke-miterlimit":10},R1=0,QB="http://www.w3.org/2000/xmlns/",Dn=Iy.xmlns;function l5(e){To.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const d6=To.prototype;be(l5,To,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Pn(e,0,"svg",Dn),this._svg.setAttributeNS(QB,"xmlns",Dn),this._svg.setAttributeNS(QB,"xmlns:xlink",Iy["xmlns:xlink"]),this._svg.setAttribute("version",Iy.version),this._svg.setAttribute("class","marks"),Go(e,1),this._root=Pn(this._svg,R1,"g",Dn),hc(this._root,Vne),Go(this._svg,R1+1)),this.background(this._bgcolor),d6.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),d6.background.apply(this,arguments)},resize(e,t,n,r){return d6.resize.call(this,e,t,n,r),this._svg&&(hc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Pn(e,R1,"rect",Dn),hc(n,{width:this._width,height:this._height,fill:t}));const r=qne(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Go(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Ao[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,ZB(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,ZB(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,o=t.marktype,a=Ao[o],s=t.interactive===!1?"none":null,u=a.tag==="g",l=ej(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Go(l,0),t._svg;l.setAttribute("class",One(t));const c=Une(t);for(const g in c)Jr(l,g,c[g]);u||Jr(l,"pointer-events",s),Jr(l,"clip-path",t.clip?_M(this,t,t.group):null);let f=null,d=0;const p=g=>{const y=this.isDirty(g),v=ej(g,l,f,a.tag,i);y&&(this._update(a,v,g),u&&qTe(this,v,g,r)),f=v,++d};return a.nested?t.items.length&&p(t.items[0]):ns(t,p),Go(l,d),l},_update(e,t,n){Qu=t,kr=t.__values__,jne(Gm,n),e.attr(Gm,n,this);const r=VTe[e.type];r&&r.call(this,e,t,n),Qu&&this.style(Qu,n)},style(e,t){if(t!=null){for(const n in oA){let r=n==="font"?J2(t):t[n];if(r===kr[n])continue;const i=oA[n];r==null?e.removeAttribute(i):(bM(r)&&(r=ane(r,this._defs.gradient,Yne())),e.setAttribute(i,r+"")),kr[n]=r}for(const n in aA)fw(e,aA[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Pn(e,R1+1,"defs",Dn)),r=WTe(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Pn(e,R1+1,"defs",Dn)),r=HTe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Go(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function ZB(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function WTe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=Pn(e,n++,"pattern",Dn);hc(a,{id:J_+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Pn(a,0,"rect",Dn),hc(a,{width:1,height:1,fill:`url(${Yne()}#${t.id})`}),e=Pn(e,n++,"radialGradient",Dn),hc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Pn(e,n++,"linearGradient",Dn),hc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Pn(e,r,"stop",Dn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Go(e,r),n}function HTe(e,t,n){let r;return e=Pn(e,n,"clipPath",Dn),e.setAttribute("id",t.id),t.path?(r=Pn(e,0,"path",Dn),r.setAttribute("d",t.path)):(r=Pn(e,0,"rect",Dn),hc(r,{x:0,y:0,width:t.width,height:t.height})),Go(e,1),n+1}function qTe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;ns(n,a=>{i=e.mark(t,a,i,r),++o}),Go(t,1+o)}function ej(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=dc(a,r,Dn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const s=dc(a,"path",Dn);o.appendChild(s),s.__data__=e;const u=dc(a,"g",Dn);o.appendChild(u),u.__data__=e;const l=dc(a,"path",Dn);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||GTe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function GTe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Qu=null,kr=null;const VTe={group(e,t,n){const r=Qu=t.childNodes[2];kr=r.__values__,e.foreground(Gm,n,this),kr=t.__values__,Qu=t.childNodes[1],e.content(Gm,n,this);const i=Qu=t.childNodes[0];e.background(Gm,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==kr.events&&(Jr(r,"pointer-events",o),Jr(i,"pointer-events",o),kr.events=o),n.strokeForeground&&n.stroke){const a=n.fill;Jr(r,"display",null),this.style(i,n),Jr(i,"stroke",null),a&&(n.fill=null),kr=r.__values__,this.style(r,n),a&&(n.fill=a),Qu=null}else Jr(r,"display","none")},image(e,t,n){n.smooth===!1?(fw(t,"image-rendering","optimizeSpeed"),fw(t,"image-rendering","pixelated")):fw(t,"image-rendering",null)},text(e,t,n){const r=X2(n);let i,o,a,s;se(r)?(o=r.map(u=>Jc(n,u)),i=o.join(`
`),i!==kr.text&&(Go(t,0),a=t.ownerDocument,s=Xc(n),o.forEach((u,l)=>{const c=dc(a,"tspan",Dn);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),kr.text=i)):(o=Jc(n,r),o!==kr.text&&(t.textContent=o,kr.text=o)),Jr(t,"font-family",J2(n)),Jr(t,"font-size",su(n)+"px"),Jr(t,"font-style",n.fontStyle),Jr(t,"font-variant",n.fontVariant),Jr(t,"font-weight",n.fontWeight)}};function Gm(e,t,n){t!==kr[e]&&(n?YTe(Qu,e,t,n):Jr(Qu,e,t),kr[e]=t)}function fw(e,t,n){n!==kr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),kr[t]=n)}function hc(e,t){for(const n in t)Jr(e,n,t[n])}function Jr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function YTe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Yne(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function VM(e){To.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}be(VM,To,{svg(){return this._text},_render(e){const t=GM();t.open("svg",Ke({},Iy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Vne,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Ao[t.marktype],r=n.tag,i=[jne,n.attr];e.open("g",{class:One(t),"clip-path":t.clip?_M(this,t,t.group):null},Une(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){const u=X2(a);if(se(u)){const l={x:0,dy:Xc(a)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(Jc(a,u[c])).close()}else e.text(Jc(a,u))}else if(r==="g"){const u=a.strokeForeground,l=a.fill,c=a.stroke;u&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),ns(a,f=>this.mark(e,f)),e.close(),u&&c?(l&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):ns(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(a,s,u,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&XTe(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:J_+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function XTe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=J2(t),e["font-size"]=su(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in oA){let s=t[a];const u=oA[a];s==="transparent"&&(u==="fill"||u==="stroke")||s!=null&&(bM(s)&&(s=ane(s,i.gradient,"")),e[u]=s)}for(const a in aA){const s=t[a];s!=null&&(o=o||[],o.push(`${aA[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}const Fa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function JTe(e){Fa.svgMarkTypes=e.svgMarkTypes??["text"],Fa.svgOnTop=e.svgOnTop??!0,Fa.debug=e.debug??!1}function sA(e){To.call(this,e),this._svgRenderer=new l5(e),this._canvasRenderer=new By(e)}const tj=To.prototype;be(sA,To,{initialize(e,t,n,r,i){this._root_el=Pn(e,0,"div");const o=Pn(this._root_el,0,"div"),a=Pn(this._root_el,1,"div");return this._root_el.style.position="relative",Fa.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Fa.svgOnTop?a:o,this._canvasEl=Fa.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),tj.initialize.call(this,e,t,n,r,i)},dirty(e){return Fa.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Fa.svgMarkTypes.includes(i));this._svgRenderer.render(e,Fa.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return tj.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Fa.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function YM(e,t){Qc.call(this,e,t)}be(YM,Qc,{initialize(e,t,n){const r=Pn(Pn(e,0,"div"),Fa.svgOnTop?0:1,"div");return Qc.prototype.initialize.call(this,r,t,n)}});const Xne="canvas",Jne="hybrid",Kne="png",Qne="svg",Zne="none",pc={Canvas:Xne,PNG:Kne,SVG:Qne,Hybrid:Jne,None:Zne},Zd={};Zd[Xne]=Zd[Kne]={renderer:By,headless:By,handler:Qc};Zd[Qne]={renderer:l5,headless:VM,handler:jM};Zd[Jne]={renderer:sA,headless:sA,handler:YM};Zd[Zne]={};function c5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Zd[e]=t,this):Zd[e]}function ere(e,t,n){const r=[],i=new Mn().union(t),o=e.marktype;return o?tre(e,i,n,r):o==="group"?nre(e,i,n,r):ae("Intersect scene must be mark node or group item.")}function tre(e,t,n,r){if(KTe(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if(o==="group")for(;s<a;++s)nre(i[s],t,n,r);else for(const u=Ao[o].isect;s<a;++s){const l=i[s];rre(l,t,u)&&r.push(l)}}return r}function KTe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function nre(e,t,n,r){n&&n(e.mark)&&rre(e,t,Ao.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let u=0;u<o;++u)tre(i[u],t,n,r);t.translate(a,s)}return r}function rre(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const h6=new Mn;function ire(e){const t=e.clip;if(Qe(t))t(V2(h6.clear()));else if(t)h6.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(h6)}const QTe=1e-9;function XM(e,t,n){return e===t?!0:n==="path"?ore(e,t):e instanceof Date&&t instanceof Date?+e==+t:xt(e)&&xt(t)?Math.abs(e-t)<=QTe:!e||!t||!ke(e)&&!ke(t)?e==t:ZTe(e,t)}function ore(e,t){return XM(zp(e),zp(t))}function ZTe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!XM(e[i],t[i],i))return!1;return typeof e==typeof t}function eMe(){hne(),A7e()}const Up="top",Ba="left",Ua="right",Zc="bottom",tMe="top-left",nMe="top-right",rMe="bottom-left",iMe="bottom-right",JM="start",P$="middle",Qr="end",oMe="x",aMe="y",f5="group",KM="axis",QM="title",sMe="frame",uMe="scope",ZM="legend",are="row-header",sre="row-footer",ure="row-title",lre="column-header",cre="column-footer",fre="column-title",lMe="padding",cMe="symbol",dre="fit",hre="fit-x",pre="fit-y",fMe="pad",eO="none",sx="all",L$="each",tO="flush",gc="column",mc="row";function gre(e){ee.call(this,null,e)}be(gre,ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Ao[i],a=o.bound;let s=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=ux(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===f5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(ux(l,a))),r.role){case KM:case ZM:case QM:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(ux(l,a))}),t.visit(t.MOD,l=>{u=u||s.alignsWith(l.bounds),n.dirty(l),s.union(ux(l,a))}),u&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return ire(r),t.modifies("bounds")}});function ux(e,t,n){return t(e.bounds.clear(),e,n)}const nj=":vega_identifier:";function nO(e){ee.call(this,0,e)}nO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(nO,ee,{transform(e,t){const n=dMe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function dMe(e){return e._signals[nj]||(e._signals[nj]=e.add(0))}function mre(e){ee.call(this,null,e)}be(mre,ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,hMe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===f5?t5:e5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function hMe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function yre(e){ee.call(this,null,e)}const rj={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!vre(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},vre=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),ij=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(vre(i,o=e[n].bounds,t))return!0},pMe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},gMe=(e,t,n)=>{var r=e.range(),i=new Mn;return t===Up||t===Zc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},oj=e=>(e.forEach(t=>t.opacity=1),e),aj=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(yre,ee,{transform(e,t){const n=rj[e.method]||rj.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(oj(i),t=aj(t,e)),t;if(i=i.filter(pMe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=oj(i),t=aj(t,e),o.length>=3&&ij(o,r)){do o=n(o,r);while(o.length>=3&&ij(o,r));o.length<3&&!mt(i).opacity&&(o.length>1&&(mt(o).opacity=0),mt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=gMe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));const s=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&s.union(u.bounds)}),t}});function bre(e){ee.call(this,null,e)}be(bre,ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Cr=new Mn;function jh(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mMe(e){var t=e.items[0].orient;return t===Ba||t===Ua}function yMe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function vMe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,u=yMe(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,g=o.title&&i.items[u[2]].items[0],y=i.titlePadding,v=i.bounds,b=g&&PM(g),x=0,_=0,A,E;switch(Cr.clear().union(v),v.clear(),(A=u[0])>-1&&v.union(i.items[A].bounds),(A=u[1])>-1&&v.union(i.items[A].bounds),s){case Up:x=f||0,_=-c,E=Math.max(d,Math.min(p,-v.y1)),v.add(0,-E).add(l,0),g&&lx(e,g,E,y,b,0,-1,v);break;case Ba:x=-c,_=f||0,E=Math.max(d,Math.min(p,-v.x1)),v.add(-E,0).add(0,l),g&&lx(e,g,E,y,b,1,-1,v);break;case Ua:x=n+c,_=f||0,E=Math.max(d,Math.min(p,v.x2)),v.add(0,0).add(E,l),g&&lx(e,g,E,y,b,1,1,v);break;case Zc:x=f||0,_=r+c,E=Math.max(d,Math.min(p,v.y2)),v.add(0,0).add(l,E),g&&lx(e,g,E,y,0,0,1,v);break;default:x=i.x,_=i.y}return wl(v.translate(x,_),i),jh(i,"x",x+a)|jh(i,"y",_+a)&&(i.bounds=Cr,e.dirty(i),i.bounds=v,e.dirty(i)),i.mark.bounds.clear().union(v)}function lx(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const l=a*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}s.union(u)}const sj=(e,t)=>Math.floor(Math.min(e,t)),uj=(e,t)=>Math.ceil(Math.max(e,t));function bMe(e){var t=e.items,n=t.length,r=0,i,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===f5)switch(i.role){case KM:case ZM:case QM:break;case are:a.rowheaders.push(...o);break;case sre:a.rowfooters.push(...o);break;case lre:a.colheaders.push(...o);break;case cre:a.colfooters.push(...o);break;case ure:a.rowtitle=o[0];break;case fre:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function xMe(e){return new Mn().set(0,0,e.width||0,e.height||0)}function wMe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function nn(e,t,n){const r=ke(e)?e[t]:e;return r??(n!==void 0?n:0)}function lj(e){return e<0?Math.ceil(-e):0}function xre(e,t,n){var r=!n.nodirty,i=n.bounds===tO?xMe:wMe,o=Cr.set(0,0,0,0),a=nn(n.align,gc),s=nn(n.align,mc),u=nn(n.padding,gc),l=nn(n.padding,mc),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,p=Array(d),g=Array(c),y=0,v=Array(d),b=Array(f),x=0,_=Array(d),A=Array(d),E=Array(d),$,S,k,O,N,F,W,I,M,D,L;for(S=0;S<c;++S)g[S]=0;for(S=0;S<f;++S)b[S]=0;for(S=0;S<d;++S)F=t[S],N=E[S]=i(F),F.x=F.x||0,_[S]=0,F.y=F.y||0,A[S]=0,k=S%c,O=~~(S/c),y=Math.max(y,W=Math.ceil(N.x2)),x=Math.max(x,I=Math.ceil(N.y2)),g[k]=Math.max(g[k],W),b[O]=Math.max(b[O],I),p[S]=u+lj(N.x1),v[S]=l+lj(N.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(p[S]=0),S<c&&(v[S]=0);if(a===L$)for(k=1;k<c;++k){for(L=0,S=k;S<d;S+=c)L<p[S]&&(L=p[S]);for(S=k;S<d;S+=c)p[S]=L+g[k-1]}else if(a===sx){for(L=0,S=0;S<d;++S)S%c&&L<p[S]&&(L=p[S]);for(S=0;S<d;++S)S%c&&(p[S]=L+y)}else for(a=!1,k=1;k<c;++k)for(S=k;S<d;S+=c)p[S]+=g[k-1];if(s===L$)for(O=1;O<f;++O){for(L=0,S=O*c,$=S+c;S<$;++S)L<v[S]&&(L=v[S]);for(S=O*c;S<$;++S)v[S]=L+b[O-1]}else if(s===sx){for(L=0,S=c;S<d;++S)L<v[S]&&(L=v[S]);for(S=c;S<d;++S)v[S]=L+x}else for(s=!1,O=1;O<f;++O)for(S=O*c,$=S+c;S<$;++S)v[S]+=b[O-1];for(M=0,S=0;S<d;++S)M=p[S]+(S%c?M:0),_[S]+=M-t[S].x;for(k=0;k<c;++k)for(D=0,S=k;S<d;S+=c)D+=v[S],A[S]+=D-t[S].y;if(a&&nn(n.center,gc)&&f>1)for(S=0;S<d;++S)N=a===sx?y:g[S%c],M=N-E[S].x2-t[S].x-_[S],M>0&&(_[S]+=M/2);if(s&&nn(n.center,mc)&&c!==1)for(S=0;S<d;++S)N=s===sx?x:b[~~(S/c)],D=N-E[S].y2-t[S].y-A[S],D>0&&(A[S]+=D/2);for(S=0;S<d;++S)o.union(E[S].translate(_[S],A[S]));switch(M=nn(n.anchor,oMe),D=nn(n.anchor,aMe),nn(n.anchor,gc)){case Qr:M-=o.width();break;case P$:M-=o.width()/2}switch(nn(n.anchor,mc)){case Qr:D-=o.height();break;case P$:D-=o.height()/2}for(M=Math.round(M),D=Math.round(D),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)F=t[S],F.x+=_[S]+=M,F.y+=A[S]+=D,o.union(F.mark.bounds.union(F.bounds.translate(_[S],A[S]))),r&&e.dirty(F);return o}function _Me(e,t,n){var r=bMe(t),i=r.marks,o=n.bounds===tO?AMe:SMe,a=n.offset,s=n.columns||i.length,u=s<=0?1:Math.ceil(i.length/s),l=u*s,c,f,d,p,g,y,v;const b=xre(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(y=nn(n.headerBand,mc,null),c=cx(e,r.rowheaders,i,s,u,-nn(a,"rowHeader"),sj,0,o,"x1",0,s,1,y)),r.colheaders&&(y=nn(n.headerBand,gc,null),f=cx(e,r.colheaders,i,s,s,-nn(a,"columnHeader"),sj,1,o,"y1",0,1,s,y)),r.rowfooters&&(y=nn(n.footerBand,mc,null),d=cx(e,r.rowfooters,i,s,u,nn(a,"rowFooter"),uj,0,o,"x2",s-1,s,1,y)),r.colfooters&&(y=nn(n.footerBand,gc,null),p=cx(e,r.colfooters,i,s,s,nn(a,"columnFooter"),uj,1,o,"y2",l-s,1,s,y)),r.rowtitle&&(g=nn(n.titleAnchor,mc),v=nn(a,"rowTitle"),v=g===Qr?d+v:c-v,y=nn(n.titleBand,mc,.5),cj(e,r.rowtitle,v,0,b,y)),r.coltitle&&(g=nn(n.titleAnchor,gc),v=nn(a,"columnTitle"),v=g===Qr?p+v:f-v,y=nn(n.titleBand,gc,.5),cj(e,r.coltitle,v,1,b,y))}function AMe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function SMe(e,t){return e.bounds[t]}function cx(e,t,n,r,i,o,a,s,u,l,c,f,d,p){var g=n.length,y=0,v=0,b,x,_,A,E,$,S,k,O;if(!g)return y;for(b=c;b<g;b+=f)n[b]&&(y=a(y,u(n[b],l)));if(!t.length)return y;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),y+=o,x=0,A=t.length;x<A;++x)e.dirty(t[x]),t[x].mark.bounds.clear();for(b=c,x=0,A=t.length;x<A;++x,b+=f){for($=t[x],E=$.mark.bounds,_=b;_>=0&&(S=n[_])==null;_-=d);s?(k=p==null?S.x:Math.round(S.bounds.x1+p*S.bounds.width()),O=y):(k=y,O=p==null?S.y:Math.round(S.bounds.y1+p*S.bounds.height())),E.union($.bounds.translate(k-($.x||0),O-($.y||0))),$.x=k,$.y=O,e.dirty($),v=a(v,E[l])}return v}function cj(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function EMe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function $Me(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function CMe(e,t,n,r,i,o,a){const s=EMe(n,t),u=$Me(e,s("offset",0)),l=s("anchor",JM),c=l===Qr?1:l===P$?.5:0,f={align:L$,bounds:s("bounds",tO),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case Ba:f.anchor={x:Math.floor(r.x1)-u,column:Qr,y:c*(a||r.height()+2*r.y1),row:l};break;case Ua:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case Up:f.anchor={y:Math.floor(i.y1)-u,row:Qr,x:c*(o||i.width()+2*i.x1),column:l};break;case Zc:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case tMe:f.anchor={x:u,y:u};break;case nMe:f.anchor={x:o-u,y:u,column:Qr};break;case rMe:f.anchor={x:u,y:a-u,row:Qr};break;case iMe:f.anchor={x:o-u,y:a-u,column:Qr,row:Qr};break}return f}function kMe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),MMe(e,n,n.items[0].items[0]),o=TMe(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===cMe&&OMe(n.items[0].items[0].items[0].items),i!==eO&&(n.x=a=0,n.y=s=0),n.width=u,n.height=l,wl(o.set(a,s,a+u,s+l),n),n.mark.bounds.clear().union(o),n}function TMe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function MMe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&F1(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case Ba:i+=Math.ceil(a.bounds.width())+u;break;case Ua:case Zc:break;default:o+=a.bounds.height()+u}switch((i||o)&&F1(e,n,i,o),a.orient){case Ba:c+=ch(t,n,a,s,1,1);break;case Ua:l+=ch(t,n,a,Qr,0,0)+u,c+=ch(t,n,a,s,1,1);break;case Zc:l+=ch(t,n,a,s,0,0),c+=ch(t,n,a,Qr,-1,0,1)+u;break;default:l+=ch(t,n,a,s,0,0)}(l||c)&&F1(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(F1(e,n,-l,0),F1(e,a,-l,0))}}function ch(e,t,n,r,i,o,a){const s=e.datum.type!=="symbol",u=n.datum.vgrad,l=s&&(o||!u)&&!a?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,p=i<=0?0:PM(n);return Math.round(r===JM?f:r===Qr?d-p:.5*(c-p))}function F1(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function OMe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function NMe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===Ba||s===Ua?r:n,g=0,y=0,v=0,b=0,x=0,_;if(a!==f5?s===Ba?(g=i.y2,p=i.y1):s===Ua?(g=i.y1,p=i.y2):(g=i.x1,p=i.x2):s===Ba&&(g=r,p=0),_=u===JM?g:u===Qr?p:(g+p)/2,d&&d.text){switch(s){case Up:case Zc:x=f.bounds.height()+c;break;case Ba:b=f.bounds.width()+c;break;case Ua:b=-f.bounds.width()-c;break}Cr.clear().union(d.bounds),Cr.translate(b-(d.x||0),x-(d.y||0)),jh(d,"x",b)|jh(d,"y",x)&&(e.dirty(d),d.bounds.clear().union(Cr),d.mark.bounds.clear().union(Cr),e.dirty(d)),Cr.clear().union(d.bounds)}else Cr.clear();switch(Cr.union(f.bounds),s){case Up:y=_,v=i.y1-Cr.height()-l;break;case Ba:y=i.x1-Cr.width()-l,v=_;break;case Ua:y=i.x2+Cr.width()+l,v=_;break;case Zc:y=_,v=i.y2+l;break;default:y=o.x,v=o.y}return jh(o,"x",y)|jh(o,"y",v)&&(Cr.translate(y,v),e.dirty(o),o.bounds.clear().union(Cr),t.bounds.clear().union(Cr),e.dirty(o)),o.bounds}function wre(e){ee.call(this,null,e)}be(wre,ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&_Me(n,r,e.layout),FMe(n,r,e)}),RMe(e.mark.group)?t.reflow():t}});function RMe(e){return e&&e.mark.role!=="legend-entry"}function FMe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Mn().set(0,0,i,o),s=a.clone(),u=a.clone(),l=[],c,f,d,p,g,y;for(g=0,y=r.length;g<y;++g)switch(f=r[g],f.role){case KM:p=mMe(f)?s:u,p.union(vMe(e,f,i,o));break;case QM:c=f;break;case ZM:l.push(kMe(e,f));break;case sMe:case uMe:case are:case sre:case ure:case lre:case cre:case fre:s.union(f.bounds),u.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){const v={};l.forEach(b=>{d=b.orient||Ua,d!==eO&&(v[d]||(v[d]=[])).push(b)});for(const b in v){const x=v[b];xre(e,x,CMe(x,b,n.legends,s,u,i,o))}l.forEach(b=>{const x=b.bounds;if(x.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=x,e.dirty(b)),n.autosize&&(n.autosize.type===dre||n.autosize.type===hre||n.autosize.type===pre))switch(b.orient){case Ba:case Ua:a.add(x.x1,0).add(x.x2,0);break;case Up:case Zc:a.add(0,x.y1).add(0,x.y2)}else a.union(x)})}a.union(s).union(u),c&&a.union(NMe(e,c,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),DMe(e,t,a,n)}function DMe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),p=Math.max(0,Math.ceil(n.y2-c));if(i.contains===lMe){const g=e.padding();a-=g.left+g.right,s-=g.top+g.bottom}o===eO?(l=0,f=0,u=a,c=s):o===dre?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-p)):o===hre?(u=Math.max(0,a-l-d),s=c+f+p):o===pre?(a=u+l+d,c=Math.max(0,s-f-p)):o===fMe&&(a=u+l+d,s=c+f+p),e._resizeView(a,s,u,c,[l,f],i.resize)}const PMe=Object.freeze(Object.defineProperty({__proto__:null,bound:gre,identifier:nO,mark:mre,overlap:yre,render:bre,viewlayout:wre},Symbol.toStringTag,{value:"Module"}));function _re(e){ee.call(this,null,e)}be(_re,ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=yM(o,a,e.minstep),u=e.format||Zte(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?Qte(o,e.values,s):vM(o,s);return i&&(r.rem=i),i=l.map((c,f)=>kt({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(kt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Are(e){ee.call(this,null,e)}function LMe(){return kt({})}function IMe(e){const t=$g().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(Are,ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||LMe,o=e.key||Le,a=this.value;return se(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&ae("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=IMe(o)),t.visit(t.ADD,s=>{const u=o(s);let l=a.get(u);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(u,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{const u=o(s),l=a.get(u);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{const u=o(s),l=a.get(u);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function Sre(e){ee.call(this,null,e)}be(Sre,ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(se(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Gl,u=i.enter||Gl,l=i.exit||Gl,c=(o&&!a?i[o]:s)||Gl;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),s(f,e)}),n.modifies(u.output),n.modifies(s.output),c!==Gl&&c!==s&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Gl&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||c!==Gl){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{const p=u(d,e)||r;(c(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Ere(e){ee.call(this,[],e)}be(Ere,ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||iw,a=e.scale,s=+e.limit,u=yM(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===iw,c=e.format||rne(n,a,u,o,e.formatSpecifier,e.formatType,l),f=e.values||nne(a,u),d,p,g,y,v;return i&&(r.rem=i),o===iw?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),v=!0):i=f,Qe(g=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),y=i.reduce((b,x)=>Math.max(b,g(x,e)),0)):g=Br(y=g||8),i=i.map((b,x)=>kt({index:x,label:c(b,x,i),value:b,offset:y,size:g(b,e)})),v&&(v=f[i.length],i.push(kt({index:i.length,label:`…${f.length-i.length} entries`,value:v,offset:y,size:g(v,e)})))):o===c7e?(d=a.domain(),p=Xte(a,d[0],mt(d)),f.length<3&&!e.values&&d[0]!==mt(d)&&(f=[d[0],mt(d)]),i=f.map((b,x)=>kt({index:x,label:c(b,x,f),value:b,perc:p(b)}))):(g=f.length-1,p=w7e(a),i=f.map((b,x)=>kt({index:x,label:c(b,x,f),value:b,perc:x?p(b):0,perc2:x===g?1:p(f[x+1])}))),r.source=i,r.add=i,this.value=i,r}});const zMe=e=>e.source.x,BMe=e=>e.source.y,jMe=e=>e.target.x,UMe=e=>e.target.y;function rO(e){ee.call(this,{},e)}rO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(rO,ee,{transform(e,t){var n=e.sourceX||zMe,r=e.sourceY||BMe,i=e.targetX||jMe,o=e.targetY||UMe,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=fj.get(u+"-"+s)||fj.get(u);return l||ae("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const $re=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,WMe=(e,t,n,r)=>$re(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Cre=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},HMe=(e,t,n,r)=>Cre(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kre=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},qMe=(e,t,n,r)=>kre(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GMe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,VMe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,YMe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},XMe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},JMe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},KMe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s},fj=$g({line:$re,"line-radial":WMe,arc:Cre,"arc-radial":HMe,curve:kre,"curve-radial":qMe,"orthogonal-horizontal":GMe,"orthogonal-vertical":VMe,"orthogonal-radial":YMe,"diagonal-horizontal":XMe,"diagonal-vertical":JMe,"diagonal-radial":KMe});function iO(e){ee.call(this,null,e)}iO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(iO,ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ag,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=a,d=(s-a)/x2(l),p=In(c),g,y,v;for(e.sort&&p.sort((b,x)=>l[b]-l[x]),g=0;g<c;++g)v=l[p[g]],y=u[p[g]],y[r]=f,y[i]=f+=v*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const QMe=5;function ZMe(e){const t=e.type;return!e.bins&&(t===Pp||t===B2||t===j2)}function Tre(e){return pM(e)&&e!==qs}const eOe=es(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Mre(e){ee.call(this,null,e),this.modified(!0)}be(Mre,ee,{transform(e,t){var n=t.dataflow,r=this.value,i=tOe(e);(!r||i!==r.type)&&(this.value=r=At(i)());for(i in e)if(!eOe[i]){if(i==="padding"&&Tre(r.type))continue;Qe(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return sOe(r,e,aOe(r,e,rOe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function tOe(e){var t=e.type,n="",r;return t===qs?qs+"-"+Pp:(nOe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?qs+"-":r===3?Mg+"-":""),(n+t||Pp).toLowerCase())}function nOe(e){const t=e.type;return pM(t)&&t!==Kd&&t!==Qd&&(e.scheme||e.range&&e.range.length&&e.range.every($e))}function rOe(e,t,n){const r=iOe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&ZMe(e),s,u;if(!i)return 0;if(Tre(o)&&t.padding&&i[0]!==mt(i)&&(i=oOe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[s]?s+1:u<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(Ore(o,i,n)),o===cM&&e.unknown(t.domainImplicit?P_:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&yM(e,t.nice)||null),i.length}function iOe(e,t,n){return t?(e.domain(Ore(e.type,t,n)),t.length):-1}function oOe(e,t,n,r,i,o){var a=Math.abs(mt(n)-n[0]),s=a/(a-2*r),u=e===gl?rT(t,null,s):e===j2?G_(t,null,s,.5):e===B2?G_(t,null,s,i||1):e===X3?iT(t,null,s,o||1):nT(t,null,s);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Ore(e,t,n){if(Hte(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+xe(t))}return t}function aOe(e,t,n){let r=t.bins;if(r&&!se(r)){const i=e.domain(),o=i[0],a=mt(i),s=r.step;let u=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||ae("Scale bins parameter missing step property."),u<o&&(u=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=In(u,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===fM&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function sOe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=uOe(r,t,n);else if(t.scheme&&(o=lOe(r,t,n),Qe(o))){if(e.interpolator)return e.interpolator(o);ae(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&qte(r))return e.interpolator(Q3(I$(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(gM(t.interpolate,t.interpolateGamma)):Qe(e.round)?e.round(i):Qe(e.rangeRound)&&e.interpolate(i?yg:gf),o&&e.range(I$(o,t.reverse))}function uOe(e,t,n){e!==Ite&&e!==_$&&ae("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===_$?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*lM(n,i,r)]}function lOe(e,t,n){var r=t.schemeExtent,i,o;return se(t.scheme)?o=Q3(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=mM(i),o||ae(`Unrecognized scheme name: ${t.scheme}`)),n=e===K3?n+1:e===fM?n-1:e===Lp||e===J3?+t.schemeCount||QMe:n,qte(e)?dj(o,r,t.reverse):Qe(o)?Yte(dj(o,r),n):e===cM?o:o.slice(0,n)}function dj(e,t,n){return Qe(e)&&(t||n)?Vte(e,I$(t||[0,1],n)):e}function I$(e,t){return t?e.slice().reverse():e}function Nre(e){ee.call(this,null,e)}be(Nre,ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(_0(e.sort)),this.modified(n),t}});const hj="zero",Rre="center",Fre="normalize",Dre=["y0","y1"];function oO(e){ee.call(this,null,e)}oO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:hj,values:[hj,Rre,Fre]},{name:"as",type:"string",array:!0,length:2,default:Dre}]};be(oO,ee,{transform(e,t){var n=e.as||Dre,r=n[0],i=n[1],o=_0(e.sort),a=e.field||Ag,s=e.offset===Rre?cOe:e.offset===Fre?fOe:dOe,u,l,c,f;for(u=hOe(t.source,e.groupby,o,a),l=0,c=u.length,f=u.max;l<c;++l)s(u[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function cOe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,u;s<a;++s)u=e[s],u[r]=o,u[i]=o+=Math.abs(n(u))}function fOe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,u=0,l=0,c;u<s;++u)c=e[u],c[r]=a,c[i]=a=o*(l+=Math.abs(n(c)))}function dOe(e,t,n,r,i){for(var o=0,a=0,s=e.length,u=0,l,c;u<s;++u)c=e[u],l=+n(c),l<0?(c[r]=a,c[i]=a+=l):(c[r]=o,c[i]=o+=l)}function hOe(e,t,n,r){var i=[],o=y=>y(c),a,s,u,l,c,f,d,p,g;if(t==null)i.push(e.slice());else for(a={},s=0,u=e.length;s<u;++s)c=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(c);for(f=0,g=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,u=d.length;s<u;++s)p+=Math.abs(r(d[s]));d.sum=p,p>g&&(g=p),n&&d.sort(n)}return i.max=g,i}const pOe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:_re,datajoin:Are,encode:Sre,legendentries:Ere,linkpath:rO,pie:iO,scale:Mre,sortitems:Nre,stack:oO},Symbol.toStringTag,{value:"Module"}));var gOe=Math.abs,z$=Math.cos,uA=Math.sin,mOe=1e-6,Pre=Math.PI,B$=Pre/2,pj=yOe(2);function gj(e){return e>1?B$:e<-1?-B$:Math.asin(e)}function yOe(e){return e>0?Math.sqrt(e):0}function vOe(e,t){var n=e*uA(t),r=30,i;do t-=i=(t+uA(t)-n)/(1+z$(t));while(gOe(i)>mOe&&--r>0);return t/2}function bOe(e,t,n){function r(i,o){return[e*i*z$(o=vOe(n,o)),t*uA(o)]}return r.invert=function(i,o){return o=gj(o/t),[i/(e*z$(o)),gj((2*o+uA(2*o))/n)]},r}var xOe=bOe(pj/B$,pj,Pre);function wOe(){return ou(xOe).scale(169.529)}const _Oe=$2(),j$=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function AOe(e,t){return function n(){const r=t();return r.type=e,r.path=$2().projection(r),r.copy=r.copy||function(){const i=n();return j$.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},Ute(r)}}function aO(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lA[e]=AOe(e,t),this):lA[e]||null}function Lre(e){return e&&e.path||_Oe}const lA={albers:Tk,albersusa:ZJ,azimuthalequalarea:nK,azimuthalequidistant:iK,conicconformal:aK,conicequalarea:Ty,conicequidistant:uK,equalEarth:cK,equirectangular:sK,gnomonic:dK,identity:CEe,mercator:Mk,mollweide:wOe,naturalEarth1:kEe,orthographic:gK,stereographic:yK,transversemercator:bK};for(const e in lA)aO(e,lA[e]);function SOe(){}const Tu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ire(){var e=1,t=1,n=s;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),EOe(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,g=c.length,y;p<g;++p)if($Oe((y=c[p])[0],d)!==-1){y.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=new Array,d=new Array,p,g,y,v,b,x;for(p=g=-1,v=u[0]>=l,Tu[v<<1].forEach(_);++p<e-1;)y=v,v=u[p+1]>=l,Tu[y|v<<1].forEach(_);for(Tu[v<<0].forEach(_);++g<t-1;){for(p=-1,v=u[g*e+e]>=l,b=u[g*e]>=l,Tu[v<<1|b<<2].forEach(_);++p<e-1;)y=v,v=u[g*e+e+p+1]>=l,x=b,b=u[g*e+p+1]>=l,Tu[y|v<<1|b<<2|x<<3].forEach(_);Tu[v|b<<3].forEach(_)}for(p=-1,b=u[g*e]>=l,Tu[b<<2].forEach(_);++p<e-1;)x=b,b=u[g*e+p+1]>=l,Tu[b<<2|x<<3].forEach(_);Tu[b<<3].forEach(_);function _(A){var E=[A[0][0]+p,A[0][1]+g],$=[A[1][0]+p,A[1][1]+g],S=a(E),k=a($),O,N;(O=d[S])?(N=f[k])?(delete d[O.end],delete f[N.start],O===N?(O.ring.push($),c(O.ring)):f[O.start]=d[N.end]={start:O.start,end:N.end,ring:O.ring.concat(N.ring)}):(delete d[O.end],O.ring.push($),d[O.end=k]=O):(O=f[k])?(N=d[S])?(delete f[O.start],delete d[N.end],O===N?(O.ring.push($),c(O.ring)):f[N.start]=d[O.end]={start:N.start,end:O.end,ring:N.ring.concat(O.ring)}):(delete f[O.start],O.ring.unshift(E),f[O.start=S]=O):f[S]=d[k]={start:S,end:k,ring:[E,$]}}}function a(u){return u[0]*2+u[1]*(e+1)*4}function s(u,l,c){u.forEach(f=>{var d=f[0],p=f[1],g=d|0,y=p|0,v,b=l[y*e+g];d>0&&d<e&&g===d&&(v=l[y*e+g-1],f[0]=d+(c-v)/(b-v)-.5),p>0&&p<t&&y===p&&(v=l[(y-1)*e+g],f[1]=p+(c-v)/(b-v)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ae("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?s:SOe,r):n===s},r}function EOe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function $Oe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=COe(e,t[n]))return i;return 0}function COe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],p=f[1];if(kOe(u,f,t))return 0;c>r!=p>r&&n<(d-l)*(r-c)/(p-c)+l&&(i=-i)}return i}function kOe(e,t,n){var r;return TOe(e,t,n)&&MOe(e[r=+(e[0]===t[0])],n[r],t[r])}function TOe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function MOe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function zre(e,t,n){return function(r){var i=Ks(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?Bc(o,a,e):s/(e+1);return In(o+u,a,u)}}function sO(e){ee.call(this,null,e)}sO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(sO,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||zr,o=Ire().smooth(e.smooth!==!1),a=e.thresholds||OOe(r,i,e),s=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,se(a)?a:a(c.values));NOe(f,c,l,e),f.forEach(d=>{u.push(B3(l,kt(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function OOe(e,t,n){const r=zre(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ui(t(i).values)))}function NOe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Qe(i)&&(i=i(n,r)),Qe(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const a=(xt(i)?i:i[0])||1,s=(xt(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(Bre(t,a,s,u,l))}function Bre(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(u),f}}function mj(e,t,n){const r=e>=0?e:AT(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function p6(e){return Qe(e)?e:Br(+e)}function jre(){var e=u=>u[0],t=u=>u[1],n=Ag,r=[-1,-1],i=960,o=500,a=2;function s(u,l){const c=mj(r[0],u,e)>>a,f=mj(r[1],u,t)>>a,d=c?c+2:0,p=f?f+2:0,g=2*d+(i>>a),y=2*p+(o>>a),v=new Float32Array(g*y),b=new Float32Array(g*y);let x=v;u.forEach(A=>{const E=d+(+e(A)>>a),$=p+(+t(A)>>a);E>=0&&E<g&&$>=0&&$<y&&(v[E+$*g]+=+n(A))}),c>0&&f>0?(fh(g,y,v,b,c),dh(g,y,b,v,f),fh(g,y,v,b,c),dh(g,y,b,v,f),fh(g,y,v,b,c),dh(g,y,b,v,f)):c>0?(fh(g,y,v,b,c),fh(g,y,b,v,c),fh(g,y,v,b,c),x=b):f>0&&(dh(g,y,v,b,f),dh(g,y,b,v,f),dh(g,y,v,b,f),x=b);const _=l?Math.pow(2,-2*a):1/x2(x);for(let A=0,E=g*y;A<E;++A)x[A]*=_;return{values:x,scale:1<<a,width:g,height:y,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(u){return arguments.length?(e=p6(u),s):e},s.y=function(u){return arguments.length?(t=p6(u),s):t},s.weight=function(u){return arguments.length?(n=p6(u),s):n},s.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||ae("invalid size"),i=l,o=c,s},s.cellSize=function(u){return arguments.length?((u=+u)>=1||ae("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),s):1<<a},s.bandwidth=function(u){return arguments.length?(u=Ee(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ae("invalid bandwidth"),r=u,s):r},s}function fh(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,u=0;s<e+i;++s)s<e&&(u+=n[s+a*e]),s>=i&&(s>=o&&(u-=n[s-o+a*e]),r[s-i+a*e]=u/Math.min(s+1,e-1+o-s,o))}function dh(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function uO(e){ee.call(this,null,e)}uO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ROe=["x","y","weight","size","cellSize","bandwidth"];function Ure(e,t){return ROe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(uO,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=FOe(r,e.groupby),o=(e.groupby||[]).map(wn),a=Ure(jre(),e),s=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>kt(l({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function FOe(e,t){var n=[],r=c=>c(s),i,o,a,s,u,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(s);return n}function lO(e){ee.call(this,null,e)}lO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(lO,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Ire().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||zre(e.count||10,e.nice,!!i),a=e.size,s,u;return i||(i=t.materialize(t.SOURCE).source,s=Ure(jre(),e)(i,!0),u=Bre(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=se(o)?o:o(i),i=r.size(a)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(kt),n}});const U$="Feature",cO="FeatureCollection",DOe="MultiPoint";function fO(e){ee.call(this,null,e)}fO.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(fO,ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&zr,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Fr(s))||o&&t.modified(Fr(o))||a&&t.modified(Fr(a)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(u,c=>n.push(s(c))),o&&a&&(t.visit(u,c=>{var f=o(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:U$,geometry:{type:DOe,coordinates:r}})),this.value={type:cO,features:n}}});function dO(e){ee.call(this,null,e)}dO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(dO,ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||zr,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=Lre(e.projection),n.materialize().reflow()):a=i===zr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=POe(r,e.pointRadius);return n.visit(a,u=>u[o]=r(i(u))),r.pointRadius(s),n.modifies(o)}});function POe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function hO(e){ee.call(this,null,e)}hO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(hO,ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[a]=f[0],c[s]=f[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function pO(e){ee.call(this,null,e)}pO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(pO,ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=LOe(Lre(e.projection),e.field||da("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function LOe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function gO(e){ee.call(this,[],e),this.generator=nEe()}gO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(gO,ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Qe(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Gee(n[0],i)):t.add.push(kt(i)),n[0]=i,t}});function mO(e){ee.call(this,null,e)}mO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(mO,ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||zr,o=zOe(e.opacity,e),a=IOe(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?ui(n.map(l=>ui(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Ke({},l,u);r||(f.$max=ui(c.values||[])),l[s]=BOe(c,f,a.dep?a:Br(a(f)),o.dep?o:Br(o(f)))}),t.reflow(!0).modifies(s)}});function IOe(e,t){let n;return Qe(e)?(n=r=>sa(e(r,t)),n.dep=Wre(e)):n=Br(sa(e||"#888")),n}function zOe(e,t){let n;return Qe(e)?(n=r=>e(r,t),n.dep=Wre(e)):e?n=Br(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Wre(e){if(!Qe(e))return!1;const t=es(Fr(e));return t.$x||t.$y||t.$value||t.$max}function BOe(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?v=>c[v]:sc,d=Oc(u-a,l-s),p=d.getContext("2d"),g=p.getImageData(0,0,u-a,l-s),y=g.data;for(let v=s,b=0;v<l;++v){t.$y=v-s;for(let x=a,_=v*i;x<u;++x,b+=4){t.$x=x-a,t.$value=f(x+_);const A=n(t);y[b+0]=A.r,y[b+1]=A.g,y[b+2]=A.b,y[b+3]=~~(255*r(t))}}return p.putImageData(g,0,0),d}function Hre(e){ee.call(this,null,e),this.modified(!0)}be(Hre,ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=UOe(e.type),j$.forEach(r=>{e[r]!=null&&yj(n,r,e[r])})):j$.forEach(r=>{e.modified(r)&&yj(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&jOe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function jOe(e,t){const n=WOe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function UOe(e){const t=aO((e||"mercator").toLowerCase());return t||ae("Unrecognized projection type: "+e),t()}function yj(e,t,n){Qe(e[t])&&e[t](n)}function WOe(e){return e=Ee(e),e.length===1?e[0]:{type:cO,features:e.reduce((t,n)=>t.concat(HOe(n)),[])}}function HOe(e){return e.type===cO?e.features:Ee(e).filter(t=>t!=null).map(t=>t.type===U$?t:{type:U$,geometry:t})}const qOe=Object.freeze(Object.defineProperty({__proto__:null,contour:lO,geojson:fO,geopath:dO,geopoint:hO,geoshape:pO,graticule:gO,heatmap:mO,isocontour:sO,kde2d:uO,projection:Hre},Symbol.toStringTag,{value:"Module"})),vj={center:gJ,collide:pSe,nbody:bJ,link:yJ,x:ASe,y:SSe},xm="forces",W$=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],GOe=["static","iterations"],qre=["x","y","vx","vy"];function yO(e){ee.call(this,null,e)}yO.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:qre}]};be(yO,ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(W$),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Gre(n,e,0,t)):(this.value=n=YOe(t.source,e),n.on("tick",VOe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(GOe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,u=0,l=s.length,c;u<l;++u)if(c=s[u],!(c.name!==xm||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(qre)}});function VOe(e,t){return()=>e.touch(t).run()}function YOe(e,t){const n=vJ(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),Gre(n,t,!0).on("end",()=>o=!0)}function Gre(e,t,n,r){var i=Ee(t.forces),o,a,s,u;for(o=0,a=W$.length;o<a;++o)s=W$[o],s!==xm&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)u=xm+o,s=n||t.modified(xm,o)?JOe(i[o]):r&&XOe(i[o],r)?e.force(u):null,s&&e.force(u,s);for(a=e.numForces||0;o<a;++o)e.force(xm+o,null);return e.numForces=i.length,e}function XOe(e,t){var n,r;for(n in e)if(Qe(r=e[n])&&t.modified(Fr(r)))return 1;return 0}function JOe(e){var t,n;ze(vj,e.force)||ae("Unrecognized force: "+e.force),t=vj[e.force]();for(n in e)Qe(t[n])&&KOe(t[n],e[n],e);return t}function KOe(e,t,n){e(Qe(t)?r=>t(r,n):t)}const QOe=Object.freeze(Object.defineProperty({__proto__:null,force:yO},Symbol.toStringTag,{value:"Module"}));function H$(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function vO(e){ee.call(this,null,e)}vO.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ZOe=e=>e.values;be(vO,ee,{transform(e,t){t.source||ae("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&z3(a.data)&&i.rem.push(a.data)}),this.value=o=Ok({values:Ee(e.keys).reduce((a,s)=>(a.key(s),a),eNe()).entries(i.source)},ZOe),n&&o.each(a=>{a.children&&(a=kt(a.data),i.add.push(a),i.source.push(a))}),H$(o,Le,Le)),i.source.root=o,i}});function eNe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const a=i.length,s=e[o++],u={},l={};let c=-1,f,d,p;for(;++c<a;)f=s(d=i[c])+"",(p=u[f])?p.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const a=[];for(const s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function _l(e){ee.call(this,null,e)}const tNe=(e,t)=>e.parent===t.parent?1:2;be(_l,ee,{transform(e,t){(!t.source||!t.source.root)&&ae(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(_0(e.sort,a=>a.data)),nNe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?tNe:Ag);try{this.value=n(i)}catch(a){ae(a)}return i.each(a=>rNe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function nNe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function rNe(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const q$=["x","y","r","depth","children"];function bO(e){_l.call(this,e)}bO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:q$.length,default:q$}]};be(bO,_l,{layout:h9e,params:["radius","size","padding"],fields:q$});const G$=["x0","y0","x1","y1","depth","children"];function xO(e){_l.call(this,e)}xO.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:G$.length,default:G$}]};be(xO,_l,{layout:p9e,params:["size","round","padding"],fields:G$});function wO(e){ee.call(this,null,e)}wO.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(wO,ee,{transform(e,t){t.source||ae("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?H$(Lz().id(e.key).parentId(e.parentKey)(i.source),e.key,ha):H$(Lz()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const bj={tidy:S9e,cluster:PEe},V$=["x","y","depth","children"];function _O(e){_l.call(this,e)}_O.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:V$.length,default:V$}]};be(_O,_l,{layout(e){const t=e||"tidy";if(ze(bj,t))return bj[t]();ae("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:V$});function AO(e){ee.call(this,[],e)}AO.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(AO,ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||ae("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[Le(a)]=1),r.each(a=>{const s=a.data,u=a.parent&&a.parent.data;u&&o[Le(s)]&&o[Le(u)]&&i.add.push(kt({source:u,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Le(a)]=1),n.forEach(a=>{(o[Le(a.source)]||o[Le(a.target)])&&i.mod.push(a)})),i}});const xj={binary:$9e,dice:T2,slice:v3,slicedice:C9e,squarify:CK,resquarify:k9e},Y$=["x0","y0","x1","y1","depth","children"];function SO(e){_l.call(this,e)}SO.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Y$.length,default:Y$}]};be(SO,_l,{layout(){const e=E9e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ze(xj,t)?e.tile(xj[t]):ae("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Y$});const iNe=Object.freeze(Object.defineProperty({__proto__:null,nest:vO,pack:bO,partition:xO,stratify:wO,tree:_O,treelinks:AO,treemap:SO},Symbol.toStringTag,{value:"Module"})),g6=4278190080;function oNe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function aNe(e,t,n,r,i){const o=e.width,a=e.height,s=r||i,u=Oc(o,a).getContext("2d"),l=Oc(o,a).getContext("2d"),c=s&&Oc(o,a).getContext("2d");n.forEach(k=>dw(u,k,!1)),dw(l,t,!1),s&&dw(c,t,!0);const f=m6(u,o,a),d=m6(l,o,a),p=s&&m6(c,o,a),g=e.bitmap(),y=s&&e.bitmap();let v,b,x,_,A,E,$,S;for(b=0;b<a;++b)for(v=0;v<o;++v)A=b*o+v,E=f[A]&g6,S=d[A]&g6,$=s&&p[A]&g6,(E||$||S)&&(x=e(v),_=e(b),!i&&(E||S)&&g.set(x,_),s&&(E||$)&&y.set(x,_));return[g,y]}function m6(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function dw(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>dw(e,o.items,n))}):Ao[r].draw(e,{items:n?t.map(sNe):t})}function sNe(e){const t=B3(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Mu=5,Yr=31,jy=32,nc=new Uint32Array(jy+1),La=new Uint32Array(jy+1);La[0]=0;nc[0]=~La[0];for(let e=1;e<=jy;++e)La[e]=La[e-1]<<1|1,nc[e]=~La[e];function uNe(e,t){const n=new Uint32Array(~~((e*t+jy)/jy));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>Mu]&1<<(s&Yr)},set:(o,a)=>{const s=a*e+o;r(s>>>Mu,1<<(s&Yr))},clear:(o,a)=>{const s=a*e+o;i(s>>>Mu,~(1<<(s&Yr)))},getRange:(o,a,s,u)=>{let l=u,c,f,d,p;for(;l>=a;--l)if(c=l*e+o,f=l*e+s,d=c>>>Mu,p=f>>>Mu,d===p){if(n[d]&nc[c&Yr]&La[(f&Yr)+1])return!0}else{if(n[d]&nc[c&Yr]||n[p]&La[(f&Yr)+1])return!0;for(let g=d+1;g<p;++g)if(n[g])return!0}return!1},setRange:(o,a,s,u)=>{let l,c,f,d,p;for(;a<=u;++a)if(l=a*e+o,c=a*e+s,f=l>>>Mu,d=c>>>Mu,f===d)r(f,nc[l&Yr]&La[(c&Yr)+1]);else for(r(f,nc[l&Yr]),r(d,La[(c&Yr)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,u)=>{let l,c,f,d,p;for(;a<=u;++a)if(l=a*e+o,c=a*e+s,f=l>>>Mu,d=c>>>Mu,f===d)i(f,La[l&Yr]|nc[(c&Yr)+1]);else for(i(f,La[l&Yr]),i(d,nc[(c&Yr)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,u)=>o<0||a<0||u>=t||s>=e}}function lNe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>uNe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function cNe(e,t,n,r){const i=e.width,o=e.height;return function(a){const s=a.datum.datum.items[r].items,u=s.length,l=a.datum.fontSize,c=yo.width(a.datum,a.datum.text);let f=0,d,p,g,y,v,b,x;for(let _=0;_<u;++_)d=s[_].x,g=s[_].y,p=s[_].x2===void 0?d:s[_].x2,y=s[_].y2===void 0?g:s[_].y2,v=(d+p)/2,b=(g+y)/2,x=Math.abs(p-d+y-g),x>=f&&(f=x,a.x=v,a.y=b);return v=c/2,b=l/2,d=a.x-v,p=a.x+v,g=a.y-b,y=a.y+b,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",g<0&&y<=o?a.baseline="top":0<=g&&o<y&&(a.baseline="bottom"),!0}}function cA(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function yc(e,t,n,r,i,o,a,s){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}function fNe(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(l,c,f,d,p){const g=e.invert(l),y=e.invert(c);let v=f,b=o,x;if(!cA(g,y,d,p,i,o)&&!yc(e,g,y,p,d,v,a,s)&&!yc(e,g,y,p,d,p,a,null)){for(;b-v>=1;)x=(v+b)/2,yc(e,g,y,p,d,x,a,s)?b=x:v=x;if(v>f)return[g,y,v,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,p=yo.width(l.datum,l.datum.text);let g=n?d:0,y=!1,v=!1,b=0,x,_,A,E,$,S,k,O,N,F,W,I,M,D,L,j,z;for(let H=0;H<f;++H){for(x=c[H].x,A=c[H].y,_=c[H].x2===void 0?x:c[H].x2,E=c[H].y2===void 0?A:c[H].y2,x>_&&(z=x,x=_,_=z),A>E&&(z=A,A=E,E=z),N=e(x),W=e(_),F=~~((N+W)/2),I=e(A),D=e(E),M=~~((I+D)/2),k=F;k>=N;--k)for(O=M;O>=I;--O)j=u(k,O,g,p,d),j&&([l.x,l.y,g,y]=j);for(k=F;k<=W;++k)for(O=M;O<=D;++O)j=u(k,O,g,p,d),j&&([l.x,l.y,g,y]=j);!y&&!n&&(L=Math.abs(_-x+E-A),$=(x+_)/2,S=(A+E)/2,L>=b&&!cA($,S,p,d,i,o)&&!yc(e,$,S,d,p,d,a,null)&&(b=L,l.x=$,l.y=S,v=!0))}return y||v?($=p/2,S=d/2,a.setRange(e(l.x-$),e(l.y-S),e(l.x+$),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const dNe=[-1,-1,1,1],hNe=[-1,1,-1,1];function pNe(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,p=yo.width(l.datum,l.datum.text),g=[];let y=n?d:0,v=!1,b=!1,x=0,_,A,E,$,S,k,O,N,F,W,I,M;for(let D=0;D<f;++D){for(_=c[D].x,E=c[D].y,A=c[D].x2===void 0?_:c[D].x2,$=c[D].y2===void 0?E:c[D].y2,g.push([e((_+A)/2),e((E+$)/2)]);g.length;)if([O,N]=g.pop(),!(a.get(O,N)||s.get(O,N)||u.get(O,N))){u.set(O,N);for(let L=0;L<4;++L)S=O+dNe[L],k=N+hNe[L],u.outOfBounds(S,k,S,k)||g.push([S,k]);if(S=e.invert(O),k=e.invert(N),F=y,W=o,!cA(S,k,p,d,i,o)&&!yc(e,S,k,d,p,F,a,s)&&!yc(e,S,k,d,p,d,a,null)){for(;W-F>=1;)I=(F+W)/2,yc(e,S,k,d,p,I,a,s)?W=I:F=I;F>y&&(l.x=S,l.y=k,y=F,v=!0)}}!v&&!n&&(M=Math.abs(A-_+$-E),S=(_+A)/2,k=(E+$)/2,M>=x&&!cA(S,k,p,d,i,o)&&!yc(e,S,k,d,p,d,a,null)&&(x=M,l.x=S,l.y=k,b=!0))}return v||b?(S=p/2,k=d/2,a.setRange(e(l.x-S),e(l.y-k),e(l.x+S),e(l.y+k)),l.align="center",l.baseline="middle",!0):!1}}const gNe=["right","center","left"],mNe=["bottom","middle","top"];function yNe(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,p,g,y,v,b,x,_,A,E,$,S,k,O,N,F;for(let W=0;W<u;++W){if(p=(n[W]&3)-1,g=(n[W]>>>2&3)-1,y=p===0&&g===0||r[W]<0,v=p&&g?Math.SQRT1_2:1,b=r[W]<0?-1:1,x=c[1+p]+r[W]*p*v,S=c[4+g]+b*f*g/2+r[W]*g*v,A=S-f/2,E=S+f/2,k=e(x),N=e(A),F=e(E),!d)if(wj(k,k,N,F,a,s,x,x,A,E,c,y))d=yo.width(l.datum,l.datum.text);else continue;if($=x+b*d*p/2,x=$-d/2,_=$+d/2,k=e(x),O=e(_),wj(k,O,N,F,a,s,x,_,A,E,c,y))return l.x=p?p*b<0?_:x:$,l.y=g?g*b<0?E:A:S,l.align=gNe[p*b+1],l.baseline=mNe[g*b+1],a.setRange(k,N,O,F),!0}return!1}}function wj(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const y6=0,v6=4,b6=8,x6=0,w6=1,_6=2,vNe={"top-left":y6+x6,top:y6+w6,"top-right":y6+_6,left:v6+x6,middle:v6+w6,right:v6+_6,"bottom-left":b6+x6,bottom:b6+w6,"bottom-right":b6+_6},bNe={naive:cNe,"reduced-search":fNe,floodfill:pNe};function xNe(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=wNe(r,f),p=_Ne(i,f),g=ANe(e[0].datum),y=g==="group"&&e[0].datum.items[u].marktype,v=y==="area",b=SNe(g,y,s,u),x=l===null||l===1/0,_=v&&c==="naive";let A=-1,E=-1;const $=e.map(N=>{const F=x?yo.width(N,N.text):void 0;return A=Math.max(A,F),E=Math.max(E,N.fontSize),{datum:N,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(N),textWidth:F}});l=l===null||l===1/0?Math.max(A,E)+Math.max(...r):l;const S=lNe(t[0],t[1],l);let k;if(!_){n&&$.sort((W,I)=>n(W.datum,I.datum));let N=!1;for(let W=0;W<p.length&&!N;++W)N=p[W]===5||d[W]<0;const F=(g&&a||v)&&e.map(W=>W.datum);k=o.length||F?aNe(S,F||[],o,N,v):oNe(S,a&&$)}const O=v?bNe[c](S,k,a,u):yNe(S,k,p,d);return $.forEach(N=>N.opacity=+O(N)),$}function wNe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function _Ne(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=vNe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function ANe(e){return e&&e.mark&&e.mark.marktype}function SNe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const X$=["x","y","opacity","align","baseline"],Vre=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function EO(e){ee.call(this,null,e)}EO.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Vre},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:X$.length,default:X$}]};be(EO,ee,{transform(e,t){function n(o){const a=e[o];return Qe(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ae("Size parameter should be specified as a [width, height] array.");const i=e.as||X$;return xNe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ee(e.offset==null?1:e.offset),Ee(e.anchor||Vre),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const ENe=Object.freeze(Object.defineProperty({__proto__:null,label:EO},Symbol.toStringTag,{value:"Module"}));function Yre(e,t){var n=[],r=function(c){return c(s)},i,o,a,s,u,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(s);return n}function $O(e){ee.call(this,null,e)}$O.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be($O,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Yre(r,e.groupby),o=(e.groupby||[]).map(wn),a=o.length,s=e.as||[wn(e.x),wn(e.y)],u=[];i.forEach(l=>{cte(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=c[0],f[s[1]]=c[1],u.push(kt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const J$={constant:DT,linear:PT,log:ate,exp:ste,pow:ute,quad:LT,poly:lte},$Ne=(e,t)=>e==="poly"?t:e==="quad"?2:1;function CO(e){ee.call(this,null,e)}CO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(J$)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(CO,ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Yre(r,e.groupby),o=(e.groupby||[]).map(wn),a=e.method||"linear",s=e.order==null?3:e.order,u=$Ne(a,s),l=e.as||[wn(e.x),wn(e.y)],c=J$[a],f=[];let d=e.extent;ze(J$,a)||ae("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const y=c(p,e.x,e.y,s);if(e.params){f.push(kt({keys:p.dims,coef:y.coef,rSquared:y.rSquared}));return}const v=d||Ks(p,e.x),b=x=>{const _={};for(let A=0;A<o.length;++A)_[o[A]]=p.dims[A];_[l[0]]=x[0],_[l[1]]=x[1],f.push(kt(_))};a==="linear"||a==="constant"?v.forEach(x=>b([x,y.predict(x)])):V3(y.predict,v,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const CNe=Object.freeze(Object.defineProperty({__proto__:null,loess:$O,regression:CO},Symbol.toStringTag,{value:"Module"}));function kO(e){ee.call(this,null,e)}kO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const kNe=[-1e5,-1e5,1e5,1e5];be(kO,ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:kNe;const o=this.value=mk.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const u=o.cellPolygon(a);r[a][n]=u&&!MNe(u)?TNe(u):null}return t.reflow(e.modified()).modifies(n)}});function TNe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function MNe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const ONe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:kO},Symbol.toStringTag,{value:"Module"}));var A6=Math.PI/180,wm=64,hw=2048;function NNe(){var e=[256,256],t,n,r,i,o,a,s,u=Xre,l=[],c=Math.random,f={};f.layout=function(){for(var g=d(Oc()),y=INe((e[0]>>5)*e[1]),v=null,b=l.length,x=-1,_=[],A=l.map($=>({text:t($),font:n($),style:i($),weight:o($),rotate:a($),size:~~(r($)+1e-14),padding:s($),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:$})).sort(($,S)=>S.size-$.size);++x<b;){var E=A[x];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,RNe(g,E,A,x),E.hasText&&p(y,E,v)&&(_.push(E),v?DNe(v,E):v=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(wm<<5)/y,g.height=hw/y;var v=g.getContext("2d");return v.fillStyle=v.strokeStyle="red",v.textAlign="center",{context:v,ratio:y}}function p(g,y,v){for(var b=y.x,x=y.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),A=u(e),E=c()<.5?1:-1,$=-E,S,k,O;(S=A($+=E))&&(k=~~S[0],O=~~S[1],!(Math.min(Math.abs(k),Math.abs(O))>=_));)if(y.x=b+k,y.y=x+O,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>e[0]||y.y+y.y1>e[1])&&(!v||!FNe(y,g,e[0]))&&(!v||PNe(y,v))){for(var N=y.sprite,F=y.width>>5,W=e[0]>>5,I=y.x-(F<<4),M=I&127,D=32-M,L=y.y1-y.y0,j=(y.y+y.y0)*W+(I>>5),z,H=0;H<L;H++){z=0;for(var U=0;U<=F;U++)g[j+U]|=z<<D|(U<F?(z=N[H*F+U])>>>M:0);j+=W}return y.sprite=null,!0}return!1}return f.words=function(g){return arguments.length?(l=g,f):l},f.size=function(g){return arguments.length?(e=[+g[0],+g[1]],f):e},f.font=function(g){return arguments.length?(n=Uf(g),f):n},f.fontStyle=function(g){return arguments.length?(i=Uf(g),f):i},f.fontWeight=function(g){return arguments.length?(o=Uf(g),f):o},f.rotate=function(g){return arguments.length?(a=Uf(g),f):a},f.text=function(g){return arguments.length?(t=Uf(g),f):t},f.spiral=function(g){return arguments.length?(u=zNe[g]||g,f):u},f.fontSize=function(g){return arguments.length?(r=Uf(g),f):r},f.padding=function(g){return arguments.length?(s=Uf(g),f):s},f.random=function(g){return arguments.length?(c=g,f):c},f}function RNe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(wm<<5)/o,hw/o);var a=0,s=0,u=0,l=n.length,c,f,d,p,g;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var y=Math.sin(t.rotate*A6),v=Math.cos(t.rotate*A6),b=c*v,x=c*y,_=d*v,A=d*y;c=Math.max(Math.abs(b+A),Math.abs(b-A))+31>>5<<5,d=~~Math.max(Math.abs(x+_),Math.abs(x-_))}else c=c+31>>5<<5;if(d>u&&(u=d),a+c>=wm<<5&&(a=0,s+=u,u=0),s+d>=hw)break;i.translate((a+(c>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*A6),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var E=i.getImageData(0,0,(wm<<5)/o,hw/o).data,$=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,p=0;p<d*f;p++)$[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var S=0,k=-1;for(g=0;g<d;g++){for(p=0;p<c;p++){var O=f*g+(p>>5),N=E[(s+g)*(wm<<5)+(a+p)<<2]?1<<31-p%32:0;$[O]|=N,S|=N}S?k=g:(t.y0++,d--,g--,s++)}t.y1=t.y0+k,t.sprite=$.slice(0,(t.y1-t.y0)*f)}}}function FNe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<s|(d<i?(c=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function DNe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function PNe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Xre(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function LNe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function INe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Uf(e){return typeof e=="function"?e:function(){return e}}var zNe={archimedean:Xre,rectangular:LNe};const Jre=["x","y","font","fontSize","fontStyle","fontWeight","angle"],BNe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function TO(e){ee.call(this,NNe(),e)}TO.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Jre}]};be(TO,ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ae("Wordcloud size dimensions must be non-zero.");function n(g){const y=e[g];return Qe(y)&&t.modified(y.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||BNe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Jre;let s=e.fontSize||14,u;if(Qe(s)?u=e.fontSizeRange:s=Br(s),u){const g=s,y=At("sqrt")().domain(Ks(i,g)).range(u);s=v=>y(g(v))}i.forEach(g=>{g[a[0]]=NaN,g[a[1]]=NaN,g[a[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(ga).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,p=l.length;for(let g=0,y,v;g<p;++g)y=l[g],v=y.datum,v[a[0]]=y.x+f,v[a[1]]=y.y+d,v[a[2]]=y.font,v[a[3]]=y.size,v[a[4]]=y.style,v[a[5]]=y.weight,v[a[6]]=y.rotate;return t.reflow(r).modifies(a)}});const jNe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:TO},Symbol.toStringTag,{value:"Module"})),UNe=e=>new Uint8Array(e),WNe=e=>new Uint16Array(e),Vm=e=>new Uint32Array(e);function HNe(){let e=8,t=[],n=Vm(0),r=fx(0,e),i=fx(0,e);return{data:()=>t,seen:()=>n=qNe(n,t.length),add(o){for(let a=0,s=t.length,u=o.length,l;a<u;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){const s=t.length,u=Array(s-o),l=t;let c,f,d;for(f=0;!a[f]&&f<s;++f)u[f]=t[f],l[f]=f;for(d=f;f<s;++f)c=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){const s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=fx(o,e,r),i=fx(o,e))}}}function qNe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function fx(e,t,n){const r=(t<257?UNe:t<65537?WNe:Vm)(e);return n&&r.set(n),r}function _j(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const a=this,s=a.bisect(a.range,i.value),u=i.index,l=s[0],c=s[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return a}}}function Aj(){let e=Vm(0),t=[],n=0;function r(s,u,l){if(!u.length)return[];const c=n,f=u.length,d=Vm(f);let p=Array(f),g,y,v;for(v=0;v<f;++v)p[v]=s(u[v]),d[v]=v;if(p=GNe(p,d),c)g=t,y=e,t=Array(c+f),e=Vm(c+f),VNe(l,g,y,c,p,d,f,t,e);else{if(l>0)for(v=0;v<f;++v)d[v]+=l;t=p,e=d}return n=c+f,{index:d,value:p}}function i(s,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-s}function o(s){for(let u=0,l=n;u<l;++u)e[u]=s[e[u]]}function a(s,u){let l;return u?l=u.length:(u=t,l=n),[pwe(u,s[0],0,l),Kw(u,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function GNe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),lX(e,t)}function VNe(e,t,n,r,i,o,a,s,u){let l=0,c=0,f;for(f=0;l<r&&c<a;++f)t[l]<i[c]?(s[f]=t[l],u[f]=n[l++]):(s[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)s[f]=t[l],u[f]=n[l];for(;c<a;++c,++f)s[f]=i[c],u[f]=o[c]+e}function MO(e){ee.call(this,HNe(),e),this._indices=null,this._dims=null}MO.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(MO,ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s=0,u,l;for(;s<a;++s)u=n[s].fname,l=i[u]||(i[u]=Aj()),o.push(_j(l,s,r[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,g={};let y,v,b,x,_,A,E,$,S;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(A={},x=t.mod,E=0,$=x.length;E<$;++E)A[x[E]._index]=1;for(E=0;E<p;++E)S=r[E],(!a[E]||e.modified("fields",E)||t.modified(S.fields))&&(b=S.fname,(y=g[b])||(o[b]=v=Aj(),g[b]=y=v.insert(S,t.source,0)),a[E]=_j(v,E,i[E]).onAdd(y,u));for(E=0,$=s.data().length;E<$;++E)_[E]||(l[E]!==u[E]?f.push(E):A[E]&&u[E]!==c&&d.push(E));return s.mask=(1<<p)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),p,g,y;i.resize(c,f),i.add(r);const v=i.curr(),b=i.prev(),x=i.all();for(p=0;p<f;++p)g=s[p].fname,y=u[g]||(u[g]=a[g].insert(s[p],r,d)),o[p].onAdd(y,v);for(;d<c;++d)b[d]=x,v[d]!==x&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,p,g;for(f=0,d=c.length;f<d;++f)p=c[f]._index,u[p]=1,a[p]=g=o[p],o[p]=s,g!==s&&l.push(p);for(p in r)r[p].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const a in r)r[a].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s=0,u,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(u=l,++s);if(s===1)s=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],p=l[0],g=l[1],y=e.one;let v,b,x;if(f<p)for(v=f,b=Math.min(p,d);v<b;++v)x=u[v],o[x]!==n&&(s[x]=a[x],o[x]=n,r.push(x)),a[x]^=y;else if(f>p)for(v=p,b=Math.min(f,g);v<b;++v)x=u[v],o[x]!==n&&(s[x]=a[x],o[x]=n,r.push(x)),a[x]^=y;if(d>g)for(v=Math.max(f,g),b=d;v<b;++v)x=u[v],o[x]!==n&&(s[x]=a[x],o[x]=n,r.push(x)),a[x]^=y;else if(d<g)for(v=Math.max(p,d),b=g;v<b;++v)x=u[v],o[x]!==n&&(s[x]=a[x],o[x]=n,r.push(x)),a[x]^=y;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=s[0],d=s[1],p=e.one;let g,y,v;if(l<f)for(g=l,y=Math.min(f,c);g<y;++g)v=a[g],o[v]^=p,n.push(v);else if(l>f)for(g=f,y=Math.min(l,d);g<y;++g)v=a[g],o[v]^=p,r.push(v);if(c>d)for(g=Math.max(l,d),y=c;g<y;++g)v=a[g],o[v]^=p,n.push(v);else if(c<d)for(g=Math.max(f,c),y=d;g<y;++g)v=a[g],o[v]^=p,r.push(v);e.range=t.slice()}});function OO(e){ee.call(this,null,e)}OO.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(OO,ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=c=>s[c]&n?null:a[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=s[c]&n;return!f&&f^u[c]&n?a[c]:null}),o.filter(o.REM,c=>{const f=s[c]&n;return f&&!(f^(f^u[c]&n))?a[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(s[c]&n)===i?a[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const YNe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:MO,resolvefilter:OO},Symbol.toStringTag,{value:"Module"})),XNe="RawCode",e0="Literal",JNe="Property",KNe="Identifier",QNe="ArrayExpression",ZNe="BinaryExpression",Kre="CallExpression",eRe="ConditionalExpression",tRe="LogicalExpression",nRe="MemberExpression",rRe="ObjectExpression",iRe="UnaryExpression";function ss(e){this.type=e}ss.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=oRe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function oRe(e){switch(e.type){case QNe:return e.elements;case ZNe:case tRe:return[e.left,e.right];case Kre:return[e.callee].concat(e.arguments);case eRe:return[e.test,e.consequent,e.alternate];case nRe:return[e.object,e.property];case rRe:return e.properties;case JNe:return[e.key,e.value];case iRe:return[e.argument];case KNe:case e0:case XNe:default:return[]}}var uu,Ne,ie,Pr,Ft,d5=1,K2=2,t0=3,xf=4,h5=5,E0=6,Ci=7,Q2=8,aRe=9;uu={};uu[d5]="Boolean";uu[K2]="<end>";uu[t0]="Identifier";uu[xf]="Keyword";uu[h5]="Null";uu[E0]="Numeric";uu[Ci]="Punctuator";uu[Q2]="String";uu[aRe]="RegularExpression";var sRe="ArrayExpression",uRe="BinaryExpression",lRe="CallExpression",cRe="ConditionalExpression",Qre="Identifier",fRe="Literal",dRe="LogicalExpression",hRe="MemberExpression",pRe="ObjectExpression",gRe="Property",mRe="UnaryExpression",Zn="Unexpected token %0",yRe="Unexpected number",vRe="Unexpected string",bRe="Unexpected identifier",xRe="Unexpected reserved word",wRe="Unexpected end of input",K$="Invalid regular expression",S6="Invalid regular expression: missing /",Zre="Octal literals are not allowed in strict mode.",_Re="Duplicate data property in object literal not allowed in strict mode",hr="ILLEGAL",Uy="Disabled.",ARe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),SRe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function p5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wu(e){return e>=48&&e<=57}function NO(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Ym(e){return"01234567".indexOf(e)>=0}function ERe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Wy(e){return e===10||e===13||e===8232||e===8233}function Z2(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&ARe.test(String.fromCharCode(e))}function fA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&SRe.test(String.fromCharCode(e))}const $Re={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function eie(){for(;ie<Pr;){const e=Ne.charCodeAt(ie);if(ERe(e)||Wy(e))++ie;else break}}function Q$(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ie<Pr&&NO(Ne[ie])?(r=Ne[ie++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):wt({},Zn,hr);return String.fromCharCode(i)}function CRe(){var e,t,n,r;for(e=Ne[ie],t=0,e==="}"&&wt({},Zn,hr);ie<Pr&&(e=Ne[ie++],!!NO(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&wt({},Zn,hr),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function tie(){var e,t;for(e=Ne.charCodeAt(ie++),t=String.fromCharCode(e),e===92&&(Ne.charCodeAt(ie)!==117&&wt({},Zn,hr),++ie,e=Q$("u"),(!e||e==="\\"||!Z2(e.charCodeAt(0)))&&wt({},Zn,hr),t=e);ie<Pr&&(e=Ne.charCodeAt(ie),!!fA(e));)++ie,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ne.charCodeAt(ie)!==117&&wt({},Zn,hr),++ie,e=Q$("u"),(!e||e==="\\"||!fA(e.charCodeAt(0)))&&wt({},Zn,hr),t+=e);return t}function kRe(){var e,t;for(e=ie++;ie<Pr;){if(t=Ne.charCodeAt(ie),t===92)return ie=e,tie();if(fA(t))++ie;else break}return Ne.slice(e,ie)}function TRe(){var e,t,n;return e=ie,t=Ne.charCodeAt(ie)===92?tie():kRe(),t.length===1?n=t0:$Re.hasOwnProperty(t)?n=xf:t==="null"?n=h5:t==="true"||t==="false"?n=d5:n=t0,{type:n,value:t,start:e,end:ie}}function E6(){var e=ie,t=Ne.charCodeAt(ie),n,r=Ne[ie],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ie,{type:Ci,value:String.fromCharCode(t),start:e,end:ie};default:if(n=Ne.charCodeAt(ie+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ie+=2,{type:Ci,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ie};case 33:case 61:return ie+=2,Ne.charCodeAt(ie)===61&&++ie,{type:Ci,value:Ne.slice(e,ie),start:e,end:ie}}}if(a=Ne.substr(ie,4),a===">>>=")return ie+=4,{type:Ci,value:a,start:e,end:ie};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ie+=3,{type:Ci,value:o,start:e,end:ie};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return ie+=2,{type:Ci,value:i,start:e,end:ie};if(i==="//"&&wt({},Zn,hr),"<>=!+-*%&|^/".indexOf(r)>=0)return++ie,{type:Ci,value:r,start:e,end:ie};wt({},Zn,hr)}function MRe(e){let t="";for(;ie<Pr&&NO(Ne[ie]);)t+=Ne[ie++];return t.length===0&&wt({},Zn,hr),Z2(Ne.charCodeAt(ie))&&wt({},Zn,hr),{type:E0,value:parseInt("0x"+t,16),start:e,end:ie}}function ORe(e){let t="0"+Ne[ie++];for(;ie<Pr&&Ym(Ne[ie]);)t+=Ne[ie++];return(Z2(Ne.charCodeAt(ie))||Wu(Ne.charCodeAt(ie)))&&wt({},Zn,hr),{type:E0,value:parseInt(t,8),octal:!0,start:e,end:ie}}function Sj(){var e,t,n;if(n=Ne[ie],p5(Wu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ie,e="",n!=="."){if(e=Ne[ie++],n=Ne[ie],e==="0"){if(n==="x"||n==="X")return++ie,MRe(t);if(Ym(n))return ORe(t);n&&Wu(n.charCodeAt(0))&&wt({},Zn,hr)}for(;Wu(Ne.charCodeAt(ie));)e+=Ne[ie++];n=Ne[ie]}if(n==="."){for(e+=Ne[ie++];Wu(Ne.charCodeAt(ie));)e+=Ne[ie++];n=Ne[ie]}if(n==="e"||n==="E")if(e+=Ne[ie++],n=Ne[ie],(n==="+"||n==="-")&&(e+=Ne[ie++]),Wu(Ne.charCodeAt(ie)))for(;Wu(Ne.charCodeAt(ie));)e+=Ne[ie++];else wt({},Zn,hr);return Z2(Ne.charCodeAt(ie))&&wt({},Zn,hr),{type:E0,value:parseFloat(e),start:t,end:ie}}function NRe(){var e="",t,n,r,i,o=!1;for(t=Ne[ie],p5(t==="'"||t==='"',"String literal must starts with a quote"),n=ie,++ie;ie<Pr;)if(r=Ne[ie++],r===t){t="";break}else if(r==="\\")if(r=Ne[ie++],!r||!Wy(r.charCodeAt(0)))switch(r){case"u":case"x":Ne[ie]==="{"?(++ie,e+=CRe()):e+=Q$(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ym(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),ie<Pr&&Ym(Ne[ie])&&(o=!0,i=i*8+"01234567".indexOf(Ne[ie++]),"0123".indexOf(r)>=0&&ie<Pr&&Ym(Ne[ie])&&(i=i*8+"01234567".indexOf(Ne[ie++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ne[ie]===`
`&&++ie;else{if(Wy(r.charCodeAt(0)))break;e+=r}return t!==""&&wt({},Zn,hr),{type:Q2,value:e,octal:o,start:n,end:ie}}function RRe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";wt({},K$)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{wt({},K$)}try{return new RegExp(e,t)}catch{return null}}function FRe(){var e,t,n,r,i;for(e=Ne[ie],p5(e==="/","Regular expression literal must start with a slash"),t=Ne[ie++],n=!1,r=!1;ie<Pr;)if(e=Ne[ie++],t+=e,e==="\\")e=Ne[ie++],Wy(e.charCodeAt(0))&&wt({},S6),t+=e;else if(Wy(e.charCodeAt(0)))wt({},S6);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||wt({},S6),i=t.substr(1,t.length-2),{value:i,literal:t}}function DRe(){var e,t,n;for(t="",n="";ie<Pr&&(e=Ne[ie],!!fA(e.charCodeAt(0)));)++ie,e==="\\"&&ie<Pr?wt({},Zn,hr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&wt({},K$,n),{value:n,literal:t}}function PRe(){var e,t,n,r;return Ft=null,eie(),e=ie,t=FRe(),n=DRe(),r=RRe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ie}}function LRe(e){return e.type===t0||e.type===xf||e.type===d5||e.type===h5}function nie(){if(eie(),ie>=Pr)return{type:K2,start:ie,end:ie};const e=Ne.charCodeAt(ie);return Z2(e)?TRe():e===40||e===41||e===59?E6():e===39||e===34?NRe():e===46?Wu(Ne.charCodeAt(ie+1))?Sj():E6():Wu(e)?Sj():E6()}function Oi(){const e=Ft;return ie=e.end,Ft=nie(),ie=e.end,e}function rie(){const e=ie;Ft=nie(),ie=e}function IRe(e){const t=new ss(sRe);return t.elements=e,t}function Ej(e,t,n){const r=new ss(e==="||"||e==="&&"?dRe:uRe);return r.operator=e,r.left=t,r.right=n,r}function zRe(e,t){const n=new ss(lRe);return n.callee=e,n.arguments=t,n}function BRe(e,t,n){const r=new ss(cRe);return r.test=e,r.consequent=t,r.alternate=n,r}function RO(e){const t=new ss(Qre);return t.name=e,t}function _m(e){const t=new ss(fRe);return t.value=e.value,t.raw=Ne.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function $j(e,t,n){const r=new ss(hRe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function jRe(e){const t=new ss(pRe);return t.properties=e,t}function Cj(e,t,n){const r=new ss(gRe);return r.key=t,r.value=n,r.kind=e,r}function URe(e,t){const n=new ss(mRe);return n.operator=e,n.argument=t,n.prefix=!0,n}function wt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(p5(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=ie,n.description=i,n}function g5(e){e.type===K2&&wt(e,wRe),e.type===E0&&wt(e,yRe),e.type===Q2&&wt(e,vRe),e.type===t0&&wt(e,bRe),e.type===xf&&wt(e,xRe),wt(e,Zn,e.value)}function Lr(e){const t=Oi();(t.type!==Ci||t.value!==e)&&g5(t)}function Kt(e){return Ft.type===Ci&&Ft.value===e}function $6(e){return Ft.type===xf&&Ft.value===e}function WRe(){const e=[];for(ie=Ft.start,Lr("[");!Kt("]");)Kt(",")?(Oi(),e.push(null)):(e.push(n0()),Kt("]")||Lr(","));return Oi(),IRe(e)}function kj(){ie=Ft.start;const e=Oi();return e.type===Q2||e.type===E0?(e.octal&&wt(e,Zre),_m(e)):RO(e.value)}function HRe(){var e,t,n,r;if(ie=Ft.start,e=Ft,e.type===t0)return n=kj(),Lr(":"),r=n0(),Cj("init",n,r);if(e.type===K2||e.type===Ci)g5(e);else return t=kj(),Lr(":"),r=n0(),Cj("init",t,r)}function qRe(){var e=[],t,n,r,i={},o=String;for(ie=Ft.start,Lr("{");!Kt("}");)t=HRe(),t.key.type===Qre?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?wt({},_Re):i[r]=!0,e.push(t),Kt("}")||Lr(",");return Lr("}"),jRe(e)}function GRe(){Lr("(");const e=FO();return Lr(")"),e}const VRe={if:1};function YRe(){var e,t,n;if(Kt("("))return GRe();if(Kt("["))return WRe();if(Kt("{"))return qRe();if(e=Ft.type,ie=Ft.start,e===t0||VRe[Ft.value])n=RO(Oi().value);else if(e===Q2||e===E0)Ft.octal&&wt(Ft,Zre),n=_m(Oi());else{if(e===xf)throw new Error(Uy);e===d5?(t=Oi(),t.value=t.value==="true",n=_m(t)):e===h5?(t=Oi(),t.value=null,n=_m(t)):Kt("/")||Kt("/=")?(n=_m(PRe()),rie()):g5(Oi())}return n}function XRe(){const e=[];if(Lr("("),!Kt(")"))for(;ie<Pr&&(e.push(n0()),!Kt(")"));)Lr(",");return Lr(")"),e}function JRe(){ie=Ft.start;const e=Oi();return LRe(e)||g5(e),RO(e.value)}function KRe(){return Lr("."),JRe()}function QRe(){Lr("[");const e=FO();return Lr("]"),e}function ZRe(){var e,t,n;for(e=YRe();;)if(Kt("."))n=KRe(),e=$j(".",e,n);else if(Kt("("))t=XRe(),e=zRe(e,t);else if(Kt("["))n=QRe(),e=$j("[",e,n);else break;return e}function Tj(){const e=ZRe();if(Ft.type===Ci&&(Kt("++")||Kt("--")))throw new Error(Uy);return e}function pw(){var e,t;if(Ft.type!==Ci&&Ft.type!==xf)t=Tj();else{if(Kt("++")||Kt("--"))throw new Error(Uy);if(Kt("+")||Kt("-")||Kt("~")||Kt("!"))e=Oi(),t=pw(),t=URe(e.value,t);else{if($6("delete")||$6("void")||$6("typeof"))throw new Error(Uy);t=Tj()}}return t}function Mj(e){let t=0;if(e.type!==Ci&&e.type!==xf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function eFe(){var e,t,n,r,i,o,a,s,u,l;if(e=Ft,u=pw(),r=Ft,i=Mj(r),i===0)return u;for(r.prec=i,Oi(),t=[e,Ft],a=pw(),o=[u,r,a];(i=Mj(Ft))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=Ej(s,u,a),o.push(n);r=Oi(),r.prec=i,o.push(r),t.push(Ft),n=pw(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=Ej(o[l-1].value,o[l-2],n),l-=2;return n}function n0(){var e,t,n;return e=eFe(),Kt("?")&&(Oi(),t=n0(),Lr(":"),n=n0(),e=BRe(e,t,n)),e}function FO(){const e=n0();if(Kt(","))throw new Error(Uy);return e}function DO(e){Ne=e,ie=0,Pr=Ne.length,Ft=null,rie();const t=FO();if(Ft.type!==K2)throw new Error("Unexpect token after expression.");return t}var iie={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function oie(e){function t(a,s,u,l){let c=e(s[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,u){return l=>t(a,l,s,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&ae("Missing arguments to clamp function."),a.length>3&&ae("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&ae("Missing arguments to if function."),a.length>3&&ae("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function tFe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function aie(e){e=e||{};const t=e.allowed?es(e.allowed):{},n=e.forbidden?es(e.forbidden):{},r=e.constants||iie,i=(e.functions||oie)(f),o=e.globalvar,a=e.fieldvar,s=Qe(o)?o:g=>`${o}["${g}"]`;let u={},l={},c=0;function f(g){if($e(g))return g;const y=d[g.type];return y==null&&ae("Unsupported type: "+g.type),y(g)}const d={Literal:g=>g.raw,Identifier:g=>{const y=g.name;return c>0?y:ze(n,y)?ae("Illegal identifier: "+y):ze(r,y)?r[y]:ze(t,y)?y:(u[y]=1,s(y))},MemberExpression:g=>{const y=!g.computed,v=f(g.object);y&&(c+=1);const b=f(g.property);return v===a&&(l[tFe(b)]=1),y&&(c-=1),v+(y?"."+b:"["+b+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&ae("Illegal callee type: "+g.callee.type);const y=g.callee.name,v=g.arguments,b=ze(i,y)&&i[y];return b||ae("Unrecognized function: "+y),Qe(b)?b(v):b+"("+v.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(f).join(",")+"}",Property:g=>{c+=1;const y=f(g.key);return c-=1,y+":"+f(g.value)}};function p(g){const y={code:f(g),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},y}return p.functions=i,p.constants=r,p}const Oj=Symbol("vega_selection_getter");function sie(e){return(!e.getter||!e.getter[Oj])&&(e.getter=da(e.field),e.getter[Oj]=!0),e.getter}const PO="intersect",Nj="union",nFe="vlMulti",rFe="vlPoint",Rj="or",iFe="and",Ms="_vgsid_",Hy=da(Ms),oFe="E",aFe="R",sFe="R-E",uFe="R-LE",lFe="R-RE",dA="index:unit";function Fj(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=sie(s)(e),Tc(a)&&(a=Or(a)),Tc(r[o])&&(r[o]=Or(r[o])),se(r[o])&&Tc(r[o][0])&&(r[o]=r[o].map(Or)),s.type===oFe){if(se(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===aFe){if(!zh(a,r[o]))return!1}else if(s.type===lFe){if(!zh(a,r[o],!0,!1))return!1}else if(s.type===sFe){if(!zh(a,r[o],!1,!1))return!1}else if(s.type===uFe&&!zh(a,r[o],!1,!0))return!1;return!0}function cFe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[dA]&&r[dA].value:void 0,a=n===PO,s=i.length,u=0,l,c,f,d,p;u<s;++u)if(l=i[u],o&&a){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(p=Fj(t,l),c[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=Fj(t,l),a^p)return p;return s&&a}const uie=v0(Hy),fFe=uie.left,dFe=uie.right;function hFe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[dA]&&r[dA].value:void 0,a=n===PO,s=Hy(t),u=fFe(i,s);if(u===i.length||Hy(i[u])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(dFe(i,s)-u<o.size)return!1}return!0}function pFe(e,t){return e.map(n=>Ke(t.fields?{values:t.fields.map(r=>sie(r)(n.datum))}:{[Ms]:Hy(n.datum)},t))}function gFe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},u={},l,c,f,d,p,g,y,v,b,x,_=o.length,A=0,E,$;A<_;++A)if(l=o[A],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,$=c.length;E<$;++E)p=c[E],y=a[p.field]||(a[p.field]={}),v=y[d]||(y[d]=[]),u[p.field]=b=p.type.charAt(0),x=C6[`${b}_union`],y[d]=x(v,Ee(f[E]));n&&(v=s[d]||(s[d]=[]),v.push(Ee(f).reduce((S,k,O)=>(S[c[O].field]=k,S),{})))}else p=Ms,g=Hy(l),y=a[p]||(a[p]={}),v=y[d]||(y[d]=[]),v.push(g),n&&(v=s[d]||(s[d]=[]),v.push({[Ms]:g}));if(t=t||Nj,a[Ms]?a[Ms]=C6[`${Ms}_${t}`](...Object.values(a[Ms])):Object.keys(a).forEach(S=>{a[S]=Object.keys(a[S]).map(k=>a[S][k]).reduce((k,O)=>k===void 0?O:C6[`${u[S]}_${t}`](k,O))}),o=Object.keys(s),n&&o.length){const S=r?rFe:nFe;a[S]=t===Nj?{[Rj]:o.reduce((k,O)=>(k.push(...s[O]),k),[])}:{[iFe]:o.map(k=>({[Rj]:s[k]}))}}return a}var C6={[`${Ms}_union`]:Fwe,[`${Ms}_intersect`]:Nwe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Or(t[0]),r=Or(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Or(t[0]),r=Or(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const mFe=":",yFe="@";function LO(e,t,n,r){t[0].type!==e0&&ae("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&mt(t).value,a="unit",s=yFe+a,u=mFe+i;o===PO&&!ze(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),ze(r,u)||(r[u]=n.getData(i).tuplesRef())}function lie(e){const t=this.context.data[e];return t?t.values.value:[]}function vFe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function bFe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ha).insert(t)),1}function xFe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const ev=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},wFe=ev("format"),cie=ev("timeFormat"),_Fe=ev("utcFormat"),AFe=ev("timeParse"),SFe=ev("utcParse"),dx=new Date(2e3,0,1);function m5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(dx.setYear(2e3),dx.setMonth(e),dx.setDate(t),cie.call(this,dx,n))}function EFe(e){return m5.call(this,e,1,"%B")}function $Fe(e){return m5.call(this,e,1,"%b")}function CFe(e){return m5.call(this,0,2+e,"%A")}function kFe(e){return m5.call(this,0,2+e,"%a")}const TFe=":",MFe="@",Z$="%",fie="$";function IO(e,t,n,r){t[0].type!==e0&&ae("First argument to data functions must be a string literal.");const i=t[0].value,o=TFe+i;if(!ze(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function OFe(e,t,n,r){t[0].type!==e0&&ae("First argument to indata must be a string literal."),t[1].type!==e0&&ae("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a=MFe+o;ze(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function li(e,t,n,r){if(t[0].type===e0)Dj(n,r,t[0].value);else for(e in n.scales)Dj(n,r,e)}function Dj(e,t,n){const r=Z$+n;if(!ze(t,r))try{t[r]=e.scaleRef(n)}catch{}}function lu(e,t){if(Qe(e))return e;if($e(e)){const n=t.scales[e];return n&&n7e(n.value)?n.value:void 0}}function NFe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=li,n._range=li,n._scale=li;const r=i=>"_["+(i.type===e0?xe(Z$+i.value):xe(Z$)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function zO(e,t){return function(n,r,i){if(n){const o=lu(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const RFe=zO("area",DSe),FFe=zO("bounds",zSe),DFe=zO("centroid",qSe);function PFe(e,t){const n=lu(e,(t||this).context);return n&&n.scale()}function LFe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function BO(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function IFe(){return BO(this.context.dataflow,"warn",arguments)}function zFe(){return BO(this.context.dataflow,"info",arguments)}function BFe(){return BO(this.context.dataflow,"debug",arguments)}function k6(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function eC(e){const t=sa(e),n=k6(t.r),r=k6(t.g),i=k6(t.b);return .2126*n+.7152*r+.0722*i}function jFe(e,t){const n=eC(e),r=eC(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function UFe(){const e=[].slice.call(arguments);return e.unshift({}),Ke(...e)}function die(e,t){return e===t||e!==e&&t!==t?!0:se(e)?se(t)&&e.length===t.length?WFe(e,t):!1:ke(e)&&ke(t)?hie(e,t):!1}function WFe(e,t){for(let n=0,r=e.length;n<r;++n)if(!die(e[n],t[n]))return!1;return!0}function hie(e,t){for(const n in e)if(!die(e[n],t[n]))return!1;return!0}function Pj(e){return t=>hie(e,t)}function HFe(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c=s.changes,f,d;if(a._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(s.changes=c=a.changeset(),c.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(u,c).run()},!0,1)),n&&(f=n===!0?ha:se(n)||z3(n)?n:Pj(n),c.remove(f)),t&&c.insert(t),r&&(f=Pj(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function qFe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function GFe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Lj={};function VFe(e,t){const n=Lj[t]||(Lj[t]=da(t));return se(e)?e.map(n):n(e)}function jO(e){return se(e)||ArrayBuffer.isView(e)?e:null}function UO(e){return jO(e)||($e(e)?e:null)}function YFe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jO(e).join(...n)}function XFe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return UO(e).indexOf(...n)}function JFe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return UO(e).lastIndexOf(...n)}function KFe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return UO(e).slice(...n)}function QFe(e,t,n){return Qe(n)&&ae("Function argument passed to replace."),String(e).replace(t,n)}function ZFe(e){return jO(e).slice().reverse()}function eDe(e,t,n){return lM(e||0,t||0,n||0)}function tDe(e,t){const n=lu(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function nDe(e,t){const n=lu(e,(t||this).context);return n?n.copy():void 0}function rDe(e,t){const n=lu(e,(t||this).context);return n?n.domain():[]}function iDe(e,t,n){const r=lu(e,(n||this).context);return r?se(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function oDe(e,t){const n=lu(e,(t||this).context);return n&&n.range?n.range():[]}function aDe(e,t,n){const r=lu(e,(n||this).context);return r?r(t):void 0}function sDe(e,t,n,r,i){e=lu(e,(i||this).context);const o=sne(t,n);let a=e.domain(),s=a[0],u=mt(a),l=zr;return u-s?l=Xte(e,s,u):e=(e.interpolator?At("sequential")().interpolator(e.interpolator()):At("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==mt(a)&&a.push(u)),a.forEach(c=>o.stop(l(c),e(c))),o}function uDe(e,t,n){const r=lu(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function lDe(e){let t=null;return function(n){return n?Py(n,t=t||zp(e)):e}}const pie=e=>e.data;function gie(e,t){const n=lie.call(t,e);return n.root&&n.root.lookup||{}}function cDe(e,t,n){const r=gie(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(pie):void 0}function fDe(e,t){const n=gie(e,this)[t];return n?n.ancestors().map(pie):void 0}const mie=()=>typeof window<"u"&&window||null;function dDe(){const e=mie();return e?e.screen:{}}function hDe(){const e=mie();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function pDe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function yie(e,t,n){if(!e)return[];const[r,i]=e,o=new Mn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return ere(a,o,gDe(t))}function gDe(e){let t=null;if(e){const n=Ee(e.marktype),r=Ee(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function mDe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ee(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function yDe(e){return Ee(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function vDe(e,t,n){const{x:r,y:i,mark:o}=n,a=new Mn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<a.x1&&(a.x1=u),u>a.x2&&(a.x2=u),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),yie([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(u=>bDe(u.x,u.y,t))}function bDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,s]=n[o],[u,l]=n[i];l>t!=s>t&&e<(a-u)*(t-l)/(s-l)+u&&r++}return r&1}const qy={random(){return ga()},cumulativeNormal:H3,cumulativeLogNormal:TT,cumulativeUniform:RT,densityNormal:ST,densityLogNormal:kT,densityUniform:NT,quantileNormal:q3,quantileLogNormal:MT,quantileUniform:FT,sampleNormal:W3,sampleLogNormal:CT,sampleUniform:OT,isArray:se,isBoolean:bf,isDate:Tc,isDefined(e){return e!==void 0},isNumber:xt,isObject:ke,isRegExp:oee,isString:$e,isTuple:z3,isValid(e){return e!=null&&e===e},toBoolean:uT,toDate(e){return lT(e)},toNumber:Or,toString:cT,indexof:XFe,join:YFe,lastindexof:JFe,replace:QFe,reverse:ZFe,slice:KFe,flush:ree,lerp:aee,merge:UFe,pad:lee,peek:mt,pluck:VFe,span:P2,inrange:zh,truncate:cee,rgb:sa,lab:a_,hcl:s_,hsl:i_,luminance:eC,contrast:jFe,sequence:In,format:wFe,utcFormat:_Fe,utcParse:SFe,utcOffset:See,utcSequence:Cee,timeFormat:cie,timeParse:AFe,timeOffset:Aee,timeSequence:$ee,timeUnitSpecifier:dee,monthFormat:EFe,monthAbbrevFormat:$Fe,dayFormat:CFe,dayAbbrevFormat:kFe,quarter:ZZ,utcquarter:eee,week:pee,utcweek:yee,dayofyear:hee,utcdayofyear:mee,warn:IFe,info:zFe,debug:BFe,extent(e){return Ks(e)},inScope:LFe,intersect:yie,clampRange:tee,pinchDistance:qFe,pinchAngle:GFe,screen:dDe,containerSize:pDe,windowSize:hDe,bandspace:eDe,setdata:bFe,pathShape:lDe,panLinear:XZ,panLog:JZ,panPow:KZ,panSymlog:QZ,zoomLinear:nT,zoomLog:rT,zoomPow:G_,zoomSymlog:iT,encode:xFe,modify:HFe,lassoAppend:mDe,lassoPath:yDe,intersectLasso:vDe},xDe=["view","item","group","xy","x","y"],wDe="event.vega.",vie="this.",WO={},bie={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${xe(fie+e)}]`,functions:_De,constants:iie,visitors:WO},tC=aie(bie);function _De(e){const t=oie(e);xDe.forEach(n=>t[n]=wDe+n);for(const n in qy)t[n]=vie+n;return Ke(t,NFe(e,qy,WO)),t}function kn(e,t,n){return arguments.length===1?qy[e]:(qy[e]=t,n&&(WO[e]=n),tC&&(tC.functions[e]=vie+e),this)}kn("bandwidth",tDe,li);kn("copy",nDe,li);kn("domain",rDe,li);kn("range",oDe,li);kn("invert",iDe,li);kn("scale",aDe,li);kn("gradient",sDe,li);kn("geoArea",RFe,li);kn("geoBounds",FFe,li);kn("geoCentroid",DFe,li);kn("geoShape",uDe,li);kn("geoScale",PFe,li);kn("indata",vFe,OFe);kn("data",lie,IO);kn("treePath",cDe,IO);kn("treeAncestors",fDe,IO);kn("vlSelectionTest",cFe,LO);kn("vlSelectionIdTest",hFe,LO);kn("vlSelectionResolve",gFe,LO);kn("vlSelectionTuples",pFe);function Zs(e,t){const n={};let r;try{e=$e(e)?e:xe(e)+"",r=DO(e)}catch{ae("Expression parse error: "+e)}r.visit(o=>{if(o.type!==Kre)return;const a=o.callee.name,s=bie.visitors[a];s&&s(a,o.arguments,t,n)});const i=tC(r);return i.globals.forEach(o=>{const a=fie+o;!ze(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:Ke({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function ADe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const SDe=es(["rule"]),Ij=es(["group","image","rect"]);function EDe(e,t){let n="";return SDe[t]||(e.x2&&(e.x?(Ij[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Ij[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function HO(e){return(e+"").toLowerCase()}function $De(e){return HO(e)==="operator"}function CDe(e){return HO(e)==="collect"}function D1(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function kDe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var TDe={operator:(e,t)=>D1(e,["_"],t.code),parameter:(e,t)=>D1(e,["datum","_"],t.code),event:(e,t)=>D1(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return D1(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const a="o["+xe(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=EDe(r,n),i+="return m;",D1(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,a)=>{const s=t[a];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,u=`this.f${a}(a)`,l=`this.f${a}(b)`),kDe(u,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function MDe(e){const t=this;$De(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ODe(e){const t=this;if(e.params){const n=t.get(e.id);n||ae("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function NDe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=se(i)?i.map(o=>zj(o,n,t)):zj(i,n,t)}return t}function zj(e,t,n){if(!e||!ke(e))return e;for(let r=0,i=Bj.length,o;r<i;++r)if(o=Bj[r],ze(e,o.key))return o.parse(e,t,n);return e}var Bj=[{key:"$ref",parse:RDe},{key:"$key",parse:DDe},{key:"$expr",parse:FDe},{key:"$field",parse:PDe},{key:"$encode",parse:IDe},{key:"$compare",parse:LDe},{key:"$context",parse:zDe},{key:"$subflow",parse:BDe},{key:"$tupleid",parse:jDe}];function RDe(e,t){return t.get(e.$ref)||ae("Operator not defined: "+e.$ref)}function FDe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Xi(t.parameterExpression(e.$expr),e.$fields))}function DDe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=sT(e.$key,e.$flat,t.expr.codegen))}function PDe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=da(e.$field,e.$name,t.expr.codegen))}function LDe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ee(e.$compare).map(i=>i&&i.$tupleid?Le:i);return t.fn[n]||(t.fn[n]=oT(r,e.$order,t.expr.codegen))}function IDe(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Xi(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function zDe(e,t){return t}function BDe(e,t){const n=e.$subflow;return function(r,i,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(o),s.detachSubflow=()=>t.detach(a),s}}function jDe(){return Le}function UDe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ae("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function WDe(e){var t=this,n=ke(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||ae("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}const HDe={skip:!0};function qDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function GDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],HDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(ha).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function xie(e,t,n,r){return new wie(e,t,n,r)}function wie(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||TDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function jj(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}wie.prototype=jj.prototype={fork(){const e=new jj(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),CDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[HO(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:ADe,parseOperator:MDe,parseOperatorParameters:ODe,parseParameters:NDe,parseStream:UDe,parseUpdate:WDe,getState:qDe,setState:GDe};function VDe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),_ie(t,e.description()))}function _ie(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function YDe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const T6="default";function XDe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:T6,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?$e(i)?i:i.user:T6,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return $e(r)||(i=r.item,r=r.user),nC(e,r&&r!==T6?r:i||r),i},{cursor:t})}function nC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hA(e,t){var n=e._runtime.data;return ze(n,t)||ae("Unrecognized data set: "+t),n[t]}function JDe(e,t){return arguments.length<2?hA(this,e).values.value:y5.call(this,e,A0().remove(ha).insert(t))}function y5(e,t){Vee(t)||ae("Second argument to changes must be a changeset.");const n=hA(this,e);return n.modified=!0,this.pulse(n.input,t)}function KDe(e,t){return y5.call(this,e,A0().insert(t))}function QDe(e,t){return y5.call(this,e,A0().remove(t))}function Aie(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Sie(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function v5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ZDe(e){var t=v5(e),n=Aie(e),r=Sie(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function ePe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=v5(e),a=t.changedTouches?t.changedTouches[0]:t,o=u5(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=tPe(e,n,o),t}function tPe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,u;if(a){for(u=t;u;u=u.mark.group)if(u.mark.name===a){s=u;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;$e(a)&&(a=i(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:Br(e),item:Br(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const Uj="view",nPe="timer",rPe="window",iPe={trap:!1};function oPe(e){const t=Ke({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{se(r[o])&&(r[o]=es(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Eie(e,t,n,r){e._eventListeners.push({type:n,sources:Ee(t),handler:r})}function aPe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function hx(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ke(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function sPe(e,t,n){var r=this,i=new U3(n),o=function(l,c){r.runAsync(null,()=>{e===Uj&&aPe(r,t)&&l.preventDefault(),i.receive(ePe(r,l,c))})},a;if(e===nPe)hx(r,"timer",t)&&r.timer(o,t);else if(e===Uj)hx(r,"view",t)&&r.addEventListener(t,o,iPe);else if(e===rPe?hx(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&hx(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,u=a.length;s<u;++s)a[s].addEventListener(t,o);Eie(r,a,t,o)}return i}function Wj(e){return e.item}function Hj(e){return e.item.mark.source}function qj(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function uPe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",Wj),Hj,qj(e)),this.on(this.events("view","mouseout",Wj),Hj,qj(t)),this}function lPe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function vo(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const cPe="vega-bind",fPe="vega-bind-name",dPe="vega-bind-radio";function hPe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=aT(r.debounce,i.update))),(r.input==null&&r.element?pPe:mPe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function pPe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Eie(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(gPe(i))}}function gPe(e){return typeof Event<"u"?new Event(e):{type:e}}function mPe(e,t,n,r){const i=r.signal(n.signal),o=vo("div",{class:cPe}),a=n.input==="radio"?o:o.appendChild(vo("label"));a.appendChild(vo("span",{class:fPe},n.name||n.signal)),t.appendChild(o);let s=yPe;switch(n.input){case"checkbox":s=vPe;break;case"select":s=bPe;break;case"radio":s=xPe;break;case"range":s=wPe;break}s(e,a,n,i)}function yPe(e,t,n,r){const i=vo("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function vPe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=vo("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function bPe(e,t,n,r){const i=vo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const u={value:a};pA(a,r)&&(u.selected=!0),i.appendChild(vo("option",u,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,u=n.options.length;s<u;++s)if(pA(n.options[s],a)){i.selectedIndex=s;return}}}function xPe(e,t,n,r){const i=vo("span",{class:dPe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{const u={type:"radio",name:n.signal,value:a};pA(a,r)&&(u.checked=!0);const l=vo("input",u);l.addEventListener("change",()=>e.update(a));const c=vo("label",{},(o[s]||a)+"");return c.prepend(l),i.appendChild(c),l}),e.set=a=>{const s=e.elements,u=s.length;for(let l=0;l<u;++l)pA(s[l].value,a)&&(s[l].checked=!0)}}function wPe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Bc(o,i,100),s=vo("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=vo("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=c=>{s.value=c,u.textContent=c}}function pA(e,t){return e===t||e+""==t+""}function $ie(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Aie(e),Sie(e),v5(e),i,o).background(e.background())}function qO(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function _Pe(e,t,n,r){const i=new r(e.loader(),qO(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,v5(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function APe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=c5(r);e=n._el=e?M6(n,e,!0):null,VDe(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||Qc,s=e?o.renderer:o.headless;return n._renderer=s?$ie(n,n._renderer,e,s):null,n._handler=_Pe(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=M6(n,t,!0):e.appendChild(vo("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=M6(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{hPe(n,u.element||t,u)})),n}function M6(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const P1=e=>+e||0,SPe=e=>({top:e,bottom:e,left:e,right:e});function Gj(e){return ke(e)?{top:P1(e.top),bottom:P1(e.bottom),left:P1(e.left),right:P1(e.right)}:SPe(P1(e))}async function GO(e,t,n,r){const i=c5(t),o=i&&i.headless;return o||ae("Unrecognized renderer type: "+t),await e.runAsync(),$ie(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function EPe(e,t){e!==pc.Canvas&&e!==pc.SVG&&e!==pc.PNG&&ae("Unrecognized image type: "+e);const n=await GO(this,e,t);return e===pc.SVG?$Pe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function $Pe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function CPe(e,t){return(await GO(this,pc.Canvas,e,t)).canvas()}async function kPe(e){return(await GO(this,pc.SVG,e)).svg()}function TPe(e,t,n){return xie(e,Dp,qy,n).parse(t)}function MPe(e){var t=this._runtime.scales;return ze(t,e)||ae("Unrecognized scale or projection: "+e),t[e].value}var Cie="width",kie="height",VO="padding",Vj={skip:!0};function Tie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===VO?r.left+r.right:0)}function Mie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===VO?r.top+r.bottom:0)}function OPe(e){var t=e._signals,n=t[Cie],r=t[kie],i=t[VO];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=Tie(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=Mie(e,s.size),o()},{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function NPe(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Cie,n,Vj),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(kie,r,Vj),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(u=>u.resize())},!1,1)}function RPe(e){return this._runtime.getState(e||{data:FPe,signals:DPe,recurse:!0})}function FPe(e,t){return t.modified&&se(t.input.value)&&e.indexOf("_:vega:_")}function DPe(e,t){return!(e==="parent"||t instanceof Dp.proxy)}function PPe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function LPe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(c3e(n,t))}function IPe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",zPe(r))}function zPe(e){return e==null?"":se(e)?Oie(e):ke(e)&&!Tc(e)?BPe(e):e+""}function BPe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(se(n)?Oie(n):Nie(n))}).join(`
`)}function Oie(e){return"["+e.map(Nie).join(", ")+"]"}function Nie(e){return se(e)?"[…]":ke(e)&&!Tc(e)?"{…}":e}function Rie(e,t){const n=this;if(t=t||{},np.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Ke({},e.locale,t.locale);n.locale(Lee(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||pc.Canvas,n._scenegraph=new zM;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||IPe,n._redraw=!0,n._handler=new Qc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=oPe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=TPe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Ke({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Tie(n,n._width),n._viewHeight=Mie(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,OPe(n),YDe(n),XDe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function px(e,t){return ze(e._signals,t)?e._signals[t]:ae("Unrecognized signal name: "+xe(t))}function Fie(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Yj(e,t,n,r){let i=Fie(n,r);return i||(i=qO(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Xj(e,t,n){const r=Fie(t,n);return r&&t._targets.remove(r),e}be(Rie,np,{async evaluate(e,t,n){if(await np.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ZDe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&nw(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&_ie(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=px(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Gj(e)):Gj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(c5(e)||ae("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(np.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(px(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:NPe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=qO(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Yj(this,e,px(this,e),t)},removeSignalListener(e,t){return Xj(this,px(this,e),t)},addDataListener(e,t){return Yj(this,e,hA(this,e).values,t)},removeDataListener(e,t){return Xj(this,hA(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=nC(this,null);this._globalCursor=!!e,t&&nC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:LPe,events:sPe,finalize:lPe,hover:uPe,data:JDe,change:y5,insert:KDe,remove:QDe,scale:MPe,initialize:APe,toImageURL:EPe,toCanvas:CPe,toSVG:kPe,getState:RPe,setState:PPe});const jPe="view",gA="[",mA="]",Die="{",Pie="}",UPe=":",Lie=",",WPe="@",HPe=">",qPe=/[[\]{}]/,GPe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Iie,zie;function wf(e,t,n){return Iie=t||jPe,zie=n||GPe,Bie(e.trim()).map(rC)}function VPe(e){return zie[e]}function Xm(e,t,n,r,i){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function Bie(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Xm(e,i,Lie,gA+Die,mA+Pie),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function rC(e){return e[0]==="["?YPe(e):XPe(e)}function YPe(e){const t=e.length;let n=1,r;if(n=Xm(e,n,mA,gA,mA),n===t)throw"Empty between selector: "+e;if(r=Bie(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==HPe)throw"Expected '>' after between selector: "+e;r=r.map(rC);const i=rC(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function XPe(e){const t={source:Iie},n=[];let r=[0,0],i=0,o=0,a=e.length,s=0,u,l;if(e[a-1]===Pie){if(s=e.lastIndexOf(Die),s>=0){try{r=JPe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===WPe&&(i=++s),u=Xm(e,s,UPe),u<a&&(n.push(e.substring(o,u).trim()),o=s=++u),s=Xm(e,s,gA),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=Xm(e,s,mA),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==gA)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||qPe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):VPe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function JPe(e){const t=e.split(Lie);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function KPe(e){return ke(e)?e:{type:e||"pad"}}const L1=e=>+e||0,QPe=e=>({top:e,bottom:e,left:e,right:e});function ZPe(e){return ke(e)?e.signal?e:{top:L1(e.top),bottom:L1(e.bottom),left:L1(e.left),right:L1(e.right)}:QPe(L1(e))}const er=e=>ke(e)&&!se(e)?Ke({},e):{value:e};function Jj(e,t,n,r){return n!=null?(ke(n)&&!se(n)||se(n)&&n.length&&ke(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function vr(e,t,n){for(const r in t)Jj(e,r,t[r]);for(const r in n)Jj(e,r,n[r],"update")}function Ng(e,t,n){for(const r in t)n&&ze(n,r)||(e[r]=Ke(e[r]||{},t[r]));return e}function _h(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const YO="mark",XO="frame",JO="scope",eLe="axis",tLe="axis-domain",nLe="axis-grid",rLe="axis-label",iLe="axis-tick",oLe="axis-title",aLe="legend",sLe="legend-band",uLe="legend-entry",lLe="legend-gradient",jie="legend-label",cLe="legend-symbol",fLe="legend-title",dLe="title",hLe="title-text",pLe="title-subtitle";function gLe(e,t,n,r,i){const o={},a={};let s,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!_h(u,e)&&O6(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===XO?i.group:n===YO?Ke({},i.mark,i[t]):null;for(u in c)l=_h(u,e)||(u==="fill"||u==="stroke")&&(_h("fill",e)||_h("stroke",e)),l||O6(o,u,c[u]);Ee(r).forEach(f=>{const d=i.style&&i.style[f];for(const p in d)_h(p,e)||O6(o,p,d[p])}),e=Ke({},e);for(u in o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=Ke(a,e.enter),s&&(e.update=Ke(s,e.update)),e}function O6(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Uie=e=>$e(e)?xe(e):e.signal?`(${e.signal})`:Wie(e);function b5(e){if(e.gradient!=null)return yLe(e);let t=e.signal?`(${e.signal})`:e.color?mLe(e.color):e.field!=null?Wie(e.field):e.value!==void 0?xe(e.value):void 0;return e.scale!=null&&(t=vLe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${gw(e.exponent)})`),e.mult!=null&&(t+=`*${gw(e.mult)}`),e.offset!=null&&(t+=`+${gw(e.offset)}`),e.round&&(t=`round(${t})`),t}const gx=(e,t,n,r)=>`(${e}(${[t,n,r].map(b5).join(",")})+'')`;function mLe(e){return e.c?gx("hcl",e.h,e.c,e.l):e.h||e.s?gx("hsl",e.h,e.s,e.l):e.l||e.a?gx("lab",e.l,e.a,e.b):e.r||e.g||e.b?gx("rgb",e.r,e.g,e.b):null}function yLe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:xe(n));for(;t.length&&mt(t)==null;)t.pop();return t.unshift(Uie(e.gradient)),`gradient(${t.join(",")})`}function gw(e){return ke(e)?"("+b5(e)+")":e}function Wie(e){return Hie(ke(e)?e:{datum:e})}function Hie(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ae("Invalid field reference: "+xe(e));return e.signal||(r=$e(r)?au(r).map(xe).join("]["):Hie(r)),t+"["+r+"]"}function vLe(e,t){const n=Uie(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+gw(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function bLe(e){let t="";return e.forEach(n=>{const r=b5(n);t+=n.test?`(${n.test})?${r}:`:r}),mt(t)===":"&&(t+="null"),t}function qie(e,t,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},e=gLe(e,t,n,r,i.config);for(const s in e)a[s]=xLe(e[s],t,o,i);return o}function xLe(e,t,n,r){const i={},o={};for(const a in e)e[a]!=null&&(i[a]=_Le(wLe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function wLe(e){return se(e)?bLe(e):b5(e)}function _Le(e,t,n,r){const i=Zs(e,t);return i.$fields.forEach(o=>r[o]=1),Ke(n,i.$params),i.$expr}const ALe="outer",SLe=["value","update","init","react","bind"];function Kj(e,t){ae(e+' for "outer" push: '+xe(t))}function Gie(e,t){const n=e.name;if(e.push===ALe)t.signals[n]||Kj("No prior signal definition",n),SLe.forEach(r=>{e[r]!==void 0&&Kj("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function iC(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function x5(e,t,n,r){return new iC(e,t,n,r)}function yA(e,t){return x5("operator",e,t)}function Pe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Gy(e,t){return t?{$field:e,$name:t}:{$field:e}}const oC=Gy("key");function Qj(e,t){return{$compare:e,$order:t}}function ELe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $Le="ascending",CLe="descending";function kLe(e){return ke(e)?(e.order===CLe?"-":"+")+w5(e.op,e.field):""}function w5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const KO="scope",aC="view";function jn(e){return e&&e.signal}function TLe(e){return e&&e.expr}function mw(e){if(jn(e))return!0;if(ke(e)){for(const t in e)if(mw(e[t]))return!0}return!1}function Da(e,t){return e??t}function kd(e){return e&&e.signal||e}const Zj="timer";function Vy(e,t){return(e.merge?OLe:e.stream?NLe:e.type?RLe:ae("Invalid stream specification: "+xe(e)))(e,t)}function MLe(e){return e===KO?aC:e||aC}function OLe(e,t){const n=e.merge.map(i=>Vy(i,t)),r=QO({merge:n},e,t);return t.addStream(r).id}function NLe(e,t){const n=Vy(e.stream,t),r=QO({stream:n},e,t);return t.addStream(r).id}function RLe(e,t){let n;e.type===Zj?(n=t.event(Zj,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(MLe(e.source),e.type);const r=QO({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function QO(e,t,n){let r=t.between;return r&&(r.length!==2&&ae('Stream "between" parameter must have 2 entries: '+xe(t)),e.between=[Vy(r[0],n),Vy(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(FLe(t.marktype,t.markname,t.markrole)),t.source===KO&&r.push("inScope(event.item)"),r.length&&(e.filter=Zs("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function FLe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const DLe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function PLe(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||ae("Signal update missing events specification."),$e(o)&&(o=wf(o,t.isSubscope()?KO:aC)),o=Ee(o).filter(u=>u.signal||u.scale?(s.push(u),0):1),s.length>1&&(s=[ILe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&ae("Signal encode and update are mutually exclusive."),a="encode(item(),"+xe(r)+")"),i.update=$e(a)?Zs(a,t):a.expr!=null?Zs(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:DLe,$params:{$value:t.signalRef(a.signal)}}:ae("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(u=>t.addUpdate(Ke(LLe(u,t),i)))}function LLe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Vy(e,t)}}function ILe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function zLe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ae("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Zs(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>PLe(i,t,n.id))}const jt=e=>(t,n,r)=>x5(e,n,t||void 0,r),Vie=jt("aggregate"),BLe=jt("axisticks"),Yie=jt("bound"),us=jt("collect"),eU=jt("compare"),jLe=jt("datajoin"),Xie=jt("encode"),ULe=jt("expression"),WLe=jt("facet"),HLe=jt("field"),qLe=jt("key"),GLe=jt("legendentries"),VLe=jt("load"),YLe=jt("mark"),XLe=jt("multiextent"),JLe=jt("multivalues"),KLe=jt("overlap"),QLe=jt("params"),Jie=jt("prefacet"),ZLe=jt("projection"),eIe=jt("proxy"),tIe=jt("relay"),Kie=jt("render"),nIe=jt("scale"),$0=jt("sieve"),rIe=jt("sortitems"),Qie=jt("viewlayout"),iIe=jt("values");let oIe=0;const Zie={min:"min",max:"max",count:"sum"};function aIe(e,t){const n=e.type||"linear";Wte(n)||ae("Unrecognized scale type: "+xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function sIe(e,t){const n=t.getScale(e.name).params;let r;n.domain=eoe(e.domain,e,t),e.range!=null&&(n.range=noe(e,t,n)),e.interpolate!=null&&yIe(e.interpolate,n),e.nice!=null&&(n.nice=mIe(e.nice)),e.bins!=null&&(n.bins=gIe(e.bins,t));for(r in e)ze(n,r)||r==="name"||(n[r]=Ko(e[r],t))}function Ko(e,t){return ke(e)?e.signal?t.signalRef(e.signal):ae("Unsupported object: "+xe(e)):e}function yw(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ko(n,t))}function _5(e){ae("Can not find data set: "+xe(e))}function eoe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ae("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(se(e)?uIe:e.fields?cIe:lIe)(e,t,n)}function uIe(e,t,n){return e.map(r=>Ko(r,n))}function lIe(e,t,n){const r=n.getData(e.data);return r||_5(e.data),Ip(t.type)?r.valuesRef(n,e.field,toe(e.sort,!1)):Gte(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function cIe(e,t,n){const r=e.data,i=e.fields.reduce((o,a)=>(a=$e(a)?{data:r,field:a}:se(a)||a.signal?fIe(a,n):a,o.push(a),o),[]);return(Ip(t.type)?dIe:Gte(t.type)?hIe:pIe)(e,n,i)}function fIe(e,t){const n="_:vega:_"+oIe++,r=us({});if(se(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,$0({})]),{data:n,field:"data"}}function dIe(e,t,n){const r=toe(e.sort,!0);let i,o;const a=n.map(l=>{const c=t.getData(l.data);return c||_5(l.data),c.countsRef(t,l.field,r)}),s={groupby:oC,pulse:a};r&&(i=r.op||"count",o=r.field?w5(i,r.field):"count",s.ops=[Zie[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Vie(s));const u=t.add(us({pulse:Pe(i)}));return o=t.add(iIe({field:oC,sort:t.sortRef(r),pulse:Pe(u)})),Pe(o)}function toe(e,t){return e&&(!e.field&&!e.op?ke(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ae("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Zie[e.op]&&ae("Multiple domain scales can not be sorted using "+e.op)),e}function hIe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||_5(i.data),o.domainRef(t,i.field)});return Pe(t.add(JLe({values:r})))}function pIe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||_5(i.data),o.extentRef(t,i.field)});return Pe(t.add(XLe({extents:r})))}function gIe(e,t){return e.signal||se(e)?yw(e,t):t.objectProperty(e)}function mIe(e){return ke(e)?{interval:Ko(e.interval),step:Ko(e.step)}:Ko(e)}function yIe(e,t){t.interpolate=Ko(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ko(e.gamma))}function noe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if($e(i)){if(r&&ze(r,i))return e=Ke({},e,{range:r[i]}),noe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Ip(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ae("Unrecognized scale range value: "+xe(i))}else if(i.scheme){n.scheme=se(i.scheme)?yw(i.scheme,t):Ko(i.scheme,t),i.extent&&(n.schemeExtent=yw(i.extent,t)),i.count&&(n.schemeCount=Ko(i.count,t));return}else if(i.step){n.rangeStep=Ko(i.step,t);return}else{if(Ip(e.type)&&!se(i))return eoe(i,e,t);se(i)||ae("Unsupported range type: "+xe(i))}return i.map(o=>(se(o)?yw:Ko)(o,t))}function vIe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=sC(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=sC(n[i],i,t));t.addProjection(e.name,r)}function sC(e,t,n){return se(e)?e.map(r=>sC(r,t,n)):ke(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ae("Unsupported parameter object: "+xe(e)):e}const ls="top",Rg="left",Fg="right",ef="bottom",roe="center",bIe="vertical",xIe="start",wIe="middle",_Ie="end",uC="index",ZO="label",AIe="offset",Wp="perc",SIe="perc2",ta="value",tv="guide-label",eN="guide-title",EIe="group-title",$Ie="group-subtitle",tU="symbol",vw="gradient",lC="discrete",cC="size",CIe="shape",kIe="fill",TIe="stroke",MIe="strokeWidth",OIe="strokeDash",NIe="opacity",tN=[cC,CIe,kIe,TIe,MIe,OIe,NIe],nv={name:1,style:1,interactive:1},yt={value:0},na={value:1},A5="group",ioe="rect",nN="rule",RIe="symbol",C0="text";function Yy(e){return e.type=A5,e.interactive=e.interactive||!1,e}function Ji(e,t){const n=(r,i)=>Da(e[r],Da(t[r],i));return n.isVertical=r=>bIe===Da(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Da(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Da(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Da(e.columns,Da(t.columns,+n.isVertical(!0))),n}function ooe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function FIe(e,t,n){const r=t.config.style[n];return r&&r[e]}function S5(e,t,n){return`item.anchor === '${xIe}' ? ${e} : item.anchor === '${_Ie}' ? ${t} : ${n}`}const rN=S5(xe(Rg),xe(Fg),xe(roe));function DIe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ke(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function aoe(e,t){return t?e?ke(e)?Object.assign({},e,{offset:aoe(e.offset,t)}):{value:e,offset:t}:t:e}function So(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Ng(e.encode,t,nv)):e.interactive=!1,e}function PIe(e,t,n,r){const i=Ji(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const p={enter:u={opacity:yt,x:yt,y:yt,width:er(f),height:er(d)},update:Ke({},u,{opacity:na,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:yt}};return vr(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),So({type:ioe,role:lLe,encode:p},r)}function LIe(e,t,n,r,i){const o=Ji(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,p="";a?(l="y",f="y2",c="x",d="width",p="1-"):(l="x",f="x2",c="y",d="height");const g={opacity:yt,fill:{scale:t,field:ta}};g[l]={signal:p+"datum."+Wp,mult:u},g[c]=yt,g[f]={signal:p+"datum."+SIe,mult:u},g[d]=er(s);const y={enter:g,update:Ke({},g,{opacity:na}),exit:{opacity:yt}};return vr(y,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),So({type:ioe,role:sLe,key:ta,from:i,encode:y},r)}const IIe=`datum.${Wp}<=0?"${Rg}":datum.${Wp}>=1?"${Fg}":"${roe}"`,zIe=`datum.${Wp}<=0?"${ef}":datum.${Wp}>=1?"${ls}":"${wIe}"`;function nU(e,t,n,r){const i=Ji(e,t),o=i.isVertical(),a=er(i.gradientThickness()),s=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,p="";const g={enter:l={opacity:yt},update:c={opacity:na,text:{field:ZO}},exit:{opacity:yt}};return vr(g,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Da(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:zIe},f="y",d="x",p="1-"):(l.align=c.align={signal:IIe},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:p+"datum."+Wp,mult:s},l[d]=c[d]=a,a.offset=Da(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+uC}:void 0,So({type:C0,role:jie,style:tv,key:ta,from:r,encode:g,overlap:u},n)}function BIe(e,t,n,r,i){const o=Ji(e,t),a=n.entries,s=!!(a&&a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${AIe} : datum.${cC}`,p=l?er(l):{field:cC},g=`datum.${uC}`,y=`max(1, ${i})`;let v,b,x,_,A;p.mult=.5,v={enter:b={opacity:yt,x:{signal:d,mult:.5,offset:c},y:p},update:x={opacity:na,x:b.x,y:b.y},exit:{opacity:yt}};let E=null,$=null;e.fill||(E=t.symbolBaseFillColor,$=t.symbolBaseStrokeColor),vr(v,{fill:o("symbolFillColor",E),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",$),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),tN.forEach(N=>{e[N]&&(x[N]=b[N]={scale:e[N],field:ta})});const S=So({type:RIe,role:cLe,key:ta,from:f,clip:l?!0:void 0,encode:v},n.symbols),k=er(c);k.offset=o("labelOffset"),v={enter:b={opacity:yt,x:{signal:d,offset:k},y:p},update:x={opacity:na,text:{field:ZO},x:b.x,y:b.y},exit:{opacity:yt}},vr(v,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const O=So({type:C0,role:jie,style:tv,key:ta,from:f,encode:v},n.labels);return v={enter:{noBound:{value:!l},width:yt,height:l?er(l):yt,opacity:yt},exit:{opacity:yt},update:x={opacity:na,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(_=`ceil(item.mark.items.length / ${y})`,x.row.signal=`${g}%${_}`,x.column.signal=`floor(${g} / ${_})`,A={field:["row",g]}):(x.row.signal=`floor(${g} / ${y})`,x.column.signal=`${g} % ${y}`,A={field:g}),x.column.signal=`(${i})?${x.column.signal}:${g}`,r={facet:{data:r,name:"value",groupby:uC}},Yy({role:JO,from:r,encode:Ng(v,a,nv),marks:[S,O],name:u,interactive:s,sort:A})}function jIe(e,t){const n=Ji(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const iN='item.orient === "left"',oN='item.orient === "right"',E5=`(${iN} || ${oN})`,UIe=`datum.vgrad && ${E5}`,WIe=S5('"top"','"bottom"','"middle"'),HIe=S5('"right"','"left"','"center"'),qIe=`datum.vgrad && ${oN} ? (${HIe}) : (${E5} && !(datum.vgrad && ${iN})) ? "left" : ${rN}`,GIe=`item._anchor || (${E5} ? "middle" : "start")`,VIe=`${UIe} ? (${iN} ? -90 : 90) : 0`,YIe=`${E5} ? (datum.vgrad ? (${oN} ? "bottom" : "top") : ${WIe}) : "top"`;function XIe(e,t,n,r){const i=Ji(e,t),o={enter:{opacity:yt},update:{opacity:na,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:yt}};return vr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:GIe},angle:{signal:VIe},align:{signal:qIe},baseline:{signal:YIe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),So({type:C0,role:fLe,style:eN,from:r,encode:o},n)}function JIe(e,t){let n;return ke(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+rU(e.path)+")":e.sphere&&(n="geoShape("+rU(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function rU(e){return ke(e)&&e.signal?e.signal:xe(e)}function soe(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===A5?JO:t||YO}function KIe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||soe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function QIe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function aN(e,t){const n=Jee(e.type);n||ae("Unrecognized transform type: "+xe(e.type));const r=x5(n.type.toLowerCase(),null,uoe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function uoe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const a=e.params[o];r[a.name]=ZIe(a,t,n)}return r}function ZIe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return eze(e,t,n);if(i===void 0){e.required&&ae("Missing required "+xe(t.type)+" parameter: "+xe(e.name));return}else{if(r==="param")return tze(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!jn(i)?i.map(o=>iU(e,o,n)):iU(e,i,n)}function iU(e,t,n){const r=e.type;if(jn(t))return aU(r)?ae("Expression references can not be signals."):N6(r)?n.fieldRef(t):sU(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||N6(r);return i&&nze(t)?n.exprRef(t.expr,t.as):i&&rze(t)?Gy(t.field,t.as):aU(r)?Zs(t,n):ize(r)?Pe(n.getData(t).values):N6(r)?Gy(t):sU(r)?n.compareRef(t):t}}function eze(e,t,n){return $e(t.from)||ae('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function tze(e,t,n){const r=t[e.name];return e.array?(se(r)||ae("Expected an array of sub-parameters. Instead: "+xe(r)),r.map(i=>oU(e,i,n))):oU(e,r,n)}function oU(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||ae("Unsupported parameter: "+xe(t));const o=Ke(uoe(i,t,n),i.key);return Pe(n.add(QLe(o)))}const nze=e=>e&&e.expr,rze=e=>e&&e.field,ize=e=>e==="data",aU=e=>e==="expr",N6=e=>e==="field",sU=e=>e==="compare";function oze(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||ae("Only group marks can be faceted."),r.field!=null?a=s=bw(r,n):(e.data?s=Pe(n.getData(e.data).aggregate):(o=aN(Ke({type:"aggregate",groupby:Ee(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=bw(r,n),a=s=Pe(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Pe(n.add(us(null,[{}]))),a||(a=bw(e,n)),{key:i,pulse:a,parent:s}}function bw(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Pe(t.getData(e.data).output)}function r0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}r0.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Pe(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new r0(e,o,i,r,a)};function loe(e){return $e(e)?e:null}function uU(e,t,n){const r=w5(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function I1(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=kLe(o);let l=loe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=s[l]),!c){const d=o?{field:oC,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Pe(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(x5(r,void 0,d)),a&&(t.index[i]=f),c=Pe(f),l!=null&&(s[l]=c)}return c}r0.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=loe(t);let a,s,u;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&uU(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Pe(r.output)},n&&n.field&&uU(e,u,n),s=e.add(Vie(u)),a=e.add(us({pulse:Pe(s)})),a={agg:s,ref:Pe(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Pe(this.values)},extentRef(e,t){return I1(e,this,"extent","extent",t,!1)},domainRef(e,t){return I1(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return I1(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return I1(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return I1(e,this,"indata","tupleindex",t,!0,!0)}};function aze(e,t,n){const r=e.from.facet,i=r.name,o=bw(r,t);let a;r.name||ae("Facet must have a name: "+xe(r)),r.data||ae("Facet must reference a data set: "+xe(r)),r.field?a=t.add(Jie({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(WLe({key:t.keyRef(r.groupby),group:Pe(t.proxy(n.parent)),pulse:o})):ae("Facet must specify groupby or field: "+xe(r));const s=t.fork(),u=s.add(us()),l=s.add($0({pulse:Pe(u)}));s.addData(i,new r0(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function sze(e,t,n){const r=t.add(Jie({pulse:n.pulse})),i=t.fork();i.add($0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function coe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(yA()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",c=Zs(l,t);u.update=c.$expr,u.params=c.$params}function $5(e,t){const n=soe(e),r=e.type===A5,i=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===JO||n===XO,s,u,l,c,f,d,p;const g=n===YO||a||i,y=oze(e.from,r,t);u=t.add(jLe({key:y.key||(e.key?Gy(e.key):void 0),pulse:y.pulse,clean:!r}));const v=Pe(u);u=l=t.add(us({pulse:v})),u=t.add(YLe({markdef:KIe(e),interactive:QIe(e.interactive,t),clip:JIe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Pe(u)}));const b=Pe(u);u=c=t.add(Xie(qie(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach($=>{const S=aN($,t),k=S.metadata;(k.generates||k.changes)&&ae("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),S.params.pulse=Pe(u),t.add(u=S)}),e.sort&&(u=t.add(rIe({sort:t.compareRef(e.sort),pulse:Pe(u)})));const x=Pe(u);(i||a)&&(a=t.add(Qie({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:x})),d=Pe(a));const _=t.add(Yie({mark:b,pulse:d||x}));p=Pe(_),r&&(g&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(x,d||p,v),i?aze(e,t,y):g?sze(e,t,y):t.parse(e),t.popState(),g&&(a&&s.push(a),s.push(_))),o&&(p=uze(o,p,t));const A=t.add(Kie({pulse:p})),E=t.add($0({pulse:Pe(A)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new r0(t,l,A,E)),e.on&&e.on.forEach($=>{($.insert||$.remove||$.toggle)&&ae("Marks only support modify triggers."),coe($,t,f)}))}function uze(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:jn(o)?n.signalRef(o.signal):o,method:jn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const s=i.tolerance;a.boundTolerance=jn(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Pe(n.add(KLe(a)))}function lze(e,t){const n=t.config.legend,r=e.encode||{},i=Ji(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c=0,f,d,p;tN.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||ae("Missing valid scale for legend.");const g=cze(e,t.scaleType(c)),y={title:e.title!=null,scales:l,type:g,vgrad:g!=="symbol"&&i.isVertical()},v=Pe(t.add(us(null,[y]))),b={enter:{x:{value:0},y:{value:0}}},x=Pe(t.add(GLe(d={type:g,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===vw?(p=[PIe(e,c,n,r.gradient),nU(e,n,r.labels,x)],d.count=d.count||t.signalRef(`max(2,2*floor((${kd(i.gradientLength())})/100))`)):g===lC?p=[LIe(e,c,n,r.gradient,x),nU(e,n,r.labels,x)]:(f=jIe(e,n),p=[BIe(e,n,r,x,kd(f.columns))],d.size=hze(e,t,p[0].marks)),p=[Yy({role:uLe,from:v,encode:b,marks:p,layout:f,interactive:s})],y.title&&p.push(XIe(e,n,r.title,v)),$5(Yy({role:aLe,from:v,encode:Ng(dze(i,e,n),o,nv),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function cze(e,t){let n=e.type||tU;return!e.type&&fze(e)===1&&(e.fill||e.stroke)&&(n=pM(t)?vw:A$(t)?lC:tU),n!==vw?n:A$(t)?lC:vw}function fze(e){return tN.reduce((t,n)=>t+(e[n]?1:0),0)}function dze(e,t,n){const r={enter:{},update:{}};return vr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function hze(e,t,n){const r=kd(lU("size",e,n)),i=kd(lU("strokeWidth",e,n)),o=kd(pze(n[1].encode,t,tv));return Zs(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function lU(e,t,n){return t[e]?`scale("${t[e]}",datum)`:ooe(e,n[0].encode)}function pze(e,t,n){return ooe("fontSize",e)||FIe("fontSize",t,n)}const gze=`item.orient==="${Rg}"?-90:item.orient==="${Fg}"?90:0`;function mze(e,t){e=$e(e)?{text:e}:e;const n=Ji(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l={},c=Pe(t.add(us(null,[l])));return u.push(bze(e,n,yze(e),c)),e.subtitle&&u.push(xze(e,n,r.subtitle,c)),$5(Yy({role:dLe,from:c,encode:vze(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function yze(e){const t=e.encode;return t&&t.title||Ke({name:e.name,interactive:e.interactive,style:e.style},t)}function vze(e,t){const n={enter:{},update:{}};return vr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:rN},angle:{signal:gze},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Ng(n,t,nv)}function bze(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return vr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),So({type:C0,role:hLe,style:EIe,from:r,encode:a},n)}function xze(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return vr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),So({type:C0,role:pLe,style:$Ie,from:r,encode:a},n)}function wze(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(aN(r,t))}),e.on&&e.on.forEach(r=>{coe(r,t,e.name)}),t.addDataPipeline(e.name,_ze(e,t,n))}function _ze(e,t,n){const r=[];let i=null,o=!1,a=!1,s,u,l,c,f;for(e.values?jn(e.values)||mw(e.format)?(r.push(cU(t,e)),r.push(i=Wf())):r.push(i=Wf({$ingest:e.values,$format:e.format})):e.url?mw(e.url)||mw(e.format)?(r.push(cU(t,e)),r.push(i=Wf())):r.push(i=Wf({$request:e.url,$format:e.format})):e.source&&(i=s=Ee(e.source).map(d=>Pe(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Wf()),r.push(c),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=c:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=tIe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,Wf())),i||r.push(Wf()),r.push($0({})),r}function Wf(e){const t=us({},e);return t.metadata={source:!0},t}function cU(e,t){return VLe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const foe=e=>e===ef||e===ls,C5=(e,t,n)=>jn(e)?$ze(e.signal,t,n):e===Rg||e===ls?t:n,tr=(e,t,n)=>jn(e)?Sze(e.signal,t,n):foe(e)?t:n,Ja=(e,t,n)=>jn(e)?Eze(e.signal,t,n):foe(e)?n:t,doe=(e,t,n)=>jn(e)?Cze(e.signal,t,n):e===ls?{value:t}:{value:n},Aze=(e,t,n)=>jn(e)?kze(e.signal,t,n):e===Fg?{value:t}:{value:n},Sze=(e,t,n)=>hoe(`${e} === '${ls}' || ${e} === '${ef}'`,t,n),Eze=(e,t,n)=>hoe(`${e} !== '${ls}' && ${e} !== '${ef}'`,t,n),$ze=(e,t,n)=>sN(`${e} === '${Rg}' || ${e} === '${ls}'`,t,n),Cze=(e,t,n)=>sN(`${e} === '${ls}'`,t,n),kze=(e,t,n)=>sN(`${e} === '${Fg}'`,t,n),hoe=(e,t,n)=>(t=t!=null?er(t):t,n=n!=null?er(n):n,fU(t)&&fU(n)?(t=t?t.signal||xe(t.value):null,n=n?n.signal||xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ke({test:e},t)].concat(n||[])),fU=e=>e==null||Object.keys(e).length===1,sN=(e,t,n)=>({signal:`${e} ? (${Uh(t)}) : (${Uh(n)})`}),Tze=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Rg}' ? (${Uh(r)}) : `:"")+(n!=null?`${e} === '${ef}' ? (${Uh(n)}) : `:"")+(i!=null?`${e} === '${Fg}' ? (${Uh(i)}) : `:"")+(t!=null?`${e} === '${ls}' ? (${Uh(t)}) : `:"")+"(null)"}),Uh=e=>jn(e)?e.signal:e==null?null:xe(e),Mze=(e,t)=>t===0?0:jn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},rp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hh(e,t,n,r){let i;if(t&&ze(t,e))return t[e];if(ze(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[eN][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[tv][i]}return null}function dU(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Oze(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,u,l;if(jn(a)){const f=dU([n.axisX,n.axisY]),d=dU([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=tr(a,hh(l,n.axisX,i,r),hh(l,n.axisY,i,r));u={};for(l of d)u[l]=Tze(a.signal,hh(l,n.axisTop,i,r),hh(l,n.axisBottom,i,r),hh(l,n.axisLeft,i,r),hh(l,n.axisRight,i,r))}else s=a===ls||a===ef?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||u||o?Ke({},i,s,u,o):i}function Nze(e,t,n,r){const i=Ji(e,t),o=e.orient;let a,s;const u={enter:a={opacity:yt},update:s={opacity:na},exit:{opacity:yt}};vr(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=hU(e,0),c=hU(e,1);return a.x=s.x=tr(o,l,yt),a.x2=s.x2=tr(o,c),a.y=s.y=Ja(o,l,yt),a.y2=s.y2=Ja(o,c),So({type:nN,role:tLe,from:r,encode:u},n)}function hU(e,t){return{scale:e.scale,range:t}}function Rze(e,t,n,r,i){const o=Ji(e,t),a=e.orient,s=e.gridScale,u=C5(a,1,-1),l=Fze(e.offset,u);let c,f,d;const p={enter:c={opacity:yt},update:d={opacity:na},exit:f={opacity:yt}};vr(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:ta,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},y=tr(a,{signal:"height"},{signal:"width"}),v=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},b=s?{scale:s,range:1,mult:u,offset:l}:Ke(y,{mult:u,offset:l});return c.x=d.x=tr(a,g,v),c.y=d.y=Ja(a,g,v),c.x2=d.x2=Ja(a,b),c.y2=d.y2=tr(a,b),f.x=tr(a,g),f.y=Ja(a,g),So({type:nN,role:nLe,key:ta,from:r,encode:p},n)}function Fze(e,t){if(t!==1)if(!ke(e))e=jn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ke({},e);for(;n.mult!=null;)if(ke(n.mult))n=n.mult=Ke({},n.mult);else return n.mult=jn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Dze(e,t,n,r,i,o){const a=Ji(e,t),s=e.orient,u=C5(s,-1,1);let l,c,f;const d={enter:l={opacity:yt},update:f={opacity:na},exit:c={opacity:yt}};vr(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const p=er(i);p.mult=u;const g={scale:e.scale,field:ta,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=tr(s,yt,g),f.y2=l.y2=tr(s,p),c.x=tr(s,g),f.x=l.x=Ja(s,yt,g),f.x2=l.x2=Ja(s,p),c.y=Ja(s,g),So({type:nN,role:iLe,key:ta,from:r,encode:d},n)}function R6(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Pze(e,t,n,r,i,o){const a=Ji(e,t),s=e.orient,u=e.scale,l=C5(s,-1,1),c=kd(a("labelFlush")),f=kd(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline");let g=c===0||!!c,y;const v=er(i);v.mult=l,v.offset=er(a("labelPadding")||0),v.offset.mult=l;const b={scale:u,field:ta,band:.5,offset:aoe(o.offset,a("labelOffset"))},x=tr(s,g?R6(u,c,'"left"','"right"','"center"'):{value:"center"},Aze(s,"left","right")),_=tr(s,doe(s,"bottom","top"),g?R6(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),A=R6(u,c,`-(${f})`,f,0);g=g&&f;const E={opacity:yt,x:tr(s,b,v),y:Ja(s,b,v)},$={enter:E,update:y={opacity:na,text:{field:ZO},x:E.x,y:E.y,align:x,baseline:_},exit:{opacity:yt,x:E.x,y:E.y}};vr($,{dx:!d&&g?tr(s,A):null,dy:!p&&g?Ja(s,A):null}),vr($,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});const S=a("labelBound");let k=a("labelOverlap");return k=k||S?{separation:a("labelSeparation"),method:k,order:"datum.index",bound:S?{scale:u,orient:s,tolerance:S}:null}:void 0,y.align!==x&&(y.align=rp(y.align,x)),y.baseline!==_&&(y.baseline=rp(y.baseline,_)),So({type:C0,role:rLe,style:tv,key:ta,from:r,encode:$,overlap:k},n)}function Lze(e,t,n,r){const i=Ji(e,t),o=e.orient,a=C5(o,-1,1);let s,u;const l={enter:s={opacity:yt,anchor:er(i("titleAnchor",null)),align:{signal:rN}},update:u=Ke({},s,{opacity:na,text:er(e.title)}),exit:{opacity:yt}},c={signal:`lerp(range("${e.scale}"), ${S5(0,1,.5)})`};return u.x=tr(o,c),u.y=Ja(o,c),s.angle=tr(o,yt,Mze(a,90)),s.baseline=tr(o,doe(o,ef,ls),{value:ef}),u.angle=s.angle,u.baseline=s.baseline,vr(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Ize(i,o,l,n),l.update.align=rp(l.update.align,s.align),l.update.angle=rp(l.update.angle,s.angle),l.update.baseline=rp(l.update.baseline,s.baseline),So({type:C0,role:oLe,style:eN,from:r,encode:l},n)}function Ize(e,t,n,r){const i=(s,u)=>s!=null?(n.update[u]=rp(er(s),n.update[u]),!1):!_h(u,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?er(a):tr(t,er(a),er(o))}function zze(e,t){const n=Oze(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=Ji(e,n),l=DIe(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Pe(t.add(us({},[c]))),d=Pe(t.add(BLe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];let g;return c.grid&&p.push(Rze(e,n,r.grid,d,l)),c.ticks&&(g=u("tickSize"),p.push(Dze(e,n,r.ticks,d,g,l))),c.labels&&(g=c.ticks?g:0,p.push(Pze(e,n,r.labels,d,g,l))),c.domain&&p.push(Nze(e,n,r.domain,f)),c.title&&p.push(Lze(e,n,r.title,f)),$5(Yy({role:eLe,from:f,encode:Ng(Bze(u,e),i,nv),marks:p,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function Bze(e,t){const n={enter:{},update:{}};return vr(n,{orient:e("orient"),offset:e("offset")||0,position:Da(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function poe(e,t,n){const r=Ee(e.signals),i=Ee(e.scales);return n||r.forEach(o=>Gie(o,t)),Ee(e.projections).forEach(o=>vIe(o,t)),i.forEach(o=>aIe(o,t)),Ee(e.data).forEach(o=>wze(o,t)),i.forEach(o=>sIe(o,t)),(n||r).forEach(o=>zLe(o,t)),Ee(e.axes).forEach(o=>zze(o,t)),Ee(e.marks).forEach(o=>$5(o,t)),Ee(e.legends).forEach(o=>lze(o,t)),e.title&&mze(e.title,t),t.parseLambdas(),t}const jze=e=>Ng({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Uze(e,t){const n=t.config,r=Pe(t.root=t.add(yA())),i=Wze(e,n);i.forEach(l=>Gie(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(us()),a=t.add(Xie(qie(jze(e.encode),A5,XO,e.style,t,{pulse:Pe(o)}))),s=t.add(Qie({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Pe(a)}));t.operators.pop(),t.pushState(Pe(a),Pe(s),null),poe(e,t,i),t.operators.push(s);let u=t.add(Yie({mark:r,pulse:Pe(s)}));return u=t.add(Kie({pulse:Pe(u)})),u=t.add($0({pulse:Pe(u)})),t.addData("root",new r0(t,o,o,u)),t}function z1(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Wze(e,t){const n=a=>Da(e[a],t[a]),r=[z1("background",n("background")),z1("autosize",KPe(n("autosize"))),z1("padding",ZPe(n("padding"))),z1("width",n("width")||0),z1("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return Ee(e.signals).forEach(a=>{ze(i,a.name)?a=Ke(i[a.name],a):r.push(a),o[a.name]=a}),Ee(t.signals).forEach(a=>{!ze(o,a.name)&&!ze(i,a.name)&&r.push(a)}),r}function goe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function pU(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}goe.prototype=pU.prototype={parse(e){return poe(e,this)},fork(){return new pU(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof iC?Pe(e):e;return this.add(eIe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Pe(this.add($0({pulse:e})))),this._parent.push(t),this._lookup.push(n?Pe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return mt(this._parent)},encode(){return mt(this._encode)},lookup(){return mt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if($e(e))return Gy(e,t);e.signal||ae("Unsupported field reference: "+xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Pe(this.add(HLe(i)))}return r},compareRef(e){let t=!1;const n=o=>jn(o)?(t=!0,this.signalRef(o.signal)):TLe(o)?(t=!0,this.exprRef(o.expr)):o,r=Ee(e.field).map(n),i=Ee(e.order).map(n);return t?Pe(this.add(eU({fields:r,orders:i}))):Qj(r,i)},keyRef(e,t){let n=!1;const r=o=>jn(o)?(n=!0,Pe(i[o.signal])):o,i=this.signals;return e=Ee(e).map(r),n?Pe(this.add(qLe({fields:e,flat:t}))):ELe(e,t)},sortRef(e){if(!e)return e;const t=w5(e.op,e.field),n=e.order||$Le;return n.signal?Pe(this.add(eU({fields:t,orders:this.signalRef(n.signal)}))):Qj(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ze(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ae("Duplicate signal name: "+xe(e));const n=t instanceof iC?t:this.add(yA(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ae("Unrecognized signal name: "+xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Pe(this.signals[e]):(ze(this.lambdas,e)||(this.lambdas[e]=this.add(yA(null))),Pe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Zs(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ke(e)?e:this.signalRef(e.signal||uN(e))},exprRef(e,t){const n={expr:Zs(e,this)};return t&&(n.expr.$name=t),Pe(this.add(ULe(n)))},addBinding(e,t){this.bindings||ae("Nested signals do not support binding: "+xe(e)),this.bindings.push(Ke({signal:e},t))},addScaleProj(e,t){ze(this.scales,e)&&ae("Duplicate scale or projection name: "+xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,nIe(t))},addProjection(e,t){this.addScaleProj(e,ZLe(t))},getScale(e){return this.scales[e]||ae("Unrecognized scale name: "+xe(e)),this.scales[e]},scaleRef(e){return Pe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ze(this.data,e)&&ae("Duplicate data set name: "+xe(e)),this.data[e]=t},getData(e){return this.data[e]||ae("Undefined data set name: "+xe(e)),this.data[e]},addDataPipeline(e,t){return ze(this.data,e)&&ae("Duplicate data set name: "+xe(e)),this.addData(e,r0.fromEntries(this,t))}};function uN(e){return(se(e)?Hze:qze)(e)}function Hze(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ke(i)?i.signal||uN(i):xe(i))}return n+"]"}function qze(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+xe(r)+":"+(ke(i)?i.signal||uN(i):xe(i));return t+"}"}function Gze(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Vze(e,t,n){return ke(e)||ae("Input Vega specification must be an object."),t=Sg(Gze(),t,e.config),Uze(e,new goe(t,n)).toRuntime()}var Yze="5.26.1";Ke(Dp,VCe,PMe,pOe,qOe,QOe,ENe,iNe,CNe,ONe,jNe,YNe);const Xze=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Mn,CanvasHandler:Qc,CanvasRenderer:By,DATE:qi,DAY:Mr,DAYOFYEAR:Qs,Dataflow:np,Debug:HZ,Error:Zk,EventStream:U3,Gradient:sne,GroupItem:t5,HOURS:wo,Handler:Kc,HybridHandler:YM,HybridRenderer:sA,Info:WZ,Item:e5,MILLISECONDS:ts,MINUTES:_o,MONTH:Dr,Marks:Ao,MultiPulse:bT,None:UZ,Operator:Wt,Parameters:j3,Pulse:Mc,QUARTER:Hi,RenderType:pc,Renderer:To,ResourceLoader:AM,SECONDS:pa,SVGHandler:jM,SVGRenderer:l5,SVGStringRenderer:VM,Scenegraph:zM,TIME_UNITS:fT,Transform:ee,View:Rie,WEEK:zn,Warn:eT,YEAR:gr,accessor:Xi,accessorFields:Fr,accessorName:wn,array:Ee,ascending:D3,bandwidthNRD:AT,bin:Zee,bootstrapCI:ete,boundClip:ire,boundContext:V2,boundItem:T$,boundMark:$ne,boundStroke:wl,changeset:A0,clampRange:tee,codegenExpression:aie,compare:oT,constant:Br,cumulativeLogNormal:TT,cumulativeNormal:H3,cumulativeUniform:RT,dayofyear:hee,debounce:aT,defaultLocale:pT,definition:Jee,densityLogNormal:kT,densityNormal:ST,densityUniform:NT,domChild:Pn,domClear:Go,domCreate:dc,domFind:BM,dotbin:tte,error:ae,expressionFunction:kn,extend:Ke,extent:Ks,extentIndex:nee,falsy:Gl,fastmap:$g,field:da,flush:ree,font:a5,fontFamily:J2,fontSize:su,format:tw,formatLocale:V_,formats:yT,hasOwnProperty:ze,id:D2,identity:zr,inferType:zee,inferTypes:Bee,ingest:kt,inherits:be,inrange:zh,interpolate:gM,interpolateColors:Q3,interpolateRange:Vte,intersect:ere,intersectBoxLine:Bh,intersectPath:SM,intersectPoint:EM,intersectRule:gne,isArray:se,isBoolean:bf,isDate:Tc,isFunction:Qe,isIterable:iee,isNumber:xt,isObject:ke,isRegExp:oee,isString:$e,isTuple:z3,key:sT,lerp:aee,lineHeight:Xc,loader:L3,locale:Lee,logger:tT,lruCache:see,markup:GM,merge:uee,mergeConfig:Sg,multiLineOffset:PM,one:Ag,pad:lee,panLinear:XZ,panLog:JZ,panPow:KZ,panSymlog:QZ,parse:Vze,parseExpression:DO,parseSelector:wf,path:g3,pathCurves:xM,pathEqual:ore,pathParse:zp,pathRectangle:cne,pathRender:Py,pathSymbols:lne,pathTrail:fne,peek:mt,point:u5,projection:aO,quantileLogNormal:MT,quantileNormal:q3,quantileUniform:FT,quantiles:wT,quantizeInterpolator:Yte,quarter:ZZ,quartiles:_T,get random(){return ga},randomInteger:K$e,randomKDE:$T,randomLCG:J$e,randomLogNormal:rte,randomMixture:ite,randomNormal:ET,randomUniform:ote,read:Wee,regressionConstant:DT,regressionExp:ste,regressionLinear:PT,regressionLoess:cte,regressionLog:ate,regressionPoly:lte,regressionPow:ute,regressionQuad:LT,renderModule:c5,repeat:fm,resetDefaultLocale:V4e,resetSVGClipId:hne,resetSVGDefIds:eMe,responseType:Uee,runtimeContext:xie,sampleCurve:V3,sampleLogNormal:CT,sampleNormal:W3,sampleUniform:OT,scale:At,sceneEqual:XM,sceneFromJSON:kne,scenePickVisit:Q_,sceneToJSON:Cne,sceneVisit:ns,sceneZOrder:$M,scheme:mM,serializeXML:qne,setHybridRendererOptions:JTe,setRandom:Y$e,span:P2,splitAccessPath:au,stringValue:xe,textMetrics:yo,timeBin:Mee,timeFloor:xee,timeFormatLocale:Ry,timeInterval:Cg,timeOffset:Aee,timeSequence:$ee,timeUnitSpecifier:dee,timeUnits:dT,toBoolean:uT,toDate:lT,toNumber:Or,toSet:es,toString:cT,transform:Kee,transforms:Dp,truncate:cee,truthy:ha,tupleid:Le,typeParsers:x$,utcFloor:wee,utcInterval:kg,utcOffset:See,utcSequence:Cee,utcdayofyear:mee,utcquarter:eee,utcweek:yee,version:Yze,visitArray:ec,week:pee,writeConfig:Eg,zero:sc,zoomLinear:nT,zoomLog:rT,zoomPow:G_,zoomSymlog:iT},Symbol.toStringTag,{value:"Module"}));function Jze(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Kze={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Qze={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Zze={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const eBe=Array.prototype.slice,Hf=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,eBe.call(t,1))},tBe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0);var nBe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:tBe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Hf("join",arguments)},indexof:function(){return Hf("indexOf",arguments)},lastindexof:function(){return Hf("lastIndexOf",arguments)},slice:function(){return Hf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Hf("substring",arguments,String)},split:function(){return Hf("split",arguments,String)},replace:function(){return Hf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const rBe=["view","item","group","xy","x","y"],fC=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&fC.add(setImmediate);const iBe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Kze[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),fC.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||nBe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Qze[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Zze[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,fC.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function B1(e,t,n,r,i,o){const a=s=>iBe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,rBe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var oBe={operator(e,t){const n=t.ast,r=e.functions;return i=>B1(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>B1(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>B1(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const a=o.item&&o.item.datum;return B1(n,r,i,a,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const u=a.datum;let l=0,c;for(const f in r)c=B1(r[f].ast,i,s,u,void 0,a),a[f]!==c&&(a[f]=c,l=1);return n!=="rule"&&Jze(a,r,o),l}}};const aBe="vega-lite",sBe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',uBe="5.16.3",lBe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],cBe="https://vega.github.io/vega-lite/",fBe="Vega-Lite is a concise high-level language for interactive visualization.",dBe=["vega","chart","visualization"],hBe="build/vega-lite.js",pBe="build/vega-lite.min.js",gBe="build/vega-lite.min.js",mBe="build/src/index",yBe="build/src/index.d.ts",vBe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},bBe=["bin","build","src","vega-lite*","tsconfig.json"],xBe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},wBe={type:"git",url:"https://github.com/vega/vega-lite.git"},_Be="BSD-3-Clause",ABe={url:"https://github.com/vega/vega-lite/issues"},SBe={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},EBe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},$Be={vega:"^5.24.0"},CBe={node:">=18"},kBe={name:aBe,author:sBe,version:uBe,collaborators:lBe,homepage:cBe,description:fBe,keywords:dBe,main:hBe,unpkg:pBe,jsdelivr:gBe,module:mBe,types:yBe,bin:vBe,files:bBe,scripts:xBe,repository:wBe,license:_Be,bugs:ABe,devDependencies:SBe,dependencies:EBe,peerDependencies:$Be,engines:CBe};function lN(e){return!!e.or}function cN(e){return!!e.and}function fN(e){return!!e.not}function xw(e,t){if(fN(e))xw(e.not,t);else if(cN(e))for(const n of e.and)xw(n,t);else if(lN(e))for(const n of e.or)xw(n,t);else t(e)}function ip(e,t){return fN(e)?{not:ip(e.not,t)}:cN(e)?{and:e.and.map(n=>ip(n,t))}:lN(e)?{or:e.or.map(n=>ip(n,t))}:t(e)}const Ge=structuredClone;function moe(e){throw new Error(e)}function Hp(e,t){const n={};for(const r of t)ze(e,r)&&(n[r]=e[r]);return n}function ji(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Bt(e)).join(",")})`};function ct(e){if(xt(e))return e;const t=$e(e)?e:Bt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function dC(e){return e===!1||e===null}function ft(e,t){return e.includes(t)}function i0(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function dN(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function yoe(e,...t){for(const n of t)TBe(e,n??{});return e}function TBe(e,t){for(const n of he(t))Eg(e,n,t[n],!0)}function Ps(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function MBe(e,t){const n=he(e),r=he(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function voe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hN(e,t){for(const n of e)if(t.has(n))return!0;return!1}function hC(e){const t=new Set;for(const n of e){const i=au(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function pN(e,t){return e===void 0||t===void 0?!0:hN(hC(e),hC(t))}function zt(e){return he(e).length===0}const he=Object.keys,mr=Object.values,tf=Object.entries;function Xy(e){return e===!0||e===!1}function an(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Jm(e,t){return fN(e)?`!(${Jm(e.not,t)})`:cN(e)?`(${e.and.map(n=>Jm(n,t)).join(") && (")})`:lN(e)?`(${e.or.map(n=>Jm(n,t)).join(") || (")})`:t(e)}function vA(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vA(e[n],t)&&delete e[n],zt(e)}function rv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function gN(e,t="datum"){const n=au(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(xe).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function boe(e,t="datum"){return`${t}[${xe(au(e).join("."))}]`}function OBe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ma(e){return`${au(e).map(OBe).join("\\.")}`}function o0(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function mN(e){return`${au(e).join(".")}`}function qp(e){return e?au(e).length:0}function $n(...e){for(const t of e)if(t!==void 0)return t}let xoe=42;function woe(e){const t=++xoe;return e?String(e)+t:t}function NBe(){xoe=42}function _oe(e){return Aoe(e)?e:`__${e}`}function Aoe(e){return e.startsWith("__")}function Jy(e){if(e!==void 0)return(e%360+360)%360}function k5(e){return xt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const gU=Object.getPrototypeOf(structuredClone({}));function po(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!po(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!po(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==gU.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==gU.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!po(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Bt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){const u=s[i],l=n(r[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}const nl="row",rl="column",T5="facet",sn="x",ar="y",cs="x2",cu="y2",_f="xOffset",Dg="yOffset",fs="radius",Al="radius2",ba="theta",Sl="theta2",ds="latitude",hs="longitude",ps="latitude2",ya="longitude2",Gi="color",fu="fill",du="stroke",Vi="shape",El="size",k0="angle",$l="opacity",Af="fillOpacity",Sf="strokeOpacity",Ef="strokeWidth",$f="strokeDash",iv="text",Gp="order",ov="detail",M5="key",a0="tooltip",O5="href",N5="url",R5="description",RBe={x:1,y:1,x2:1,y2:1},Soe={theta:1,theta2:1,radius:1,radius2:1};function Eoe(e){return e in Soe}const yN={longitude:1,longitude2:1,latitude:1,latitude2:1};function $oe(e){switch(e){case ds:return"y";case ps:return"y2";case hs:return"x";case ya:return"x2"}}function Coe(e){return e in yN}const FBe=he(yN),vN={...RBe,...Soe,...yN,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function op(e){return e===Gi||e===fu||e===du}const koe={row:1,column:1,facet:1},Qo=he(koe),bN={...vN,...koe},DBe=he(bN),{order:prt,detail:grt,tooltip:mrt,...PBe}=bN,{row:yrt,column:vrt,facet:brt,...LBe}=PBe;function IBe(e){return!!LBe[e]}function Toe(e){return!!bN[e]}const zBe=[cs,cu,ps,ya,Sl,Al];function Moe(e){return T0(e)!==e}function T0(e){switch(e){case cs:return sn;case cu:return ar;case ps:return ds;case ya:return hs;case Sl:return ba;case Al:return fs}return e}function nf(e){if(Eoe(e))switch(e){case ba:return"startAngle";case Sl:return"endAngle";case fs:return"outerRadius";case Al:return"innerRadius"}return e}function hu(e){switch(e){case sn:return cs;case ar:return cu;case ds:return ps;case hs:return ya;case ba:return Sl;case fs:return Al}}function Yi(e){switch(e){case sn:case cs:return"width";case ar:case cu:return"height"}}function Ooe(e){switch(e){case sn:return"xOffset";case ar:return"yOffset";case cs:return"x2Offset";case cu:return"y2Offset";case ba:return"thetaOffset";case fs:return"radiusOffset";case Sl:return"theta2Offset";case Al:return"radius2Offset"}}function xN(e){switch(e){case sn:return"xOffset";case ar:return"yOffset"}}function BBe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const jBe=he(vN),{x:xrt,y:wrt,x2:_rt,y2:Art,xOffset:Srt,yOffset:Ert,latitude:$rt,longitude:Crt,latitude2:krt,longitude2:Trt,theta:Mrt,theta2:Ort,radius:Nrt,radius2:Rrt,...wN}=vN,UBe=he(wN),_N={x:1,y:1},pu=he(_N);function Cn(e){return e in _N}const AN={theta:1,radius:1},WBe=he(AN);function F5(e){return e==="width"?sn:ar}const Noe={xOffset:1,yOffset:1};function av(e){return e in Noe}const{text:Frt,tooltip:Drt,href:Prt,url:Lrt,description:Irt,detail:zrt,key:Brt,order:jrt,...Roe}=wN,HBe=he(Roe);function qBe(e){return!!wN[e]}function GBe(e){switch(e){case Gi:case fu:case du:case El:case Vi:case $l:case Ef:case $f:return!0;case Af:case Sf:case k0:return!1}}const Foe={..._N,...AN,...Noe,...Roe},D5=he(Foe);function Cl(e){return!!Foe[e]}function VBe(e,t){return XBe(e)[t]}const Doe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Urt,...YBe}=Doe;function XBe(e){switch(e){case Gi:case fu:case du:case R5:case ov:case M5:case a0:case O5:case Gp:case $l:case Af:case Sf:case Ef:case T5:case nl:case rl:return Doe;case sn:case ar:case _f:case Dg:case ds:case hs:return YBe;case cs:case cu:case ps:case ya:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case El:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case $f:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Vi:return{point:"always",geoshape:"always"};case iv:return{text:"always"};case k0:return{point:"always",square:"always",text:"always"};case N5:return{image:"always"};case ba:return{text:"always",arc:"always"};case fs:return{text:"always",arc:"always"};case Sl:case Al:return{arc:"always"}}}function F6(e){switch(e){case sn:case ar:case ba:case fs:case _f:case Dg:case El:case k0:case Ef:case $l:case Af:case Sf:case cs:case cu:case Sl:case Al:return;case T5:case nl:case rl:case Vi:case $f:case iv:case a0:case O5:case N5:case R5:return"discrete";case Gi:case fu:case du:return"flexible";case ds:case hs:case ps:case ya:case ov:case M5:case Gp:return}}const JBe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},KBe={count:1,min:1,max:1};function ml(e){return!!e&&!!e.argmin}function Cf(e){return!!e&&!!e.argmax}function SN(e){return $e(e)&&!!JBe[e]}const QBe=new Set(["count","valid","missing","distinct"]);function Poe(e){return $e(e)&&QBe.has(e)}function ZBe(e){return $e(e)&&ft(["min","max"],e)}const eje=new Set(["count","sum","distinct","valid","missing"]),tje=new Set(["mean","average","median","q1","q3","min","max"]);function Loe(e){return bf(e)&&(e=V5(e,void 0)),"bin"+he(e).map(t=>P5(e[t])?an(`_${t}_${tf(e[t])}`):an(`_${t}_${e[t]}`)).join("")}function Yt(e){return e===!0||M0(e)&&!e.binned}function cr(e){return e==="binned"||M0(e)&&e.binned===!0}function M0(e){return ke(e)}function P5(e){return e==null?void 0:e.param}function mU(e){switch(e){case nl:case rl:case El:case Gi:case fu:case du:case Ef:case $l:case Af:case Sf:case Vi:return 6;case $f:return 4;default:return 10}}function sv(e){return!!(e!=null&&e.expr)}function Mi(e){const t=he(e||{}),n={};for(const r of t)n[r]=co(e[r]);return n}function Ioe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:g,...y}=e,v={...y,...s?{fill:s}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...a!==void 0?{limit:a}:{}},x={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...p?{subtitleLineHeight:p}:{},...g?{subtitlePadding:g}:{}},_=Hp(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:v,subtitleMarkConfig:_,nonMarkTitleProperties:b,subtitle:x}}function rc(e){return $e(e)||se(e)&&$e(e[0])}function Re(e){return!!(e!=null&&e.signal)}function kf(e){return!!e.step}function nje(e){return se(e)?!1:"fields"in e&&!("data"in e)}function rje(e){return se(e)?!1:"fields"in e&&"data"in e}function Zu(e){return se(e)?!1:"field"in e&&"data"in e}const ije={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},oje=he(ije),aje={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},pC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function zoe(e){const t=se(e.condition)?e.condition.map(yU):yU(e.condition);return{...co(e),condition:t}}function co(e){if(sv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function yU(e){if(sv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Qt(e){if(sv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Re(e)?e:e!==void 0?{value:e}:void 0}function sje(e){return Re(e)?e.signal:xe(e)}function vU(e){return Re(e)?e.signal:xe(e.value)}function Wa(e){return Re(e)?e.signal:e==null?null:xe(e)}function uje(e,t,n){for(const r of n){const i=yl(r,t.markDef,t.config);i!==void 0&&(e[r]=Qt(i))}return e}function Boe(e){return[].concat(e.type,e.style??[])}function Ot(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:yl(e,t,n,r)}function yl(e,t,n,{vgChannel:r}={}){return $n(r?bA(e,t,n.style):void 0,bA(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function bA(e,t,n){return joe(e,Boe(t),n)}function joe(e,t,n){t=Ee(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function Uoe(e,t){return Ee(e).reduce((n,r)=>(n.field.push(we(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Woe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(po(i,r))return;n.push(r)}),n}function Hoe(e,t){return po(e,t)||!t?e:e?[...Ee(e),...Ee(t)].join(", "):t}function qoe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((rc(n)||Re(n))&&(rc(r)||Re(r)))return{explicit:e.explicit,value:Hoe(n,r)};if(rc(n)||Re(n))return{explicit:e.explicit,value:n};if(rc(r)||Re(r))return{explicit:e.explicit,value:r};if(!rc(n)&&!Re(n)&&!rc(r)&&!Re(r))return{explicit:e.explicit,value:Woe(n,r)};throw new Error("It should never reach here")}function EN(e){return`Invalid specification ${Bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const lje='Autosize "fit" only works for single views and layered views.';function bU(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function xU(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function wU(e){return e?`Dropping "fit-${e}" because spec has discrete ${Yi(e)}.`:'Dropping "fit" because spec has discrete size.'}function $N(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _U(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function cje(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function fje(e){return`The "nearest" transform is not supported for ${e} marks.`}function Goe(e){return`Selection not supported for ${e} yet.`}function dje(e){return`Cannot find a selection named "${e}".`}const hje="Scale bindings are currently only supported for scales with unbinned, continuous domains.",pje="Legend bindings are only supported for selections over an individual field or encoding channel.";function gje(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function mje(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const yje="The same selection must be used to override scale domains in a layered view.",vje='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function bje(e){return`Unknown repeated value "${e}".`}function AU(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const xje="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function wje(e){return`Unrecognized parse "${e}".`}function SU(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const _je="Attempt to add the same child twice.";function Aje(e){return`Ignoring an invalid transform: ${Bt(e)}.`}const Sje='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function EU(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Eje(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Bt(t)} is overridden by a child projection ${Bt(n)}.`}const $je="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Cje(e){return`${e}Offset dropped because ${e} is continuous`}function kje(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Bt(n)}}.`}function Voe(e){return`Invalid field type "${e}".`}function Tje(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Mje(e){return`Invalid aggregation operator "${e}".`}function Yoe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Oje(e){return`Position range does not support relative band size for ${e}.`}function gC(e,t){return`Dropping ${Bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Nje="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function L5(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function Rje(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Fje(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Dje(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Pje(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function D6(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Lje(e){return`The ${e} for range marks cannot be an expression`}function Ije(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function zje(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Bje(e){return`Cannot use the scale property "${e}" with non-color channel.`}function jje(e){return`Cannot use the relative band size with ${e} scale.`}function Uje(e){return`Using unaggregated domain with raw field has no effect (${Bt(e)}).`}function Wje(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Hje(e){return`Unaggregated domain is currently unsupported for log scale (${Bt(e)}).`}function qje(e){return`Cannot apply size to non-oriented mark "${e}".`}function Gje(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Vje(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Xoe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Joe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Yje(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bt(n)} and ${Bt(r)}). Using ${Bt(n)}.`}function Xje(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bt(n)} and ${Bt(r)}). Using the union of the two domains.`}function Jje(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Kje(e){return`Dropping sort property ${Bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const $U="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Qje="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Zje="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",eUe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function tUe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function nUe(e){return`Cannot stack non-linear scale (${e}).`}function rUe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function xA(e,t){return`Invalid ${e}: ${Bt(t)}.`}function iUe(e){return`Dropping day from datetime ${Bt(e)} as day cannot be combined with other units.`}function oUe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function aUe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function sUe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function CU(e){return`1D error band does not support ${e}.`}function Koe(e){return`Channel ${e} is required for "binned" bin.`}function uUe(e){return`Channel ${e} should not be used with "binned" bin.`}function lUe(e){return`Domain for ${e} is required for threshold scale.`}const Qoe=tT(eT);let Vp=Qoe;function cUe(e){return Vp=e,Vp}function fUe(){return Vp=Qoe,Vp}function me(...e){Vp.warn(...e)}function dUe(...e){Vp.debug(...e)}function O0(e){if(e&&ke(e)){for(const t of kN)if(t in e)return!0}return!1}const Zoe=["january","february","march","april","may","june","july","august","september","october","november","december"],hUe=Zoe.map(e=>e.substr(0,3)),eae=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],pUe=eae.map(e=>e.substr(0,3));function gUe(e){if(k5(e)&&(e=+e),xt(e))return e>4&&me(xA("quarter",e)),e-1;throw new Error(xA("quarter",e))}function mUe(e){if(k5(e)&&(e=+e),xt(e))return e-1;{const t=e.toLowerCase(),n=Zoe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=hUe.indexOf(r);if(i!==-1)return i;throw new Error(xA("month",e))}}function yUe(e){if(k5(e)&&(e=+e),xt(e))return e%7;{const t=e.toLowerCase(),n=eae.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=pUe.indexOf(r);if(i!==-1)return i;throw new Error(xA("day",e))}}function CN(e,t){const n=[];if(t&&e.day!==void 0&&he(e).length>1&&(me(iUe(e)),e=Ge(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?mUe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?gUe(e.quarter):e.quarter;n.push(xt(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?yUe(e.day):e.day;n.push(xt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function s0(e){const n=CN(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function vUe(e){const n=CN(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function bUe(e){const t=CN(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const tae={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},kN=he(tae);function xUe(e){return!!tae[e]}function N0(e){return ke(e)?e.binned:nae(e)}function nae(e){return e&&e.startsWith("binned")}function TN(e){return e.startsWith("utc")}function wUe(e){return e.substring(3)}const _Ue={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function I5(e){return kN.filter(t=>iae(e,t))}function rae(e){const t=I5(e);return t[t.length-1]}function iae(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function AUe(e,t,{end:n}={end:!1}){const r=gN(t),i=TN(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let a;const s={};for(const u of kN)iae(e,u)&&(s[u]=o(u),a=u);return n&&(s[a]+="+1"),vUe(s)}function oae(e){if(!e)return;const t=I5(e);return`timeUnitSpecifier(${Bt(t)}, ${Bt(_Ue)})`}function SUe(e,t,n){if(!e)return;const r=oae(e);return`${n||TN(e)?"utc":"time"}Format(${t}, ${r})`}function rr(e){if(!e)return;let t;return $e(e)?nae(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ke(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),TN(t.unit)&&(t.utc=!0,t.unit=wUe(t.unit)),t}function EUe(e){const{utc:t,...n}=rr(e);return n.unit?(t?"utc":"")+he(n).map(r=>an(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+he(n).map(r=>an(`_${r}_${n[r]}`)).join("")}function aae(e,t=n=>n){const n=rr(e),r=rae(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=sae(r,n.step),s={...i,[a]:+i[a]+o};return`${t(s0(s))} - ${t(s0(i))}`}}const $Ue={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function CUe(e){return!!$Ue[e]}function sae(e,t=1){if(CUe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function kUe(e){return e==null?void 0:e.param}function MN(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function ON(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function NN(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function RN(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function FN(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function DN(e){if(e!=null&&e.field){if(se(e.range)&&e.range.length===2)return!0;if(Re(e.range))return!0}return!1}function PN(e){return!!(e!=null&&e.field)&&(se(e.oneOf)||se(e.in))}function TUe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function uae(e){return PN(e)||MN(e)||DN(e)||ON(e)||RN(e)||NN(e)||FN(e)}function _s(e,t){return Y5(e,{timeUnit:t,wrapTime:!0})}function MUe(e,t){return e.map(n=>_s(n,t))}function lae(e,t=!0){const{field:n}=e,r=rr(e.timeUnit),{unit:i,binned:o}=r||{},a=we(e,{expr:"datum"}),s=i?`time(${o?a:AUe(i,n)})`:a;if(MN(e))return`${s}===${_s(e.equal,i)}`;if(ON(e)){const u=e.lt;return`${s}<${_s(u,i)}`}else if(RN(e)){const u=e.gt;return`${s}>${_s(u,i)}`}else if(NN(e)){const u=e.lte;return`${s}<=${_s(u,i)}`}else if(FN(e)){const u=e.gte;return`${s}>=${_s(u,i)}`}else{if(PN(e))return`indexof([${MUe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(TUe(e))return LN(s,e.valid);if(DN(e)){const{range:u}=e,l=Re(u)?{signal:`${u.signal}[0]`}:u[0],c=Re(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+s+", ["+_s(l,i)+", "+_s(c,i)+"])";const f=[];return l!==null&&f.push(`${s} >= ${_s(l,i)}`),c!==null&&f.push(`${s} <= ${_s(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Bt(e)}`)}function LN(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function OUe(e){return uae(e)&&e.timeUnit?{...e,timeUnit:rr(e.timeUnit)}:e}const uv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function NUe(e){return e==="quantitative"||e==="temporal"}function cae(e){return e==="ordinal"||e==="nominal"}const u0=uv.quantitative,IN=uv.ordinal,Yp=uv.temporal,zN=uv.nominal,Pg=uv.geojson;function RUe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case u0:return"quantitative";case"t":case Yp:return"temporal";case"o":case IN:return"ordinal";case"n":case zN:return"nominal";case Pg:return"geojson"}}const Ui={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},mC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function FUe(e,t){const n=mC[e],r=mC[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const DUe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function kU(e){return DUe[e]}const fae=new Set(["linear","log","pow","sqrt","symlog"]),dae=new Set([...fae,"time","utc"]);function hae(e){return fae.has(e)}const pae=new Set(["quantile","quantize","threshold"]),PUe=new Set([...dae,...pae,"sequential","identity"]),LUe=new Set(["ordinal","bin-ordinal","point","band"]);function ir(e){return LUe.has(e)}function Eo(e){return PUe.has(e)}function Ha(e){return dae.has(e)}function Xp(e){return pae.has(e)}const IUe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function zUe(e){return!$e(e)&&!!e.name}function gae(e){return e==null?void 0:e.param}function BUe(e){return e==null?void 0:e.unionWith}function jUe(e){return ke(e)&&"field"in e}const UUe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Wrt,domain:Hrt,range:qrt,rangeMax:Grt,rangeMin:Vrt,scheme:Yrt,...WUe}=UUe,HUe=he(WUe);function yC(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ha(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ha(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ha(e);case"nice":return Ha(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Eo(e)&&!ft(["log","time","utc","threshold","quantile"],e)}}function mae(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return op(e)?void 0:Bje(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function qUe(e,t){return ft([IN,zN],t)?e===void 0||ir(e):t===Yp?ft([Ui.TIME,Ui.UTC,void 0],e):t===u0?hae(e)||Xp(e)||e===void 0:!0}function GUe(e,t,n=!1){if(!Cl(e))return!1;switch(e){case sn:case ar:case _f:case Dg:case ba:case fs:return Ha(t)||t==="band"?!0:t==="point"?!n:!1;case El:case Ef:case $l:case Af:case Sf:case k0:return Ha(t)||Xp(t)||ft(["band","point","ordinal"],t);case Gi:case fu:case du:return t!=="band";case $f:case Vi:return t==="ordinal"||Xp(t)}}const vi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},yae=vi.arc,z5=vi.area,B5=vi.bar,VUe=vi.image,j5=vi.line,U5=vi.point,YUe=vi.rect,wA=vi.rule,vae=vi.text,BN=vi.tick,XUe=vi.trail,jN=vi.circle,UN=vi.square,bae=vi.geoshape;function Tf(e){return["line","area","trail"].includes(e)}function Ky(e){return["rect","bar","image","arc"].includes(e)}const JUe=new Set(he(vi));function eu(e){return e.type}const KUe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],QUe=["fill","fillOpacity"],ZUe=[...KUe,...QUe],eWe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},TU=he(eWe),tWe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},nWe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},rWe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},xae=he(rWe);function l0(e){return e&&e.band!=null}const iWe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},wae=5,oWe={binSpacing:1,continuousBandSize:wae,minBandSize:.25,timeUnitBandPosition:.5},aWe={binSpacing:0,continuousBandSize:wae,minBandSize:.25,timeUnitBandPosition:.5},sWe={thickness:1};function uWe(e){return eu(e)?e.type:e}function WN(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=qN(e);return ge(n)&&!Poe(n.aggregate)&&i&&Ha(i.get("type"))?lWe({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function lWe({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Tf(n.type)?r:Ot("invalid",n,i)===null?[cWe(e,t),r]:r}function cWe(e,t){const n=HN(e,!0),i=T0(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function HN(e,t=!0){return LN($e(e)?e:we(e,{expr:"datum"}),!t)}function fWe(e){const{datum:t}=e;return O0(t)?s0(t):`${Bt(t)}`}function Td(e,t,n,r){const i={};if(t&&(i.scale=t),gu(e)){const{datum:o}=e;O0(o)?i.signal=s0(o):Re(o)?i.signal=o.signal:sv(o)?i.signal=o.expr:i.value=o}else i.field=we(e,n);if(r){const{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function _A({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){const s=!Re(a)&&0<a&&a<1?"datum":void 0,u=we(t,{expr:s,suffix:i}),l=n!==void 0?we(n,{expr:s}):we(t,{suffix:o,expr:s}),c={};if(a===0||a===1){c.scale=e;const f=a===0?u:l;c.field=f}else{const f=Re(a)?`(1-${a.signal}) * ${u} + ${a.signal} * ${l}`:`${1-a} * ${u} + ${a} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function dWe({scaleName:e,fieldDef:t}){const n=we(t,{expr:"datum"}),r=we(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function qN({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Ye(t)){const f=a==null?void 0:a.get("type");if(pi(t)){c??(c=rf({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:p,type:g}=t;if(Yt(d)||c&&p&&g===Yp)return s!=null&&s.impute?Td(t,o,{binSuffix:"mid"},{offset:u}):c&&!ir(f)?_A({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):Td(t,o,dv(t,e)?{binSuffix:"range"}:{},{offset:u});if(cr(d)){if(ge(n))return _A({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});me(Koe(e===sn?cs:cu))}}return Td(t,o,ir(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(rs(t)){const f=t.value,d=u?{offset:u}:{};return{...Km(e,f),...d}}}return Qe(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Km(e,t){return ft(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ft(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Qt(t)}function c0(e){return e&&e!=="number"&&e!=="time"}function _ae(e,t,n){return`${e}(${t}${n?`, ${Bt(n)}`:""})`}const hWe=" – ";function GN({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(c0(n))return qa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=Aae(e,r,i),s=Jp(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return qa({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return qa({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&ge(e)&&e.timeUnit===void 0)return qa({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Qp(e)){const c=gWe({field:a,timeUnit:ge(e)?(u=rr(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:R0(e)&&((l=e.scale)==null?void 0:l.type)===Ui.UTC});return c?{signal:c}:void 0}if(t=vC({type:s,specifiedFormat:t,config:o,normalizeStack:i}),ge(e)&&Yt(e.bin)){const c=we(e,{expr:r,binSuffix:"end"});return{signal:lv(a,c,t,n,o)}}else return t||Jp(e)==="quantitative"?{signal:`${$ae(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Aae(e,t,n){return ge(e)?n?`${we(e,{expr:t,suffix:"end"})}-${we(e,{expr:t,suffix:"start"})}`:we(e,{expr:t}):fWe(e)}function qa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Aae(e,r,i)),a!=="datum.value"&&ge(e)&&Yt(e.bin)){const s=we(e,{expr:r,binSuffix:"end"});return{signal:lv(a,s,t,n,o)}}return{signal:_ae(n,a,t)}}function Sae(e,t,n,r,i,o){var a;if(!($e(r)&&c0(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Jp(e)==="quantitative"&&(i.normalizedNumberFormatType&&Kp(e)&&e.stack==="normalize"||i.numberFormatType))){if(Kp(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return vC({type:"quantitative",config:i,normalizeStack:!0});if(Qp(e)){const s=ge(e)?(a=rr(e.timeUnit))==null?void 0:a.unit:void 0;return s===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:pWe({specifiedFormat:n,timeUnit:s,config:i,omitTimeFormatConfig:o})}return vC({type:t,specifiedFormat:n,config:i})}}function Eae(e,t,n){var r;if(e&&(Re(e)||e==="number"||e==="time"))return e;if(Qp(t)&&n!=="time"&&n!=="utc")return ge(t)&&((r=rr(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function vC({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if($e(t))return t;if(e===u0)return r?n.normalizedNumberFormat:n.numberFormat}function pWe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:oae(t)}:r?void 0:n.timeFormat)}function $ae(e,t){return`format(${e}, "${t||""}")`}function MU(e,t,n,r){return c0(n)?_ae(n,e,t):$ae(e,($e(t)?t:void 0)??r.numberFormat)}function lv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return lv(e,t,i.numberFormat,i.numberFormatType,i);const o=MU(e,n,r,i),a=MU(t,n,r,i);return`${LN(e,!1)} ? "null" : ${o} + "${hWe}" + ${a}`}function gWe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=$e(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):SUe(t,e,o)}const W5="min",mWe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function OU(e){return e in mWe}function Cae(e){return!!(e!=null&&e.encoding)}function Gs(e){return e&&(e.op==="count"||!!e.field)}function kae(e){return e&&se(e)}function cv(e){return"row"in e||"column"in e}function VN(e){return!!e&&"header"in e}function H5(e){return"facet"in e}function yWe(e){return e.param}function vWe(e){return e&&!$e(e)&&"repeat"in e}function NU(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function YN(e){return"sort"in e}function rf({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ye(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ge(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return yl("timeUnitBandPosition",n,r);if(Yt(o))return .5}}function Tae({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var l,c,f;const s=Yi(e),u=Ot(a?"size":s,r,i,{vgChannel:s});if(u!==void 0)return u;if(ge(t)){const{timeUnit:d,bin:p}=t;if(d&&!n)return{band:yl("timeUnitBandSize",r,i)};if(Yt(p)&&!ir(o))return{band:1}}if(Ky(r.type))return o?ir(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Mae(e,t,n,r){return Yt(e.bin)||e.timeUnit&&pi(e)&&e.type==="temporal"?rf({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Oae(e){return e&&!!e.sort&&!e.field}function q5(e){return e&&"condition"in e}function G5(e){const t=e==null?void 0:e.condition;return!!t&&!se(t)&&ge(t)}function fv(e){const t=e==null?void 0:e.condition;return!!t&&!se(t)&&Ye(t)}function bWe(e){const t=e==null?void 0:e.condition;return!!t&&(se(t)||rs(t))}function ge(e){return e&&(!!e.field||e.aggregate==="count")}function Jp(e){return e==null?void 0:e.type}function gu(e){return e&&"datum"in e}function vc(e){return pi(e)&&!SA(e)||AA(e)}function RU(e){return pi(e)&&e.type==="quantitative"&&!e.bin||AA(e)}function AA(e){return gu(e)&&xt(e.datum)}function Ye(e){return ge(e)||gu(e)}function pi(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function rs(e){return e&&"value"in e&&"value"in e}function R0(e){return e&&("scale"in e||"sort"in e)}function Kp(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Nae(e){return e&&"legend"in e}function Rae(e){return e&&("format"in e||"formatType"in e)}function xWe(e){return ji(e,["legend","axis","header","scale"])}function wWe(e){return"op"in e}function we(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(AWe(e))n=_oe("count");else{let a;if(!t.nofn)if(wWe(e))a=e.op;else{const{bin:s,aggregate:u,timeUnit:l}=e;Yt(s)?(a=Loe(s),i=(t.binSuffix??"")+(t.suffix??"")):u?Cf(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):ml(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):a=String(u):l&&!N0(l)&&(a=EUe(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?mN(n):t.expr?boe(n,t.expr)+o:ma(n)+o}function SA(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ge(e)&&!!e.bin;case"temporal":return!1}throw new Error(Voe(e.type))}function _We(e){var t;return R0(e)&&Xp((t=e.scale)==null?void 0:t.type)}function AWe(e){return e.aggregate==="count"}function SWe(e,t){var a;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Yt(r))return`${n} (binned)`;if(i&&!N0(i)){const s=(a=rr(i))==null?void 0:a.unit;if(s)return`${n} (${I5(s).join("-")})`}else if(o)return Cf(o)?`${n} for max ${o.argmax}`:ml(o)?`${n} for min ${o.argmin}`:`${rv(o)} of ${n}`;return n}function EWe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Cf(t))return`${i} for argmax(${t.argmax})`;if(ml(t))return`${i} for argmin(${t.argmin})`;const o=r&&!N0(r)?rr(r):void 0,a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Yt(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const Fae=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return EWe(e);default:return SWe(e,t)}};let Dae=Fae;function Pae(e){Dae=e}function $We(){Pae(Fae)}function ap(e,t,{allowDisabling:n,includeDefault:r=!0}){var s;const i=(s=XN(e))==null?void 0:s.title;if(!ge(e))return i??e.title;const o=e,a=r?JN(o,t):void 0;return n?$n(i,o.title,a):i??o.title??a}function XN(e){if(Kp(e)&&e.axis)return e.axis;if(Nae(e)&&e.legend)return e.legend;if(VN(e)&&e.header)return e.header}function JN(e,t){return Dae(e,t)}function EA(e){if(Rae(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=XN(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function CWe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(YN(e)&&se(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Cf(n)&&!ml(n))return"quantitative";if(R0(e)&&((o=e.scale)!=null&&o.type))switch(mC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function tu(e){if(ge(e))return e;if(G5(e))return e.condition}function Bn(e){if(Ye(e))return e;if(fv(e))return e.condition}function Lae(e,t,n,r={}){if($e(e)||xt(e)||bf(e)){const i=$e(e)?"string":xt(e)?"number":"boolean";return me(kje(t,i,e)),{value:e}}return Ye(e)?$A(e,t,n,r):fv(e)?{...e,condition:$A(e.condition,t,n,r)}:e}function $A(e,t,n,r){if(Rae(e)){const{format:i,formatType:o,...a}=e;if(c0(o)&&!n.customFormatTypes)return me(EU(t)),$A(a,t,n,r)}else{const i=Kp(e)?"axis":Nae(e)?"legend":VN(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(c0(a)&&!n.customFormatTypes)return me(EU(t)),$A({...e,[i]:s},t,n,r)}}return ge(e)?KN(e,t,r):kWe(e)}function kWe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=xt(n)?"quantitative":$e(n)?"nominal":O0(n)?"temporal":void 0,{...e,type:t}}function KN(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(!n&&r&&!SN(r)&&!Cf(r)&&!ml(r)&&(me(Mje(r)),delete s.aggregate),i&&(s.timeUnit=rr(i)),a&&(s.field=`${a}`),Yt(o)&&(s.bin=V5(o,t)),cr(o)&&!Cn(t)&&me(uUe(t)),pi(s)){const{type:u}=s,l=RUe(u);u!==l&&(s.type=l),u!=="quantitative"&&Poe(r)&&(me(Tje(u,r)),s.type="quantitative")}else if(!Moe(t)){const u=CWe(s,t);s.type=u}if(pi(s)){const{compatible:u,warning:l}=TWe(s,t)||{};u===!1&&me(l)}if(YN(s)&&$e(s.sort)){const{sort:u}=s;if(OU(u))return{...s,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&OU(l))return{...s,sort:{encoding:l,order:"descending"}}}if(VN(s)){const{header:u}=s;if(u){const{orient:l,...c}=u;if(l)return{...s,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return s}function V5(e,t){return bf(e)?{maxbins:mU(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:mU(t)}:e}const ph={compatible:!0};function TWe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case nl:case rl:case T5:return SA(e)?ph:{compatible:!1,warning:Fje(t)};case sn:case ar:case _f:case Dg:case Gi:case fu:case du:case iv:case ov:case M5:case a0:case O5:case N5:case k0:case ba:case fs:case R5:return ph;case hs:case ya:case ds:case ps:return n!==u0?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:ph;case $l:case Af:case Sf:case Ef:case El:case Sl:case Al:case cs:case cu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:ph;case Vi:case $f:return!SA(e)&&!_We(e)?{compatible:!1,warning:Dje(t)}:ph;case Gp:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:ph}}function Qp(e){const{formatType:t}=EA(e);return t==="time"||!t&&MWe(e)}function MWe(e){return e&&(e.type==="temporal"||ge(e)&&!!e.timeUnit)}function Y5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=rr(t))==null?void 0:u.unit);let a=o||n==="temporal",s;return sv(e)?s=e.expr:Re(e)?s=e.signal:O0(e)?(a=!0,s=s0(e)):($e(e)||xt(e))&&a&&(s=`datetime(${Bt(e)})`,xUe(o)&&(xt(e)&&e<1e4||$e(e)&&isNaN(Date.parse(e)))&&(s=s0({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:Bt(e)}function Iae(e,t){const{type:n}=e;return t.map(r=>{const i=ge(e)&&!N0(e.timeUnit)?e.timeUnit:void 0,o=Y5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function dv(e,t){return Yt(e.bin)?Cl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const FU={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function hv(e){return e==null?void 0:e.condition}const zae=["domain","grid","labels","ticks","title"],OWe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Bae={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},NWe={...Bae,style:1,labelExpr:1,encoding:1};function DU(e){return!!NWe[e]}const RWe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},jae=he(RWe);function kl(e){return"mark"in e}class X5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return kl(t)?uWe(t.mark)===this.name:!1}}function Md(e,t){const n=e&&e[t];return n?se(n)?i0(n,r=>!!r.field):ge(n)||G5(n):!1}function Uae(e,t){const n=e&&e[t];return n?se(n)?i0(n,r=>!!r.field):ge(n)||gu(n)||fv(n):!1}function Wae(e,t){if(Cn(t)){const n=e[t];if((ge(n)||gu(n))&&(cae(n.type)||ge(n)&&n.timeUnit)){const r=xN(t);return Uae(e,r)}}return!1}function QN(e){return i0(DBe,t=>{if(Md(e,t)){const n=e[t];if(se(n))return i0(n,r=>!!r.aggregate);{const r=tu(n);return r&&!!r.aggregate}}return!1})}function Hae(e,t){const n=[],r=[],i=[],o=[],a={};return ZN(e,(s,u)=>{if(ge(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...p}=s;if(c||d||f){const g=XN(s),y=g==null?void 0:g.title;let v=we(s,{forAs:!0});const b={...y?[]:{title:ap(s,t,{allowDisabling:!0})},...p,field:v};if(c){let x;if(Cf(c)?(x="argmax",v=we({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${v}.${l}`):ml(c)?(x="argmin",v=we({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${v}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(x=c),x){const _={op:x,as:v};l&&(_.field=l),o.push(_)}}else if(n.push(v),pi(s)&&Yt(f)){if(r.push({bin:f,field:l,as:v}),n.push(we(s,{binSuffix:"end"})),dv(s,u)&&n.push(we(s,{binSuffix:"range"})),Cn(u)){const x={field:`${v}_end`};a[`${u}2`]=x}b.bin="binned",Moe(u)||(b.type=u0)}else if(d&&!N0(d)){i.push({timeUnit:d,field:l,as:v});const x=pi(s)&&s.type!==Yp&&"time";x&&(u===iv||u===a0?b.formatType=x:qBe(u)?b.legend={formatType:x,...b.legend}:Cn(u)&&(b.axis={formatType:x,...b.axis}))}a[u]=b}else n.push(l),a[u]=e[u]}else a[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function FWe(e,t,n){const r=VBe(t,n);if(r){if(r==="binned"){const i=e[t===cs?sn:ar];return!!(ge(i)&&ge(e[t])&&cr(i.bin))}}else return!1;return!0}function DWe(e,t,n,r){const i={};for(const o of he(e))Toe(o)||me(Rje(o));for(let o of jBe){if(!e[o])continue;const a=e[o];if(av(o)){const s=BBe(o),u=i[s];if(ge(u)&&NUe(u.type)&&ge(a)&&!u.timeUnit){me(Cje(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(me($je),o=ba),!FWe(e,o,t)){me(L5(o,t));continue}if(o===El&&t==="line"){const s=tu(e[o]);if(s!=null&&s.aggregate){me(Nje);continue}}if(o===Gi&&(n?"fill"in e:"stroke"in e)){me(Yoe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===ov||o===Gp&&!se(a)&&!rs(a)||o===a0&&se(a)){if(a){if(o===Gp){const s=e[o];if(Oae(s)){i[o]=s;continue}}i[o]=Ee(a).reduce((s,u)=>(ge(u)?s.push(KN(u,o)):me(gC(u,o)),s),[])}}else{if(o===a0&&a===null)i[o]=null;else if(!ge(a)&&!gu(a)&&!rs(a)&&!q5(a)&&!Re(a)){me(gC(a,o));continue}i[o]=Lae(a,o,r)}}return i}function J5(e,t){const n={};for(const r of he(e)){const i=Lae(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function PWe(e){const t=[];for(const n of he(e))if(Md(e,n)){const r=e[n],i=Ee(r);for(const o of i)ge(o)?t.push(o):G5(o)&&t.push(o.condition)}return t}function ZN(e,t,n){if(e)for(const r of he(e)){const i=e[r];if(se(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function LWe(e,t,n,r){return e?he(e).reduce((i,o)=>{const a=e[o];return se(a)?a.reduce((s,u)=>t.call(r,s,u,o),i):t.call(r,i,a,o)},n):n}function qae(e,t){return he(t).reduce((n,r)=>{switch(r){case sn:case ar:case O5:case R5:case N5:case cs:case cu:case _f:case Dg:case ba:case Sl:case fs:case Al:case ds:case hs:case ps:case ya:case iv:case Vi:case k0:case a0:return n;case Gp:if(e==="line"||e==="trail")return n;case ov:case M5:{const i=t[r];if(se(i)||ge(i))for(const o of Ee(i))o.aggregate||n.push(we(o,{}));return n}case El:if(e==="trail")return n;case Gi:case fu:case du:case $l:case Af:case Sf:case $f:case Ef:{const i=tu(t[r]);return i&&!i.aggregate&&n.push(we(i,{})),n}}},[])}function IWe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(se(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return se(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function bC(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:s})=>{const u=r?` of ${eR(t)}`:"";return{field:a+t.field,type:t.type,title:Re(s)?{signal:`${s}"${escape(u)}"`}:s+u}}),o=PWe(n).map(xWe);return{tooltip:[...i,...Ps(o,ct)]}}function eR(e){const{title:t,field:n}=e;return $n(t,n)}function tR(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=eR(n);return Gae(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...a!==void 0?{axis:a}:{}},...$e(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Gae(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...eu(r.mark)?r.mark:{type:r.mark},style:`${s}-${String(t)}`,...bf(e[t])?{}:e[t]}}]:[]}function Vae(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:mx(o,n),continuousAxisChannelDef2:mx(a,n),continuousAxisChannelDefError:mx(s,n),continuousAxisChannelDefError2:mx(u,n),continuousAxis:i}}function mx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&me(sUe(n,t)),r}else return e}function Yae(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(eu(n)&&n.orient)return n.orient;if(vc(i)){if(vc(o)){const a=ge(i)&&i.aggregate,s=ge(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Qp(o)&&!Qp(i)?"horizontal":"vertical"}return"horizontal"}else{if(vc(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const CA="boxplot",zWe=["box","median","outliers","rule","ticks"],BWe=new X5(CA,Jae);function Xae(e){return xt(e)?"tukey":e}function Jae(e,{config:t}){e={...e,encoding:J5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=eu(n)?n:{type:n};i&&me(Goe("boxplot"));const u=s.extent??t.boxplot.extent,l=Ot("size",s,t),c=s.invalid,f=Xae(u),{bins:d,timeUnits:p,transform:g,continuousAxisChannelDef:y,continuousAxis:v,groupby:b,aggregate:x,encodingWithoutContinuousAxis:_,ticksOrient:A,boxOrient:E,customTooltipWithoutAggregatedField:$}=jWe(e,u,t),{color:S,size:k,...O}=_,N=Ve=>tR(s,v,y,Ve,t.boxplot),F=N(O),W=N(_),I=N({...O,...k?{size:k}:{}}),M=bC([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],y,_),D={type:"tick",color:"black",opacity:1,orient:A,invalid:c,aria:!1},L=f==="min-max"?M:bC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,_),j=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...F({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:L}),...F({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:L})],z=[...f!=="tukey"?j:[],...W({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...I({partName:"median",mark:{type:"tick",invalid:c,...ke(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:A,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...a,transform:(a.transform??[]).concat(g),layer:z};const H=`datum["lower_box_${y.field}"]`,U=`datum["upper_box_${y.field}"]`,V=`(${U} - ${H})`,K=`${H} - ${u} * ${V}`,Q=`${U} + ${u} * ${V}`,ne=`datum["${y.field}"]`,ce={joinaggregate:Kae(y.field),groupby:b},ye={transform:[{filter:`(${K} <= ${ne}) && (${ne} <= ${Q})`},{aggregate:[{op:"min",field:y.field,as:`lower_whisker_${y.field}`},{op:"max",field:y.field,as:`upper_whisker_${y.field}`},{op:"min",field:`lower_box_${y.field}`,as:`lower_box_${y.field}`},{op:"max",field:`upper_box_${y.field}`,as:`upper_box_${y.field}`},...x],groupby:b}],layer:j},{tooltip:fe,...pe}=O,{scale:te,axis:Se}=y,Ae=eR(y),re=ji(Se,["title"]),qe=Gae(s,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${K}) || (${ne} > ${Q})`}],mark:"point",encoding:{[v]:{field:y.field,type:y.type,...Ae!==void 0?{title:Ae}:{},...te!==void 0?{scale:te}:{},...zt(re)?{}:{axis:re}},...pe,...S?{color:S}:{},...$?{tooltip:$}:{}}})[0];let _e;const Ze=[...d,...p,ce];return qe?_e={transform:Ze,layer:[qe,ye]}:(_e=ye,_e.transform.unshift(...Ze)),{...a,layer:[_e,{transform:g,layer:z}]}}function Kae(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function jWe(e,t,n){const r=Yae(e,CA),{continuousAxisChannelDef:i,continuousAxis:o}=Vae(e,r,CA),a=i.field,s=Xae(t),u=[...Kae(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=IWe(f),{bins:g,timeUnits:y,aggregate:v,groupby:b,encoding:x}=Hae(p,n),_=r==="vertical"?"horizontal":"vertical",A=r,E=[...g,...y,{aggregate:[...v,...u],groupby:b},...l];return{bins:g,timeUnits:y,transform:E,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:_,boxOrient:A,customTooltipWithoutAggregatedField:d}}const nR="errorbar",UWe=["ticks","rule"],WWe=new X5(nR,Qae);function Qae(e,{config:t}){e={...e,encoding:J5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=Zae(e,nR,t);delete o.size;const c=tR(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p={type:"tick",orient:a,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},g=[...c({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...g.length>1?{layer:g}:{...g[0]}}}function HWe(e,t){const{encoding:n}=e;if(qWe(n))return{orient:Yae(e,t),inputType:"raw"};const r=GWe(n),i=VWe(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,u=n.y2;if(Ye(s)&&Ye(u))throw new Error(`${t} cannot have both x2 and y2`);if(Ye(s)){if(vc(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ye(u)){if(vc(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Ye(u)&&!Ye(s))throw new Error(`${t} cannot have xError2 without xError`);if(Ye(c)&&!Ye(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ye(s)&&Ye(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ye(s)){if(vc(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ye(l)){if(vc(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function qWe(e){return(Ye(e.x)||Ye(e.y))&&!Ye(e.x2)&&!Ye(e.y2)&&!Ye(e.xError)&&!Ye(e.xError2)&&!Ye(e.yError)&&!Ye(e.yError2)}function GWe(e){return Ye(e.x2)||Ye(e.y2)}function VWe(e){return Ye(e.xError)||Ye(e.xError2)||Ye(e.yError)||Ye(e.yError2)}function Zae(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=eu(r)?r:{type:r};o&&me(Goe(t));const{orient:l,inputType:c}=HWe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:g,continuousAxis:y}=Vae(e,l,t),{errorBarSpecificAggregate:v,postAggregateCalculates:b,tooltipSummary:x,tooltipTitleWithFieldName:_}=YWe(u,f,d,p,g,c,t,n),{[y]:A,[y==="x"?"x2":"y2"]:E,[y==="x"?"xError":"yError"]:$,[y==="x"?"xError2":"yError2"]:S,...k}=i,{bins:O,timeUnits:N,aggregate:F,groupby:W,encoding:I}=Hae(k,n),M=[...F,...v],D=c!=="raw"?[]:W,L=bC(x,f,I,_);return{transform:[...s.transform??[],...O,...N,...M.length===0?[]:[{aggregate:M,groupby:D}],...b],groupby:D,continuousAxisChannelDef:f,continuousAxis:y,encodingWithoutContinuousAxis:I,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:L}}function YWe(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,g=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(g==="iqr")&&me(aUe(p,g,a)),g==="stderr"||g==="stdev")u=[{op:g,field:c,as:`extent_${c}`},{op:p,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:rv(p)},{fieldPrefix:"upper_",titlePrefix:PU(p,g,"+")},{fieldPrefix:"lower_",titlePrefix:PU(p,g,"-")}],d=!0;else{let y,v,b;g==="ci"?(y="mean",v="ci0",b="ci1"):(y="median",v="q1",b="q3"),u=[{op:v,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:y,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:ap({field:c,aggregate:b,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ap({field:c,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ap({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&me(oUe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:o0(o0(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function PU(e,t,n){return`${rv(e)} ${n} ${t}`}const rR="errorband",XWe=["band","borders"],JWe=new X5(rR,ese);function ese(e,{config:t}){e={...e,encoding:J5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=Zae(e,rR,t),l=a,c=tR(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},p={type:f?"line":"rule"};const g={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...g,ariaRoleDescription:"errorband"},p={...p,...g,aria:!1}):l.interpolate?me(CU("interpolate")):l.tension&&me(CU("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:u})]}}const tse={};function iR(e,t,n){const r=new X5(e,t);tse[e]={normalizer:r,parts:n}}function KWe(){return he(tse)}iR(CA,Jae,zWe);iR(nR,Qae,UWe);iR(rR,ese,XWe);const QWe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],nse={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},rse={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},ZWe=he(nse),eHe=he(rse),tHe={header:1,headerRow:1,headerColumn:1,headerFacet:1},ise=he(tHe),ose=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],nHe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},rHe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},is="_vgsid_",iHe={point:{on:"click",fields:[is],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function oR(e){return e==="legend"||!!(e!=null&&e.legend)}function P6(e){return oR(e)&&ke(e)}function aR(e){return!!(e!=null&&e.select)}function ase(e){const t=[];for(const n of e||[]){if(aR(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const a={...o,bind:i,init:r};t.push(a)}else{const a={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(a)}}return t}function oHe(e){return K5(e)||uR(e)||sR(e)}function sR(e){return"concat"in e}function K5(e){return"vconcat"in e}function uR(e){return"hconcat"in e}function sse({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function nu(e){return ke(e)&&e.step!==void 0}function LU(e){return e.view||e.width||e.height}const IU=20,aHe={align:1,bounds:1,center:1,columns:1,spacing:1},sHe=he(aHe);function uHe(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(H5(e)&&!cv(e.facet)||sR(e))&&(i.columns=a),K5(e)&&(i.columns=1);for(const s of sHe)if(e[s]!==void 0)if(s==="spacing"){const u=e[s];i[s]=xt(u)?u:{row:u.row??o,column:u.column??o}}else i[s]=e[s];return i}function xC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function kA(e,t){const n=TA(e,t);return nu(n)?n.step:use}function TA(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return $n(n,{step:e.step})}const use=20,lHe={continuousWidth:200,continuousHeight:200,step:use},cHe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:lHe,mark:nWe,arc:{},area:{},bar:oWe,circle:{},geoshape:{},image:{},line:{},point:{},rect:aWe,rule:{color:"black"},square:{},text:{color:"black"},tick:sWe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:IUe,projection:{},legend:nHe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:iHe,style:{},title:{},facet:{spacing:IU},concat:{spacing:IU},normalizedNumberFormat:".0%"},Ou=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],zU={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},BU={blue:Ou[0],orange:Ou[1],red:Ou[2],teal:Ou[3],green:Ou[4],yellow:Ou[5],purple:Ou[6],pink:Ou[7],brown:Ou[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function fHe(e={}){return{signals:[{name:"color",value:ke(e)?{...BU,...e}:BU}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function dHe(e){return{signals:[{name:"fontSize",value:ke(e)?{...zU,...e}:zU}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function hHe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function lse(e){const t=he(e||{}),n={};for(const r of t){const i=e[r];n[r]=hv(i)?zoe(i):co(i)}return n}function pHe(e){const t=he(e),n={};for(const r of t)n[r]=lse(e[r]);return n}const gHe=[...xae,...jae,...ise,"background","padding","legend","lineBreak","scale","style","title","view"];function cse(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,a=Sg({},Ge(cHe),n?hHe(n):{},t?fHe(t):{},r?dHe(r):{},o||{});i&&Eg(a,"selection",i,!0);const s=ji(a,gHe);for(const u of["background","lineBreak","padding"])a[u]&&(s[u]=co(a[u]));for(const u of xae)a[u]&&(s[u]=Mi(a[u]));for(const u of jae)a[u]&&(s[u]=lse(a[u]));for(const u of ise)a[u]&&(s[u]=Mi(a[u]));return a.legend&&(s.legend=Mi(a.legend)),a.scale&&(s.scale=Mi(a.scale)),a.style&&(s.style=pHe(a.style)),a.title&&(s.title=Mi(a.title)),a.view&&(s.view=Mi(a.view)),s}const mHe=new Set(["view",...JUe]),yHe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],vHe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...tWe};function bHe(e){e=Ge(e);for(const t of yHe)delete e[t];if(e.axis)for(const t in e.axis)hv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of QWe)delete e.legend[t];if(e.mark){for(const t of TU)delete e.mark[t];e.mark.tooltip&&ke(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(ase(e.params)),delete e.params);for(const t of mHe){for(const r of TU)delete e[t][r];const n=vHe[t];if(n)for(const r of n)delete e[t][r];wHe(e,t)}for(const t of KWe())delete e[t];xHe(e);for(const t in e)ke(e[t])&&zt(e[t])&&delete e[t];return zt(e)?void 0:e}function xHe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Ioe(e.title);zt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),zt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),zt(r)?delete e.title:e.title=r}function wHe(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};zt(o)||(e.style[n??t]=o),r||delete e[t]}function Q5(e){return"layer"in e}function _He(e){return"repeat"in e}function AHe(e){return!se(e.repeat)&&e.repeat.layer}class lR{map(t,n){return H5(t)?this.mapFacet(t,n):_He(t)?this.mapRepeat(t,n):uR(t)?this.mapHConcat(t,n):K5(t)?this.mapVConcat(t,n):sR(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Q5(t))return this.mapLayer(t,n);if(kl(t))return this.mapUnit(t,n);throw new Error(EN(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const SHe={zero:1,center:1,normalize:1};function EHe(e){return e in SHe}const $He=new Set([yae,B5,z5,wA,U5,jN,UN,j5,vae,BN]),CHe=new Set([B5,z5,yae]);function gh(e){return ge(e)&&Jp(e)==="quantitative"&&!e.bin}function jU(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(ge(a)&&ge(s))if(gh(a)&&gh(s)){if(a.stack)return t;if(s.stack)return i;const u=ge(a)&&!!a.aggregate,l=ge(s)&&!!s.aggregate;if(u!==l)return u?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(gh(a))return t;if(gh(s))return i}else{if(gh(a))return o&&n==="vertical"?void 0:t;if(gh(s))return o&&n==="horizontal"?void 0:i}}function kHe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function fse(e,t){var y,v;const n=eu(e)?e:{type:e},r=n.type;if(!$He.has(r))return null;const i=jU(t,"x",n)||jU(t,"theta",n);if(!i)return null;const o=t[i],a=ge(o)?we(o,{}):void 0,s=kHe(i),u=[],l=new Set;if(t[s]){const b=t[s],x=ge(b)?we(b,{}):void 0;x&&x!==a&&(u.push(s),l.add(x))}const c=s==="x"?"xOffset":"yOffset",f=t[c],d=ge(f)?we(f,{}):void 0;d&&d!==a&&(u.push(c),l.add(d));const p=UBe.reduce((b,x)=>{if(x!=="tooltip"&&Md(t,x)){const _=t[x];for(const A of Ee(_)){const E=tu(A);if(E.aggregate)continue;const $=we(E,{});(!$||!l.has($))&&b.push({channel:x,fieldDef:E})}}return b},[]);let g;return o.stack!==void 0?bf(o.stack)?g=o.stack?"zero":null:g=o.stack:CHe.has(r)&&(g="zero"),!g||!EHe(g)||QN(t)&&p.length===0?null:(y=o==null?void 0:o.scale)!=null&&y.type&&((v=o==null?void 0:o.scale)==null?void 0:v.type)!==Ui.LINEAR?(o!=null&&o.stack&&me(nUe(o.scale.type)),null):Ye(t[hu(i)])?(o.stack!==void 0&&me(tUe(i)),null):(ge(o)&&o.aggregate&&!eje.has(o.aggregate)&&me(rUe(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Tf(r),stackBy:p,offset:g})}function dse(e,t,n){const r=Mi(e),i=Ot("orient",r,n);if(r.orient=NHe(r.type,t,i),i!==void 0&&i!==r.orient&&me(zje(r.orient,i)),r.type==="bar"&&r.orient){const s=Ot("cornerRadiusEnd",r,n);if(s!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:iWe[r.orient];for(const l of u)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Ot("opacity",r,n)===void 0&&(r.opacity=MHe(r.type,t)),Ot("cursor",r,n)===void 0&&(r.cursor=THe(r,t,n)),r}function THe(e,t,n){return t.href||e.href||Ot("href",e,n)?"pointer":e.cursor}function MHe(e,t){if(ft([U5,BN,jN,UN],e)&&!QN(t))return .7}function OHe(e,t,{graticule:n}){if(n)return!1;const r=yl("filled",e,t),i=e.type;return $n(r,i!==U5&&i!==j5&&i!==wA)}function NHe(e,t,n){switch(e){case U5:case jN:case UN:case vae:case YUe:case VUe:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case B5:if(ge(r)&&(cr(r.bin)||ge(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ge(i)&&(cr(i.bin)||ge(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(ge(r)&&r.type===u0&&!Yt(r.bin)||AA(r))&&ge(i)&&cr(i.bin)?"horizontal":"vertical";if(!a)return(ge(i)&&i.type===u0&&!Yt(i.bin)||AA(i))&&ge(r)&&cr(r.bin)?"vertical":"horizontal"}case wA:if(o&&!(ge(r)&&cr(r.bin))&&a&&!(ge(i)&&cr(i.bin)))return;case z5:if(a)return ge(i)&&cr(i.bin)?"horizontal":"vertical";if(o)return ge(r)&&cr(r.bin)?"vertical":"horizontal";if(e===wA){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case j5:case BN:{const s=RU(r),u=RU(i);if(n)return n;if(s&&!u)return e!=="tick"?"horizontal":"vertical";if(!s&&u)return e!=="tick"?"vertical":"horizontal";if(s&&u)return"vertical";{const l=pi(r)&&r.type===Yp,c=pi(i)&&i.type===Yp;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function RHe(e){const{point:t,line:n,...r}=e;return he(r).length>1?r:r.type}function FHe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ji(e[t],["point","line"])});return e}function L6(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ke(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ke(t.point)?t.point:{}:void 0}function UU(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class DHe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(kl(t)){const{mark:r,encoding:i}=t,o=eu(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!L6(o,n[o.type],i);case"area":return!!L6(o,n[o.type],i)||!!UU(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:a,mark:s,name:u,encoding:l,...c}=t,f=J5(l,i),d=eu(s)?s:{type:s},p=L6(d,i[d.type],f),g=d.type==="area"&&UU(d,i[d.type]),y=[{name:u,...o?{params:o}:{},mark:RHe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ji(f,["shape"])}],v=fse(dse(d,f,i),f);let b=f;if(v){const{fieldChannel:x,offset:_}=v;b={...f,[x]:{...f[x],..._?{stack:_}:{}}}}return b=ji(b,["y2","x2"]),g&&y.push({...a?{projection:a}:{},mark:{type:"line",...Hp(d,["clip","interpolate","tension","tooltip"]),...g},encoding:b}),p&&y.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...Hp(d,["clip","tooltip"]),...p},encoding:b}),r({...c,layer:y},{...n,config:FHe(i)})}}function PHe(e,t){return t?cv(e)?pse(e,t):hse(e,t):e}function I6(e,t){return t?pse(e,t):e}function wC(e,t,n){const r=t[e];if(vWe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};me(bje(r.repeat));return}return t}function hse(e,t){if(e=wC("field",e,t),e!==void 0){if(e===null)return null;if(YN(e)&&Gs(e.sort)){const n=wC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function WU(e,t){if(ge(e))return hse(e,t);{const n=wC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function HU(e,t){if(Ye(e)){const n=WU(e,t);if(n)return n;if(q5(e))return{condition:e.condition}}else{if(fv(e)){const n=WU(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function pse(e,t){const n={};for(const r in e)if(ze(e,r)){const i=e[r];if(se(i))n[r]=i.map(o=>HU(o,t)).filter(o=>o);else{const o=HU(i,t);o!==void 0&&(n[r]=o)}}return n}class LHe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(kl(t)){const{encoding:n,mark:r}=t;if(r==="line"||eu(r)&&r.type==="line")for(const i of zBe){const o=T0(i),a=n[o];if(n[i]&&(ge(a)&&!cr(a.bin)||gu(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return me(Ije(!!i.x2,!!i.y2)),r({...t,mark:ke(o)?{...o,type:"rule"}:"rule"},n)}}class IHe extends lR{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[BWe,WWe,JWe,new DHe,new LHe]}map(t,n){if(kl(t)){const r=Md(t.encoding,nl),i=Md(t.encoding,rl),o=Md(t.encoding,T5);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=I6(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(a,n.config))return u.run(a,n,s);return a}mapRepeat(t,n){return AHe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:a,column:s,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...s?{column:s}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},p=`${(i.name?`${i.name}_`:"")+c}child__layer_${an(f)}`,g=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:p});return g.name=p,g})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...a}=t;!se(r)&&t.columns&&(t=ji(t,["columns"]),me(AU("repeat")));const s=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!se(r)&&r.row||[u?u.row:null],f=!se(r)&&r.column||[u?u.column:null],d=se(r)&&r||[u?u.repeat:null];for(const g of d)for(const y of c)for(const v of f){const b={repeat:g,row:y,column:v,layer:u.layer},x=(i.name?`${i.name}_`:"")+l+"child__"+(se(r)?`${an(g)}`:(r.row?`row_${an(y)}`:"")+(r.column?`column_${an(v)}`:"")),_=this.map(i,{...n,repeater:b,repeaterPrefix:x});_.name=x,s.push(ji(_,["data"]))}const p=se(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...a,columns:p,concat:s}}mapFacet(t,n){const{facet:r}=t;return cv(r)&&t.columns&&(t=ji(t,["columns"]),me(AU("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,u=GU({parentProjection:a,projection:i}),l=qU({parentEncoding:o,encoding:I6(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:s})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...a}=t.encoding,{mark:s,width:u,projection:l,height:c,view:f,params:d,encoding:p,...g}=t,{facetMapping:y,layout:v}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),b=I6(a,n.repeater);return this.mapFacet({...g,...v,facet:y,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:s,encoding:b,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&me(Pje([...r?[nl]:[],...i?[rl]:[]]));const a={},s={};for(const u of[nl,rl]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:p,...g}=l;a[u]=g;for(const y of["align","center","spacing"])l[y]!==void 0&&(s[y]??(s[y]={}),s[y][u]=l[y])}}return{facetMapping:a,layout:s}}else{const{align:a,center:s,spacing:u,columns:l,...c}=o;return{facetMapping:PHe(c,n.repeater),layout:{...a?{align:a}:{},...s?{center:s}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:a,...s}=t,u={...i,parentEncoding:qU({parentEncoding:n,encoding:o,layer:!0}),parentProjection:GU({parentProjection:r,projection:a})};return super.mapLayer({...s,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function qU({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...he(e),...he(t)]);for(const o of i){const a=t[o],s=e[o];if(Ye(a)){const u={...s,...a};r[o]=u}else fv(a)?r[o]={...a,condition:{...s,...a.condition}}:a||a===null?r[o]=a:(n||rs(s)||Re(s)||Ye(s)||se(s))&&(r[o]=s)}}else r=t;return!r||zt(r)?void 0:r}function GU(e){const{parentProjection:t,projection:n}=e;return t&&n&&me(Eje({parentProjection:t,projection:n})),n??t}function cR(e){return"filter"in e}function zHe(e){return(e==null?void 0:e.stop)!==void 0}function gse(e){return"lookup"in e}function BHe(e){return"data"in e}function jHe(e){return"param"in e}function UHe(e){return"pivot"in e}function WHe(e){return"density"in e}function HHe(e){return"quantile"in e}function qHe(e){return"regression"in e}function GHe(e){return"loess"in e}function VHe(e){return"sample"in e}function YHe(e){return"window"in e}function XHe(e){return"joinaggregate"in e}function JHe(e){return"flatten"in e}function KHe(e){return"calculate"in e}function mse(e){return"bin"in e}function QHe(e){return"impute"in e}function ZHe(e){return"timeUnit"in e}function eqe(e){return"aggregate"in e}function tqe(e){return"stack"in e}function nqe(e){return"fold"in e}function rqe(e){return"extent"in e&&!("density"in e)}function iqe(e){return e.map(t=>cR(t)?{filter:ip(t.filter,OUe)}:t)}class oqe extends lR{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=VU(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=VU(t,n),t.encoding){const r={};for(const[i,o]of tf(t.encoding))r[i]=yse(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:tf(r).map(([o,a])=>{const{init:s,bind:u,empty:l,...c}=a;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of mr(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:s,select:c,bind:u}})}:t}}function VU(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(cR(o))return{filter:_C(o,t)};if(mse(o)&&M0(o.bin))return{...o,bin:vse(o.bin)};if(gse(o)){const{selection:a,...s}=o.from;return a?{...o,from:{param:a,...s}}:o}return o});return{...r,transform:i}}return e}function yse(e,t){var r,i;const n=Ge(e);if(ge(n)&&M0(n.bin)&&(n.bin=vse(n.bin)),R0(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...a}=n.scale.domain;n.scale.domain={...a,...o?{param:o}:{}}}if(q5(n))if(se(n.condition))n.condition=n.condition.map(o=>{const{selection:a,param:s,test:u,...l}=o;return s?o:{...l,test:_C(o,t)}});else{const{selection:o,param:a,test:s,...u}=yse(n.condition,t);n.condition=a?n.condition:{...u,test:_C(n.condition,t)}}return n}function vse(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function _C(e,t){const n=r=>ip(r,i=>{var o;const a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):ip(e.test||e.filter,r=>r.selection?n(r.selection):r)}class AC extends lR{map(t,n){const r=n.selections??[];if(t.params&&!kl(t)){const i=[];for(const o of t.params)aR(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const a of r)if(!a.views||!a.views.length)o.push(a);else for(const s of a.views)($e(s)&&(s===t.name||i.includes(s))||se(s)&&s.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(a);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=AC.prototype[e];AC.prototype[e]=function(n,r){return t.call(this,n,aqe(n,r))}}function aqe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function bse(e,t){t===void 0&&(t=cse(e.config));const n=cqe(e,t),{width:r,height:i}=e,o=fqe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const sqe=new IHe,uqe=new oqe,lqe=new AC;function cqe(e,t={}){const n={config:t};return lqe.map(sqe.map(uqe.map(e,n),n),n)}function YU(e){return $e(e)?{type:e}:e??{}}function fqe(e,t,n){let{width:r,height:i}=t;const o=kl(e)||Q5(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(me(bU("width")),r=void 0),i=="container"&&(me(bU("height")),i=void 0));const s={type:"pad",...a,...n?YU(n.autosize):{},...YU(e.autosize)};if(s.type==="fit"&&!o&&(me(lje),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&me(xU("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&me(xU("height")),!po(s,{type:"pad"}))return s}function dqe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function hqe(e){return e?`fit-${F5(e)}`:"fit"}const pqe=["background","padding"];function XU(e,t){const n={};for(const r of pqe)e&&e[r]!==void 0&&(n[r]=co(e[r]));return t&&(n.params=e.params),n}class Tl{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Tl(Ge(this.explicit),Ge(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return $n(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of he(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ts(e){return{explicit:!0,value:e}}function oo(e){return{explicit:!1,value:e}}function xse(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:Z5(t,n,r,i)}}function Z5(e,t,n,r){return e.explicit&&t.explicit&&me(Yje(n,r,e.value,t.value)),e}function of(e,t,n,r,i=Z5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:po(e.value,t.value)?e:i(e,t,n,r)}class gqe extends Tl{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Zp(e){return"url"in e}function Qy(e){return"values"in e}function wse(e){return"name"in e&&!Zp(e)&&!Qy(e)&&!Rc(e)}function Rc(e){return e&&(_se(e)||Ase(e)||fR(e))}function _se(e){return"sequence"in e}function Ase(e){return"sphere"in e}function fR(e){return"graticule"in e}var Gt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Gt||(Gt={}));function Sse(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=ma(i.field),i}function f0(e,t=!0,n=zr){if(se(e)){const r=e.map(i=>f0(i,t,n));return t?`[${r.join(", ")}]`:r}else if(O0(e))return n(t?s0(e):bUe(e));return t?n(Bt(e)):e}function mqe(e,t){for(const n of mr(e.component.selection??{})){const r=n.name;let i=`${r}${sf}, ${n.resolve==="global"?"true":`{unit: ${Od(e)}}`}`;for(const o of rS)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+Yqe,on:[{events:{signal:n.name+sf},update:`modify(${xe(n.name+d0)}, ${i})`}]})}return dR(t)}function yqe(e,t){if(e.component.selection&&he(e.component.selection).length){const n=xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:wf("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return dR(t)}function vqe(e,t){let n=!1;for(const r of mr(e.component.selection??{})){const i=r.name,o=xe(i+d0);if(t.filter(s=>s.name===i).length===0){const s=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Use}(${o}, ${xe(s)}${u}`})}n=!0;for(const s of rS)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),dR(t)}function bqe(e,t){const n=[...t],r=Od(e,{escape:!1});for(const i of mr(e.component.selection??{})){const o={name:i.name+d0};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:is}}]),i.init){const s=i.project.items.map(Sse);o.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[is]:f0(u,!1)[0]})):i.init.map(u=>({unit:r,fields:s,values:f0(u,!1)}))}n.filter(s=>s.name===i.name+d0).length||n.push(o)}return n}function Ese(e,t){for(const n of mr(e.component.selection??{}))for(const r of rS)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function xqe(e,t){for(const n of e.children)vn(n)&&(t=Ese(n,t));return t}function wqe(e,t,n,r){const i=Vse(e,t.param,t);return{signal:Eo(n.get("type"))&&se(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function dR(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Pt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){me(_je);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class ci extends Pt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${woe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function z6(e){return e.as!==void 0}function JU(e){return`${e}_end`}class Vs extends Pt{clone(){return new Vs(null,Ge(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{const{field:s,timeUnit:u}=o;if(u){let l;if(N0(u)){if(vn(n)){const{mark:c,markDef:f,config:d}=n,p=rf({fieldDef:o,markDef:f,config:d});(Ky(c)||p)&&(l={timeUnit:rr(u),field:s})}}else l={as:we(o,{forAs:!0}),field:s,timeUnit:u};if(vn(n)){const{mark:c,markDef:f,config:d}=n,p=rf({fieldDef:o,markDef:f,config:d});Ky(c)&&Cn(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[ct(l)]=l)}return i},{});return zt(r)?null:new Vs(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=rr(r),a={...i,timeUnit:o};return new Vs(t,{[ct(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of tf(this.timeUnits)){const o=z6(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(mr(this.timeUnits).map(t=>z6(t)?t.as:JU(t.field)))}dependentFields(){return new Set(mr(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ct(this.timeUnits)}`}assemble(){const t=[];for(const n of mr(this.timeUnits)){const{rectBandPosition:r}=n,i=rr(n.timeUnit);if(z6(n)){const{field:o,as:a}=n,{unit:s,utc:u,...l}=i,c=[a,`${a}_end`];t.push({field:ma(o),type:"timeunit",...s?{units:I5(s)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...KU(c,r,i))}else if(n){const{field:o}=n,a=o.replaceAll("\\.","."),s=$se({timeUnit:i,field:a}),u=JU(a);t.push({type:"formula",expr:s,as:u}),t.push(...KU([a,u],r,i))}}return t}}const eS="offsetted_rect_start",tS="offsetted_rect_end";function $se({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=rae(r),{part:a,step:s}=sae(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function KU([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:QU([$se({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${eS}`},{type:"formula",expr:QU([i,o],n+.5),as:`${e}_${tS}`}]}return[]}function QU([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const pv="_tuple_fields";class _qe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Aqe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new _qe),o={},a={},s=new Set,u=(g,y)=>{const v=y==="visual"?g.channel:g.field;let b=an(`${r}_${v}`);for(let x=1;s.has(b);x++)b=an(`${r}_${v}_${x}`);return s.add(b),{[y]:b}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Ee(n.value):null;let{fields:d,encodings:p}=ke(n.select)?n.select:{};if(!d&&!p&&f){for(const g of f)if(ke(g))for(const y of he(g))IBe(y)?(p||(p=[])).push(y):l==="interval"?(me(vje),p=c.encodings):(d??(d=[])).push(y)}!d&&!p&&(p=c.encodings,"fields"in c&&(d=c.fields));for(const g of p??[]){const y=e.fieldDef(g);if(y){let v=y.field;if(y.aggregate){me(cje(g,y.aggregate));continue}else if(!v){me(_U(g));continue}if(y.timeUnit&&!N0(y.timeUnit)){v=e.vgField(g);const b={timeUnit:y.timeUnit,as:v,field:y.field};a[ct(b)]=b}if(!o[v]){const b=l==="interval"&&Cl(g)&&Eo(e.getScaleComponent(g).get("type"))?"R":y.bin?"R-RE":"E",x={field:v,channel:g,type:b,index:i.items.length};x.signals={...u(x,"data"),...u(x,"visual")},i.items.push(o[v]=x),i.hasField[v]=o[v],i.hasSelectionId=i.hasSelectionId||v===is,Coe(g)?(x.geoChannel=g,x.channel=$oe(g),i.hasChannel[x.channel]=o[v]):i.hasChannel[g]=o[v]}}else me(_U(g))}for(const g of d??[]){if(i.hasField[g])continue;const y={type:"E",field:g,index:i.items.length};y.signals={...u(y,"data")},i.items.push(y),i.hasField[g]=y,i.hasSelectionId=i.hasSelectionId||g===is}f&&(t.init=f.map(g=>i.items.map(y=>ke(g)?g[y.geoChannel||y.channel]!==void 0?g[y.geoChannel||y.channel]:g[y.field]:g))),zt(a)||(i.timeUnit=new Vs(null,a))},signals:(e,t,n)=>{const r=t.name+pv;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Sse)})}},il={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Cl(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Eo(a)){me(hje);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||ZU(e)||r.length===0)return n;const i=n.filter(a=>a.name===t.name)[0];let o=i.update;if(o.indexOf(Use)>=0)i.update=`{${r.map(a=>`${xe(ma(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const s=`${xe(ma(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ZU(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function SC(e,t){return`domain(${xe(e.scaleName(t))})`}function ZU(e){return e.parent&&jg(e.parent)&&!e.parent.parent}const sp="_brush",Cse="_scale_trigger",j1="geo_interval_init_tick",kse="_init",Sqe="_center",Eqe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ke(n.select)?n.select:{}};i.fields=[is],i.encodings||(i.encodings=n.value?he(n.value):[hs,ds]),n.select={type:"interval",...i}}if(t.translate&&!il.defined(t)){const i=`!event.item || event.item.mark.name !== ${xe(t.name+sp)}`;for(const o of t.events){if(!o.between){me(`${o} is not an ordered event stream for interval selections.`);continue}const a=Ee((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+sf,o=mr(t.project.hasChannel).filter(s=>s.channel===sn||s.channel===ar),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,u)=>s.concat($qe(e,t,u,a&&a[u.index])),[])),e.hasProjection){const s=xe(e.projectionName()),u=e.projectionName()+Sqe,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,p=l?a&&a[l.index]:`${u}[0]`,g=c?a&&a[c.index]:`${u}[1]`,y=E=>e.getSizeSignalRef(E).signal,v=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":y("width")}, ${d?d+"[1]":y("height")}]]`;a&&(n.unshift({name:r+kse,init:`[scale(${s}, [${l?p[0]:p}, ${c?g[0]:g}]), scale(${s}, [${l?p[1]:p}, ${c?g[1]:g}])]`}),(!l||!c)&&(n.find($=>$.name===u)||n.unshift({name:u,update:`invert(${s}, [${y("width")}/2, ${y("height")}/2])`})));const b=`intersect(${v}, {markname: ${xe(e.getName("marks"))}}, unit.mark)`,x=`{unit: ${Od(e)}}`,_=`vlSelectionTuples(${b}, ${x})`,A=o.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...A.length?[{signal:A.join(" || ")}]:[],...a?[{signal:j1}]:[]],update:_}]})}else{if(!il.defined(t)){const l=r+Cse,c=o.map(f=>{const d=f.channel,{data:p,visual:g}=f.signals,y=xe(e.scaleName(d)),v=e.getScaleComponent(d).get("type"),b=Eo(v)?"+":"";return`(!isArray(${p}) || (${b}invert(${y}, ${g})[0] === ${b}${p}[0] && ${b}invert(${y}, ${g})[1] === ${b}${p}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const s=o.map(l=>l.signals.data),u=`unit: ${Od(e)}, fields: ${r+pv}, values`;return n.concat({name:i,...a?{init:`{${u}: ${f0(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${u}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(vn(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===j1).length||n.unshift({name:j1,value:null,on:[{events:"timer{1}",update:`${j1} === null ? {} : ${j1}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,s=o==null?void 0:o.signals.visual,u=`data(${xe(t.name+d0)})`;if(il.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of he(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${Od(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...p}=t.mark,g=he(p).reduce((y,v)=>(y[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(b=>b).join(" && "),value:p[v]},{value:null}],y),{});return[{name:`${r+sp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+sp,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...g}}}]}};function $qe(e,t,n,r){const i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=xe(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===sn?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${c}, ${c}]`},{events:p,update:`[${a}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,p=il.defined(t),g=e.getScaleComponent(o),y=g?g.get("type"):void 0,v=r?{init:f0(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+Cse},update:Eo(y)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[{name:a,...v,on:f},{name:d,...r?{init:f0(r)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}else{const d=o===sn?0:1,p=t.name+kse,g=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[{name:a,...g,on:f}]}}const Cqe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+pv,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=mr(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+sp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let l=`unit: ${Od(e)}, `;if(t.project.hasSelectionId)l+=`${is}: ${a}[${xe(is)}]`;else{const f=o.items.map(d=>{const p=e.fieldDef(d.channel);return p!=null&&p.bin?`[${a}[${xe(e.vgField(d.channel,{}))}], ${a}[${xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+sf,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function Lg(e,t,n,r){const i=q5(t)&&t.condition,o=r(t);if(i){const s=Ee(i).map(u=>{const l=r(u);if(yWe(u)){const{param:c,empty:f}=u;return{test:Gse(e,{param:c,empty:f}),...l}}else return{test:NA(e,u.test),...l}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function hR(e,t="text"){const n=e.encoding[t];return Lg(e,n,t,r=>nS(r,e.config))}function nS(e,t,n="datum"){if(e){if(rs(e))return Qt(e.value);if(Ye(e)){const{format:r,formatType:i}=EA(e);return GN({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Tse(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(se(a))return{tooltip:eW({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Lg(e,a,"tooltip",u=>{const l=nS(u,i,s);if(l)return l;if(u===null)return;let c=Ot("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),$e(c))return{value:c};if(ke(c))return Re(c)?c:c.content==="encoding"?eW(n,o,i,t):{signal:s}})}}function Mse(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o={},a=r?"datum.datum":"datum",s=[];function u(c,f){const d=T0(f),p=pi(c)?c:{...c,type:e[d].type},g=p.title||JN(p,i),y=Ee(g).join(", ").replaceAll(/"/g,'\\"');let v;if(Cn(f)){const b=f==="x"?"x2":"y2",x=tu(e[b]);if(cr(p.bin)&&x){const _=we(p,{expr:a}),A=we(x,{expr:a}),{format:E,formatType:$}=EA(p);v=lv(_,A,E,$,i),o[b]=!0}}if((Cn(f)||f===ba||f===fs)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:b,formatType:x}=EA(p);v=GN({fieldOrDatumDef:p,format:b,formatType:x,expr:a,config:i,normalizeStack:!0}).signal}v??(v=nS(p,i,a).signal),s.push({channel:f,key:y,value:v})}ZN(e,(c,f)=>{ge(c)?u(c,f):G5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of s)!o[c]&&!l[f]&&(l[f]=d);return l}function eW(e,t,n,{reactiveGeom:r}={}){const i=Mse(e,t,n,{reactiveGeom:r}),o=tf(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function kqe(e){const{markDef:t,config:n}=e,r=Ot("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Tqe(e),...Mqe(e)}}function Tqe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ot("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in aje?{}:{ariaRoleDescription:{value:t}}}function Mqe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Lg(e,o,"description",u=>nS(u,e.config));const a=Ot("description",n,r);if(a!=null)return{description:Qt(a)};if(r.aria===!1)return{};const s=Mse(t,i,r);if(!zt(s))return{description:{signal:tf(s).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Jn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;s===void 0&&(u??(u=Ot(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),u!==void 0&&(s=Qt(u)));const l=i[e];return Lg(t,l,a??e,c=>qN({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Ose(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Ot("filled",n,i),s=ft(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=Ot(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Ot(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],c=a?"fill":"stroke",f={...u?{fill:Qt(u)}:{},...l?{stroke:Qt(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&me(Yoe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Jn("color",e,{vgChannel:c,defaultValue:a?u:l}),...Jn("fill",e,{defaultValue:r.fill?u:void 0}),...Jn("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Oqe(e){const{encoding:t,mark:n}=e,r=t.order;return!Tf(n)&&rs(r)?Lg(e,r,"zindex",i=>Qt(i.value)):{}}function eg({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:qN({channel:o,channelDef:s,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Qt(a),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function Nr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[hu(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=eg({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),g=pR({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),y=!u&&Cn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Nqe({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:g,bandPosition:p==="encoding"?0:void 0});return y?{[r||e]:y}:void 0}function Nqe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Ye(n)&&i&&t===i.fieldChannel){if(ge(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return _A({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Td(n,r,{suffix:"end"},{offset:o})}return WN(e)}function pR({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=T0(n),u=nf(n),l=Ot(n,o,a,{vgChannel:u});if(l!==void 0)return Km(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!ft([Ui.LOG,Ui.TIME,Ui.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Yi(n)],mult:.5}}}}const Rqe={left:"x",center:"xc",right:"x2"},Fqe={top:"y",middle:"yc",bottom:"y2"};function Nse(e,t,n,r="middle"){if(e==="radius"||e==="theta")return nf(e);const i=e==="x"?"align":"baseline",o=Ot(i,t,n);let a;return Re(o)?(me(Lje(i)),a=void 0):a=o,e==="x"?Rqe[a||(r==="top"?"left":"center")]:Fqe[a||r]}function MA(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Rse(e,t,{defaultPos:n,defaultPos2:r}):Nr(e,t,{defaultPos:n})}function Rse(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=hu(e),s=Yi(e),u=Dqe(t,r,a),l=u[s]?Nse(e,i,o):nf(e);return{...Nr(e,t,{defaultPos:n,vgChannel:l}),...u}}function Dqe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=T0(n),l=Yi(n),c=nf(n),f=r[u],d=e.scaleName(u),p=e.getScaleComponent(u),{offset:g}=n in r||n in o?eg({channel:n,markDef:o,encoding:r,model:e}):eg({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const v=Yi(n),b=e.markDef[v];return b!=null?{[v]:{value:b}}:{[c]:{field:e.getName(n)}}}const y=Pqe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:g,defaultRef:void 0});return y!==void 0?{[c]:y}:yx(n,o)||yx(n,{[n]:bA(n,o,s.style),[l]:bA(l,o,s.style)})||yx(n,s[i])||yx(n,s.mark)||{[c]:pR({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function Pqe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){return Ye(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Td(t,o,{suffix:"start"},{offset:u}):WN({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}function yx(e,t){const n=Yi(e),r=nf(e);if(t[r]!==void 0)return{[r]:Km(e,t[r])};if(t[e]!==void 0)return{[r]:Km(e,t[e])};if(t[n]){const i=t[n];if(l0(i))me(Oje(n));else return{[n]:Km(e,i)}}}function af(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,a=hu(t),s=Yi(t),u=r[t],l=r[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,p=r[s]??r.size??Ot("size",i,n,{vgChannel:s}),g=Ooe(t),y=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return ge(u)&&(Yt(u.bin)||cr(u.bin)||u.timeUnit&&!l)&&!(p&&!l0(p))&&!r[g]&&!ir(f)?zqe({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Ye(u)&&ir(f)||y)&&!l?Iqe(u,t,e):Rse(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Lqe(e,t,n,r,i,o,a){if(l0(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=yl("minBandSize",{type:a},r);return{signal:c?`max(${Wa(c)}, ${l})`:l}}else i.band!==1&&(me(jje(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Re(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(kf(u)&&xt(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=$n(u,a==="bar"?l:c);if(Re(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(xt(f))return{signal:`${1-f} * ${e}`}}return{value:kA(r.view,e)-2}}function Iqe(e,t,n){var O,N;const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Yi(t),f=hu(t),d=Ooe(t),p=n.scaleName(d),g=n.getScaleComponent(xN(t)),y=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let v;(i.size||r.size)&&(y?v=Jn("size",n,{vgChannel:c,defaultRef:Qt(r.size)}):me(qje(r.type)));const b=!!v,x=Tae({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(O=l||g)==null?void 0:O.get("type"),useVlSizeChannel:y});v=v||{[c]:Lqe(c,p||u,g||l,o,x,!!e,r.type)};const _=((N=l||g)==null?void 0:N.get("type"))==="band"&&l0(x)&&!b?"top":"middle",A=Nse(t,r,o,_),E=A==="xc"||A==="yc",{offset:$,offsetType:S}=eg({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),k=WN({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:$,defaultRef:pR({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Re(x)?{signal:`(1-${x})/2`}:l0(x)?(1-x.band)/2:0});if(c)return{[A]:k,...v};{const F=nf(f),W=v[c],I=$?{...W,offset:$}:W;return{[A]:k,[F]:se(k)?[k[0],{...k[1],offset:I}]:{...k,offset:I}}}}function tW(e,t,n,r,i,o,a){if(Eoe(e))return 0;const s=e==="x"||e==="y2",u=s?-t/2:t/2;if(Re(n)||Re(i)||Re(r)||o){const l=Wa(n),c=Wa(i),f=Wa(r),d=Wa(o),g=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${u})`:u,y=f?`${f} + `:"",v=l?`(${l} ? -1 : 1) * `:"",b=c?`(${c} + ${g})`:g;return{signal:y+v+b}}else return i=i||0,r+(n?-i-u:+i+u)}function zqe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var N;const{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),u=r.scaleName(n),l=s?s.get("type"):void 0,c=s.get("reverse"),f=Tae({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(N=r.component.axes[n])==null?void 0:N[0],p=(d==null?void 0:d.get("translate"))??.5,g=Cn(n)?Ot("binSpacing",o,i)??0:0,y=hu(n),v=nf(n),b=nf(y),x=yl("minBandSize",o,i),{offset:_}=eg({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:A}=eg({channel:y,markDef:o,encoding:a,model:r,bandPosition:0}),E=dWe({fieldDef:e,scaleName:u}),$=tW(n,g,c,p,_,x,E),S=tW(y,g,c,p,A??_,x,E),k=Re(f)?{signal:`(1-${f.signal})/2`}:l0(f)?(1-f.band)/2:.5,O=rf({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Yt(e.bin)||e.timeUnit){const F=e.timeUnit&&O!==.5;return{[b]:nW({fieldDef:e,scaleName:u,bandPosition:k,offset:S,useRectOffsetField:F}),[v]:nW({fieldDef:e,scaleName:u,bandPosition:Re(k)?{signal:`1-${k.signal}`}:1-k,offset:$,useRectOffsetField:F})}}else if(cr(e.bin)){const F=Td(e,u,{},{offset:S});if(ge(t))return{[b]:F,[v]:Td(t,u,{},{offset:$})};if(M0(e.bin)&&e.bin.step)return{[b]:F,[v]:{signal:`scale("${u}", ${we(e,{expr:"datum"})} + ${e.bin.step})`,offset:$}}}me(Koe(y))}function nW({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return _A({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:eS,endSuffix:tS}:{}})}const Bqe=new Set(["aria","width","height"]);function xa(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Ose(e):{};return{...jqe(e.markDef,t),...rW(e,"fill",n),...rW(e,"stroke",r),...Jn("opacity",e),...Jn("fillOpacity",e),...Jn("strokeOpacity",e),...Jn("strokeWidth",e),...Jn("strokeDash",e),...Oqe(e),...Tse(e),...hR(e,"href"),...kqe(e)}}function rW(e,t,n){const{config:r,mark:i,markDef:o}=e;if(Ot("invalid",o,r)==="hide"&&n&&!Tf(i)){const s=Uqe(e,{invalid:!0,channels:D5});if(s)return{[t]:[{test:s,value:null},...Ee(n)]}}return n?{[t]:n}:{}}function jqe(e,t){return oje.reduce((n,r)=>(!Bqe.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Qt(e[r])),n),{})}function Uqe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const u=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Eo(u)&&(o[l]=!0)}return o},{}),i=he(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>HN(a,t)).join(` ${o} `)}}function gR(e){const{config:t,markDef:n}=e;if(Ot("invalid",n,t)){const i=Wqe(e,{channels:pu});if(i)return{defined:{signal:i}}}return{}}function Wqe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{var u;const s=e.getScaleComponent(a);if(s){const l=s.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Eo(l)&&(o[c]=!0)}return o},{}),i=he(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>HN(a,t)).join(` ${o} `)}}function iW(e,t){if(t!==void 0)return{[e]:Qt(t)}}const B6="voronoi",Fse={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(B6)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Tf(o))return me(fje(o)),n;const a={name:e.getName(B6),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Tse(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?s=c:f.indexOf(B6)>=0&&(u=!0)}),u||n.splice(s+1,0,a),n}},Dse={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!oR(e.bind),parse:(e,t,n)=>Wse(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=Fse.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=an(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...a?{init:f0(a[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${xe(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(l=>l.name===r+sf)[0],a=r+pv,s=i.items.map(l=>an(`${r}_${l.field}`)),u=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},OA="_toggle",Pse={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+OA,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+sf,r=t.name+OA;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Od(e)}}, `)+`${r} ? ${n} : null`}},Hqe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=$e(t.clear)?wf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Dse.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===an(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+sf);r(i,"null"),Pse.defined(t)&&(i=n.findIndex(o=>o.name===t.name+OA),r(i,"false"))}return n}},Lse={defined:e=>{const t=e.resolve==="global"&&e.bind&&oR(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==is;return t&&!n&&me(pje),t&&n},parse:(e,t,n)=>{const r=Ge(n);if(r.select=$e(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Wse(t,r),ke(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=Ee(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}const i=P6(t.bind)?t.bind.legend:"click",o=$e(i)?wf(i,"view"):Ee(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=P6(t.bind)&&t.bind.legend,o=a=>s=>{const u=Ge(s);return u.markname=a,u};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${an(a.field)}_legend`,u=`${r}_${s}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+sf),a=r+pv,s=i.items.filter(d=>d.hasLegend).map(d=>an(`${r}_${an(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+OA),f=P6(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function qqe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of mr(e.component.selection??{})){const a=o.project.hasField[r]??o.project.hasChannel[t];if(a&&Lse.defined(o)){const s=n.get("selections")??[];s.push(o.name),n.set("selections",s,!1),a.hasLegend=!0}}}const Ise="_translate_anchor",zse="_translate_delta",Gqe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=il.defined(t),o=r+Ise,{x:a,y:s}=t.project.hasChannel;let u=wf(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+sp,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?SC(e,sn):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?SC(e,ar):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+zse,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&oW(e,t,a,"width",n),s!==void 0&&oW(e,t,s,"height",n),n}};function oW(e,t,n,r,i){const o=t.name,a=o+Ise,s=o+zse,u=n.channel,l=il.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),p=d&&d.get("type"),g=d&&d.get("reverse"),y=l?u===sn?g?"":"-":g?"-":"":"",v=`${a}.extent_${u}`,b=`${y}${s}.${u} / ${l?`${f}`:`span(${v})`}`,x=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",_=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",A=`${x}(${v}, ${b}${_})`;c.on.push({events:{signal:s},update:l?A:`clampRange(${A}, 0, ${f})`})}const Bse="_zoom_anchor",jse="_zoom_delta",Vqe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=il.defined(t),o=r+jse,{x:a,y:s}=t.project.hasChannel,u=xe(e.scaleName(sn)),l=xe(e.scaleName(ar));let c=wf(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+sp,f))),n.push({name:r+Bse,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&aW(e,t,a,"width",n),s!==void 0&&aW(e,t,s,"height",n),n}};function aW(e,t,n,r,i){const o=t.name,a=n.channel,s=il.defined(t),u=i.filter(x=>x.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c&&c.get("type"),d=s?SC(e,a):u.name,p=o+jse,g=`${o}${Bse}.${a}`,y=!s||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",v=s?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${y}(${d}, ${g}, ${p}${v})`;u.on.push({events:{signal:p},update:s?b:`clampRange(${b}, 0, ${l})`})}const d0="_store",sf="_tuple",Yqe="_modify",Use="vlSelectionResolve",rS=[Cqe,Eqe,Aqe,Pse,Dse,il,Lse,Hqe,Gqe,Vqe,Fse];function Xqe(e){let t=e.parent;for(;t&&!Qa(t);)t=t.parent;return t}function Od(e,{escape:t}={escape:!0}){let n=t?xe(e.name):e.name;const r=Xqe(e);if(r){const{facet:i}=r;for(const o of Qo)i[o]&&(n+=` + '__facet_${o}_' + (facet[${xe(r.vgField(o))}])`)}return n}function mR(e){return mr(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Wse(e,t){($e(t.select)||!t.select.on)&&delete e.events,($e(t.select)||!t.select.clear)&&delete e.clear,($e(t.select)||!t.select.toggle)&&delete e.toggle}function EC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...EC(e.object)),t.push(...EC(e.property))),t)}function Hse(e){return e.object.type==="MemberExpression"?Hse(e.object):e.object.name==="datum"}function qse(e){const t=DO(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Hse(r)&&n.add(EC(r).slice(1).join("."))}),n}class Ig extends Pt{clone(){return new Ig(null,this.model,Ge(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=NA(this.model,this.filter,this),this._dependentFields=qse(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Jqe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=an(i.name),a=i.select,s=$e(a)?a:a.type,u=ke(a)?Ge(a):{type:s},l=r[s];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=Ge(l[d]??u[d])));const c=n[o]={...u,name:o,type:s,init:i.value,bind:i.bind,events:$e(u.on)?wf(u.on,"scope"):Ee(Ge(u.on))},f=Ge(i);for(const d of rS)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Gse(e,t,n,r="datum"){const i=$e(t)?t:t.param,o=an(i),a=xe(o+d0);let s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){const d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}const u=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${xe(s.resolve)})`,c=`${u}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Vse(e,t,n){const r=an(t),i=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&me(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${xe(o)}.`);else if(i&&!o){const s=a.project.items.filter(u=>u.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,me((s.length?"Multiple ":"No ")+`matching ${xe(i)} encoding found for selection ${xe(n.param)}. Using "field": ${xe(o)}.`)):o=s[0].field}return`${a.name}[${xe(ma(o))}]`}function Kqe(e,t){for(const[n,r]of tf(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new ci(new Ig(t,e,{param:n}),i,Gt.Lookup,e.component.data.outputNodeRefCounts)}}function NA(e,t,n){return Jm(t,r=>$e(r)?r:kUe(r)?Gse(e,r,n):lae(r))}function Qqe(e,t){if(e)return se(e)&&!rc(e)?e.map(n=>JN(n,t)).join(", "):e}function j6(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Am(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const p in c){const g=OWe[p],y=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(hv(y)){const{condition:v,...b}=y,x=Ee(v),_=FU[p];if(_){const{vgProp:A,part:E}=_,$=[...x.map(S=>{const{test:k,...O}=S;return{test:NA(null,k),...O}}),b];j6(c,E,A,$),delete c[p]}else if(_===null){const A={signal:x.map(E=>{const{test:$,...S}=E;return`${NA(null,$)} ? ${vU(S)} : `}).join("")+vU(b)};c[p]=A}}else if(Re(y)){const v=FU[p];if(v){const{vgProp:b,part:x}=v;j6(c,x,b,y),delete c[p]}}ft(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:p}=c.encode;c.encode={...p?{grid:p}:{}},zt(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:$n(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let g=s;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Re(c.encode.labels.update.text)&&(g=o0(s,"datum.label",c.encode.labels.update.text.signal)),j6(c,"labels","text",{signal:g})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const g of zae)e.hasAxisPart(g)||delete c.encode[g];zt(c.encode)&&delete c.encode}const p=Qqe(u,n);return{scale:a,orient:o,grid:!1,...p?{title:p}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:$n(l,0)}}}}function Yse(e){const{axes:t}=e.component,n=[];for(const r of pu)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function Zqe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Am(i,"grid",t)),...r.map(i=>Am(i,"grid",t)),...n.map(i=>Am(i,"main",t)),...r.map(i=>Am(i,"main",t))].filter(i=>i)}function sW(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...he(a),...he(s)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${Wa(a[c])} : ${Wa(s[c])}`};return l}return t[i]})])}function eGe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:hae(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Re(n)?"axisOrient":`axis${rv(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],u=["axis",a,o];return{vlOnlyAxisConfig:sW(s,r,e,n),vgAxisConfig:sW(u,r,e,n),axisConfigStyle:tGe([...u,...s],r)}}function tGe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=Ee(o);for(const a of o)n.push(t.style[a])}}return Object.assign.apply(null,n)}function $C(e,t,n,r={}){var o;const i=joe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[a])==null?void 0:o[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const uW={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??nGe(n,e),gridScale:({model:e,channel:t})=>rGe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Jse(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Xse(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??oGe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??aGe(t.type,n,ge(t)&&!!t.timeUnit,ge(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??uGe({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:lGe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Kse(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return Woe(i?[NU(i)]:[],ge(a)?[NU(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>cGe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??fGe(n,t)};function nGe(e,t){return!ir(e)&&ge(t)&&!Yt(t==null?void 0:t.bin)&&!cr(t==null?void 0:t.bin)}function rGe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function iGe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Re(o)?o:Jy(o);{const{configValue:a}=$C("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?Jy(a):n===sn&&ft([zN,IN],e.type)&&!(ge(e)&&e.timeUnit)?270:void 0}}function CC(e){return`(((${e.signal} % 360) + 360) % 360)`}function Xse(e,t,n,r){if(e!==void 0)if(n==="x"){if(Re(e)){const i=CC(e),o=Re(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Re(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Re(e)){const i=CC(e),o=Re(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Re(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Jse(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Re(e)){const a=CC(e),s=Re(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Re(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function oGe(e,t){if(t==="x"&&ft(["quantitative","temporal"],e))return!0}function aGe(e,t,n,r){if(n&&!ke(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function sGe(e){return e==="x"?"bottom":"left"}function uGe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ir(t)&&t!=="log"){if(ge(e)){if(Yt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ft(["month","hours","day","quarter"],(i=rr(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function lGe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ge(t)){const{timeUnit:n}=t;if(n){const r=aae(n);if(r)return{signal:r}}}}function Kse(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return Hoe(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function cGe(e,t){const n=e.values;if(se(n))return Iae(t,n);if(Re(n))return n}function fGe(e,t){return e==="rect"&&SA(t)?1:0}class tg extends Pt{clone(){return new tg(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=qse(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(R0(r)&&kae(r.sort)){const{field:o,timeUnit:a}=r,s=r.sort,u=s.map((l,c)=>`${lae({field:o,timeUnit:a,equal:l})} ? ${c} : `).join("")+s.length;t=new tg(t,{calculate:u,as:ng(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ct(this.transform)}`}}function ng(e,t,n){return we(e,{prefix:t,suffix:"sort_index",...n??{}})}function iS(e,t){return ft(["top","bottom"],t)?"column":ft(["left","right"],t)||e==="row"?"row":"column"}function rg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return $n((t||{})[e],i[e],n.header[e])}function oS(e,t,n,r){const i={};for(const o of e){const a=rg(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}const yR=["row","column"],vR=["header","footer"];function dGe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=oS(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=iS(t,s),l=Jy(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Zse(l,u),...Qse(u,l,o),...eue(r,i,t,ZWe,nse)}}}function Qse(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Jse(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Zse(e,t){const n=Xse(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function hGe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of vR)if(n[i])for(const o of n[i]){const a=gGe(e,t,i,n,o);a!=null&&r.push(a)}return r}function pGe(e,t){const{sort:n}=e;return Gs(n)?{field:we(n,{expr:"datum"}),order:n.order??"ascending"}:se(n)?{field:ng(e,t,{expr:"datum"}),order:"ascending"}:{field:we(e,{expr:"datum"}),order:n??"ascending"}}function kC(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=oS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=GN({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=iS(t,s);return{text:{signal:u?o0(o0(u,"datum.label",l),"datum.value",we(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Zse(o,c),...Qse(c,o,a),...eue(n,e,t,eHe,rse)}}function gGe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=oS(["labelOrient"],a.header,s,t);(t==="row"&&!ft(["top","bottom"],f)||t==="column"&&!ft(["left","right"],f))&&(o=kC(a,t,s))}const u=Qa(e)&&!cv(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:pGe(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const mGe={column:{start:0,end:1},row:{start:1,end:0}};function yGe(e,t){return mGe[t][e]}function vGe(e,t){const n={};for(const r of Qo){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:a}=oS(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=iS(r,a),u=yGe(o,s);u!==void 0&&(n[s]=u)}}return zt(n)?void 0:n}function eue(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const s=rg(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function bR(e){return[...vx(e,"width"),...vx(e,"height"),...vx(e,"childWidth"),...vx(e,"childHeight")]}function vx(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(ir(a)&&kf(s)){const u=e.scaleName(n);return Qa(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[lW(u,s)]:[lW(u,s),{name:i,update:tue(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=xC(e.config.view,o?"width":"height"),u=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function lW(e,t){const n=`${e}_step`;return Re(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function tue(e,t,n){const r=t.get("type"),i=t.get("padding"),o=$n(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${Wa(a)}, ${Wa(o)}) * ${e}_step`}function nue(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function rue(e,t){return he(e).reduce((n,r)=>{const i=e[r];return{...n,...Lg(t,i,r,o=>Qt(o.value))}},{})}function iue(e,t){if(Qa(t))return e==="theta"?"independent":"shared";if(jg(t))return"shared";if($R(t))return Cn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function xR(e,t){const n=e.scale[t],r=Cn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&me(Jje(t)),"independent"):e[r][t]||"shared"}const bGe={...rHe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},oue=he(bGe);class xGe extends Tl{}const cW={symbols:wGe,gradient:_Ge,labels:AGe,entries:SGe};function wGe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&l!=="trail";let f={...uje({},n,ZUe),...Ose(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,p=i.get("symbolFillColor")??u.legend.symbolFillColor,g=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,y=d===void 0?aue(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Gi)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=Qt(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Qt(y??1));else if(se(f.fill)){const v=TC(s.fill??s.color)??a.fill??(c&&a.color);v&&(f.fill=Qt(v))}}if(f.stroke){if(r==="stroke"||!c&&r===Gi)delete f.stroke;else if(f.stroke.field||g)delete f.stroke;else if(se(f.stroke)){const v=$n(TC(s.stroke||s.color),a.stroke,c?a.color:void 0);v&&(f.stroke={value:v})}}if(r!==$l){const v=ge(t)&&uue(n,i,t);v?f.opacity=[{test:v,...Qt(y??1)},Qt(u.legend.unselectedOpacity)]:y&&(f.opacity=Qt(y))}return f={...f,...e},zt(f)?void 0:f}function _Ge(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:a}=t;let s={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?aue(a.opacity)||o.opacity:void 0;return l&&(s.opacity=Qt(l)),s={...s,...e},zt(s)?void 0:s}function AGe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=ge(t)?uue(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;c0(c)?f=qa({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):l===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=qa({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&ge(t)&&t.timeUnit===void 0&&(f=qa({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return zt(d)?void 0:d}function SGe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function aue(e){return sue(e,(t,n)=>Math.max(t,n.value))}function TC(e){return sue(e,(t,n)=>$n(t,n.value))}function sue(e,t){if(bWe(e))return Ee(e.condition).reduce(t,e.value);if(rs(e))return e.value}function uue(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=xe(n.field);return r.map(o=>`(!length(data(${xe(an(o)+d0)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const fW={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Sae(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Eae(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??OGe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??NGe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??$Ge(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ap(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(op(n)&&Ha(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>EGe(t,e)};function EGe(e,t){const n=e.values;if(se(n))return Iae(t,n);if(Re(n))return n}function $Ge(e,t,n,r){if(t!=="shape"){const i=TC(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function CGe(e){const{legend:t}=e;return $n(t.type,kGe(e))}function kGe({channel:e,timeUnit:t,scaleType:n}){if(op(e)){if(ft(["quarter","month","day"],t))return"symbol";if(Ha(n))return"gradient"}return"symbol"}function TGe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??MGe(n,t)}function MGe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function OGe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(Ha(i))return n==="horizontal"?r==="top"||r==="bottom"?dW(t,"width",a,o):a:dW(t,"height",u,s)}function dW(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function NGe(e){if(ft(["quantile","threshold","log","symlog"],e))return"greedy"}function lue(e){const t=vn(e)?RGe(e):LGe(e);return e.component.legends=t,t}function RGe(e){const{encoding:t}=e,n={};for(const r of[Gi,...ose]){const i=Bn(t[r]);!i||!e.getScaleComponent(r)||r===Vi&&ge(i)&&i.type===Pg||(n[r]=PGe(e,r))}return n}function FGe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function DGe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function PGe(e,t){var A;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new xGe({},FGe(e,t));qqe(e,t,s);const u=n!==void 0?!n:a.disable;if(s.set("disable",u,n!==void 0),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Bn(i[t]),f=ge(c)?(A=rr(c.timeUnit))==null?void 0:A.unit:void 0,d=n.orient||o.legend.orient||"right",p=CGe({legend:n,channel:t,timeUnit:f,scaleType:l}),g=TGe({legend:n,legendType:p,orient:d,legendConfig:a}),y={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:g};for(const E of oue){if(p==="gradient"&&E.startsWith("symbol")||p==="symbol"&&E.startsWith("gradient"))continue;const $=E in fW?fW[E](y):n[E];if($!==void 0){const S=DGe($,E,n,e.fieldDef(t));(S||o.legend[E]===void 0)&&s.set(E,$,S)}}const v=(n==null?void 0:n.encoding)??{},b=s.get("selections"),x={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:p};for(const E of["labels","legend","title","symbols","gradient","entries"]){const $=rue(v[E]??{},e),S=E in cW?cW[E]($,_):$;S!==void 0&&!zt(S)&&(x[E]={...b!=null&&b.length&&ge(c)?{name:`${an(c.field)}_legend_${E}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:S})}return zt(x)||s.set("encode",x,!!(n!=null&&n.encoding)),s}function LGe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){lue(r);for(const i of he(r.component.legends))n.legend[i]=xR(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=cue(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of he(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function cue(e,t){var o,a,s,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of oue){const c=of(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return IGe(f,d);case"title":return qoe(f,d);case"type":return i=!0,oo("symbol")}return Z5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((a=(o=e.implicit)==null?void 0:o.encode)!=null&&a.gradient&&vA(e.implicit,["encode","gradient"]),(u=(s=e.explicit)==null?void 0:s.encode)!=null&&u.gradient&&vA(e.explicit,["encode","gradient"])),e}function IGe(e,t){return t.value==="circle"?t:e}function zGe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function fue(e){const t=e.component.legends,n={};for(const i of he(t)){const o=e.getScaleComponent(i),a=Bt(o.get("domains"));if(n[a])for(const s of n[a])cue(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return mr(n).flat().map(i=>BGe(i,e.config)).filter(i=>i!==void 0)}function BGe(e,t){var a,s,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(a=o.encode)!=null&&a.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of ose)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(s=o.encode)==null?void 0:s.labels)!=null&&u.update&&Re(o.encode.labels.update.text)&&(l=o0(r,"datum.label",o.encode.labels.update.text.signal)),zGe(o,"labels","text",{signal:l})}return o}}function jGe(e){return jg(e)||$R(e)?UGe(e):due(e)}function UGe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),due(e))}function due(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const u=Re(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return ft(a,u)||a.push(u),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const WGe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class hue extends Tl{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function pue(e){e.component.projection=vn(e)?HGe(e):VGe(e)}function HGe(e){if(e.hasProjection){const t=Mi(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?qGe(e):void 0,o=new hue(e.projectionName(!0),{...Mi(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function qGe(e){const t=[],{encoding:n}=e;for(const r of[[hs,ds],[ya,ps]])(Bn(n[r[0]])||Bn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Vi)&&e.typedFieldDef(Vi).type===Pg&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Gt.Main)),t}function GGe(e,t){const n=dN(WGe,i=>!!(!ze(e.explicit,i)&&!ze(t.explicit,i)||ze(e.explicit,i)&&ze(t.explicit,i)&&po(e.get(i),t.get(i))));if(po(e.size,t.size)){if(n)return e;if(po(e.explicit,{}))return t;if(po(t.explicit,{}))return e}return null}function VGe(e){if(e.children.length===0)return;let t;for(const r of e.children)pue(r);const n=dN(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=GGe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new hue(r,t.specifiedProjection,t.size,Ge(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function YGe(e,t,n,r){if(dv(t,n)){const i=vn(e)?e.axis(n)??e.legend(n)??{}:{},o=we(t,{expr:"datum"}),a=we(t,{expr:"datum",binSuffix:"end"});return{formulaAs:we(t,{binSuffix:"range",forAs:!0}),formula:lv(o,a,i.format,i.formatType,r)}}return{}}function gue(e,t){return`${Loe(e)}_${t}`}function XGe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wR(e,t,n){const r=V5(n,void 0)??{},i=gue(r,t);return e.getName(`${i}_bins`)}function JGe(e){return"as"in e}function hW(e,t,n){let r,i;JGe(e)?r=$e(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[we(e,{forAs:!0}),we(e,{binSuffix:"end",forAs:!0})];const o={...V5(t,void 0)},a=gue(o,e.field),{signal:s,extentSignal:u}=XGe(n,a);if(P5(o.extent)){const c=o.extent;i=Vse(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:a,binComponent:l}}class Ys extends Pt{clone(){return new Ys(null,Ge(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{if(pi(o)&&Yt(o.bin)){const{key:s,binComponent:u}=hW(o,o.bin,n);i[s]={...u,...i[s],...YGe(n,o,a,n.config)}}return i},{});return zt(r)?null:new Ys(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=hW(n,n.bin,r);return new Ys(t,{[i]:o})}merge(t,n){for(const r of he(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Ps([...this.bins[r].as,...t.bins[r].as],ct)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(mr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(mr(this.bins).map(t=>t.field))}hash(){return`Bin ${ct(this.bins)}`}assemble(){return mr(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...a}=t.bin,s={type:"bin",field:ma(t.field),as:r,signal:t.signal,...P5(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!o&&t.extentSignal&&(n.push({type:"extent",field:ma(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:we({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function KGe(e,t,n,r){var o;const i=vn(r)?r.encoding[hu(t)]:void 0;if(pi(n)&&vn(r)&&Mae(n,i,r.markDef,r.config)){e.add(we(n,{})),e.add(we(n,{suffix:"end"}));const{mark:a,markDef:s,config:u}=r,l=rf({fieldDef:n,markDef:s,config:u});Ky(a)&&l!==.5&&Cn(t)&&(e.add(we(n,{suffix:eS})),e.add(we(n,{suffix:tS}))),n.bin&&dv(n,t)&&e.add(we(n,{binSuffix:"range"}))}else if(Coe(t)){const a=$oe(t);e.add(r.getName(a))}else e.add(we(n));return R0(n)&&jUe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function QGe(e,t){for(const n of he(t)){const r=t[n];for(const i of he(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ka extends Pt{clone(){return new Ka(null,new Set(this.dimensions),Ge(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{const{aggregate:u,field:l}=a;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([we(a,{forAs:!0})]);else{if(ml(u)||Cf(u)){const c=ml(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([we({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([we(a,{forAs:!0})]);Cl(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([we({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([we({field:l,aggregate:"max"},{forAs:!0})]))}else KGe(o,s,a,n)}),o.size+he(i).length===0)?null:new Ka(t,o,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const o of n.aggregate){const{op:a,field:s,as:u}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||we(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([u||we(o,{forAs:!0})])))}for(const o of n.groupby??[])r.add(o);return r.size+he(i).length===0?null:new Ka(t,r,i)}merge(t){return voe(this.dimensions,t.dimensions)?(QGe(this.measures,t.measures),!0):(dUe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...he(this.measures)])}producedFields(){const t=new Set;for(const n of he(this.measures))for(const r of he(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ct({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of he(this.measures))for(const a of he(this.measures[o]))for(const s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:ma(o));return{type:"aggregate",groupby:[...this.dimensions].map(ma),ops:t,fields:n,as:r}}}class zg extends Pt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Qo){const a=n.facet[o];if(a){const{bin:s,sort:u}=a;this[o]={name:n.getName(`${o}_domain`),fields:[we(a),...Yt(s)?[we(a,{binSuffix:"end"})]:[]],...Gs(u)?{sortField:u}:se(u)?{sortIndexField:ng(a,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Qo)this[n]&&(t+=` ${n.charAt(0)}:${ct(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Qo)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Qo)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of pu){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(ir(i)&&kf(o)){const a=aS(this.childModel,n),s=ER(a);s?t[n]=s:me($N(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=W5,field:f}=u;o.push(f),a.push(c),s.push(we(u,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:a,as:s}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of yR){for(const c of vR){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(r.x??[],r.y??[]),u=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:u}]})}for(const s of[rl,nl])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){const s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}}function pW(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ZGe(e,t){const n=gN(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=pW(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=pW(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return me(wje(t)),null}function eVe(e){const t={};return xw(e.filter,n=>{if(uae(n)){let r=null;MN(n)?r=co(n.equal):NN(n)?r=co(n.lte):ON(n)?r=co(n.lt):RN(n)?r=co(n.gt):FN(n)?r=co(n.gte):DN(n)?r=n.range[0]:PN(n)&&(r=(n.oneOf??n.in)[0]),r&&(O0(r)?t[n.field]="date":xt(r)?t[n.field]="number":$e(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function tVe(e){const t={};function n(r){Qp(r)?t[r.field]="date":r.type==="quantitative"&&ZBe(r.aggregate)?t[r.field]="number":qp(r.field)>1?r.field in t||(t[r.field]="flatten"):R0(r)&&Gs(r.sort)&&qp(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((vn(e)||Qa(e))&&e.forEachFieldDef((r,i)=>{if(pi(r))n(r);else{const o=T0(i),a=e.fieldDef(o);n({...r,type:a.type})}}),vn(e)){const{mark:r,markDef:i,encoding:o}=e;if(Tf(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",s=o[a];ge(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function nVe(e){const t={};if(vn(e)&&e.component.selection)for(const n of he(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&qp(i.field)>1&&(t[i.field]="flatten")}return t}class Rr extends Pt{clone(){return new Rr(null,Ge(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ct(this._parse)}`}static makeExplicit(t,n,r){var a;let i={};const o=n.data;return!Rc(o)&&((a=o==null?void 0:o.format)!=null&&a.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const s of he(r)){const u=i.getWithExplicit(s);u.value!==void 0&&(u.explicit||u.value===r[s]||u.value==="derived"||r[s]==="flatten"?delete r[s]:me(SU(s,r[s],u.value)))}for(const s of he(n)){const u=i.get(s);u!==void 0&&(u===n[s]?delete n[s]:me(SU(s,n[s],u)))}const o=new Tl(n,r);i.copyAll(o);const a={};for(const s of he(o.combine())){const u=o.get(s);u!==null&&(a[s]=u)}return he(a).length===0||i.parseNothing?null:new Rr(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of he(this._parse)){const r=this._parse[n];qp(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(he(this._parse))}dependentFields(){return new Set(he(this._parse))}assembleTransforms(t=!1){return he(this._parse).filter(n=>t?qp(n)>1:!0).map(n=>{const r=ZGe(n,this._parse[n]);return r?{type:"formula",expr:r,as:mN(n)}:null}).filter(n=>n!==null)}}class uf extends Pt{clone(){return new uf(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([is])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:is}}}class gv extends Pt{clone(){return new gv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ct(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class mv extends Pt{clone(){return new mv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ct(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class h0 extends Pt{constructor(t){super(null),t??(t={name:"source"});let n;if(Rc(t)||(n=t.format?{...ji(t.format,["parse"])}:{}),Qy(t))this._data={values:t.values};else if(Zp(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ft(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Ase(t)?this._data={values:[{type:"Sphere"}]}:(wse(t)||Rc(t))&&(this._data={});this._generator=Rc(t),t.name&&(this._name=t.name),n&&!zt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var gW=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},rVe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Sm;function _R(e){return e instanceof h0||e instanceof gv||e instanceof mv}class AR{constructor(){Sm.set(this,void 0),gW(this,Sm,!1,"f")}setModified(){gW(this,Sm,!0,"f")}get modifiedFlag(){return rVe(this,Sm,"f")}}Sm=new WeakMap;class F0 extends AR{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class SR extends AR{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class iVe extends SR{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of he(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class oVe extends SR{constructor(t){super(),this.requiresSelectionId=t&&mR(t)}run(t){t instanceof uf&&(this.requiresSelectionId&&(_R(t.parent)||t.parent instanceof Ka||t.parent instanceof Rr)||(this.setModified(),t.remove()))}}class aVe extends AR{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Vs&&(r=t.producedFields(),hN(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class sVe extends SR{constructor(){super()}run(t){t instanceof ci&&!t.isRequired()&&(this.setModified(),t.remove())}}class uVe extends F0{run(t){if(!_R(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Rr)if(t instanceof Rr)this.setModified(),t.merge(n);else{if(pN(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class lVe extends F0{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Rr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const a of r){const s=a.parse;for(const u of he(s))u in i?i[u]!==s[u]&&o.add(u):i[u]=s[u]}for(const a of o)delete i[a];if(!zt(i)){this.setModified();const a=new Rr(t,i);for(const s of n){if(s instanceof Rr)for(const u of he(i))delete s.parse[u];t.removeChild(s),s.parent=a,s instanceof Rr&&he(s.parse).length===0&&s.remove()}}}}}class cVe extends F0{run(t){t instanceof ci||t.numChildren()>0||t instanceof zg||t instanceof h0||(this.setModified(),t.remove())}}class fVe extends F0{run(t){const n=t.children.filter(i=>i instanceof Vs),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class dVe extends F0{run(t){const n=t.children.filter(i=>i instanceof Ka),r={};for(const i of n){const o=ct(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of he(r)){const o=r[i];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class hVe extends F0{constructor(t){super(),this.model=t}run(t){const n=!(_R(t)||t instanceof Ig||t instanceof Rr||t instanceof uf),r=[],i=[];for(const o of t.children)o instanceof Ys&&(n&&!pN(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ys?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class pVe extends F0{run(t){const n=[...t.children];if(!i0(n,a=>a instanceof ci)||t.numChildren()<=1)return;const i=[];let o;for(const a of n)if(a instanceof ci){let s=a;for(;s.numChildren()===1;){const[u]=s.children;if(u instanceof ci)s=u;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=o}}}class D0 extends Pt{clone(){return new D0(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ps(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??we(t)}hash(){return`JoinAggregateTransform ${ct(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function gVe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=we(r);return i&&t.push(i),t},[])}function mVe(e){return se(e)&&e.every(t=>$e(t))&&e.length>1}class ol extends Pt{clone(){return new ol(null,Ge(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],u=[];if(n.sort!==void 0)for(const f of n.sort)s.push(f.field),u.push($n(f.order,"ascending"));const l={field:s,order:u};let c;return mVe(o)?c=o:$e(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new ol(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:u}=r,l=o.map(p=>{const g=i[p];return tu(g)}).filter(p=>!!p),c=gVe(n),f=n.encoding.order;let d;if(se(f)||ge(f))d=Uoe(f);else{const p=Oae(f)?f.sort:a==="y"?"descending":"ascending";d=c.reduce((g,y)=>(g.field.push(y),g.order.push(p),g),{field:[],order:[]})}return new ol(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:c,sort:d,offset:s,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ct(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[we(i,{binSuffix:"mid"})]:[we(i,{}),we(i,{binSuffix:"end"})]:[we(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const p=we(c,{expr:"datum"}),g=we(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${g}`,as:we(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:we(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}}class Bg extends Pt{clone(){return new Bg(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ps(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??we(t)}hash(){return`WindowTransform ${ct(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>SN(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const s=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)s.push(f.field),u.push(f.order??"ascending");const l={field:s,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...a!==void 0?{groupby:a}:{},...o!==void 0?{frame:o}:{}}}}function yVe(e){function t(n){if(!(n instanceof zg)){const r=n.clone();if(r instanceof ci){const i=OC+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ka||r instanceof ol||r instanceof Bg||r instanceof D0)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function MC(e){if(e instanceof zg)if(e.numChildren()===1&&!(e.children[0]instanceof ci)){const t=e.children[0];(t instanceof Ka||t instanceof ol||t instanceof Bg||t instanceof D0)&&t.addDimensions(e.fields),t.swapWithParent(),MC(e)}else{const t=e.model.component.data.main;mue(t);const n=yVe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(MC)}function mue(e){if(e instanceof ci&&e.type===Gt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof zg||(t.swapWithParent(),mue(e))}}const OC="scale_",bx=5;function NC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!NC(t.children))return!1}return!0}function $a(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function mW(e,t,n){let r=e.sources,i=!1;return i=$a(new sVe,r)||i,i=$a(new oVe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=$a(new cVe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=$a(new uVe,r)||i,i=$a(new hVe(t),r)||i,i=$a(new aVe,r)||i,i=$a(new lVe,r)||i,i=$a(new dVe,r)||i,i=$a(new fVe,r)||i,i=$a(new iVe,r)||i,i=$a(new pVe,r)||i),e.sources=r,i}function vVe(e,t){NC(e.sources);let n=0,r=0;for(let i=0;i<bx&&mW(e,t,!0);i++)n++;e.sources.map(MC);for(let i=0;i<bx&&mW(e,t,!1);i++)r++;NC(e.sources),Math.max(n,r)===bx&&me(`Maximum optimization runs(${bx}) reached.`)}class Yn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Yn(()=>t(n))}}function yue(e){vn(e)?bVe(e):xVe(e)}function bVe(e){const t=e.component.scales;for(const n of he(t)){const r=_Ve(e,n);if(t[n].setWithExplicit("domains",r),SVe(e,n),e.component.data.isFaceted){let o=e;for(;!Qa(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of r.value)Zu(s)&&(s.data=OC+s.data.replace(OC,""))}}}function xVe(e){for(const n of e.children)yue(n);const t=e.component.scales;for(const n of he(t)){let r,i=null;for(const o of e.children){const a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=of(r,a.getWithExplicit("domains"),"domains","scale",RC);const s=a.get("selectionExtent");i&&s&&i.param!==s.param&&me(yje),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function wVe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=yW(t,n);if(!i){me(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=yW(t,n);if(i)return"unaggregated"}return e}function _Ve(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=wVe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Bn(r.x2)?Bn(r.x)?of(Yl(n,i,e,"x"),Yl(n,i,e,"x2"),"domain","scale",RC):Yl(n,i,e,"x2"):t==="y"&&Bn(r.y2)?Bn(r.y)?of(Yl(n,i,e,"y"),Yl(n,i,e,"y2"),"domain","scale",RC):Yl(n,i,e,"y2"):Yl(n,i,e,t)}function AVe(e,t,n){return e.map(r=>({signal:`{data: ${Y5(r,{timeUnit:n,type:t})}}`}))}function U6(e,t,n){var i;const r=(i=rr(n))==null?void 0:i.unit;return t==="temporal"||r?AVe(e,t,r):[e]}function Yl(e,t,n,r){const{encoding:i,markDef:o,mark:a,config:s,stack:u}=n,l=Bn(i[r]),{type:c}=l,f=l.timeUnit;if(BUe(t)){const g=Yl(e,void 0,n,r),y=U6(t.unionWith,c,f);return Ts([...y,...g.value])}else{if(Re(t))return Ts([t]);if(t&&t!=="unaggregated"&&!gae(t))return Ts(U6(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return oo([[0,1]]);const g=n.requestDataName(Gt.Main);return oo([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const d=Cl(r)&&ge(l)?EVe(n,r,e):void 0;if(gu(l)){const g=U6([l.datum],c,f);return oo(g)}const p=l;if(t==="unaggregated"){const g=n.requestDataName(Gt.Main),{field:y}=l;return oo([{data:g,field:we({field:y,aggregate:"min"})},{data:g,field:we({field:y,aggregate:"max"})}])}else if(Yt(p.bin)){if(ir(e))return oo(e==="bin-ordinal"?[]:[{data:Xy(d)?n.requestDataName(Gt.Main):n.requestDataName(Gt.Raw),field:n.vgField(r,dv(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ke(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:g}=p;if(Yt(g)){const y=wR(n,p.field,g);return oo([new Yn(()=>{const v=n.getSignalName(y);return`[${v}.start, ${v}.stop]`})])}else return oo([{data:n.requestDataName(Gt.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&ft(["time","utc"],e)){const g=i[hu(r)];if(Mae(p,g,o,s)){const y=n.requestDataName(Gt.Main),v=rf({fieldDef:p,fieldDef2:g,markDef:o,config:s}),b=Ky(a)&&v!==.5&&Cn(r);return oo([{data:y,field:n.vgField(r,b?{suffix:eS}:{})},{data:y,field:n.vgField(r,{suffix:b?tS:"end"})}])}}return oo(d?[{data:Xy(d)?n.requestDataName(Gt.Main):n.requestDataName(Gt.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Gt.Main),field:n.vgField(r)}])}function W6(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":W5),...r?{field:ma(r)}:{},...i?{order:i}:{}}}function SVe(e,t){var s;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(s=e.fieldDef(t))==null?void 0:s.bin,o=gae(r)&&r,a=M0(i)&&P5(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function EVe(e,t,n){if(!ir(n))return;const r=e.fieldDef(t),i=r.sort;if(kae(i))return{op:"min",field:ng(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Gs(i)){const s=o&&!a.has(i.field);return W6(i,s)}else if(Cae(i)){const{encoding:s,order:u}=i,l=e.fieldDef(s),{aggregate:c,field:f}=l,d=o&&!a.has(f);if(ml(c)||Cf(c))return W6({field:we(l),order:u},d);if(SN(c)||!c)return W6({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ft(["ascending",void 0],i))return!0}}function yW(e,t){const{aggregate:n,type:r}=e;return n?$e(n)&&!tje.has(n)?{valid:!1,reason:Wje(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Hje(e)}:{valid:!0}:{valid:!1,reason:Uje(e)}}function RC(e,t,n,r){return e.explicit&&t.explicit&&me(Xje(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function $Ve(e){const t=Ps(e.map(a=>{if(Zu(a)){const{sort:s,...u}=a;return u}return a}),ct),n=Ps(e.map(a=>{if(Zu(a)){const s=a.sort;return s!==void 0&&!Xy(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),ct);if(t.length===0)return;if(t.length===1){const a=e[0];if(Zu(a)&&n.length>0){let s=n[0];if(n.length>1){me($U);const u=n.filter(l=>ke(l)&&"op"in l&&l.op!=="min");n.every(l=>ke(l)&&"op"in l)&&u.length===1?s=u[0]:s=!0}else if(ke(s)&&"field"in s){const u=s.field;a.field===u&&(s=s.order?{order:s.order}:!0)}return{...a,sort:s}}return a}const r=Ps(n.map(a=>Xy(a)||!("op"in a)||$e(a.op)&&a.op in KBe?a:(me(Kje(a)),!0)),ct);let i;r.length===1?i=r[0]:r.length>1&&(me($U),i=!0);const o=Ps(e.map(a=>Zu(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(s=>s.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function ER(e){if(Zu(e)&&$e(e.field))return e.field;if(nje(e)){let t;for(const n of e.fields)if(Zu(n)&&$e(n.field)){if(!t)t=n.field;else if(t!==n.field)return me(Qje),t}return me(Zje),t}else if(rje(e)){me(eUe);const t=e.fields[0];return $e(t)?t:void 0}}function aS(e,t){const r=e.component.scales[t].get("domains").map(i=>(Zu(i)&&(i.data=e.lookupDataSource(i.data)),i));return $Ve(r)}function vue(e){return jg(e)||$R(e)?e.children.reduce((t,n)=>t.concat(vue(n)),vW(e)):vW(e)}function vW(e){return he(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=CVe(i.range,o,n,e),p=aS(e,n),g=s?wqe(e,s,r,p):null;return t.push({name:o,type:a,...p?{domain:p}:{},...g?{domainRaw:g}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function CVe(e,t,n,r){if(Cn(n)){if(kf(e))return{step:{signal:`${t}_step`}}}else if(ke(e)&&Zu(e))return{...e,data:r.lookupDataSource(e.data)};return e}class bue extends Tl{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:i0(this.get("domains"),t=>se(t)&&t.length===2&&xt(t[0])&&t[0]<=0&&xt(t[1])&&t[1]>=0)}}const kVe=["range","scheme"];function TVe(e){const t=e.component.scales;for(const n of D5){const r=t[n];if(!r)continue;const i=MVe(n,e);r.setWithExplicit("range",i)}}function bW(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Yi(t),a=e.getName(o);if(ke(r)&&r.binned&&r.step!==void 0)return new Yn(()=>{const s=e.scaleName(t),u=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${u})`});if(Yt(r)){const s=wR(e,i,r);return new Yn(()=>{const u=e.getSignalName(s),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function MVe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of kVe)if(n[f]!==void 0){const d=yC(o,f),p=mae(e,f);if(!d)me(Xoe(o,f,e));else if(p)me(p);else switch(f){case"range":{const g=n.range;if(se(g)){if(Cn(e))return Ts(g.map(y=>{if(y==="width"||y==="height"){const v=t.getName(y),b=t.getSignalName.bind(t);return Yn.fromName(b,v)}return y}))}else if(ke(g))return Ts({data:t.requestDataName(Gt.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return Ts(g)}case"scheme":return Ts(OVe(n[f]))}}const a=e===sn||e==="xOffset"?"width":"height",s=r[a];if(nu(s)){if(Cn(e))if(ir(o)){const f=wue(s,t,e);if(f)return Ts({step:f})}else me(Joe(a));else if(av(e)){const f=e===_f?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const g=_ue(s,o);if(g)return Ts(g)}}}const{rangeMin:u,rangeMax:l}=n,c=NVe(e,t);return(u!==void 0||l!==void 0)&&yC(o,"rangeMin")&&se(c)&&c.length===2?Ts([u??c[0],l??c[1]]):oo(c)}function OVe(e){return zUe(e)?{scheme:e.name,...ji(e,["name"])}:{scheme:e}}function xue(e,t,n,{center:r}={}){const i=Yi(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===ar&&Eo(n)?r?[Yn.fromName(s=>`${a(s)}/2`,o),Yn.fromName(s=>`-${a(s)}/2`,o)]:[Yn.fromName(a,o),0]:r?[Yn.fromName(s=>`-${a(s)}/2`,o),Yn.fromName(s=>`${a(s)}/2`,o)]:[0,Yn.fromName(a,o)]}function NVe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:a}=Bn(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case sn:case ar:{if(ft(["point","band"],u)){const f=Aue(e,n,r.view);if(nu(f))return{step:wue(f,t,e)}}return xue(e,t,u)}case _f:case Dg:return RVe(e,t,u);case El:{const f=t.component.scales[e].get("zero"),d=Sue(i,f,r),p=PVe(i,n,t,r);return Xp(u)?DVe(d,p,FVe(u,r,l,e)):[d,p]}case ba:return[0,Math.PI*2];case k0:return[0,360];case fs:return[0,new Yn(()=>{const f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case Ef:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case $f:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Vi:return"symbol";case Gi:case fu:case du:return u==="ordinal"?a==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case $l:case Af:case Sf:return[r.scale.minOpacity,r.scale.maxOpacity]}}function wue(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=xN(n),a=r[o];if(sse({step:e,offsetIsDiscrete:Ye(a)&&cae(a.type)})==="offset"&&Uae(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,p=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${p})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${sje(f)})`}}else return e.step}function _ue(e,t){if(sse({step:e,offsetIsDiscrete:ir(t)})==="offset")return{step:e.step}}function RVe(e,t,n){const r=e===_f?"x":"y",i=t.getScaleComponent(r);if(!i)return xue(r,t,n,{center:!0});const o=i.get("type"),a=t.scaleName(r),{markDef:s,config:u}=t;if(o==="band"){const l=Aue(r,t.size,t.config.view);if(nu(l)){const c=_ue(l,n);if(c)return c}return[0,{signal:`bandwidth('${a}')`}]}else{const l=t.encoding[r];if(ge(l)&&l.timeUnit){const c=aae(l.timeUnit,g=>`scale('${a}', ${g})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=rf({fieldDef:l,markDef:s,config:u})-.5,p=d!==0?` + ${d}`:"";if(f){const g=Re(f)?`${f.signal}/2`+p:`${f/2+d}`,y=Re(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${g} * (${c})`},{signal:`${y} * (${c})`}]}return[0,{signal:c}]}return moe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Aue(e,t,n){const r=e===sn?"width":"height",i=t[r];return i||TA(n,r)}function FVe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&se(n)?n.length+1:(me(lUe(r)),3)}}function DVe(e,t,n){const r=()=>{const i=Wa(t),o=Wa(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return Re(t)?new Yn(r):{signal:r()}}function Sue(e,t,n){if(t)return Re(t)?{signal:`${t.signal} ? 0 : ${Sue(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(L5("size",e))}const xW=.95;function PVe(e,t,n,r){const i={x:bW(n,"x"),y:bW(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=wW(t,i,r.view);return xt(o)?o-1:new Yn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=wW(t,i,r.view);return xt(o)?Math.pow(xW*o,2):new Yn(()=>`pow(${xW} * ${o.signal}, 2)`)}}throw new Error(L5("size",e))}function wW(e,t,n){const r=nu(e.width)?e.width.step:kA(n,"width"),i=nu(e.height)?e.height.step:kA(n,"height");return t.x||t.y?new Yn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Eue(e,t){vn(e)?LVe(e,t):Cue(e,t)}function LVe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of he(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=Bn(i[s]),d=u[t],p=c.get("type"),g=c.get("padding"),y=c.get("paddingInner"),v=yC(p,t),b=mae(s,t);if(d!==void 0&&(v?b&&me(b):me(Xoe(p,t,s))),v&&b===void 0)if(d!==void 0){const x=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":O0(u[t])||_==="temporal"||x?l.set(t,{signal:Y5(u[t],{type:_,timeUnit:x})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const x=t in _W?_W[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:g,scalePaddingInner:y,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:Wae(i,s),hasSecondaryRangeChannel:!!i[hu(s)]}):r.scale[t];x!==void 0&&l.set(t,x,!1)}}}const _W={bins:({model:e,fieldOrDatumDef:t})=>ge(t)?IVe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>zVe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>BVe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>jVe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>UVe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>WVe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ge(e)?e.sort:void 0;return HVe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>qVe(e,t,n,r,i,o.scale,a)};function $ue(e){vn(e)?TVe(e):Cue(e,"range")}function Cue(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?$ue(r):Eue(r,t);for(const r of he(n)){let i;for(const o of e.children){const a=o.component.scales[r];if(a){const s=a.getWithExplicit(t);i=of(i,s,t,"scale",xse((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function IVe(e,t){const n=t.bin;if(Yt(n)){const r=wR(e,t.field,n);return new Yn(()=>e.getSignalName(r))}else if(cr(n)&&M0(n)&&n.step!==void 0)return{step:n.step}}function zVe(e,t){if(ft([Gi,fu,du],e)&&t!=="nominal")return"hcl"}function BVe(e,t,n,r,i,o){var a;if(!((a=tu(o))!=null&&a.bin||se(n)||i!=null||r!=null||ft([Ui.TIME,Ui.UTC],e)))return Cn(t)?!0:void 0}function jVe(e,t,n,r,i,o){if(Cn(e)){if(Ha(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=i;if(a==="bar"&&!(ge(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Ui.POINT)return n.pointPadding}}function UVe(e,t,n,r,i,o=!1){if(e===void 0){if(Cn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return o?l:$n(a,n==="bar"?s:u)}else if(av(t)&&r===Ui.BAND)return i.offsetBandPaddingInner}}function WVe(e,t,n,r,i,o=!1){if(e===void 0){if(Cn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Ui.BAND)return $n(a,Re(r)?{signal:`${r.signal}/2`}:r/2)}else if(av(t)){if(n===Ui.POINT)return .5;if(n===Ui.BAND)return i.offsetBandPaddingOuter}}}function HVe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Eo(e)&&t==="descending"?Re(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Eo(e)&&t==="descending")return!0}function qVe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&Eo(i)){if(se(n)){const u=n[0],l=n[n.length-1];if(xt(u)&&u<=0&&xt(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Xp(i))return!0;if(!(ge(t)&&t.bin)&&ft([...pu,...WBe],e)){const{orient:u,type:l}=r;return ft(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:ft(["bar","area"],l)&&!a?!0:o==null?void 0:o.zero}return!1}function GVe(e,t,n,r,i=!1){const o=VVe(t,n,r,i),{type:a}=e;return Cl(t)?a!==void 0?GUe(t,a)?ge(n)&&!qUe(a,n.type)?(me(Vje(a,o)),o):a:(me(Gje(t,a,o)),o):o:null}function VVe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(op(e)||F6(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&me(D6(e,"ordinal")),"ordinal";if(Cn(e)||av(e)){if(ft(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in AN)return"band";const o=n[Yi(e)];return l0(o)||Kp(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return op(e)?"time":F6(e)==="discrete"?(me(D6(e,"temporal")),"ordinal"):ge(t)&&t.timeUnit&&rr(t.timeUnit).utc?"utc":"time";case"quantitative":return op(e)?ge(t)&&Yt(t.bin)?"bin-ordinal":"linear":F6(e)==="discrete"?(me(D6(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Voe(t.type))}function YVe(e,{ignoreRange:t}={}){kue(e),yue(e);for(const n of HUe)Eue(e,n);t||$ue(e)}function kue(e){vn(e)?e.component.scales=XVe(e):e.component.scales=KVe(e)}function XVe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of D5){const a=Bn(t[o]);if(a&&n===bae&&o===Vi&&a.type===Pg)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});const u=Wae(t,o),l=GVe(s,o,a,r,u);i[o]=new bue(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}const JVe=xse((e,t)=>kU(e)-kU(t));function KVe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){kue(o);for(const a of he(o.component.scales))if((t=i.scale)[a]??(t[a]=iue(a,e)),i.scale[a]==="shared"){const s=r[a],u=o.component.scales[a].getWithExplicit("type");s?FUe(s.value,u.value)?r[a]=of(s,u,"type","scale",JVe):(i.scale[a]="independent",delete r[a]):r[a]=u}}for(const o of he(r)){const a=e.scaleName(o,!0),s=r[o];n[o]=new bue(a,s);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),a),l.merged=!0)}}return n}class H6{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function vn(e){return(e==null?void 0:e.type)==="unit"}function Qa(e){return(e==null?void 0:e.type)==="facet"}function $R(e){return(e==null?void 0:e.type)==="concat"}function jg(e){return(e==null?void 0:e.type)==="layer"}class CR{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=o,this.view=Mi(s),this.name=t.name??i,this.title=rc(t.title)?{text:t.title}:t.title?Mi(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new H6,this.projectionNameMap=r?r.projectionNameMap:new H6,this.signalNameMap=r?r.signalNameMap:new H6,this.data=t.data,this.description=t.description,this.transforms=iqe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:uHe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:H5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Tl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?Ge(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){YVe(this)}parseProjection(){pue(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){lue(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of he(r)){const a=r[o];a!==void 0&&(i[o]=Qt(a))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Qt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:zt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=vGe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Qo)t[r].title&&n.push(dGe(this,r));for(const r of yR)n=n.concat(hGe(this,r));return n}assembleAxes(){return Zqe(this.component.axes,this.config)}assembleLegends(){return fue(this)}assembleProjections(){return jGe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Ioe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ft(["unit","layer"],this.type)?ft(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),zt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Qa(this.parent)?vue(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return an((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Gt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Qa(this.parent)){const n=nue(t),r=F5(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(ir(o)&&kf(a)){const s=i.get("name"),u=aS(this,r),l=ER(u);if(l){const c=we({aggregate:"distinct",field:l},{expr:"datum"});return{signal:tue(s,i,c)}}else return me($N(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Toe(t)&&Cl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(dje(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Tue extends CR{vgField(t,n={}){const r=this.fieldDef(t);if(r)return we(r,n)}reduceFieldDef(t,n){return LWe(this.getMapping(),(r,i,o)=>{const a=tu(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){ZN(this.getMapping(),(r,i)=>{const o=tu(r);o&&t(o,i)},n)}}class sS extends Pt{clone(){return new sS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ct(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class uS extends Pt{clone(){return new uS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ct(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Zy extends Pt{clone(){return new Zy(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(Ot("invalid",o,r)!=="filter")return null;const s=n.reduceFieldDef((u,l,c)=>{const f=Cl(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Eo(d)&&l.aggregate!=="count"&&!Tf(i)&&(u[l.field]=l)}return u},{});return he(s).length?new Zy(t,s):null}dependentFields(){return new Set(he(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ct(this.filter)}`}assemble(){const t=he(this.filter).reduce((n,r)=>{const i=this.filter[r],o=we(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class lS extends Pt{clone(){return new lS(this.parent,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ct(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class cS extends Pt{clone(){return new cS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ct(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class up extends Pt{clone(){return new up(null,Ge(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[hs,ds],[ya,ps]]){const o=i.map(a=>{const s=Bn(n.encoding[a]);return ge(s)?s.field:gu(s)?{expr:`${s.datum}`}:rs(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new up(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Vi)){const i=n.typedFieldDef(Vi);i.type===Pg&&(t=new up(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter($e);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ct(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class e2 extends Pt{clone(){return new e2(null,this.projection,Ge(this.fields),Ge(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[hs,ds],[ya,ps]]){const i=r.map(a=>{const s=Bn(n.encoding[a]);return ge(s)?s.field:gu(s)?{expr:`${s.datum}`}:rs(s)?{expr:`${s.value}`}:void 0}),o=r[0]===ya?"2":"";(i[0]||i[1])&&(t=new e2(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter($e))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ct(this.fields)} ${ct(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Nd extends Pt{clone(){return new Nd(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Nd(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(ge(i)&&ge(o)){const a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;const s=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=a.impute,d=qae(n.mark,r);return new Nd(t,{impute:a.field,key:s.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ct(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:zHe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?a:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class fS extends Pt{clone(){return new fS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ct(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class t2 extends Pt{clone(){return new t2(null,Ge(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:a}=r;let s=null;if(BHe(a)){let u=Nue(a.data,o);u||(u=new h0(a.data),o.push(u));const l=n.getName(`lookup_${i}`);s=new ci(u,l,Gt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(jHe(a)){const u=a.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(an(u),u)}catch{throw new Error(gje(u))}if(s=l.materialized,!s)throw new Error(mje(u))}return new t2(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ee(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ct({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ee(this.transform.as)}:{}};else{let n=this.transform.as;$e(n)||(me(Sje),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class dS extends Pt{clone(){return new dS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ct(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class hS extends Pt{clone(){return new hS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Ge(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ct(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class pS extends Pt{clone(){return new pS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ps((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ct(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class gS extends Pt{clone(){return new gS(null,Ge(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ct(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Mue(e){let t=0;function n(r,i){if(r instanceof h0&&!r.isGenerator&&!Zp(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Rr&&(r.parent instanceof h0&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof zg){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof gv||r instanceof mv||r instanceof Zy||r instanceof Ig||r instanceof tg||r instanceof e2||r instanceof Ka||r instanceof t2||r instanceof Bg||r instanceof D0||r instanceof cS||r instanceof lS||r instanceof sS||r instanceof fS||r instanceof dS||r instanceof hS||r instanceof uf||r instanceof gS||r instanceof pS||r instanceof uS)&&i.transform.push(r.assemble()),(r instanceof Ys||r instanceof Vs||r instanceof Nd||r instanceof ol||r instanceof up)&&i.transform.push(...r.assemble()),r instanceof ci&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof ci?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof ci&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function QVe(e){const t=[],n=Mue(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ZVe(e,t){const n=[],r=Mue(n);let i=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);const s=a.assemble();r(a,s)}for(const a of n)a.transform.length===0&&delete a.transform;let o=0;for(const[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function eYe(e){return e==="top"||e==="left"||Re(e)?"header":"footer"}function tYe(e){for(const t of Qo)nYe(e,t);AW(e,"x"),AW(e,"y")}function nYe(e,t){var a;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const s=n[t],u=rg("title",null,r,t);let l=ap(s,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=se(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=rg("labelOrient",s.header,r,t),f=s.header!==null?$n((a=s.header)==null?void 0:a.labels,r.header.labels,!0):!1,d=ft(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[d]:t==="facet"?[]:[Oue(e,t,f)]}}}function Oue(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function AW(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=xR(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",a=r[o];for(const s of n.component.axes[t]){const u=eYe(s.get("orient"));a[u]??(a[u]=[Oue(e,o,!1)]);const l=Am(s,"main",e.config,{header:!0});l&&a[u][0].axes.push(l),s.mainExtracted=!0}}}}function rYe(e){kR(e),RA(e,"width"),RA(e,"height")}function iYe(e){kR(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";RA(e,t),RA(e,n)}function kR(e){for(const t of e.children)t.parseLayoutSize()}function RA(e,t){const n=nue(t),r=F5(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const u=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??iue(r,e);if(l==="independent"&&u.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==u.value){a=void 0;break}a=of(a,u,n,"")}else a=u}if(a){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function oYe(e){const{size:t,component:n}=e;for(const r of pu){const i=Yi(r);if(t[i]){const o=t[i];n.layoutSize.set(i,nu(o)?"step":o,!0)}else{const o=aYe(e,i);n.layoutSize.set(i,o,!1)}}}function aYe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),a=i.get("range");if(ir(o)){const s=TA(r.view,t);return kf(a)||nu(s)?"step":s}else return xC(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return xC(r.view,t);{const o=TA(r.view,t);return nu(o)?o.step:o}}}function FC(e,t,n){return we(t,{suffix:`by_${we(e)}`,...n??{}})}class Qm extends Tue{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=RR(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!cv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=he(t),r={};for(const i of n){if(![nl,rl].includes(i)){me(L5(i,"facet"));break}const o=t[i];if(o.field===void 0){me(gC(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=KN(t,n);return r.header?r.header=Mi(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=mS(this),this.child.parseData()}parseLayoutSize(){kR(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),tYe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Qo)for(const r of vR){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){const s=rg("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){const u=iS(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const s=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Qm))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Qm?{...this.channelHasField("column")?{encode:{update:{columns:{field:we(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Qm){if(this.child.channelHasField("column")){const i=we(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of pu){const o=this.child.component.scales[i];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(ir(a)&&kf(s)){const u=aS(this.child,i),l=ER(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):me($N(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),u=[];for(const c of Qo){const f=this.facet[c];if(f){u.push(we(f));const{bin:d,sort:p}=f;if(Yt(d)&&u.push(we(f,{binSuffix:"end"})),Gs(p)){const{field:g,op:y=W5}=p,v=FC(f,p);r&&i?(o.push(v),a.push("max"),s.push(v)):(o.push(g),a.push(y),s.push(v))}else if(se(p)){const g=ng(f,c);o.push(g),a.push("max"),s.push(g)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:a,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Gs(r.sort)?[FC(r,r.sort,{expr:"datum"})]:se(r.sort)?[ng(r,t,{expr:"datum"})]:[we(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Gs(i)?i.order:!se(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return kC(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of yR)if(t[o]){const a=rg("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(a))return kC(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=QVe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:Qo.map(u=>this.facetSortFields(u)).flat(),order:Qo.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(yqe(this,[]))}]}getMapping(){return this.facet}}function sYe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Gs(o.sort)){const{field:a,op:s=W5}=o.sort;e=i=new D0(e,{joinaggregate:[{op:s,field:a,as:FC(o,o.sort,{forAs:!0})}],groupby:[we(o)]})}return i}return null}function Nue(e,t){var n,r,i,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=s.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=s.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(Qy(e)&&Qy(s)){if(po(e.values,s.values))return a}else if(Zp(e)&&Zp(s)){if(e.url===s.url)return a}else if(wse(e)&&e.name===a.dataName)return a}}return null}function uYe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new h0({values:[]});return t.push(r),r}const n=Nue(e.data,t);if(n)return Rc(e.data)||(n.data.format=yoe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new h0(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function lYe(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(KHe(i))a=e=new tg(e,i),o="derived";else if(cR(i)){const s=eVe(i);a=e=Rr.makeWithAncestors(e,{},s,n)??e,e=new Ig(e,t,i.filter)}else if(mse(i))a=e=Ys.makeFromTransform(e,i,t),o="number";else if(ZHe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Rr(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Vs.makeFromTransform(e,i);else if(eqe(i))a=e=Ka.makeFromTransform(e,i),o="number",mR(t)&&(e=new uf(e));else if(gse(i))a=e=t2.make(e,t,i,r++),o="derived";else if(YHe(i))a=e=new Bg(e,i),o="number";else if(XHe(i))a=e=new D0(e,i),o="number";else if(tqe(i))a=e=ol.makeFromTransform(e,i),o="derived";else if(nqe(i))a=e=new cS(e,i),o="derived";else if(rqe(i))a=e=new uS(e,i),o="derived";else if(JHe(i))a=e=new lS(e,i),o="derived";else if(UHe(i))a=e=new pS(e,i),o="derived";else if(VHe(i))e=new gS(e,i);else if(QHe(i))a=e=Nd.makeFromTransform(e,i),o="derived";else if(WHe(i))a=e=new sS(e,i),o="derived";else if(HHe(i))a=e=new dS(e,i),o="derived";else if(qHe(i))a=e=new hS(e,i),o="derived";else if(GHe(i))a=e=new fS(e,i),o="derived";else{me(Aje(i));continue}if(a&&o!==void 0)for(const s of a.producedFields()??[])n.set(s,o,!1)}return e}function mS(e){var y;let t=uYe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(Rc(i)||Zp(i)||Qy(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new gqe;Rc(i)?(_se(i)?t=new mv(t,i.sequence):fR(i)&&(t=new gv(t,i.graticule)),a.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(a.parseNothing=!0),t=Rr.makeExplicit(t,e,a)??t,t=new uf(t);const s=e.parent&&jg(e.parent);(vn(e)||Qa(e))&&s&&(t=Ys.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=lYe(t,e,a));const u=nVe(e),l=tVe(e);t=Rr.makeWithAncestors(t,{},{...u,...l},a)??t,vn(e)&&(t=up.parseAll(t,e),t=e2.parseAll(t,e)),(vn(e)||Qa(e))&&(s||(t=Ys.makeFromEncoding(t,e)??t),t=Vs.makeFromEncoding(t,e)??t,t=tg.parseAllForSortIndex(t,e));const c=e.getDataName(Gt.Raw),f=new ci(t,c,Gt.Raw,r);if(n[c]=f,t=f,vn(e)){const v=Ka.makeFromEncoding(t,e);v&&(t=v,mR(e)&&(t=new uf(t))),t=Nd.makeFromEncoding(t,e)??t,t=ol.makeFromEncoding(t,e)??t}vn(e)&&(t=Zy.make(t,e)??t);const d=e.getDataName(Gt.Main),p=new ci(t,d,Gt.Main,r);n[d]=p,t=p,vn(e)&&Kqe(e,p);let g=null;if(Qa(e)){const v=e.getName("facet");t=sYe(t,e.facet)??t,g=new zg(t,e,v,p.getSource()),n[v]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:g,ancestorParse:a}}class cYe extends CR{constructor(t,n,r,i){var o,a,s,u;super(t,"concat",n,r,i,t.resolve),(((a=(o=t.resolve)==null?void 0:o.axis)==null?void 0:a.x)==="shared"||((u=(s=t.resolve)==null?void 0:s.axis)==null?void 0:u.y)==="shared")&&me(xje),this.children=this.getChildren(t).map((l,c)=>RR(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=mS(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of he(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return K5(t)?t.vconcat:uR(t)?t.hconcat:t.concat}parseLayoutSize(){iYe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=bR(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function fYe(e){return e===!1||e===null}const dYe={disable:1,gridScale:1,scale:1,...Bae,labelExpr:1,encode:1},Rue=he(dYe);class TR extends Tl{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new TR(Ge(this.explicit),Ge(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!fYe(this.get(t))}hasOrientSignalRef(){return Re(this.explicit.orient)}}function hYe(e,t,n){const{encoding:r,config:i}=e,o=Bn(r[t])??Bn(r[hu(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;if(c0(u))return{text:qa({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n};if(s===void 0&&u===void 0&&i.customFormatTypes){if(Jp(o)==="quantitative"){if(Kp(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:qa({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:qa({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Jp(o)==="temporal"&&i.timeFormatType&&ge(o)&&!o.timeUnit)return{text:qa({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function pYe(e){return pu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[wYe(n,e)]),t),{})}const gYe={bottom:"top",top:"bottom",left:"right",right:"left"};function mYe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of he(i.component.axes))n.axis[o]=xR(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=yYe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of pu){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const a of o.component.axes[i]){const{value:s,explicit:u}=a.getWithExplicit("orient");if(!Re(s)){if(r[s]>0&&!u){const l=gYe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function yYe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=vYe(i,o)}}}else return t.map(n=>n.clone());return e}function vYe(e,t){for(const n of Rue){const r=of(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return qoe(i,o);case"gridScale":return{explicit:i.explicit,value:$n(i.value,o.value)}}return Z5(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function bYe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Re(n.labelAngle)?n.labelAngle:Jy(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Kse(r,i))return!0}return e===n[t]}const xYe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function wYe(e,t){var b,x;let n=t.axis(e);const r=new TR,i=Bn(t.encoding[e]),{mark:o,config:a}=t,s=(n==null?void 0:n.orient)||((b=a[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((x=a.axis)==null?void 0:x.orient)||sGe(e),u=t.getScaleComponent(e).get("type"),l=eGe(e,u,s,t.config),c=n!==void 0?!n:$C("disable",a.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=iGe(i,n,e,a.style,l),d=Eae(n.formatType,i,u),p=Sae(i,i.type,n.format,n.formatType,a,!0),g={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(const _ of Rue){const A=_ in uW?uW[_](g):DU(_)?n[_]:void 0,E=A!==void 0,$=bYe(A,_,n,t,e);if(E&&$)r.set(_,A,$);else{const{configValue:S=void 0,configFrom:k=void 0}=DU(_)&&_!=="values"?$C(_,a.style,n.style,l):{},O=S!==void 0;E&&!O?r.set(_,A,$):(k!=="vgAxisConfig"||xYe.has(_)&&O||hv(S)||Re(S))&&r.set(_,S,!1)}}const y=n.encoding??{},v=zae.reduce((_,A)=>{if(!r.hasAxisPart(A))return _;const E=rue(y[A]??{},t),$=A==="labels"?hYe(t,e,E):E;return $!==void 0&&!zt($)&&(_[A]={update:$}),_},{});return zt(v)||r.set("encode",v,!!n.encoding||n.labelAngle!==void 0),r}function _Ye({encoding:e,size:t}){for(const n of pu){const r=Yi(n);nu(t[r])&&vc(e[n])&&(delete t[r],me(Joe(r)))}return t}const AYe={vgMark:"arc",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Nr("x",e,{defaultPos:"mid"}),...Nr("y",e,{defaultPos:"mid"}),...af(e,"radius"),...af(e,"theta")})},SYe={vgMark:"area",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...MA("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...MA("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...gR(e)})},EYe={vgMark:"rect",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...af(e,"x"),...af(e,"y")})},$Ye={vgMark:"shape",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ge(n)&&n.type===Pg?{field:we(n,{expr:"datum"})}:{}}]}},CYe={vgMark:"image",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...af(e,"x"),...af(e,"y"),...hR(e,"url")})},kYe={vgMark:"line",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Nr("x",e,{defaultPos:"mid"}),...Nr("y",e,{defaultPos:"mid"}),...Jn("size",e,{vgChannel:"strokeWidth"}),...gR(e)})},TYe={vgMark:"trail",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Nr("x",e,{defaultPos:"mid"}),...Nr("y",e,{defaultPos:"mid"}),...Jn("size",e),...gR(e)})};function MR(e,t){const{config:n}=e;return{...xa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Nr("x",e,{defaultPos:"mid"}),...Nr("y",e,{defaultPos:"mid"}),...Jn("size",e),...Jn("angle",e),...MYe(e,n,t)}}function MYe(e,t,n){return n?{shape:{value:n}}:Jn("shape",e)}const OYe={vgMark:"symbol",encodeEntry:e=>MR(e)},NYe={vgMark:"symbol",encodeEntry:e=>MR(e,"circle")},RYe={vgMark:"symbol",encodeEntry:e=>MR(e,"square")},FYe={vgMark:"rect",encodeEntry:e=>({...xa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...af(e,"x"),...af(e,"y")})},DYe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...xa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...MA("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...MA("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Jn("size",e,{vgChannel:"strokeWidth"})}}},PYe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...xa(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Nr("x",e,{defaultPos:"mid"}),...Nr("y",e,{defaultPos:"mid"}),...hR(e),...Jn("size",e,{vgChannel:"fontSize"}),...Jn("angle",e),...iW("align",LYe(e.markDef,n,t)),...iW("baseline",IYe(e.markDef,n,t)),...Nr("radius",e,{defaultPos:null}),...Nr("theta",e,{defaultPos:null})}}};function LYe(e,t,n){if(Ot("align",e,n)===void 0)return"center"}function IYe(e,t,n){if(Ot("baseline",e,n)===void 0)return"middle"}const zYe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return{...xa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nr("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Nr("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Jn("size",e,{defaultValue:BYe(e),vgChannel:i}),[o]:Qt(Ot("thickness",n,t))}}};function BYe(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Ot("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{const s=o?o.get("range"):void 0;return s&&kf(s)&&xt(s.step)?s.step*3/4:kA(t.view,i)*3/4}}const xx={arc:AYe,area:SYe,bar:EYe,circle:NYe,geoshape:$Ye,image:CYe,line:kYe,point:OYe,rect:FYe,rule:DYe,square:RYe,text:PYe,tick:zYe,trail:TYe};function jYe(e){if(ft([j5,z5,XUe],e.mark)){const t=qae(e.mark,e.encoding);if(t.length>0)return UYe(e,t)}else if(e.mark===B5){const t=pC.some(n=>Ot(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return WYe(e)}return OR(e)}const SW="faceted_path_";function UYe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:SW+e.requestDataName(Gt.Main),data:e.requestDataName(Gt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:OR(e,{fromPrefix:SW})}]}const EW="stack_group_";function WYe(e){var l;const[t]=OR(e,{fromPrefix:EW}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(p=>`scale('${n}',${p})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o={...Hp(t.encode.update,["y","yc","y2","height",...pC]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ji(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Hp(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ji(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of pC){const f=yl(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Qt(f)),f&&(t.encode.update[c]={value:0})}const s=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=we(f);d&&s.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&s.push(we(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=yl(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Qt(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Gt.Main),name:EW+e.requestDataName(Gt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function HYe(e){var s;const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!se(a)&&rs(a)&&dC(a.value)||!a&&dC(Ot("order",i,o)))){if((se(a)||ge(a))&&!n)return Uoe(a,{expr:"datum"});if(Tf(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(ge(l)){const c=l.sort;if(se(c))return{field:we(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Gs(c))return{field:we({aggregate:QN(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Cae(c)){const f=e.fieldDef(c.encoding);return{field:we(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:we(l,{binSuffix:(s=e.stack)!=null&&s.impute?"mid":void 0,expr:"datum"})}}return}}}function OR(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=$n(r.clip,qYe(e),GYe(e)),s=Boe(r),u=i.key,l=HYe(e),c=VYe(e),f=Ot("aria",r,o),d=xx[n].postEncodingTransform?xx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:xx[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Gt.Main)},encode:{update:xx[n].encodeEntry(e)},...d?{transform:d}:{}}]}function qYe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function GYe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function VYe(e){if(!e.component.selection)return null;const t=he(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=he(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class Fue extends Tue{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,LU(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=eu(t.mark)?{...t.mark}:{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=OHe(a,o,{graticule:t.data&&fR(t.data)}));const u=this.encoding=DWe(t.encoding||{},s,a.filled,o);this.markDef=dse(a,u,o),this.size=_Ye({encoding:u,size:LU(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=fse(this.markDef,u),this.specifiedScales=this.initScales(s,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>aR(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===bae,r=t&&FBe.some(i=>Ye(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return D5.reduce((r,i)=>{const o=Bn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Mi(t);return se(n)&&(i.domain=n.map(co)),se(r)&&(i.range=r.map(co)),i}initAxes(t){return pu.reduce((n,r)=>{const i=t[r];if(Ye(i)||r===sn&&Ye(t.x2)||r===ar&&Ye(t.y2)){const o=Ye(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=he(t),r={};for(const i of n){const o=t[i];r[i]=hv(o)?zoe(o):co(o)}return r}initLegends(t){return HBe.reduce((n,r)=>{const i=Bn(t[r]);if(i&&GBe(r)){const o=i.legend;n[r]=o&&Mi(o)}return n},{})}parseData(){this.component.data=mS(this)}parseLayoutSize(){oYe(this)}parseSelections(){this.component.selection=Jqe(this,this.selection)}parseMarkGroup(){this.component.mark=jYe(this)}parseAxesAndHeaders(){this.component.axes=pYe(this)}assembleSelectionTopLevelSignals(t){return vqe(this,t)}assembleSignals(){return[...Yse(this),...mqe(this,[])]}assembleSelectionData(t){return bqe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return bR(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!jg(this.parent))&&(t=Ese(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Md(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return tu(n)}typedFieldDef(t){const n=this.fieldDef(t);return pi(n)?n:null}}class NR extends CR{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const a={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,u)=>{if(Q5(s))return new NR(s,this,this.getName(`layer_${u}`),a,o);if(kl(s))return new Fue(s,this,this.getName(`layer_${u}`),a,o);throw new Error(EN(s))})}parseData(){this.component.data=mS(this);for(const t of this.children)t.parseData()}parseLayoutSize(){rYe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of he(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){mYe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Yse(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),bR(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ee(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return xqe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),fue(this))}}function RR(e,t,n,r,i){if(H5(e))return new Qm(e,t,n,i);if(Q5(e))return new NR(e,t,n,r,i);if(kl(e))return new Fue(e,t,n,r,i);if(oHe(e))return new cYe(e,t,n,i);throw new Error(EN(e))}function YYe(e,t={}){t.logger&&cUe(t.logger),t.fieldTitle&&Pae(t.fieldTitle);try{const n=cse(Sg(t.config,e.config)),r=bse(e,n),i=RR(r,null,"",void 0,n);return i.parse(),vVe(i.component.data,i),{spec:JYe(i,XYe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&fUe(),t.fieldTitle&&$We()}}function XYe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):$e(t)&&(t={type:t}),i&&o&&dqe(t.type)){if(i==="step"&&o==="step")me(wU()),t.type="pad";else if(i==="step"||o==="step"){const a=i==="step"?"width":"height";me(wU(F5(a)));const s=a==="width"?"height":"width";t.type=hqe(s)}}return{...he(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...XU(n,!1),...XU(e,!0)}}function JYe(e,t,n={},r){const i=e.config?bHe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),ZVe(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...ase(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const KYe=kBe.version,QYe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:qp,accessPathWithDatum:gN,compile:YYe,contains:ft,deepEqual:po,deleteNestedProperty:vA,duplicate:Ge,entries:tf,every:dN,fieldIntersection:pN,flatAccessWithDatum:boe,getFirstDefined:$n,hasIntersection:hN,hash:ct,internalField:_oe,isBoolean:Xy,isEmpty:zt,isEqual:MBe,isInternalField:Aoe,isNullOrFalse:dC,isNumeric:k5,keys:he,logicalExpr:Jm,mergeDeep:yoe,never:moe,normalize:bse,normalizeAngle:Jy,omit:ji,pick:Hp,prefixGenerator:hC,removePathFromField:mN,replaceAll:o0,replacePathInField:ma,resetIdCounter:NBe,setEqual:voe,some:i0,stringify:Bt,titleCase:rv,unique:Ps,uniqueId:woe,vals:mr,varName:an,version:KYe},Symbol.toStringTag,{value:"Module"}));function Due(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var ZYe="vega-themes",eXe="2.14.0",tXe="Themes for stylized Vega and Vega-Lite visualizations.",nXe=["vega","vega-lite","themes","style"],rXe="BSD-3-Clause",iXe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},oXe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],aXe="build/vega-themes.js",FR="build/vega-themes.module.js",sXe="build/vega-themes.min.js",uXe="build/vega-themes.min.js",lXe="build/vega-themes.module.d.ts",cXe={type:"git",url:"https://github.com/vega/vega-themes.git"},fXe=["src","build"],dXe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},hXe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},pXe={vega:"*","vega-lite":"*"},gXe={},mXe={name:ZYe,version:eXe,description:tXe,keywords:nXe,license:rXe,author:iXe,contributors:oXe,main:aXe,module:FR,unpkg:sXe,jsdelivr:uXe,types:lXe,repository:cXe,files:fXe,scripts:dXe,devDependencies:hXe,peerDependencies:pXe,dependencies:gXe};const mh="#fff",$W="#888",yXe={background:"#333",view:{stroke:$W},title:{color:mh,subtitleColor:mh},style:{"guide-label":{fill:mh},"guide-title":{fill:mh}},axis:{domainColor:mh,gridColor:$W,tickColor:mh}},qf="#4572a7",vXe={background:"#fff",arc:{fill:qf},area:{fill:qf},line:{stroke:qf,strokeWidth:2},path:{stroke:qf},rect:{fill:qf},shape:{stroke:qf},symbol:{fill:qf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Gf="#30a2da",q6="#cbcbcb",bXe="#999",xXe="#333",CW="#f0f0f0",kW="#333",wXe={arc:{fill:Gf},area:{fill:Gf},axis:{domainColor:q6,grid:!0,gridColor:q6,gridWidth:1,labelColor:bXe,labelFontSize:10,titleColor:xXe,tickColor:q6,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:CW,group:{fill:CW},legend:{labelColor:kW,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:kW,titleFontSize:14,titlePadding:10},line:{stroke:Gf,strokeWidth:2},path:{stroke:Gf,strokeWidth:.5},rect:{fill:Gf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Gf},bar:{binSpacing:2,fill:Gf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Vf="#000",_Xe={group:{fill:"#e5e5e5"},arc:{fill:Vf},area:{fill:Vf},line:{stroke:Vf},path:{stroke:Vf},rect:{fill:Vf},shape:{stroke:Vf},symbol:{fill:Vf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},AXe=22,SXe="normal",TW="Benton Gothic, sans-serif",MW=11.5,EXe="normal",Yf="#82c6df",G6="Benton Gothic Bold, sans-serif",OW="normal",NW=13,U1={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},$Xe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:G6,fontSize:AXe,fontWeight:SXe},arc:{fill:Yf},area:{fill:Yf},line:{stroke:Yf,strokeWidth:2},path:{stroke:Yf},rect:{fill:Yf},shape:{stroke:Yf},symbol:{fill:Yf,size:30},axis:{labelFont:TW,labelFontSize:MW,labelFontWeight:EXe,titleFont:G6,titleFontSize:NW,titleFontWeight:OW},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:TW,labelFontSize:MW,symbolType:"square",titleFont:G6,titleFontSize:NW,titleFontWeight:OW},range:{category:U1["category-6"],diverging:U1["fireandice-6"],heatmap:U1["fire-7"],ordinal:U1["fire-7"],ramp:U1["fire-7"]}},Xf="#ab5787",wx="#979797",CXe={background:"#f9f9f9",arc:{fill:Xf},area:{fill:Xf},line:{stroke:Xf},path:{stroke:Xf},rect:{fill:Xf},shape:{stroke:Xf},symbol:{fill:Xf,size:30},axis:{domainColor:wx,domainWidth:.5,gridWidth:.2,labelColor:wx,tickColor:wx,tickWidth:.2,titleColor:wx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Jf="#3e5c69",kXe={background:"#fff",arc:{fill:Jf},area:{fill:Jf},line:{stroke:Jf},path:{stroke:Jf},rect:{fill:Jf},shape:{stroke:Jf},symbol:{fill:Jf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Uo="#1696d2",RW="#000000",TXe="#FFFFFF",_x="Lato",V6="Lato",MXe="Lato",OXe="#DEDDDD",NXe=18,W1={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},RXe={background:TXe,title:{anchor:"start",fontSize:NXe,font:_x},axisX:{domain:!0,domainColor:RW,domainWidth:1,grid:!1,labelFontSize:12,labelFont:V6,labelAngle:0,tickColor:RW,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:_x},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:OXe,gridWidth:1,labelFontSize:12,labelFont:V6,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:_x,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:V6,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:_x,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:W1["six-groups-cat-1"],diverging:W1["diverging-colors"],heatmap:W1["diverging-colors"],ordinal:W1["six-groups-seq"],ramp:W1["shades-blue"]},area:{fill:Uo},rect:{fill:Uo},line:{color:Uo,stroke:Uo,strokeWidth:5},trail:{color:Uo,stroke:Uo,strokeWidth:0,size:1},path:{stroke:Uo,strokeWidth:.5},point:{filled:!0},text:{font:MXe,color:Uo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Uo,stroke:null}},arc:{fill:Uo},shape:{stroke:Uo},symbol:{fill:Uo,size:30}},Kf="#3366CC",FW="#ccc",Ax="Arial, sans-serif",FXe={arc:{fill:Kf},area:{fill:Kf},path:{stroke:Kf},rect:{fill:Kf},shape:{stroke:Kf},symbol:{stroke:Kf},circle:{fill:Kf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Ax,fontSize:12},"guide-title":{font:Ax,fontSize:12},"group-title":{font:Ax,fontSize:12}},title:{font:Ax,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:FW,tickColor:FW,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},DR=e=>e*(1/3+1),DW=DR(9),PW=DR(10),LW=DR(12),H1="Segoe UI",IW="wf_standard-font, helvetica, arial, sans-serif",zW="#252423",q1="#605E5C",BW="transparent",DXe="#C8C6C4",ka="#118DFF",PXe="#12239E",LXe="#E66C37",IXe="#6B007B",zXe="#E044A7",BXe="#744EC2",jXe="#D9B300",UXe="#D64550",Pue=ka,Lue="#DEEFFF",jW=[Lue,Pue],WXe=[Lue,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Pue],HXe={view:{stroke:BW},background:BW,font:H1,header:{titleFont:IW,titleFontSize:LW,titleColor:zW,labelFont:H1,labelFontSize:PW,labelColor:q1},axis:{ticks:!1,grid:!1,domain:!1,labelColor:q1,labelFontSize:DW,titleFont:IW,titleColor:zW,titleFontSize:LW,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:DXe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ka},line:{stroke:ka,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:H1,fontSize:DW,fill:q1},arc:{fill:ka},area:{fill:ka,line:!0,opacity:.6},path:{stroke:ka},rect:{fill:ka},point:{fill:ka,filled:!0,size:75},shape:{stroke:ka},symbol:{fill:ka,strokeWidth:1.5,size:50},legend:{titleFont:H1,titleFontWeight:"bold",titleColor:q1,labelFont:H1,labelFontSize:PW,labelColor:q1,symbolType:"circle",symbolSize:75},range:{category:[ka,PXe,LXe,IXe,zXe,BXe,jXe,UXe],diverging:jW,heatmap:jW,ordinal:WXe}},Y6='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',UW=400,qXe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],GXe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function yS({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?qXe:GXe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:Y6,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:Y6,fill:r,fontWeight:UW},"guide-title":{font:Y6,fill:r,fontWeight:UW}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const VXe=yS({type:"light",background:"#ffffff"}),YXe=yS({type:"light",background:"#f4f4f4"}),XXe=yS({type:"dark",background:"#262626"}),JXe=yS({type:"dark",background:"#161616"}),KXe=mXe.version,QXe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:YXe,carbong100:JXe,carbong90:XXe,carbonwhite:VXe,dark:yXe,excel:vXe,fivethirtyeight:wXe,ggplot2:_Xe,googlecharts:FXe,latimes:$Xe,powerbi:HXe,quartz:CXe,urbaninstitute:RXe,version:KXe,vox:kXe},Symbol.toStringTag,{value:"Module"}));function ZXe(e,t,n){if(se(e))return`[${e.map(r=>t($e(r)?r:WW(r,n))).join(", ")}]`;if(ke(e)){let r="";const{title:i,image:o,...a}=e;i&&(r+=`<h2>${t(i)}</h2>`),o&&(r+=`<img src="${t(o)}">`);const s=Object.keys(a);if(s.length>0){r+="<table>";for(const u of s){let l=a[u];l!==void 0&&(ke(l)&&(l=WW(l,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(l)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function eJe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function WW(e,t){return JSON.stringify(e,eJe(t))}var tJe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Iue="vg-tooltip-element",nJe={offsetX:10,offsetY:10,id:Iue,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rJe,maxDepth:2,formatTooltip:ZXe};function rJe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function iJe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return tJe.toString().replace(Iue,e)}function oJe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class aJe{constructor(t){this.options={...nJe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=iJe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=oJe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}}var X6={};function n2(e){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n2(e)}function sJe(e,t){if(n2(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(n2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uJe(e){var t=sJe(e,"string");return n2(t)==="symbol"?t:String(t)}function lJe(e,t,n){return t=uJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var J6,HW;function fJe(){return HW||(HW=1,J6=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),J6}var dJe=St;St.Node=p0;St.create=St;function St(e){var t=this;if(t instanceof St||(t=new St),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}St.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};St.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};St.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};St.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)pJe(this,arguments[e]);return this.length};St.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)gJe(this,arguments[e]);return this.length};St.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};St.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};St.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};St.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};St.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};St.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};St.prototype.map=function(e,t){t=t||this;for(var n=new St,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};St.prototype.mapReverse=function(e,t){t=t||this;for(var n=new St,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};St.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};St.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};St.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};St.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};St.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new St;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};St.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new St;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};St.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=hJe(this,i,n[r]);return o};St.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function hJe(e,t,n){var r=t===e.head?new p0(n,null,t,e):new p0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function pJe(e,t){e.tail=new p0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function gJe(e,t){e.head=new p0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function p0(e,t,n,r){if(!(this instanceof p0))return new p0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{fJe()(St)}catch{}const mJe=dJe,cd=Symbol("max"),Hu=Symbol("length"),yh=Symbol("lengthCalculator"),Zm=Symbol("allowStale"),vd=Symbol("maxAge"),Bu=Symbol("dispose"),qW=Symbol("noDisposeOnSet"),Gn=Symbol("lruList"),Oa=Symbol("cache"),zue=Symbol("updateAgeOnGet"),K6=()=>1;class yJe{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[cd]=t.max||1/0;const n=t.length||K6;if(this[yh]=typeof n!="function"?K6:n,this[Zm]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[vd]=t.maxAge||0,this[Bu]=t.dispose,this[qW]=t.noDisposeOnSet||!1,this[zue]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[cd]=t||1/0,G1(this)}get max(){return this[cd]}set allowStale(t){this[Zm]=!!t}get allowStale(){return this[Zm]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[vd]=t,G1(this)}get maxAge(){return this[vd]}set lengthCalculator(t){typeof t!="function"&&(t=K6),t!==this[yh]&&(this[yh]=t,this[Hu]=0,this[Gn].forEach(n=>{n.length=this[yh](n.value,n.key),this[Hu]+=n.length})),G1(this)}get lengthCalculator(){return this[yh]}get length(){return this[Hu]}get itemCount(){return this[Gn].length}rforEach(t,n){n=n||this;for(let r=this[Gn].tail;r!==null;){const i=r.prev;GW(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gn].head;r!==null;){const i=r.next;GW(this,t,r,n),r=i}}keys(){return this[Gn].toArray().map(t=>t.key)}values(){return this[Gn].toArray().map(t=>t.value)}reset(){this[Bu]&&this[Gn]&&this[Gn].length&&this[Gn].forEach(t=>this[Bu](t.key,t.value)),this[Oa]=new Map,this[Gn]=new mJe,this[Hu]=0}dump(){return this[Gn].map(t=>FA(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gn]}set(t,n,r){if(r=r||this[vd],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[yh](n,t);if(this[Oa].has(t)){if(o>this[cd])return lp(this,this[Oa].get(t)),!1;const u=this[Oa].get(t).value;return this[Bu]&&(this[qW]||this[Bu](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Hu]+=o-u.length,u.length=o,this.get(t),G1(this),!0}const a=new vJe(t,n,o,i,r);return a.length>this[cd]?(this[Bu]&&this[Bu](t,n),!1):(this[Hu]+=a.length,this[Gn].unshift(a),this[Oa].set(t,this[Gn].head),G1(this),!0)}has(t){if(!this[Oa].has(t))return!1;const n=this[Oa].get(t).value;return!FA(this,n)}get(t){return Q6(this,t,!0)}peek(t){return Q6(this,t,!1)}pop(){const t=this[Gn].tail;return t?(lp(this,t),t.value):null}del(t){lp(this,this[Oa].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Oa].forEach((t,n)=>Q6(this,n,!1))}}const Q6=(e,t,n)=>{const r=e[Oa].get(t);if(r){const i=r.value;if(FA(e,i)){if(lp(e,r),!e[Zm])return}else n&&(e[zue]&&(r.value.now=Date.now()),e[Gn].unshiftNode(r));return i.value}},FA=(e,t)=>{if(!t||!t.maxAge&&!e[vd])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[vd]&&n>e[vd]},G1=e=>{if(e[Hu]>e[cd])for(let t=e[Gn].tail;e[Hu]>e[cd]&&t!==null;){const n=t.prev;lp(e,t),t=n}},lp=(e,t)=>{if(t){const n=t.value;e[Bu]&&e[Bu](n.key,n.value),e[Hu]-=n.length,e[Oa].delete(n.key),e[Gn].removeNode(t)}};class vJe{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const GW=(e,t,n,r)=>{let i=n.value;FA(e,i)&&(lp(e,n),e[Zm]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var bJe=yJe;const xJe=Object.freeze({loose:!0}),wJe=Object.freeze({}),_Je=e=>e?typeof e!="object"?xJe:e:wJe;var PR=_Je,DC={exports:{}};const AJe="2.0.0",Bue=256,SJe=Number.MAX_SAFE_INTEGER||9007199254740991,EJe=16,$Je=Bue-6,CJe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var LR={MAX_LENGTH:Bue,MAX_SAFE_COMPONENT_LENGTH:EJe,MAX_SAFE_BUILD_LENGTH:$Je,MAX_SAFE_INTEGER:SJe,RELEASE_TYPES:CJe,SEMVER_SPEC_VERSION:AJe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const kJe=typeof process=="object"&&X6&&X6.NODE_DEBUG&&/\bsemver\b/i.test(X6.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var vS=kJe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=LR,o=vS;t=e.exports={};const a=t.re=[],s=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=y=>{for(const[v,b]of d)y=y.split(`${v}*`).join(`${v}{0,${b}}`).split(`${v}+`).join(`${v}{1,${b}}`);return y},g=(y,v,b)=>{const x=p(v),_=c++;o(y,_,v),l[y]=_,u[_]=v,a[_]=new RegExp(v,b?"g":void 0),s[_]=new RegExp(x,b?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),g("FULL",`^${u[l.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),g("LOOSE",`^${u[l.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),g("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),g("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),g("COERCERTL",u[l.COERCE],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(DC,DC.exports);var IR=DC.exports;const VW=/^[0-9]+$/,jue=(e,t)=>{const n=VW.test(e),r=VW.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},TJe=(e,t)=>jue(t,e);var MJe={compareIdentifiers:jue,rcompareIdentifiers:TJe};const Sx=vS,{MAX_LENGTH:YW,MAX_SAFE_INTEGER:Ex}=LR,{safeRe:XW,t:JW}=IR,OJe=PR,{compareIdentifiers:vh}=MJe;let NJe=class As{constructor(t,n){if(n=OJe(n),t instanceof As){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>YW)throw new TypeError(`version is longer than ${YW} characters`);Sx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?XW[JW.LOOSE]:XW[JW.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ex||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ex||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ex||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Ex)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Sx("SemVer.compare",this.version,this.options,t),!(t instanceof As)){if(typeof t=="string"&&t===this.version)return 0;t=new As(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof As||(t=new As(t,this.options)),vh(this.major,t.major)||vh(this.minor,t.minor)||vh(this.patch,t.patch)}comparePre(t){if(t instanceof As||(t=new As(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Sx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vh(r,i)}while(++n)}compareBuild(t){t instanceof As||(t=new As(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Sx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vh(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),vh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var zR=NJe;const KW=zR,RJe=(e,t,n)=>new KW(e,n).compare(new KW(t,n));var Ug=RJe;const FJe=Ug,DJe=(e,t,n)=>FJe(e,t,n)===0;var PJe=DJe;const LJe=Ug,IJe=(e,t,n)=>LJe(e,t,n)!==0;var zJe=IJe;const BJe=Ug,jJe=(e,t,n)=>BJe(e,t,n)>0;var UJe=jJe;const WJe=Ug,HJe=(e,t,n)=>WJe(e,t,n)>=0;var qJe=HJe;const GJe=Ug,VJe=(e,t,n)=>GJe(e,t,n)<0;var YJe=VJe;const XJe=Ug,JJe=(e,t,n)=>XJe(e,t,n)<=0;var KJe=JJe;const QJe=PJe,ZJe=zJe,eKe=UJe,tKe=qJe,nKe=YJe,rKe=KJe,iKe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return QJe(e,n,r);case"!=":return ZJe(e,n,r);case">":return eKe(e,n,r);case">=":return tKe(e,n,r);case"<":return nKe(e,n,r);case"<=":return rKe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var oKe=iKe,Z6,QW;function aKe(){if(QW)return Z6;QW=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Z6=t;const n=PR,{safeRe:r,t:i}=IR,o=oKe,a=vS,s=zR,u=Uue();return Z6}var e8,ZW;function Uue(){if(ZW)return e8;ZW=1;class e{constructor(M,D){if(D=r(D),M instanceof e)return M.loose===!!D.loose&&M.includePrerelease===!!D.includePrerelease?M:new e(M.raw,D);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(j=>!g(j[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&y(j[0])){this.set=[j];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const L=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+M,j=n.get(L);if(j)return j;const z=this.options.loose,H=z?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];M=M.replace(H,F(this.options.includePrerelease)),o("hyphen replace",M),M=M.replace(s[u.COMPARATORTRIM],l),o("comparator trim",M),M=M.replace(s[u.TILDETRIM],c),o("tilde trim",M),M=M.replace(s[u.CARETTRIM],f),o("caret trim",M);let U=M.split(" ").map(ne=>b(ne,this.options)).join(" ").split(/\s+/).map(ne=>N(ne,this.options));z&&(U=U.filter(ne=>(o("loose invalid filter",ne,this.options),!!ne.match(s[u.COMPARATORLOOSE])))),o("range list",U);const V=new Map,K=U.map(ne=>new i(ne,this.options));for(const ne of K){if(g(ne))return[ne];V.set(ne.value,ne)}V.size>1&&V.has("")&&V.delete("");const Q=[...V.values()];return n.set(L,Q),Q}intersects(M,D){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>v(L,D)&&M.set.some(j=>v(j,D)&&L.every(z=>j.every(H=>z.intersects(H,D)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new a(M,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(W(this.set[D],M,this.options))return!0;return!1}}e8=e;const t=bJe,n=new t({max:1e3}),r=PR,i=aKe(),o=vS,a=zR,{safeRe:s,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=IR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=LR,g=I=>I.value==="<0.0.0-0",y=I=>I.value==="",v=(I,M)=>{let D=!0;const L=I.slice();let j=L.pop();for(;D&&L.length;)D=L.every(z=>j.intersects(z,M)),j=L.pop();return D},b=(I,M)=>(o("comp",I,M),I=E(I,M),o("caret",I),I=_(I,M),o("tildes",I),I=S(I,M),o("xrange",I),I=O(I,M),o("stars",I),I),x=I=>!I||I.toLowerCase()==="x"||I==="*",_=(I,M)=>I.trim().split(/\s+/).map(D=>A(D,M)).join(" "),A=(I,M)=>{const D=M.loose?s[u.TILDELOOSE]:s[u.TILDE];return I.replace(D,(L,j,z,H,U)=>{o("tilde",I,L,j,z,H,U);let V;return x(j)?V="":x(z)?V=`>=${j}.0.0 <${+j+1}.0.0-0`:x(H)?V=`>=${j}.${z}.0 <${j}.${+z+1}.0-0`:U?(o("replaceTilde pr",U),V=`>=${j}.${z}.${H}-${U} <${j}.${+z+1}.0-0`):V=`>=${j}.${z}.${H} <${j}.${+z+1}.0-0`,o("tilde return",V),V})},E=(I,M)=>I.trim().split(/\s+/).map(D=>$(D,M)).join(" "),$=(I,M)=>{o("caret",I,M);const D=M.loose?s[u.CARETLOOSE]:s[u.CARET],L=M.includePrerelease?"-0":"";return I.replace(D,(j,z,H,U,V)=>{o("caret",I,j,z,H,U,V);let K;return x(z)?K="":x(H)?K=`>=${z}.0.0${L} <${+z+1}.0.0-0`:x(U)?z==="0"?K=`>=${z}.${H}.0${L} <${z}.${+H+1}.0-0`:K=`>=${z}.${H}.0${L} <${+z+1}.0.0-0`:V?(o("replaceCaret pr",V),z==="0"?H==="0"?K=`>=${z}.${H}.${U}-${V} <${z}.${H}.${+U+1}-0`:K=`>=${z}.${H}.${U}-${V} <${z}.${+H+1}.0-0`:K=`>=${z}.${H}.${U}-${V} <${+z+1}.0.0-0`):(o("no pr"),z==="0"?H==="0"?K=`>=${z}.${H}.${U}${L} <${z}.${H}.${+U+1}-0`:K=`>=${z}.${H}.${U}${L} <${z}.${+H+1}.0-0`:K=`>=${z}.${H}.${U} <${+z+1}.0.0-0`),o("caret return",K),K})},S=(I,M)=>(o("replaceXRanges",I,M),I.split(/\s+/).map(D=>k(D,M)).join(" ")),k=(I,M)=>{I=I.trim();const D=M.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return I.replace(D,(L,j,z,H,U,V)=>{o("xRange",I,L,j,z,H,U,V);const K=x(z),Q=K||x(H),ne=Q||x(U),ce=ne;return j==="="&&ce&&(j=""),V=M.includePrerelease?"-0":"",K?j===">"||j==="<"?L="<0.0.0-0":L="*":j&&ce?(Q&&(H=0),U=0,j===">"?(j=">=",Q?(z=+z+1,H=0,U=0):(H=+H+1,U=0)):j==="<="&&(j="<",Q?z=+z+1:H=+H+1),j==="<"&&(V="-0"),L=`${j+z}.${H}.${U}${V}`):Q?L=`>=${z}.0.0${V} <${+z+1}.0.0-0`:ne&&(L=`>=${z}.${H}.0${V} <${z}.${+H+1}.0-0`),o("xRange return",L),L})},O=(I,M)=>(o("replaceStars",I,M),I.trim().replace(s[u.STAR],"")),N=(I,M)=>(o("replaceGTE0",I,M),I.trim().replace(s[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),F=I=>(M,D,L,j,z,H,U,V,K,Q,ne,ce,ye)=>(x(L)?D="":x(j)?D=`>=${L}.0.0${I?"-0":""}`:x(z)?D=`>=${L}.${j}.0${I?"-0":""}`:H?D=`>=${D}`:D=`>=${D}${I?"-0":""}`,x(K)?V="":x(Q)?V=`<${+K+1}.0.0-0`:x(ne)?V=`<${K}.${+Q+1}.0-0`:ce?V=`<=${K}.${Q}.${ne}-${ce}`:I?V=`<${K}.${Q}.${+ne+1}-0`:V=`<=${V}`,`${D} ${V}`.trim()),W=(I,M,D)=>{for(let L=0;L<I.length;L++)if(!I[L].test(M))return!1;if(M.prerelease.length&&!D.includePrerelease){for(let L=0;L<I.length;L++)if(o(I[L].semver),I[L].semver!==i.ANY&&I[L].semver.prerelease.length>0){const j=I[L].semver;if(j.major===M.major&&j.minor===M.minor&&j.patch===M.patch)return!0}return!1}return!0};return e8}const sKe=Uue(),uKe=(e,t,n)=>{try{t=new sKe(t,n)}catch{return!1}return t.test(e)};var lKe=uKe,Wue=cJe(lKe);function cKe(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t);let s=~~(i/o);function u(c){c.source===r&&(s=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var fKe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Hue(e,...t){for(const n of t)dKe(e,n);return e}function dKe(e,t){for(const n of Object.keys(t))Eg(e,n,t[n],!0)}function eH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eH(Object(n),!0).forEach(function(r){lJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Es=Xze;let r2=QYe;const $x=typeof window<"u"?window:void 0;var rq;r2===void 0&&((rq=$x==null?void 0:$x.vl)!=null&&rq.compile)&&(r2=$x.vl);const hKe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},pKe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Em={vega:"Vega","vega-lite":"Vega-Lite"},DA={vega:Es.version,"vega-lite":r2?r2.version:"not available"},gKe={vega:e=>e,"vega-lite":(e,t)=>r2.compile(e,{config:t}).spec},mKe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,yKe="chart-wrapper";function vKe(e){return typeof e=="function"}function tH(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Em[r]} JSON Source`}function bKe(e,t){if(e.$schema){const n=Due(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Em[n.library]}, but mode argument sets ${Em[t]??t}.`);const r=n.library;return Wue(DA[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Em[r]} ${n.version}, but the current version of ${Em[r]} is v${DA[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function xKe(e){return!!(e&&"load"in e)}function nH(e){return xKe(e)?e:Es.loader(e)}function wKe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return $e(t.defaultStyle)&&(t.defaultStyle=!1),t}async function que(e,t,n={}){let r,i;$e(t)?(i=nH(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=wKe(r),a=o.loader;(!i||a)&&(i=nH(n.loader??a));const s=await rH(o,i),u=await rH(n,i),l=Fc(Fc({},Hue(u,s)),{},{config:Sg(u.config??{},s.config??{})});return await AKe(e,r,l,i)}async function rH(e,t){const n=$e(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=$e(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return Fc(Fc(Fc({},e),r?{patch:r}:{}),n?{config:n}:{})}function _Ke(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function AKe(e,t,n={},r){const i=n.theme?Sg(QXe[n.theme],n.config??{}):n.config,o=bf(n.actions)?n.actions:Hue({},hKe,n.actions??{}),a=Fc(Fc({},pKe),n.i18n),s=n.renderer??"canvas",u=n.logLevel??Es.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:$,rootContainer:S}=_Ke(c);if(!$.getElementById(E)){const k=document.createElement("style");k.id=E,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?fKe.toString():n.defaultStyle,S.appendChild(k)}}const f=bKe(t,n.mode);let d=gKe[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Due(d.$schema);Wue(DA.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${DA.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let p=c;if(o){const E=document.createElement("div");E.classList.add(yKe),c.appendChild(E),p=E}const g=n.patch;if(g&&(d=g instanceof Function?g(d):N3(d,g,!0,!1).newDocument),n.formatLocale&&Es.formatLocale(n.formatLocale),n.timeFormatLocale&&Es.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const $=n.expressionFunctions[E];"fn"in $?Es.expressionFunction(E,$.fn,$.visitor):$ instanceof Function&&Es.expressionFunction(E,$)}const{ast:y}=n,v=Es.parse(d,f==="vega-lite"?{}:i,{ast:y}),b=new(n.viewClass||Es.View)(v,Fc({loader:r,logLevel:u,renderer:s},y?{expr:Es.expressionInterpreter??n.expr??oBe}:{}));if(b.addSignalListener("autosize",(E,$)=>{const{type:S}=$;S=="fit-x"?(p.classList.add("fit-x"),p.classList.remove("fit-y")):S=="fit-y"?(p.classList.remove("fit-x"),p.classList.add("fit-y")):S=="fit"?p.classList.add("fit-x","fit-y"):p.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const E=vKe(n.tooltip)?n.tooltip:new aJe(n.tooltip===!0?{}:n.tooltip).call;b.tooltip(E)}let{hover:x}=n;if(x===void 0&&(x=f==="vega"),x){const{hoverSet:E,updateSet:$}=typeof x=="boolean"?{}:x;b.hover(E,$)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(p,n.bind).runAsync();let _;if(o!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=a.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const k=document.createElement("summary");k.innerHTML=mKe,S.append(k),_=O=>{S.contains(O.target)||S.removeAttribute("open")},document.addEventListener("click",_)}const $=document.createElement("div");if(E.append($),$.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const k=a[`${S.toUpperCase()}_ACTION`],O=document.createElement("a"),N=ke(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;O.text=k,O.href="#",O.target="_blank",O.download=`${l}.${S}`,O.addEventListener("mousedown",async function(F){F.preventDefault();const W=await b.toImageURL(S,N);this.href=W}),$.append(O)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=a.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(k){tH(n6(t),n.sourceHeader??"",n.sourceFooter??"",f),k.preventDefault()}),$.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=a.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(k){tH(n6(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),$.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=a.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(O){cKe(window,S,{config:i,mode:f,renderer:s,spec:n6(t)}),O.preventDefault()}),$.append(k)}}function A(){_&&document.removeEventListener("click",_),b.finalize()}return{view:b,spec:t,vgSpec:d,finalize:A,embedOptions:n}}function SKe({profData:e}){const t=Y.useRef(),n=Y.useMemo(()=>{const r=by.map(i=>Object.entries(i.cites_per_year).map(([o,a])=>({year:parseInt(o),cites:a}))).flat().reduce((i,o)=>{const{year:a,cites:s}=o;return i[a]?i[a]+=s:i[a]=s,i},{});return Object.entries(r).map(([i,o])=>({year:parseInt(i),cites:o}))},[]);return Y.useEffect(()=>{var r;e?r=Object.entries(e.cites_per_year).map(([s,u])=>({year:parseInt(s),cites:u})):r=n;const i=Math.max(...r.map(s=>s.cites)),o=i+100-i%100,a={$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:`${e?e.name+"'s":"Total"} Paper Citations from 1950 to 2023`,width:500,height:200,mark:"line",data:{values:r},layer:[{mark:"line",encoding:{x:{field:"year",type:"quantitative",scale:{domain:[1950,2023]}},y:{field:"cites",type:"quantitative",scale:{domain:[0,o]}}}},{mark:{type:"point",filled:!0,size:50},encoding:{x:{field:"year",type:"quantitative",scale:{domain:[1950,2023]}},y:{field:"cites",type:"quantitative",scale:{domain:[0,o]}},tooltip:[{field:"year"},{field:"cites"}]}}],config:{axis:{grid:!1}},view:{stroke:null}};que(t.current,a,{mode:"vega-lite",actions:!1,data:{values:r}}).catch(console.error)}),J.jsx("div",{ref:t})}function EKe({profData:e}){const t=Y.useRef(),n=Y.useMemo(()=>{const r=by.map(i=>Object.entries(i.pub_per_year[0]).map(([o,a])=>({year:parseInt(o),publications:a}))).flat().reduce((i,o)=>{const{year:a,publications:s}=o;return i[a]?i[a]+=s:i[a]=s,i},{});return Object.entries(r).map(([i,o])=>({year:parseInt(i),publications:o})).filter(i=>i.year>=1950&&i.year<=2023)},[]);return Y.useEffect(()=>{var r;e?r=Object.entries(e.pub_per_year[0]).map(([s,u])=>({year:parseInt(s),publications:u})).filter(s=>s.year>=1950&&s.year<=2023):r=n;const i=Math.max(...r.map(s=>s.publications)),o=i+10-i%10,a={$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:`${e?e.name+"'s":"Total"} Paper Publications from 1950 to 2023`,width:500,height:200,mark:"line",data:{values:r},layer:[{mark:"line",encoding:{x:{field:"year",type:"quantitative",scale:{domain:[1950,2023]}},y:{field:"publications",type:"quantitative",scale:{domain:[0,o]}}}},{mark:{type:"point",filled:!0,size:50},encoding:{x:{field:"year",type:"quantitative",scale:{domain:[1950,2023]}},y:{field:"publications",type:"quantitative",scale:{domain:[0,o]}},tooltip:[{field:"year"},{field:"publications"}]}}],config:{axis:{grid:!1}},view:{stroke:null}};que(t.current,a,{mode:"vega-lite",actions:!1,data:{values:r}}).catch(console.error)}),J.jsx("div",{ref:t})}const $Ke="data:image/png;base64,UklGRhoOAABXRUJQVlA4IA4OAACQhACdASpYAlgCPikUiUMhoSERKtQEGAKEtLdz0r/szjuYW9uaYBEj0SaXnSW+mf0H/IdmX+F5bKSA7GYHvsr+y/unot3t8AL8b/lP+x/L7gQQAfV7z45nfgD2AP1a4ougH+dfP9/8/8/6APo/9mvgP/nH9y9Lf2HfuT7Nv7jA2nl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4vTO8VmXi9M7xWZeL0zvFZl4eTdc91xxQ4vb4O5Tn/tXVlSrisAZo8vF6Z3isy8XpneKy9wftRz+Onz6POKWBv6ddWWlnckXgFGM7xWZeL0zvFZe4w+ONWuWe07wow1eWHUl1R/y54ClGM7xWZeL0nmRJYICw8y8XpOZmwGhsAnmXi9M7xWZeLyiTop/p6PTO8VhTnWIK3F2rxWZeL0zvFZl1oWmckOAuneKzLw5/apCBAUoxneKzLxemVlt5kE8y8XpPYySoXpneKzLxemd4pcLTqd4rMur0Swt5O8VmXi9M7xWZUcMg6fjmD4rMvF5Uv2VJUxneKzLxemd4rDRWiOIUBmApRjO8KxS81lGzLxemd4rMvF6ZUQ08LP7oMZ3S33Ge/GDwZOXtO8VmXi9M6U8kFHlyidZYMnLyFIZ1kZ9sAhSjGd4rMvF6Z3jHLYSUAj+iNCt4WrxWGpJL2uTZ3jy8XpneKzLxemd4pWWIIVYxYyRBOzT2blSPxEeo3LyLYIwUoxneKzLxemd4rMqmNVRMyHS/aXYQgC3F3+YoVHdbF/6JG4T6Ngzm/FZl4vTO8VmXi9Mq2UhC+nmuJv4Qbqy97D1wsDTebjRMmdM7xWZeL0zvFZl1RqbGxcS2EJsjwFH/Ka6thnH3Jfq8VmXi9M7xWZeHQR9eIkKSXPAUoxOXPnvWxK1aBpIAycvad4rMvF5T0HeDBr1zIqd4rMvFtIGV0SQmSF5eL0zvFZl4c7VaKd2X2L0zvFZl5vH31mVnDE5vxWZeL0zukix2AoGM7xWZeL0nm9wN449duwCjGd4rMur2WvEJMGTl7TvFZl1S+iUgQ7l4vTO8VmVLHWnIBerMvF6Z3isypR8DYkb7YTzLxemd0tyimqrqNcvad4rMvF6T7CVg4PLxemd4pYmLahfisy8XpneKzKlUGpyHAaApRjO8UrkK3a79p3isy8XpneKXkJFvrWpBPMvF6ZWmaQ+w7QBRjO8VmXi9M6XsVp0GXp5l4vTOlhmod01cvad4rMvF6Z0uFKsWL0zvFZfNOTvFZl4vTO8Vl7z9f9p3isy8O7R08y8XpneKzLw7tHTzKgAAP7+n6i5FAAAAAAAAAAAAAAABdjVdtzllqjl+qUTO5vPrh4/o+bndWJ3B5Ioo+TQUeMy697iVYZU4AzMD4kC/uHGZv/ADv4X70UPySv404KIraLQjnb0dcAcInpKdGMgkEs4regxPao2N4RtkY2gtwtJPuLRaPogRVVWUfGDxx4IQkEkwkff4im/8kDqpTkfJORtuaK4XMUmvwz90mof5MemArRTzDRYACB7UtAEzGdEu79yg+BV275QJjmeBO4nl2bhPxv75ca+edN4kEjOZ1nBAz7dJXXo3Bt2Hb8FrnvEOjURzu0Jkfb8Ze7HIf+/twn5EPegCROfWGgodDpcwKHorp8pUHqenw6UOhGMEXyw/8Sgh1MDLEmF6s7cwuKl10YJmPZ70daOQUvEvD9sZ6PFvmAl3jZUHN2plKhz4zZhh9EPQUR8X9KRHpVeVnRtgabXIgxChx0wIVlJ//MrRGEqlOvW4qf+0S0YFY4mM3KFxeestxIi6G1TnaDpXZN8wsZ4CLoRI5Shx9NH+DeDL9qsiObRC7jqPm5xHORmxBqDQWaaHtODaigK6ks/1w1BzXevzK06uXo1otOJ/1Oh6F84vXMxEj2Rm4/LetzM1ViNyUW3tZwv83DR6zXdh5hJalR7RCtOxSw2uHNhKFbemdh5FqcDdhE2y3Qt5YdfcZnS/GFpujs5Xth4tMrB+ofIj1P7R3RYKMAgeeuSHMACqyiJPrB3XMydTdzcnvkTurH2j1PkN+wJFwI8HUpq+jlyi+BJjQp6n7WDItjQDPlAYCLH9MQlxPKrojFNQgcDGEoXoTD/yjLeAhtbn4Rbnb8J+dox1r6bRF+xhhdkT8ePJdEDmH6h96IBx/dNMmBhi7ugrnzmB8U+PXiImgL/NWcvRawOul2XXiOMmpNQxqL0BiDQgjGlCGP/wBo2khadWVfIYj5jlqqHlh1pgi5mT2ZSRjItLhtNN8KaPvCBzYWb787T3c26Wc5+8MwAVmJLHOTbC9jTzySKcfqjo4zEb37m6M0QGGxgboMwMgvojnt3gYLFhC/SQH/sfwwvbd9vwTXTCix+qZSQxqDCkJwo2r6DBnG/1qmvCvFUhURzMq0wEyAP8UqAWh3orsEY+k4JSQT8WIkatnkAERdK99+FwSUST4k06uRi5QwA6DEZHQACSETJVvsUgVK3xCzdty/HFpX8owyRAySbmMPn7vtsYuQ9N81pQGIyYkLiuYMBGpc+irKvLKI3kWwUNexDawyBQgDKeqRIuAmouV4ihDxctknS0Sk99h5wQjLxSldZPkHID8PADvHGDQegYxkYYeizBhUGl+Q/eZMUOjn85nj+NK8IEOip8RbcG6fFhLBhpqeOU0J3QVc57JUc+gOscTu+dK5iW9dGqhF3FCdok5cuvrPVrszG4OwtHhN6XRlU1cFGKpsKBdAujGW7AK94OxdfAuZw3M6CrdFeCgpPkGtLhoxlXmdj0KNA+eUKwnTd/PTIMV/7fPpS0/jbmMEd05P6GOGyj24lw9822WRlwgubQnLB4EUdEqEO02iliFdcZ813W1ubgZghwKNVOQ5wV0vVMaiv3dvxS5xklnCZrIWStrzhco3dIG4uBo5YvC1PEC6ZBn3AnnvR7apvCHGdWCrzCyyYh+lmD9dyqCoFa+LuEx8UJ76v3svLs43GIQ0/HvTwqJ5oe36OfKPwYFfbee4oyxbbMmpBiAusQx5fziFwo4hBQ9KZIpCOOKZfvz/Sg3G6WhxeMKGFXrsZOPttMIeC6F7iuc8kqZK/Hziaz7Akm8DbdxqTW8cxXLdFSWRmjTSTAnFMoitFTpZjPvUpPQxpn/2dIwWO+56KUr0D6qsbPFBUF1nnkin293j4cDul6Nfsq2QkRVEByaVv+HAhqDwV/wFIQiOvPqKkaBUgAHTI4WLCD2mGx4T20xf2/5/rINXW5gnxp1XDka/0QYaiuHKIyOiYn+JmofCoCYlBBY0BfTzTiYohBsMNfBDMIjTFWx0GZuYRq5xXDbrVK2VTi8VVt+juun5yZ2bjLwiHE45utiE3VvV0+/LY2QS4LLDjH9nMD2sAWydLwjEQbgrPQhXCZT1c+g1LrCkE5gtI/rhdlVa0+sAo59uExJloRg7JNbVi3w6XoZ3UEMSEHAZkDXkcx02nl6R6QsJ6TlKhmzl+A46Z76797mwBkQFdhM//hf+N+J32ZCv2x+Cf48aTXI8zCWkvvVQj3LH+h69gwlFQNyJ6gsezVutcXeEaX4Zrgfc4BKboVpRdteSyoVwVM90bswsyfFvxBCcALbsZeAF4upaqE7v20sWwnveoqecgFWMlEU2+8TZZTr2KvyrKeHlhFbdpB/TDOALE+8ktAlGhuDxmsieLwmI/hVWBAQMdMqjSH7J+RJsSfCntZw4HjxdE65yzorAGNttj6XhO5rZfAPGiiUrSLIYA1YwB6ofpz3gyiLi2qIeGpR/IBuyHYH1rslyUAC+KtvigVrT3H4GWG1jjUy79Ttijs+dwiGuviZQKXfGRlgKwPp98qsBIq86jr4MMpx7PUEZ2T9wPpRP/Ab0ySqX5PaCh9NOZZSRnRhclsX2iN3OOxp53/JZyvpEF7Wcge5l7B+s/zX3IZWSbDz6F3PASgq5TfuE+FO4YUWZ75yc3cQJrzrcgCBSuVx8r4lUGg1uKpQt43i1pUVlFzc1SIvBnC6lV9QYn5K876SBc5vrzEiNeD/FWH2/59139Sv8dZd7RfnCwulyIMdxR0iQZ9jdPd5D7LTnquR2Ti7Z/8TgV7cuLessoxpLDLu7AFlIK+Q52598DyR3YpXG+eYEwcJH1k4ZucWLR+K5G/hg7B3KER2C2ybm7xGiDOVj/mjatGAU+pLFAtwdbMMeQB4Aq17bDtrJ0B6fT9OC/3UG1lRJ1w5MgLZtnPaJ+97uPs5Ofqwl4JNqpDb4MhUP+7Ic7h+qCCTj1yjsP8VOP3hsFh+2aE87wnCN5LADUeiMgeFW+zey0obCgmojsrYKed6zw/z3muualv1uGags7+p9+z3AAkKOa3R4FlYplOxCZ+BZVc8EHDIZR7qSGwAWvTaPRnevcSQcd+yDSN4odzc7KB/TC/srZNEM+IHKZejfBH8yVO/eG4QBZ+zQftHWgaeKT82m4nKNpOxAYkzv9mbutsG2XwELCqOP/pccXrnosD93UVls4wRjp34n9LRNTsB8XdJa7sDTSn6h7sQochLuULQScFantP58Pu4uyCM9Oins0MkVfD7F2hkWg8hLws4NLMr0dwE5QO8rKUVtOCXsN9k1xcDzjrYjtiRAbF6UhRvfU2WmMlh+zHjEWu9hInW2NB0MA1oQc8TEAvFxVStJ8qstPUjdhA5FBhxbpNUYAAAAA";function g0(e){return e!=null&&!Number.isNaN(e)}function ig(e,t){return+g0(t)-+g0(e)||Us(e,t)}function PC(e,t){return+g0(t)-+g0(e)||gg(e,t)}function Gue(e){return e!=null&&`${e}`!=""}function Vue(e){return isFinite(e)?e:NaN}function bS(e){return e>0&&isFinite(e)?e:NaN}function BR(e){return e<0&&isFinite(e)?e:NaN}function CKe(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${kKe(e.getUTCFullYear())}-${qu(e.getUTCMonth()+1,2)}-${qu(e.getUTCDate(),2)}${n||r||i||o?`T${qu(n,2)}:${qu(r,2)}${i||o?`:${qu(i,2)}${o?`.${qu(o,3)}`:""}`:""}Z`:""}`}function kKe(e){return e<0?`-${qu(-e,6)}`:e>9999?`+${qu(e,6)}`:qu(e,4)}function qu(e,t){return`${e}`.padStart(t,"0")}const TKe=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Yue(e,t){return TKe.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Wh=1e3,bd=Wh*60,xd=bd*60,vl=xd*24,$s=vl*7,Rd=vl*30,Xl=vl*365,t8=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Wh],["5 seconds",5*Wh],["15 seconds",15*Wh],["30 seconds",30*Wh],["minute",bd],["5 minutes",5*bd],["15 minutes",15*bd],["30 minutes",30*bd],["hour",xd],["3 hours",3*xd],["6 hours",6*xd],["12 hours",12*xd],["day",vl],["2 days",2*vl],["week",$s],["2 weeks",2*$s],["month",Rd],["3 months",3*Rd],["6 months",6*Rd],["year",Xl],["2 years",2*Xl],["5 years",5*Xl],["10 years",10*Xl],["20 years",20*Xl],["50 years",50*Xl],["100 years",100*Xl]],jR=new Map([["second",Wh],["minute",bd],["hour",xd],["day",vl],["monday",$s],["tuesday",$s],["wednesday",$s],["thursday",$s],["friday",$s],["saturday",$s],["sunday",$s],["week",$s],["month",Rd],["year",Xl]]),Xue=new Map([["second",Jo],["minute",N2],["hour",R2],["day",Xa],["monday",My],["tuesday",RK],["wednesday",FK],["thursday",Vd],["friday",DK],["saturday",PK],["sunday",Wc],["week",Wc],["month",Xd],["year",ca]]),Jue=new Map([["second",Jo],["minute",xg],["hour",wg],["day",A3],["monday",Oy],["tuesday",LK],["wednesday",IK],["thursday",Yd],["friday",zK],["saturday",BK],["sunday",Hc],["week",Hc],["month",Jd],["year",fa]]),yv=Symbol("intervalDuration"),xS=Symbol("intervalType");for(const[e,t]of Xue)t[yv]=jR.get(e),t[xS]="time";for(const[e,t]of Jue)t[yv]=jR.get(e),t[xS]="utc";const MKe=[["year",fa,"utc"],["year",ca,"time"],["month",Jd,"utc"],["month",Xd,"time"],["day",A3,"utc",6*Rd],["day",Xa,"time",6*Rd],["hour",wg,"utc",3*vl],["minute",xg,"utc",6*xd],["second",Jo,"utc",30*bd]];function Kue(e,t,n){let r=`${e}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const o=/^(?:(\d+)\s+)/.exec(r);switch(o&&(r=r.slice(o[0].length),i=+o[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let a=t.get(r);if(!a)throw new Error(`unknown interval: ${e}`);if(i>1){if(!a.every)throw new Error(`non-periodic interval: ${r}`);a=a.every(i),a[yv]=jR.get(r)*i,a[xS]=n}return a}function Que(e){return Kue(e,Xue,"time")}function Zue(e){return Kue(e,Jue,"utc")}function iH(e,t){if(!(t>1))return;const n=e[yv];if(!t8.some(([,i])=>i===n)||n%vl===0&&vl<n&&n<Rd)return;const[r]=t8[v0(([,i])=>Math.log(i)).center(t8,Math.log(n*t))];return(e[xS]==="time"?Que:Zue)(r)}function oH(e,t,n){const r=t==="time"?S3:_g;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=OKe(n);switch(e){case"millisecond":return bh(r(".%L"),r(":%M:%S"),i);case"second":return bh(r(":%S"),r("%-I:%M"),i);case"minute":return bh(r("%-I:%M"),r("%p"),i);case"hour":return bh(r("%-I %p"),r("%b %-d"),i);case"day":return bh(r("%-d"),r("%b"),i);case"month":return bh(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function OKe(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function NKe(e,t){const n=ui(Mwe(e,(r,i)=>Math.abs(i-r)));if(n<1e3)return oH("millisecond","utc",t);for(const[r,i,o,a]of MKe){if(n>a||r==="hour"&&!n)break;if(e.every(s=>i.floor(s)>=s))return oH(r,o,t)}}function bh(e,t,n){return(r,i,o)=>{const a=e(r,i),s=t(r,i),u=i-ag(o);return i!==u&&o[u]!==void 0&&s===t(o[u],u)?a:n(a,s)}}const i2=Object.getPrototypeOf(Uint8Array),RKe=Object.prototype.toString,FKe=Symbol("reindex");function lf(e,t,n){const r=typeof t;return r==="string"?aH(e,LKe(t),n):r==="function"?aH(e,t,n):r==="number"||t instanceof Date||r==="boolean"?bi(e,vv(t),n):typeof(t==null?void 0:t.transform)=="function"?sH(t.transform(e),n):DKe(sH(t,n),e==null?void 0:e[FKe])}function DKe(e,t){return t?HR(e,t):e}function aH(e,t,n){return bi(e,(n==null?void 0:n.prototype)instanceof i2?PKe(t):t,n)}function sH(e,t){return t===void 0?$o(e):e instanceof t?e:t.prototype instanceof i2&&!(e instanceof i2)?t.from(e,UR):t.from(e)}function PKe(e){return(t,n)=>UR(e(t,n))}const ww=[null],LKe=e=>t=>t[e],IKe={transform:bv},Ml={transform:e=>e},zKe=()=>!0,ri=e=>e==null?e:`${e}`,Xn=e=>e==null?e:+e,ele=e=>e?e[0]:void 0,BKe=e=>e?e[1]:void 0,vv=e=>()=>e;function jKe(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Ap(n,t,r)}function uH(e){return e instanceof i2?e:bi(e,UR,Float64Array)}function UR(e){return e==null?NaN:Number(e)}function UKe(e){return bi(e,WKe)}function WKe(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Yue(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function o2(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:SS(e)?[void 0,e]:[e,void 0]}function oi(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function tle(e,t,n){if(e!=null)return gs(e,t,n)}function gs(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function $o(e){return e==null||e instanceof Array||e instanceof i2?e:Array.from(e)}function bi(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function LC(e,t=Array){return e instanceof t?e.slice():t.from(e)}function P0(e){return(e==null?void 0:e.toString)===RKe}function IC(e){return P0(e)&&(e.type!==void 0||e.domain!==void 0)}function wS(e){return P0(e)&&typeof e.transform!="function"}function og(e){return wS(e)&&e.value===void 0&&e.channel===void 0}function WR(e,t){return e===void 0&&t===void 0?[ele,BKe]:[e,t]}function bv(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function HR(e,t){return bi(t,n=>e[n],e.constructor)}function HKe(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Cx(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _S(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function qKe(e,t){const n=qR(e,t);return n&&(r=>g0(r)?n.floor(r):r)}function qR(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>In(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>In(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof e=="string")return(t==="time"?Que:Zue)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function xv(e,t){if(e=qR(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function GKe(e,t){if(e=xv(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function VKe(e){return typeof(e==null?void 0:e.range)=="function"}function AS(e){return e===void 0||wS(e)?e:{value:e}}function YKe(e){return e==null?null:{transform:t=>lf(t,e,Float64Array),label:_S(e)}}function L0(e){return e&&typeof e[Symbol.iterator]=="function"}function nle(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function lH(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function ru(e){for(const t of e)if(t!=null)return t instanceof Date}function XKe(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Yue(t)}function JKe(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function KKe(e){for(const t of e)if(t!=null)return typeof t=="number"}function n8(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const QKe=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function SS(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||QKe.has(e))}function ZKe(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ni(e){return e==null||a2(e)}function a2(e){return/^\s*none\s*$/i.test(e)}function eQe(e){return/^\s*round\s*$/i.test(e)}function rle(e,t){return tle(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function ES(e="middle"){return rle(e,"frameAnchor")}function ag(e){if(e==null)return;const t=e[0],n=e[e.length-1];return gg(t,n)}function tQe(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function nQe(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function ile(e){return L0(e)?nQe(e):e}const Ls=Symbol("position"),Ol=Symbol("color"),wv=Symbol("radius"),_v=Symbol("length"),Av=Symbol("opacity"),$S=Symbol("symbol"),ole=Symbol("projection"),xn=new Map([["x",Ls],["y",Ls],["fx",Ls],["fy",Ls],["r",wv],["color",Ol],["opacity",Av],["symbol",$S],["length",_v],["projection",ole]]);function rQe(e){return e===Ls||e===ole}function iQe(e){return e===Ls||e===wv||e===_v||e===Av}const oQe=Math.sqrt(3),aQe=2/oQe,sQe={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*aQe,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},GR=new Map([["asterisk",hZ],["circle",Rp],["cross",pZ],["diamond",mZ],["diamond2",yZ],["hexagon",sQe],["plus",vZ],["square",bZ],["square2",xZ],["star",_Z],["times",$Z],["triangle",AZ],["triangle2",SZ],["wye",EZ]]);function VR(e){return e&&typeof e.draw=="function"}function uQe(e){return VR(e)?!0:typeof e!="string"?!1:GR.has(e.toLowerCase())}function YR(e){if(e==null||VR(e))return e;const t=GR.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function lQe(e){if(e==null||VR(e))return[void 0,e];if(typeof e=="string"){const t=GR.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function ale({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(e!=null&&(r=sle(e)),t!=null&&!og(t)&&(r=r8(r,XR(t))),n&&(r=r8(r,ule))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||og(t))&&{sort:t},transform:r8(r,a)}}function sg({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=sle(e)),t!=null&&!og(t)&&(r=i8(r,XR(t))),n&&(r=i8(r,ule))),{...i,...(t===null||og(t))&&{sort:t},initializer:i8(r,o)}}function r8(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,$o(n),r,i)}}function i8(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let a,s,u,l,c,f;return{data:s=n,facets:u=r,channels:a}=e.call(this,n,r,i,...o),{data:c=s,facets:f=u,channels:l}=t.call(this,s,u,{...i,...a},...o),{data:c,facets:f,channels:{...a,...l}}}}function cQe(e,t){return(e.initializer!=null?sg:ale)(e,t)}function sle(e){return(t,n)=>{const r=lf(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function ule(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function fQe(e,{sort:t,...n}={}){return{...(wS(e)&&e.channel!==void 0?sg:cQe)(n,XR(e)),sort:og(t)?t:null}}function XR(e){return(typeof e=="function"&&e.length!==1?dQe:hQe)(e)}function dQe(e){return(t,n)=>{const r=(i,o)=>e(t[i],t[o]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function hQe(e){let t,n;({channel:t,value:e,order:n}={...AS(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?PC:ig),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ig;break;case"descending":n=PC;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let s;if(t===void 0)s=lf(i,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(s=a[t],!s)return{};s=s.value}const u=(l,c)=>n(s[l],s[c]);return{data:i,facets:o.map(l=>l.slice().sort(u))}}}function pQe(e,t,n=gQe){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&P0(e))return mQe(e);if(typeof e=="function")return yQe(e);if(/^p\d{2}$/i.test(e))return Pu(jKe(e));switch(`${e}`.toLowerCase()){case"first":return bQe;case"last":return xQe;case"identity":return vQe;case"count":return fH;case"distinct":return wQe;case"sum":return t==null?fH:_Qe;case"proportion":return dH(t,"data");case"proportion-facet":return dH(t,"facet");case"deviation":return Pu(iX);case"min":return Pu(_p);case"min-index":return Pu(Cwe);case"max":return Pu(ui);case"max-index":return Pu($we);case"mean":return cH(hX);case"median":return cH(wy);case"variance":return Pu(rX);case"mode":return Pu(Twe)}return n(e)}function gQe(e){throw new Error(`invalid reduce: ${e}`)}function mQe(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function yQe(e){return{reduceIndex(t,n,r){return e(HR(n,t),r)}}}function Pu(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function cH(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return ru(n)?new Date(r):r}}}const vQe={reduceIndex(e,t){return HR(t,e)}},bQe={reduceIndex(e,t){return t[e[0]]}},xQe={reduceIndex(e,t){return t[e[e.length-1]]}},fH={label:"Frequency",reduceIndex(e){return e.length}},wQe={label:"Distinct",reduceIndex(e,t){const n=new zc;for(const r of e)n.add(t[r]);return n.size}},_Qe=Pu(x2);function dH(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>x2(n,o=>r[o])/i}}function s2(e,{scale:t,type:n,value:r,filter:i,hint:o,label:a=_S(r)},s){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),lle(s,{scale:t,type:n,value:lf(e,r),label:a,filter:i,hint:o})}function AQe(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,s2(t,r,n)]))}function SQe(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const a=i==null?null:t[i];return[r,a==null?o:bi(o,a)]}));return n.channels=e,n}function lle(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&n8(r,SS)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&n8(r,ZKe)?null:"opacity";break;case"symbol":n!==!0&&n8(r,uQe)?(t.scale=null,t.value=bi(r,YR)):t.scale="symbol";break;default:t.scale=xn.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!xn.has(n))throw new Error(`unknown scale: ${n}`);return t}function EQe(e,t,n,r,i){const{order:o,reverse:a,reduce:s=!0,limit:u}=i;for(const l in i){if(!xn.has(l))continue;let{value:c,order:f=o,reverse:d=a,reduce:p=s,limit:g=u}=AS(i[l]);const y=c==null?void 0:c.startsWith("-");if(y&&(c=c.slice(1)),f=f===void 0?y!==(c==="width"||c==="height")?fle:cle:kQe(f),p==null||p===!1)continue;const v=l==="fx"||l==="fy"?CQe(t,r[l]):$Qe(n,l);if(!v)throw new Error(`missing channel for scale: ${l}`);const b=v.value,[x=0,_=1/0]=L0(g)?g:g<0?[g]:[0,g];if(c==null)v.domain=()=>{let A=Array.from(new zc(b));return d&&(A=A.reverse()),(x!==0||_!==1/0)&&(A=A.slice(x,_)),A};else{const A=c==="data"?e:c==="height"?hH(n,"y1","y2"):c==="width"?hH(n,"x1","x2"):zC(n,c,c==="y"?"y2":c==="x"?"x2":void 0),E=pQe(p===!0?"max":p,A);v.domain=()=>{let $=wwe(bv(b),S=>E.reduceIndex(S,A),S=>b[S]);return f&&$.sort(f),d&&$.reverse(),(x!==0||_!==1/0)&&($=$.slice(x,_)),$.map(ele)}}}}function $Qe(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function CQe(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const s of e[o])i[s]=a}return t}function hH(e,t,n){const r=zC(e,t),i=zC(e,n);return bi(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function zC(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function kQe(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return cle;case"descending":return fle}throw new Error(`invalid order: ${e}`)}function cle([e,t],[n,r]){return ig(t,r)||ig(e,n)}function fle([e,t],[n,r]){return PC(t,r)||ig(e,n)}function pH(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function TQe(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,t=e(...r)),t)}const MQe=TQe(e=>new Intl.NumberFormat(e));function OQe(e="en-US"){const t=MQe(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function NQe(e){return CKe(e,"Invalid Date")}function RQe(e="en-US"){const t=OQe(e);return n=>(n instanceof Date?NQe:typeof n=="number"?t:ri)(n)}const ug=RQe();let BC=0,jC;function FQe(){const e=BC;return BC=0,jC=void 0,e}function Fd(e){e!==jC&&(jC=e,console.warn(e),++BC)}const go=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let DQe=0;function gH(){return`plot-clip-${++DQe}`}function PQe(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:s,fillOpacity:u,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:d,strokeLinecap:p,strokeMiterlimit:g,strokeDasharray:y,strokeDashoffset:v,opacity:b,mixBlendMode:x,imageFilter:_,paintOrder:A,pointerEvents:E,shapeRendering:$,channels:S},{ariaLabel:k,fill:O="currentColor",fillOpacity:N,stroke:F="none",strokeOpacity:W,strokeWidth:I,strokeLinecap:M,strokeLinejoin:D,strokeMiterlimit:L,paintOrder:j}){O===null&&(s=null,u=null),F===null&&(l=null,f=null),Ni(O)?!Ni(F)&&(!Ni(s)||S!=null&&S.fill)&&(F="none"):Ni(F)&&(!Ni(l)||S!=null&&S.stroke)&&(O="none");const[z,H]=o2(s,O),[U,V]=oi(u,N),[K,Q]=o2(l,F),[ne,ce]=oi(f,W),[ye,fe]=oi(b);a2(Q)||(c===void 0&&(c=I),p===void 0&&(p=M),d===void 0&&(d=D),g===void 0&&!eQe(d)&&(g=L),!a2(H)&&A===void 0&&(A=j));const[pe,te]=oi(c);return O!==null&&(e.fill=Xr(H,"currentColor"),e.fillOpacity=V1(V,1)),F!==null&&(e.stroke=Xr(Q,"none"),e.strokeWidth=V1(te,1),e.strokeOpacity=V1(ce,1),e.strokeLinejoin=Xr(d,"miter"),e.strokeLinecap=Xr(p,"butt"),e.strokeMiterlimit=V1(g,4),e.strokeDasharray=Xr(y,"none"),e.strokeDashoffset=Xr(v,"0")),e.target=ri(a),e.ariaLabel=ri(k),e.ariaDescription=ri(i),e.ariaHidden=ri(o),e.opacity=V1(fe,1),e.mixBlendMode=Xr(x,"normal"),e.imageFilter=Xr(_,"none"),e.paintOrder=Xr(A,"normal"),e.pointerEvents=Xr(E,"auto"),e.shapeRendering=Xr($,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:z,scale:"auto",optional:!0},fillOpacity:{value:U,scale:"auto",optional:!0},stroke:{value:K,scale:"auto",optional:!0},strokeOpacity:{value:ne,scale:"auto",optional:!0},strokeWidth:{value:pe,optional:!0},opacity:{value:ye,scale:"auto",optional:!0}}}function LQe(e,t){t&&e.filter(n=>Gue(t[n])).append("title").call(IQe,t)}function IQe(e,t){t&&e.text(n=>ug(t[n]))}function Wg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:c,href:f}){r&&vt(e,"aria-label",d=>r[d]),o&&vt(e,"fill",d=>o[d]),a&&vt(e,"fill-opacity",d=>a[d]),s&&vt(e,"stroke",d=>s[d]),u&&vt(e,"stroke-opacity",d=>u[d]),l&&vt(e,"stroke-width",d=>l[d]),c&&vt(e,"opacity",d=>c[d]),f&&BQe(e,d=>f[d],t),n||LQe(e,i)}function dle(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=gs(e,"clip",["frame","sphere"])),e}function zQe(e,t,n,r){let i;const{clip:o=r.clip}=t;switch(o){case"frame":{const{width:a,height:s,marginLeft:u,marginRight:l,marginTop:c,marginBottom:f}=n,d=gH();i=`url(#${d})`,e=Ki("svg:g",r).call(p=>p.append("svg:clipPath").attr("id",d).append("rect").attr("x",u).attr("y",c).attr("width",a-l-u).attr("height",s-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const s=gH();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",$2(a)({type:"Sphere"}));break}}vt(e,"aria-label",t.ariaLabel),vt(e,"aria-description",t.ariaDescription),vt(e,"aria-hidden",t.ariaHidden),vt(e,"clip-path",i)}function I0(e,t,n,r){zQe(e,t,n,r),vt(e,"fill",t.fill),vt(e,"fill-opacity",t.fillOpacity),vt(e,"stroke",t.stroke),vt(e,"stroke-width",t.strokeWidth),vt(e,"stroke-opacity",t.strokeOpacity),vt(e,"stroke-linejoin",t.strokeLinejoin),vt(e,"stroke-linecap",t.strokeLinecap),vt(e,"stroke-miterlimit",t.strokeMiterlimit),vt(e,"stroke-dasharray",t.strokeDasharray),vt(e,"stroke-dashoffset",t.strokeDashoffset),vt(e,"shape-rendering",t.shapeRendering),vt(e,"filter",t.imageFilter),vt(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;vt(e,"pointer-events",i)}function z0(e,t){jQe(e,"mix-blend-mode",t.mixBlendMode),vt(e,"opacity",t.opacity)}function BQe(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS(Sp.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Sp.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function vt(e,t,n){n!=null&&e.attr(t,n)}function jQe(e,t,n){n!=null&&e.style(t,n)}function B0(e,t,{x:n,y:r},i=go,o=go){i+=t.dx,o+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function Xr(e,t){if((e=ri(e))!==t)return e}function V1(e,t){if((e=Xn(e))!==t)return e}const UQe=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function JR(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!UQe.test(e))throw new Error(`invalid class name: ${e}`);return e}function KR(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Sv({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-i:(a+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}function QR(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:dle(n)}}function Ki(e,{document:t}){return It(a3(e).call(t.documentElement))}const hle=Math.PI,Nu=2*hle,mH=.618;function WQe({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let s,u,l="frame";if(P0(e)){let E;if({type:e,domain:u,inset:E,insetTop:n=E!==void 0?E:n,insetRight:r=E!==void 0?E:r,insetBottom:i=E!==void 0?E:i,insetLeft:o=E!==void 0?E:o,clip:l=l,...s}=e,e==null)return}typeof e!="function"&&({type:e}=ple(e));const{width:c,height:f,marginLeft:d,marginRight:p,marginTop:g,marginBottom:y}=a,v=c-d-p-o-r,b=f-g-y-n-i;if(e=e==null?void 0:e({width:v,height:b,clip:l,...s}),e==null)return;l=HQe(l,d,g,c-p,f-y);let x=d+o,_=g+n,A;if(u!=null){const[[E,$],[S,k]]=$2(e).bounds(u),O=Math.min(v/(S-E),b/(k-$));O>0?(x-=(O*(E+S)-v)/2,_-=(O*($+k)-b)/2,A=Q4({point(N,F){this.stream.point(N*O+x,F*O+_)}})):Fd("Warning: the projection could not be fit to the specified domain; using the default scale.")}return A??(A=x===0&&_===0?gle():Q4({point(E,$){this.stream.point(E+x,$+_)}})),{stream:E=>e.stream(A.stream(l(E)))}}function ple(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ta(ZJ,.7463,.4673);case"albers":return kx(Tk,.7463,.4673);case"azimuthal-equal-area":return Ta(nK,4,4);case"azimuthal-equidistant":return Ta(iK,Nu,Nu);case"conic-conformal":return kx(aK,Nu,Nu);case"conic-equal-area":return kx(Ty,6.1702,2.9781);case"conic-equidistant":return kx(uK,7.312,3.6282);case"equal-earth":return Ta(cK,5.4133,2.6347);case"equirectangular":return Ta(sK,Nu,hle);case"gnomonic":return Ta(dK,3.4641,3.4641);case"identity":return{type:gle};case"reflect-y":return{type:qQe};case"mercator":return Ta(Mk,Nu,Nu);case"orthographic":return Ta(gK,2,2);case"stereographic":return Ta(yK,2,2);case"transverse-mercator":return Ta(bK,Nu,Nu);default:throw new Error(`unknown projection type: ${e}`)}}function HQe(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Ak(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ta(e,t,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:s})=>{var l,c,f;const u=e();return a!=null&&((l=u.precision)==null||l.call(u,a)),o!=null&&((c=u.rotate)==null||c.call(u,o)),typeof s=="number"&&((f=u.clipAngle)==null||f.call(u,s)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function kx(e,t,n){const{type:r,aspectRatio:i}=Ta(e,t,n);return{type:o=>{const{parallels:a,domain:s,width:u,height:l}=o,c=r(o);return a!=null&&(c.parallels(a),s===void 0&&c.fitSize([u,l],{type:"Sphere"})),c},aspectRatio:i}}const gle=vv({stream:e=>e}),qQe=vv(Q4({point(e,t){this.stream.point(e,-t)}}));function GQe(e,t,n,r){const i=n[e],o=n[t],a=i.length,s=n[e]=new Float64Array(a).fill(NaN),u=n[t]=new Float64Array(a).fill(NaN);let l;const c=r.stream({point(f,d){s[l]=f,u[l]=d}});for(l=0;l<a;++l)c.point(i[l],o[l])}function VQe({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(P0(e)&&(e=e.type),e!=null)}function YQe(e){if(typeof(e==null?void 0:e.stream)=="function")return mH;if(P0(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=ple(e);if(t)return t}return mH}}function XQe(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(a,s){t.push(a),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)Ns(a,o);return[r,i]}const mle=new Map([["accent",K6e],["category10",J6e],["dark2",Q6e],["paired",Z6e],["pastel1",e8e],["pastel2",t8e],["set1",n8e],["set2",r8e],["set3",i8e],["tableau10",o8e]]);function JQe(e){return e!=null&&mle.has(`${e}`.toLowerCase())}const yH=new Map([...mle,["brbg",Ru(ZK,eQ)],["prgn",Ru(tQ,nQ)],["piyg",Ru(rQ,iQ)],["puor",Ru(oQ,aQ)],["rdbu",Ru(r$,L_)],["rdgy",Ru(sQ,uQ)],["rdylbu",Ru(i$,I_)],["rdylgn",Ru(lQ,cQ)],["spectral",Ru(fQ,dQ)],["burd",vH(r$,L_)],["buylrd",vH(i$,I_)],["blues",qn(LQ,IQ)],["greens",qn(zQ,BQ)],["greys",qn(jQ,UQ)],["oranges",qn(VQ,YQ)],["purples",qn(WQ,HQ)],["reds",qn(qQ,GQ)],["turbo",Fu(tZ)],["viridis",Fu(nZ)],["magma",Fu(rZ)],["inferno",Fu(iZ)],["plasma",Fu(oZ)],["cividis",Fu(XQ)],["cubehelix",Fu(JQ)],["warm",Fu(KQ)],["cool",Fu(QQ)],["bugn",qn(hQ,pQ)],["bupu",qn(gQ,mQ)],["gnbu",qn(yQ,vQ)],["orrd",qn(bQ,xQ)],["pubu",qn(AQ,SQ)],["pubugn",qn(wQ,_Q)],["purd",qn(EQ,$Q)],["rdpu",qn(CQ,kQ)],["ylgn",qn(OQ,NQ)],["ylgnbu",qn(TQ,MQ)],["ylorbr",qn(RQ,FQ)],["ylorrd",qn(DQ,PQ)],["rainbow",bH(ZQ)],["sinebow",bH(eZ)]]);function qn(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ua(t,n):e[n])}function Ru(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ua(t,n):e[n])}function vH(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ua(r=>t(1-r),n):e[n].slice().reverse())}function Fu(e){return({length:t})=>ua(e,Math.max(2,Math.floor(t)))}function bH(e){return({length:t})=>ua(e,Math.floor(t)+1).slice(0,-1)}function yle(e){const t=`${e}`.toLowerCase();if(!yH.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return yH.get(t)}function CS(e,t){const n=yle(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function KQe(e,t="greys"){const n=new Set,[r,i]=CS(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const xH=new Map([["brbg",eQ],["prgn",nQ],["piyg",iQ],["puor",aQ],["rdbu",L_],["rdgy",uQ],["rdylbu",I_],["rdylgn",cQ],["spectral",dQ],["burd",e=>L_(1-e)],["buylrd",e=>I_(1-e)],["blues",IQ],["greens",BQ],["greys",UQ],["purples",HQ],["reds",GQ],["oranges",YQ],["turbo",tZ],["viridis",nZ],["magma",rZ],["inferno",iZ],["plasma",oZ],["cividis",XQ],["cubehelix",JQ],["warm",KQ],["cool",QQ],["bugn",pQ],["bupu",mQ],["gnbu",vQ],["orrd",xQ],["pubugn",_Q],["pubu",SQ],["purd",$Q],["rdpu",kQ],["ylgnbu",MQ],["ylgn",NQ],["ylorbr",FQ],["ylorrd",PQ],["rainbow",ZQ],["sinebow",eZ]]);function ZR(e){const t=`${e}`.toLowerCase();if(!xH.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return xH.get(t)}const QQe=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function ZQe(e){return e!=null&&QQe.has(`${e}`.toLowerCase())}const vle=e=>t=>e(1-t),o8=[0,1],wH=new Map([["number",fr],["rgb",jc],["hsl",tJ],["hcl",iJ],["lab",nJ]]);function ble(e){const t=`${e}`.toLowerCase();if(!wH.has(t))throw new Error(`unknown interpolator: ${t}`);return wH.get(t)}function Ev(e,t,n,{type:r,nice:i,clamp:o,zero:a,domain:s=wle(e,n),unknown:u,round:l,scheme:c,interval:f,range:d=xn.get(e)===wv?cZe(n,s):xn.get(e)===_v?fZe(n,s):xn.get(e)===Av?o8:void 0,interpolate:p=xn.get(e)===Ol?c==null&&d!==void 0?jc:ZR(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?yg:fr,reverse:g}){if(f=xv(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof p!="function"&&(p=ble(p)),g=!!g,d!==void 0){const y=(s=$o(s)).length,v=(d=$o(d)).length;if(y!==v){if(p.length===1)throw new Error("invalid piecewise interpolator");p=vg(p,d),d=void 0}}if(p.length===1?(g&&(p=vle(p),g=!1),d===void 0&&(d=Float64Array.from(s,(y,v)=>v/(s.length-1)),d.length===2&&(d=o8)),t.interpolate((d===o8?vv:tF)(p))):t.interpolate(p),a){const[y,v]=Cc(s);(y>0||v<0)&&(s=LC(s),ag(s)!==Math.sign(y)?s[s.length-1]=0:s[0]=0)}return g&&(s=t_(s)),t.domain(s).unknown(u),i&&(t.nice(eZe(i,r)),s=t.domain()),d!==void 0&&t.range(d),o&&t.clamp(o),{type:r,domain:s,range:d,scale:t,interpolate:p,interval:f}}function eZe(e,t){return e===!0?void 0:typeof e=="number"?e:GKe(e,t)}function tZe(e,t,n){return Ev(e,Uc(),t,n)}function nZe(e,t,n){return xle(e,t,{...n,exponent:.5})}function xle(e,t,{exponent:n=1,...r}){return Ev(e,w3().exponent(n),t,{...r,type:"pow"})}function rZe(e,t,{base:n=10,domain:r=dZe(t),...i}){return Ev(e,Fk().base(n),t,{...i,domain:r})}function iZe(e,t,{constant:n=1,...r}){return Ev(e,Pk().constant(n),t,r)}function oZe(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=hZe(t),unknown:s,interpolate:u,reverse:l}){return n===void 0&&(n=u!==void 0?ua(u,i):xn.get(e)===Ol?CS(o,i):void 0),a.length>0&&(a=Ik(a,n===void 0?{length:i}:n).quantiles()),eF(e,t,{domain:a,range:n,reverse:l,unknown:s})}function aZe(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=wle(e,t),unknown:a,interpolate:s,reverse:u}){const[l,c]=Cc(o);let f;return n===void 0?(f=e_(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=s!==void 0?ua(s,r):xn.get(e)===Ol?CS(i,r):void 0):(f=ua(fr(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(d=>new Date(d)))),ag($o(o))<0&&f.reverse(),eF(e,t,{domain:f,range:n,reverse:u,unknown:a})}function eF(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?ua(o,n.length+1):xn.get(e)===Ol?CS(i,n.length+1):void 0,reverse:s}){n=$o(n);const u=ag(n);if(!isNaN(u)&&!sZe(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(a=t_(a)),{type:"threshold",scale:_3(u<0?t_(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function sZe(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=gg(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function uZe(e){return{type:"identity",scale:iQe(xn.get(e))?Nk():t=>t}}function u2(e,t=Vue){return e.length?[_p(e,({value:n})=>n===void 0?n:_p(n,t)),ui(e,({value:n})=>n===void 0?n:ui(n,t))]:[0,1]}function wle(e,t){const n=xn.get(e);return(n===wv||n===Av||n===_v?lZe:u2)(t)}function lZe(e){return[0,e.length?ui(e,({value:t})=>t===void 0?t:ui(t,Vue)):1]}function cZe(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=Ap(e,.5,({value:a})=>a===void 0?NaN:Ap(a,.25,bS)),i=t.map(a=>3*Math.sqrt(a/r)),o=30/ui(i);return o<1?i.map(a=>a*o):i}function fZe(e,t){const n=wy(e,({value:o})=>o===void 0?NaN:wy(o,Math.abs)),r=t.map(o=>12*o/n),i=60/ui(r);return i<1?r.map(o=>o*i):r}function dZe(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return u2(e,bS);if(n<0)return u2(e,BR)}return[1,10]}function hZe(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function tF(e){return(t,n)=>r=>e(t+r*(n-t))}function kS(e,t,n,r,{type:i,nice:o,clamp:a,domain:s=u2(r),unknown:u,pivot:l=0,scheme:c,range:f,symmetric:d=!0,interpolate:p=xn.get(e)===Ol?c==null&&f!==void 0?jc:ZR(c!==void 0?c:"rdbu"):fr,reverse:g}){l=+l,s=$o(s);let[y,v]=s;if(s.length>2&&Fd(`Warning: the diverging ${e} scale domain contains extra elements.`),gg(y,v)<0&&([y,v]=[v,y],g=!g),y=Math.min(y,l),v=Math.max(v,l),typeof p!="function"&&(p=ble(p)),f!==void 0&&(p=p.length===1?tF(p)(...f):vg(p,f)),g&&(p=vle(p)),d){const b=n.apply(l),x=b-n.apply(y),_=n.apply(v)-b;x<_?y=n.invert(b-_):x>_&&(v=n.invert(b+x))}return t.domain([y,l,v]).unknown(u).interpolator(p),a&&t.clamp(a),o&&t.nice(o),{type:i,domain:[y,v],pivot:l,interpolate:p,scale:t}}function pZe(e,t,n){return kS(e,Wk(),vZe,t,n)}function gZe(e,t,n){return _le(e,t,{...n,exponent:.5})}function _le(e,t,{exponent:n=1,...r}){return kS(e,C3().exponent(n=+n),wZe(n),t,{...r,type:"diverging-pow"})}function mZe(e,t,{base:n=10,pivot:r=1,domain:i=u2(t,r<0?BR:bS),...o}){return kS(e,Hk().base(n=+n),bZe,t,{domain:i,pivot:r,...o})}function yZe(e,t,{constant:n=1,...r}){return kS(e,qk().constant(n=+n),_Ze(n),t,r)}const vZe={apply(e){return e},invert(e){return e}},bZe={apply:Math.log,invert:Math.exp},xZe={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function wZe(e){return e===.5?xZe:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function _Ze(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Ale(e,t,n,r){return Ev(e,t,n,r)}function AZe(e,t,n){return Ale(e,XK(),t,n)}function SZe(e,t,n){return Ale(e,JK(),t,n)}const $v=Symbol("ordinal");function Sle(e,t,n,{type:r,interval:i,domain:o,range:a,reverse:s,hint:u}){return i=xv(i,r),o===void 0&&(o=$le(n,i,e)),(r==="categorical"||r===$v)&&(r="ordinal"),s&&(o=t_(o)),o=t.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),t.range(a)),{type:r,domain:o,range:a,scale:t,hint:u,interval:i}}function EZe(e,t,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:s,...u}){r=xv(r,n),i===void 0&&(i=$le(t,r,e));let l;if(xn.get(e)===$S)l=kZe(t),o=o===void 0?TZe(l):bi(o,YR);else if(xn.get(e)===Ol&&(o===void 0&&(n==="ordinal"||n===$v)&&(o=KQe(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const c=ZR(a),f=o[0],d=o[1]-o[0];o=({length:p})=>ua(g=>c(f+d*g),p)}else o=yle(a);if(s===P_)throw new Error(`implicit unknown on ${e} scale is not supported`);return Sle(e,M2().unknown(s),t,{...u,type:n,domain:i,range:o,hint:l})}function $Ze(e,t,{align:n=.5,padding:r=.5,...i}){return Ele(T9e().align(n).padding(r),t,i,e)}function CZe(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...a}){return Ele(b3().align(n).paddingInner(i).paddingOuter(o),t,a,e)}function Ele(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=Sle(r,e,t,n),e.round=i,e}function $le(e,t,n){const r=new zc;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(t!==void 0){const[i,o]=Cc(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&xn.get(n)===Ls)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return _we(r,ig)}function _H(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function kZe(e){return{fill:_H(e,"fill"),stroke:_H(e,"stroke")}}function TZe(e){return Ni(e.fill)?S8e:A8e}function UC(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:s,nice:u,clamp:l,zero:c,align:f,padding:d,projection:p,facet:{label:g=t}={},...y}={}){const v={};for(const[b,x]of e){const _=y[b],A=RZe(b,x,{round:xn.get(b)===Ls?s:void 0,nice:u,clamp:l,zero:c,align:f,padding:d,projection:p,..._});if(A){let{label:E=b==="fx"||b==="fy"?g:t,percent:$,transform:S,inset:k,insetTop:O=k!==void 0?k:b==="y"?r:0,insetRight:N=k!==void 0?k:b==="x"?i:0,insetBottom:F=k!==void 0?k:b==="y"?o:0,insetLeft:W=k!==void 0?k:b==="x"?a:0}=_||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");A.percent=!!$,A.label=E===void 0?OZe(x,A):E,A.transform=S,b==="x"||b==="fx"?(A.insetLeft=+W,A.insetRight=+N):(b==="y"||b==="fy")&&(A.insetTop=+O,A.insetBottom=+F),v[b]=A}}return v}function AH(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:a,interval:s,label:u}=i;t[r]=IZe(i),n[r]=o,o.type=a,s!=null&&(o.interval=s),u!=null&&(o.label=u)}return n}function MZe(e,t){const{x:n,y:r,fx:i,fy:o}=e,a=i||o?nF(t):t;i&&SH(i,a),o&&EH(o,a);const s=i||o?Cle(e,t):t;n&&SH(n,s),r&&EH(r,s)}function OZe(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!j0(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function nF(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:s,marginRight:u,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:o,height:a}}function Cle({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:u}=nF(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:e?e.scale.bandwidth()+a+i:s,height:t?t.scale.bandwidth()+r+o:u,facet:{width:s,height:u}}}function SH(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:a=0}=t,s=o+n,u=i-a-r;e.range=[s,Math.max(s,u)],j0(e)||(e.range=Tle(e)),e.scale.range(e.range)}kle(e)}function EH(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:a=0}=t,s=o+n,u=i-a-r;e.range=[Math.max(s,u),s],j0(e)?e.range.reverse():e.range=Tle(e),e.scale.range(e.range)}kle(e)}function kle(e){e.round===void 0&&DZe(e)&&NZe(e)<=30&&e.scale.round(!0)}function NZe({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),a=t-i,s=Math.abs(r-n)/Math.max(1,a+o*2);return(s-Math.floor(s))*a}function Tle(e){const t=e.scale.domain().length+Mle(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function RZe(e,t=[],n={}){const r=FZe(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&j0({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(ru)?Fd(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${xh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${xh(r)}".`):i.some(XKe)?Fd(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${xh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${xh(r)}".`):i.some(JKe)&&Fd(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${xh(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${xh(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Tx(t,n,uH);break;case"identity":switch(xn.get(e)){case Ls:n=Tx(t,n,uH);break;case $S:n=Tx(t,n,PZe);break}break;case"utc":case"time":n=Tx(t,n,UKe);break}switch(r){case"diverging":return pZe(e,t,n);case"diverging-sqrt":return gZe(e,t,n);case"diverging-pow":return _le(e,t,n);case"diverging-log":return mZe(e,t,n);case"diverging-symlog":return yZe(e,t,n);case"categorical":case"ordinal":case $v:return EZe(e,t,n);case"cyclical":case"sequential":case"linear":return tZe(e,t,n);case"sqrt":return nZe(e,t,n);case"threshold":return eF(e,t,n);case"quantile":return oZe(e,t,n);case"quantize":return aZe(e,t,n);case"pow":return xle(e,t,n);case"log":return rZe(e,t,n);case"symlog":return iZe(e,t,n);case"utc":return SZe(e,t,n);case"time":return AZe(e,t,n);case"point":return $Ze(e,t,n);case"band":return CZe(e,t,n);case"identity":return uZe(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function xh(e){return typeof e=="symbol"?e.description:e}const $H={toString:()=>"projection"};function FZe(e,t,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:s}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=$H);for(const{type:l}of t)if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}if(n===$H)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const u=xn.get(e);if(u===wv)return"sqrt";if(u===Av||u===_v)return"linear";if(u===$S)return"ordinal";if((r||i||[]).length>2)return a8(u);if(r!==void 0){if(lH(r))return a8(u);if(ru(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(lH))return a8(u);if(l.some(ru))return"utc"}if(u===Ol){if(a!=null||ZQe(o))return"diverging";if(JQe(o))return"categorical"}return"linear"}function a8(e){switch(e){case Ls:return"point";case Ol:return $v;default:return"ordinal"}}function j0({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===$v}function Mle({type:e}){return e==="threshold"}function DZe({type:e}){return e==="point"||e==="band"}function PA(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function Tx(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function PZe(e){return bi(e,YR)}function LZe(e){return t=>{if(!xn.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function IZe({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:s,pivot:u}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:LC(n),...r!==void 0&&{range:LC(r)},...a!==void 0&&{transform:a},...s&&{percent:s},...l!==void 0&&{unknown:l},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function zZe(e,t,n={}){let r=.5-go,i=.5+go,o=.5+go,a=.5-go;for(const{marginTop:y,marginRight:v,marginBottom:b,marginLeft:x}of t)y>r&&(r=y),v>i&&(i=v),b>o&&(o=b),x>a&&(a=x);let{margin:s,marginTop:u=s!==void 0?s:r,marginRight:l=s!==void 0?s:i,marginBottom:c=s!==void 0?s:o,marginLeft:f=s!==void 0?s:a}=n;u=+u,l=+l,c=+c,f=+f;let{width:d=640,height:p=BZe(e,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,u-r+c-o)}=n;d=+d,p=+p;const g={width:d,height:p,marginTop:u,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:y,marginTop:v=y!==void 0?y:u,marginRight:b=y!==void 0?y:l,marginBottom:x=y!==void 0?y:c,marginLeft:_=y!==void 0?y:f}=n.facet??{};v=+v,b=+b,x=+x,_=+_,g.facet={marginTop:v,marginRight:b,marginBottom:x,marginLeft:_}}return g}function BZe({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,d=YQe(i);if(d){const g=r?r.scale.domain().length:1,y=(1.1*f-.1)/(1.1*g-.1)*d,v=Math.max(.1,Math.min(10,y));return Math.round((a-c-u)*v+s+l)}const p=t?j0(t)?t.scale.domain().length:Math.max(7,17/f):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const g=CH("y",t)/(CH("x",e)*o),y=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,b=y*(a-c-u)-e.insetLeft-e.insetRight;return(g*b+t.insetTop+t.insetBottom)/v+s+l}return!!(t||n)*Math.max(1,Math.min(60,p*f))*20+!!r*30+60}function CH(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=u=>Math.pow(u,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,a]=Cc(r);return Math.abs(i(a)-i(o))}function jZe(e,t){const{fx:n,fy:r}=UC(e,t),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?bwe(i,o).map(([a,s],u)=>({x:a,y:s,i:u})):i?i.map((a,s)=>({x:a,i:s})):o?o.map((a,s)=>({y:a,i:s})):void 0}function UZe(e,{x:t,y:n}){return t&&(t=WC(t)),n&&(n=WC(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function rF(e,{fx:t,fy:n}){const r=bv(e),i=t==null?void 0:t.value,o=n==null?void 0:n.value;return t&&n?_9(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):t?_9(r,a=>(a.fx=i[a[0]],a),a=>i[a]):_9(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function WZe(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function HZe(e){const t=[],n=new Uint32Array(x2(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const qZe=new Map([["top",s8],["right",c8],["bottom",u8],["left",l8],["top-left",Mx(s8,l8)],["top-right",Mx(s8,c8)],["bottom-left",Mx(u8,l8)],["bottom-right",Mx(u8,c8)],["top-empty",YZe],["right-empty",KZe],["bottom-empty",XZe],["left-empty",JZe],["empty",QZe]]);function GZe(e){if(e==null)return null;const t=qZe.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const kH=new WeakMap;function WC(e){let t=kH.get(e);return t||kH.set(e,t=new xy(bi(e,(n,r)=>[n,r]))),t}function Mf(e,t){return WC(e).get(t)}function VZe(e,t,n){return t=Cx(t),n=Cx(n),e.find(r=>Object.is(Cx(r.x),t)&&Object.is(Cx(r.y),n))}function TS(e,t,n){var r;return(r=VZe(e,t,n))==null?void 0:r.empty}function s8(e,{y:t},{y:n}){return t?Mf(t,n)===0:!0}function u8(e,{y:t},{y:n}){return t?Mf(t,n)===t.length-1:!0}function l8(e,{x:t},{x:n}){return t?Mf(t,n)===0:!0}function c8(e,{x:t},{x:n}){return t?Mf(t,n)===t.length-1:!0}function YZe(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=Mf(t,r);if(o>0)return TS(e,n,t[o-1])}function XZe(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=Mf(t,r);if(o<t.length-1)return TS(e,n,t[o+1])}function JZe(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=Mf(t,n);if(o>0)return TS(e,t[o-1],r)}function KZe(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=Mf(t,n);if(o<t.length-1)return TS(e,t[o+1],r)}function QZe(e,t,{empty:n}){return n}function Mx(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function f8(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class mu{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:s,fy:u,sort:l,dx:c=0,dy:f=0,margin:d=0,marginTop:p=d,marginRight:g=d,marginBottom:y=d,marginLeft:v=d,clip:b=i==null?void 0:i.clip,channels:x,tip:_,render:A}=r;if(this.data=t,this.sort=og(l)?l:null,this.initializer=sg(r).initializer,this.transform=this.initializer?r.transform:ale(r).transform,o===null||o===!1?this.facet=null:(this.facet=gs(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===ww&&typeof s=="string"?[s]:s,this.fy=t===ww&&typeof u=="string"?[u]:u),this.facetAnchor=GZe(a),n=ile(n),x!==void 0&&(n={...ZZe(x),...n}),i!==void 0&&(n={...PQe(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([E,$])=>{if(wS($.value)){const{value:S,label:k=$.label,scale:O=$.scale}=$.value;$={...$,label:k,scale:O,value:S}}if(t===ww&&typeof $.value=="string"){const{value:S}=$;$={...$,value:[S]}}return[E,$]}).filter(([E,{value:$,optional:S}])=>{if($!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${E}`)})),this.dx=+c,this.dy=+f,this.marginTop=+p,this.marginRight=+g,this.marginBottom=+y,this.marginLeft=+v,this.clip=dle(b),this.tip=eet(_),this.facet==="super"){if(s||u)throw new Error("super-faceting cannot use fx or fy");for(const E in this.channels){const{scale:$}=n[E];if(!($!=="x"&&$!=="y"))throw new Error("super-faceting cannot use x or y")}}A!=null&&(this.render=Nle(A,this.render))}initialize(t,n,r){let i=$o(this.data);t===void 0&&i!=null&&(t=[bv(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=$o(i)),t!==void 0&&(t.original=o);const a=AQe(this.channels,i);return this.sort!=null&&EQe(i,t,a,n,this.sort),{data:i,facets:t,channels:a}}filter(t,n,r){for(const i in n){const{filter:o=g0}=n[i];if(o!==null){const a=r[i];t=t.filter(s=>o(a[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&GQe(i,o,n,r.projection)}}scale(t,n,r){const i=SQe(t,n);return r.projection&&this.project(t,i,r),i}}function Ole(...e){return e.plot=mu.prototype.plot,e}function Nle(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,a,s){return e.call(this,n,r,i,o,a,(u,l,c,f,d)=>t.call(this,u,l,c,f,d,s))}}function ZZe(e){return Object.fromEntries(Object.entries(ile(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:AS(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function eet(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?gs(e,"tip",["x","y","xy"]):e}function Rle(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:P0(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const TH=new WeakMap;function iF(e,t,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:s,render:u,...l}={}){return a=+a,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),s={...s,py:{value:o,scale:"y"}}),{x:n,y:r,channels:s,...l,render:Nle(function(c,f,d,p,g,y){g={...g,pointerSticky:!1};const v=g.ownerSVGElement,{data:b}=g.getMarkState(this);let x=TH.get(v);x||TH.set(v,x={sticky:!1,roots:[],renders:[]});let _=x.renders.push(Q)-1;const{x:A,y:E,fx:$,fy:S}=f;let k=$?$(c.fx)-p.marginLeft:0,O=S?S(c.fy)-p.marginTop:0;A!=null&&A.bandwidth&&(k+=A.bandwidth()/2),E!=null&&E.bandwidth&&(O+=E.bandwidth()/2);const N=c.fi!=null;let F;if(N){let fe=x.facetStates;fe||(x.facetStates=fe=new Map),F=fe.get(this),F||fe.set(this,F=new Map)}const[W,I]=Sv(this,p),{px:M,py:D}=d,L=M?fe=>M[fe]:Dle(d,W),j=D?fe=>D[fe]:Ple(d,I);let z,H,U,V;function K(fe,pe){if(N)if(V&&(V=cancelAnimationFrame(V)),fe==null)F.delete(c.fi);else{F.set(c.fi,pe),V=requestAnimationFrame(()=>{V=null;for(const[te,Se]of F)if(Se<pe||Se===pe&&te<c.fi){fe=null;break}Q(fe)});return}Q(fe)}function Q(fe){if(z===fe&&U===x.sticky)return;z=fe,U=g.pointerSticky=x.sticky;const pe=z==null?[]:[z];N&&(pe.fx=c.fx,pe.fy=c.fy,pe.fi=c.fi);const te=y(pe,f,d,p,g);if(H){if(N){const Se=H.parentNode,Ae=H.getAttribute("transform"),re=te.getAttribute("transform");Ae?te.setAttribute("transform",Ae):te.removeAttribute("transform"),re?Se.setAttribute("transform",re):Se.removeAttribute("transform"),te.removeAttribute("aria-label"),te.removeAttribute("aria-description"),te.removeAttribute("aria-hidden")}H.replaceWith(te)}return x.roots[_]=H=te,z==null&&(F==null?void 0:F.size)>1||g.dispatchValue(z==null?null:b[z]),te}function ne(fe){if(x.sticky||fe.pointerType==="mouse"&&fe.buttons===1)return;let[pe,te]=Cs(fe);pe-=k,te-=O;const Se=pe<p.marginLeft||pe>p.width-p.marginRight?1:e,Ae=te<p.marginTop||te>p.height-p.marginBottom?1:t;let re=null,qe=a*a;for(const _e of c){const Ze=Se*(L(_e)-pe),Ve=Ae*(j(_e)-te),ht=Ze*Ze+Ve*Ve;ht<=qe&&(re=_e,qe=ht)}if(re!=null&&(e!==1||t!==1)){const _e=L(re)-pe,Ze=j(re)-te;qe=_e*_e+Ze*Ze}K(re,qe)}function ce(fe){fe.pointerType==="mouse"&&z!=null&&(x.sticky&&x.roots.some(pe=>pe==null?void 0:pe.contains(fe.target))||(x.sticky?(x.sticky=!1,x.renders.forEach(pe=>pe(null))):(x.sticky=!0,Q(z)),fe.stopImmediatePropagation()))}function ye(fe){fe.pointerType==="mouse"&&(x.sticky||K(null))}return v.addEventListener("pointerenter",ne),v.addEventListener("pointermove",ne),v.addEventListener("pointerdown",ce),v.addEventListener("pointerleave",ye),Q(null)},u)}}function Fle(e){return iF(1,1,e)}function tet(e){return iF(1,.01,e)}function net(e){return iF(.01,1,e)}function Dle({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Ple({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Lle(e){return j0(e)&&e.interval===void 0?void 0:"tabular-nums"}function ret(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-s)/64,tickFormat:d,fontVariant:p=Lle(e),round:g=!0,opacity:y,className:v}=t;const b=QR(t);v=JR(v),y=oi(y)[1],d===null&&(d=()=>null);const x=Ki("svg",b).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(W=>W.append("style").text(`.${v}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${v}-ramp text {
  white-space: pre;
}`)).call(KR,c);let _=W=>W.selectAll(".tick line").attr("y1",a+u-o),A;const E=g?(W,I)=>W.rangeRound(I):(W,I)=>W.range(I),{type:$,domain:S,range:k,interpolate:O,scale:N,pivot:F}=e;if(O){const W=k===void 0?O:vg(O.length===1?tF(O):O,k);A=E(N.copy(),ua(fr(l,i-s),Math.min(S.length+(F!==void 0),k===void 0?1/0:k.length)));const I=256,M=b.document.createElement("canvas");M.width=I,M.height=1;const D=M.getContext("2d");for(let L=0,j=I-1;L<I;++L)D.fillStyle=W(L/j),D.fillRect(L,0,1,1);x.append("image").attr("opacity",y).attr("x",l).attr("y",a).attr("width",i-l-s).attr("height",o-a-u).attr("preserveAspectRatio","none").attr("xlink:href",M.toDataURL())}else if($==="threshold"){const W=S,I=d===void 0?M=>M:typeof d=="string"?mf(d):d;A=E(Uc().domain([-1,k.length-1]),[l,i-s]),x.append("g").attr("fill-opacity",y).selectAll().data(k).enter().append("rect").attr("x",(M,D)=>A(D-1)).attr("y",a).attr("width",(M,D)=>A(D)-A(D-1)).attr("height",o-a-u).attr("fill",M=>M),f=bi(W,(M,D)=>D),d=M=>I(W[M],M)}else A=E(b3().domain(S),[l,i-s]),x.append("g").attr("fill-opacity",y).selectAll().data(S).enter().append("rect").attr("x",A).attr("y",a).attr("width",Math.max(0,A.bandwidth()-1)).attr("height",o-a-u).attr("fill",N),_=()=>{};return x.append("g").attr("transform",`translate(0,${o-u})`).call(Uwe(A).ticks(Array.isArray(f)?null:f,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Xr(p,"normal")).call(_).call(W=>W.select(".domain").remove()),n!==void 0&&x.append("text").attr("x",l).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),x.node()}const Ile=Math.PI/180;function zle(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=d8(n),e.markerMid=d8(r),e.markerEnd=d8(i)}function d8(e){if(e==null||e===!1)return null;if(e===!0)return OH;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return MH("auto");case"arrow-reverse":return MH("auto-start-reverse");case"dot":return iet;case"circle":case"circle-fill":return OH;case"circle-stroke":return oet}throw new Error(`invalid marker: ${e}`)}function MH(e){return(t,n)=>Ki("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function iet(e,t){return Ki("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function OH(e,t){return Ki("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function oet(e,t){return Ki("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let aet=0;function Ble(e,t,{stroke:n},r){return set(e,t,n&&(i=>n[i]),r)}function set(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const s=new Map;function u(l){return function(c){const f=o(c);let d=s.get(l);d||s.set(l,d=new Map);let p=d.get(f);if(!p){const g=this.parentNode.insertBefore(l(f,a),this),y=`plot-marker-${++aet}`;g.setAttribute("id",y),d.set(f,p=`url(#${y})`)}return p}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function jle({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=Wle(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function Ule({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=Wle(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function Wle(e,t,n){return e===void 0&&t===void 0&&n===void 0?go?[1,0]:[.5,.5]:[t,n]}function Hle(e,{interval:t}){return e={...AS(e)},e.interval=qR(e.interval===void 0?t:e.interval),e}function qle(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:a}=n,{value:s,interval:u}=Hle(i,n);if(s==null||u==null&&!r)return n;const l=_S(i);if(u==null){let p;const g={transform:y=>p||(p=lf(y,s)),label:l};return{...n,[e]:void 0,[`${e}1`]:o===void 0?g:o,[`${e}2`]:a===void 0?g:a}}let c,f;function d(p){return f!==void 0&&p===c?f:f=bi(lf(c=p,s),g=>u.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:d,label:l}:o,[`${e}2`]:a===void 0?{transform:p=>d(p).map(g=>u.offset(g)),label:l}:a})}function Gle(e,t,n){const{[e]:r}=n,{value:i,interval:o}=Hle(r,n);return i==null||o==null?n:t({...n,[e]:{label:_S(r),transform:a=>{const s=bi(lf(a,i),l=>o.floor(l)),u=s.map(l=>o.offset(l));return s.map(ru(s)?(l,c)=>l==null||isNaN(l=+l)||(c=u[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=u[c],c==null)?NaN:(+l+ +c)/2)}}})}function uet(e={}){return qle("x",jle,e)}function cet(e={}){return qle("y",Ule,e)}function fet(e={}){return Gle("x",jle,e)}function det(e={}){return Gle("y",Ule,e)}const Vle={ariaLabel:"rule",fill:null,stroke:"currentColor"};class het extends mu{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:s=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Rle(n,"x"),Vle),this.insetTop=Xn(s),this.insetBottom=Xn(u),zle(this,n)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:u,y1:l,y2:c}=r,{width:f,height:d,marginTop:p,marginRight:g,marginLeft:y,marginBottom:v}=i,{insetTop:b,insetBottom:x}=this;return Ki("svg:g",o).call(I0,this,i,o).call(B0,this,{x:u&&a},go,0).call(_=>_.selectAll().data(t).enter().append("line").call(z0,this).attr("x1",u?A=>u[A]:(y+f-g)/2).attr("x2",u?A=>u[A]:(y+f-g)/2).attr("y1",l&&!PA(s)?A=>l[A]+b:p+b).attr("y2",c&&!PA(s)?s.bandwidth?A=>c[A]+s.bandwidth()-x:A=>c[A]-x:d-v-x).call(Wg,this,r).call(Ble,this,r,o)).node()}}class pet extends mu{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:s=a,insetLeft:u=a}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Rle(n,"y"),Vle),this.insetRight=Xn(s),this.insetLeft=Xn(u),zle(this,n)}render(t,n,r,i,o){const{x:a,y:s}=n,{y:u,x1:l,x2:c}=r,{width:f,height:d,marginTop:p,marginRight:g,marginLeft:y,marginBottom:v}=i,{insetLeft:b,insetRight:x}=this;return Ki("svg:g",o).call(I0,this,i,o).call(B0,this,{y:u&&s},0,go).call(_=>_.selectAll().data(t).enter().append("line").call(z0,this).attr("x1",l&&!PA(a)?A=>l[A]+b:y+b).attr("x2",c&&!PA(a)?a.bandwidth?A=>c[A]+a.bandwidth()-x:A=>c[A]-x:f-g-x).attr("y1",u?A=>u[A]:(p+d-v)/2).attr("y2",u?A=>u[A]:(p+d-v)/2).call(Wg,this,r).call(Ble,this,r,o)).node()}}function get(e,t){let{x:n=Ml,y:r,y1:i,y2:o,...a}=cet(t);return[i,o]=Yle(r,i,o),new het(e,{...a,x:n,y1:i,y2:o})}function met(e,t){let{y:n=Ml,x:r,x1:i,x2:o,...a}=uet(t);return[i,o]=Yle(r,i,o),new pet(e,{...a,y:n,x1:i,x2:o})}function Yle(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function oF(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const yet={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Xle="­";class aF extends mu{constructor(t,n={}){const{x:r,y:i,text:o=L0(t)&&nle(t)?Ml:IKe,frameAnchor:a,textAnchor:s=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:u=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:d,fontFamily:p=d?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:y,fontVariant:v,fontWeight:b,rotate:x}=n,[_,A]=oi(x,0),[E,$]=Aet(g);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:E,optional:!0},rotate:{value:YKe(_),optional:!0},text:{value:o,filter:Gue,optional:!0}},n,yet),this.rotate=A,this.textAnchor=Xr(s,"middle"),this.lineAnchor=gs(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=Jle(f),this.monospace=!!d,this.fontFamily=ri(p),this.fontSize=$,this.fontStyle=ri(y),this.fontVariant=ri(v),this.fontWeight=ri(b),this.frameAnchor=ES(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=Zle(this),this.clipLine=ece(this)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:u,y:l,rotate:c,text:f,title:d,fontSize:p}=r,{rotate:g}=this,[y,v]=Sv(this,i);return Ki("svg:g",o).call(I0,this,i,o).call(Qle,this,f,i).call(B0,this,{x:u&&a,y:l&&s}).call(b=>b.selectAll().data(t).enter().append("text").call(z0,this).call(vet,this,f,d).attr("transform",oF`translate(${u?x=>u[x]:y},${l?x=>l[x]:v})${c?x=>` rotate(${c[x]})`:g?` rotate(${g})`:""}`).call(vt,"font-size",p&&(x=>p[x])).call(Wg,this,r)).node()}}function Jle(e){return e==null?null:gs(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function vet(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:s,clipLine:u}=t;e.each(function(l){const c=s(ug(n[l])??"").map(u),f=c.length,d=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let p=0;for(let g=0;g<f;++g){if(++p,!c[g])continue;const y=this.ownerDocument.createElementNS(Sp.svg,"tspan");y.setAttribute("x",0),g===p-1?y.setAttribute("y",`${(d+g)*o}em`):y.setAttribute("dy",`${p*o}em`),y.textContent=c[g],this.appendChild(y),p=0}}else d&&this.setAttribute("y",`${d*o}em`),this.textContent=c[0];if(a&&!r&&c[0]!==n[l]){const p=this.ownerDocument.createElementNS(Sp.svg,"title");p.textContent=n[l],this.appendChild(p)}})}function Kle(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=WR(t,n)),new aF(e,{...r,x:t,y:n})}function bet(e,{x:t=Ml,...n}={}){return new aF(e,det({...n,x:t}))}function xet(e,{y:t=Ml,...n}={}){return new aF(e,fet({...n,y:t}))}function Qle(e,t,n){vt(e,"text-anchor",t.textAnchor),vt(e,"font-family",t.fontFamily),vt(e,"font-size",t.fontSize),vt(e,"font-style",t.fontStyle),vt(e,"font-variant",t.fontVariant===void 0?wet(n):t.fontVariant),vt(e,"font-weight",t.fontWeight)}function wet(e){return e&&(KKe(e)||ru(e))?"tabular-nums":void 0}const _et=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Aet(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),_et.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Eet(e,t,n){const r=[];let i,o=0;for(const[a,s,u]of $et(e)){if(i===void 0&&(i=a),o>i&&n(e,i,s)>t&&(r.push(e.slice(i,o)+(e[o-1]===Xle?"-":"")),i=a),u){r.push(e.slice(i,s)),i=void 0;continue}o=s}return r}function*$et(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case Xle:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const NH={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function sF(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Hg(e,i))r+=NH[e[i]]??(nce(e,i)?120:NH.e);return r}function uF(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Hg(e,i))r+=nce(e,i)?200:100;return r}function Zle({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?uF:sF,i=t*100;return o=>Eet(o,i,r)}function ece({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?uF:sF,i=t*100;switch(n){case"clip-start":return o=>FH(o,i,r,"");case"clip-end":return o=>RH(o,i,r,"");case"ellipsis-start":return o=>FH(o,i,r,cp);case"ellipsis-middle":return o=>Cet(o,i,r,cp);case"ellipsis-end":return o=>RH(o,i,r,cp)}}const cp="…";function lg(e,t,n,r){const i=[];let o=0;for(let a=0,s=0,u=e.length;a<u;a=s){s=Hg(e,a);const l=n(e,a,s);if(o+l>t){for(o+=r;o>t&&a>0;)s=a,a=i.pop(),o-=n(e,a,s);return[a,t-o]}o+=l,i.push(a)}return[-1,0]}function RH(e,t,n,r){e=e.trim();const i=n(r),[o]=lg(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function Cet(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[a,s]=lg(e,t/2,n,o),[u]=lg(e,i-t/2-s+o,n,-o);return u<0?r:e.slice(0,a).trimEnd()+r+e.slice(Hg(e,u)).trimStart()}function FH(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[a]=lg(e,i-t+o,n,-o);return a<0?r:r+e.slice(Hg(e,a)).trimStart()}const HC=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,DH=new RegExp("\\p{Extended_Pictographic}","uy");function Hg(e,t){return t+=ket(e,t)?2:1,Met(e,t)&&(t=HC.lastIndex),Tet(e,t)?Hg(e,t+1):t}function tce(e,t){return e.charCodeAt(t)<128}function ket(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Tet(e,t){return e.charCodeAt(t)===8205}function Met(e,t){return tce(e,t)?!1:(HC.lastIndex=t,HC.test(e))}function nce(e,t){return tce(e,t)?!1:(DH.lastIndex=t,DH.test(e))}const Oet={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},rce=3.5,Net=rce*5,ice={draw(e,t,n){const r=t*n/Net;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},Ret={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},Fet=new Map([["arrow",ice],["spike",Ret]]);function Det(e){return e&&typeof e.draw=="function"}function Pet(e){if(Det(e))return e;const t=Fet.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class oce extends mu{constructor(t,n={}){const{x:r,y:i,r:o=rce,length:a,rotate:s,shape:u=ice,anchor:l="middle",frameAnchor:c}=n,[f,d]=oi(a,12),[p,g]=oi(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,Oet),this.r=+o,this.length=d,this.rotate=g,this.shape=Pet(u),this.anchor=gs(l,"anchor",["start","middle","end"]),this.frameAnchor=ES(c)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:u,y:l,length:c,rotate:f}=r,{length:d,rotate:p,anchor:g,shape:y,r:v}=this,[b,x]=Sv(this,i);return Ki("svg:g",o).call(I0,this,i,o).call(B0,this,{x:u&&a,y:l&&s}).call(_=>_.selectAll().data(t).enter().append("path").call(z0,this).attr("transform",oF`translate(${u?A=>u[A]:b},${l?A=>l[A]:x})${f?A=>` rotate(${f[A]})`:p?` rotate(${p})`:""}${g==="start"?"":g==="end"?c?A=>` translate(0,${c[A]})`:` translate(0,${d})`:c?A=>` translate(0,${c[A]/2})`:` translate(0,${d/2})`}`).attr("d",c?A=>{const E=gd();return y.draw(E,c[A],v),E}:(()=>{const A=gd();return y.draw(A,d,v),A})()).call(Wg,this,r)).node()}}function Let(e,t={}){const{x:n=Ml,...r}=t;return new oce(e,{...r,x:n})}function Iet(e,t={}){const{y:n=Ml,...r}=t;return new oce(e,{...r,y:n})}function Of(e,t){return arguments.length<2&&!L0(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function MS({anchor:e}={},t){return e===void 0?t[0]:gs(e,"anchor",t)}function ace(e){return MS(e,["left","right"])}function sce(e){return MS(e,["right","left"])}function uce(e){return MS(e,["bottom","top"])}function lce(e){return MS(e,["top","bottom"])}function cce(){const[e,t]=Of(...arguments);return dce("y",ace(t),e,t)}function zet(){const[e,t]=Of(...arguments);return dce("fy",sce(t),e,t)}function fce(){const[e,t]=Of(...arguments);return hce("x",uce(t),e,t)}function Bet(){const[e,t]=Of(...arguments);return hce("fx",lce(t),e,t)}function dce(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:d,textStrokeWidth:p,tickSize:g=e==="y"?6:0,tickPadding:y,tickRotate:v,x:b,margin:x,marginTop:_=x===void 0?20:x,marginRight:A=x===void 0?t==="right"?40:0:x,marginBottom:E=x===void 0?20:x,marginLeft:$=x===void 0?t==="left"?40:0:x,label:S,labelAnchor:k,labelArrow:O,labelOffset:N,...F}){return g=Xn(g),y=Xn(y),v=Xn(v),k!==void 0&&(k=gs(k,"labelAnchor",["center","top","bottom"])),O=wce(O),Ole(g&&!Ni(o)?jet(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:g,tickPadding:y,tickRotate:v,x:b,...F}):null,Ni(u)?null:Wet(e,t,n,{fill:u,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:p,textAnchor:c,tickSize:g,tickPadding:y,tickRotate:v,x:b,marginTop:_,marginRight:A,marginBottom:E,marginLeft:$,...F}),!Ni(u)&&S!==null?Kle([],yce({fill:u,fillOpacity:l,...F},function(W,I,M,D,L){const j=D[e],{marginTop:z,marginRight:H,marginBottom:U,marginLeft:V}=e==="y"&&L.inset||L,K=k??(j.bandwidth?"center":"top"),Q=N??(t==="right"?H:V)-3;return K==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=K,this.frameAnchor=`${K}-${t}`,this.rotate=0),this.dy=K==="top"?3-z:K==="bottom"?U-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[xce(e,j,{anchor:t,label:S,labelAnchor:K,labelArrow:O})]}}}})):null)}function hce(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:d,textStrokeWidth:p,tickSize:g=e==="x"?6:0,tickPadding:y,tickRotate:v,y:b,margin:x,marginTop:_=x===void 0?t==="top"?30:0:x,marginRight:A=x===void 0?20:x,marginBottom:E=x===void 0?t==="bottom"?30:0:x,marginLeft:$=x===void 0?20:x,label:S,labelAnchor:k,labelArrow:O,labelOffset:N,...F}){return g=Xn(g),y=Xn(y),v=Xn(v),k!==void 0&&(k=gs(k,"labelAnchor",["center","left","right"])),O=wce(O),Ole(g&&!Ni(o)?Uet(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:g,tickPadding:y,tickRotate:v,y:b,...F}):null,Ni(u)?null:Het(e,t,n,{fill:u,fillOpacity:l,stroke:f,strokeOpacity:d,strokeWidth:p,textAnchor:c,tickSize:g,tickPadding:y,tickRotate:v,y:b,marginTop:_,marginRight:A,marginBottom:E,marginLeft:$,...F}),!Ni(u)&&S!==null?Kle([],yce({fill:u,fillOpacity:l,...F},function(W,I,M,D,L){const j=D[e],{marginTop:z,marginRight:H,marginBottom:U,marginLeft:V}=e==="x"&&L.inset||L,K=k??(j.bandwidth?"center":"right"),Q=N??(t==="top"?z:U)-3;return K==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${K}`,this.textAnchor=K==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=K==="right"?H-3:K==="left"?3-V:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[xce(e,j,{anchor:t,label:S,labelAnchor:K,labelArrow:O})]}}}})):null)}function jet(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:d=0,y:p=e==="y"?void 0:null,...g}){return qg(Iet,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:s,y:p,...g,dx:t==="left"?+d-go+ +c:+d+go-f,anchor:"start",length:u,shape:t==="left"?Qet:Zet})}function Uet(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:d=0,x:p=e==="x"?void 0:null,...g}){return qg(Let,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:s,x:p,...g,dy:t==="bottom"?+d-go-f:+d+go+ +c,anchor:"start",length:u,shape:t==="bottom"?Jet:Ket})}function Wet(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Ile):0),text:u,textAnchor:l=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:c=a>60?"top":a<-60?"bottom":"middle",fontVariant:f,inset:d=0,insetLeft:p=d,insetRight:g=d,dx:y=0,y:v=e==="y"?void 0:null,...b}){return qg(xet,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:a,y:v,...b,dx:t==="left"?+y-o-s+ +p:+y+ +o+ +s-g},function(x,_,A,E,$){f===void 0&&(this.fontVariant=bce(x)),u===void 0&&($.text=vce(x,_,A,E,t))})}function Het(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Ile):0),text:u,textAnchor:l=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:d=0,insetTop:p=d,insetBottom:g=d,dy:y=0,x:v=e==="x"?void 0:null,...b}){return qg(bet,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:a,x:v,...b,dy:t==="bottom"?+y+ +o+ +s-g:+y-o-s+ +p},function(x,_,A,E,$){f===void 0&&(this.fontVariant=bce(x)),u===void 0&&($.text=vce(x,_,A,E,t))})}function qet(){const[e,t]=Of(...arguments);return pce("y",ace(t),e,t)}function Get(){const[e,t]=Of(...arguments);return pce("fy",sce(t),e,t)}function Vet(){const[e,t]=Of(...arguments);return gce("x",uce(t),e,t)}function Yet(){const[e,t]=Of(...arguments);return gce("fx",lce(t),e,t)}function pce(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:a=t==="right"?i:null,...s}){return qg(met,e,t,`${e}-grid`,n,{y:r,x1:o,x2:a,...mce(s)})}function gce(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:a=t==="bottom"?i:null,...s}){return qg(get,e,t,`${e}-grid`,n,{x:r,y1:o,y2:a,...mce(s)})}function mce({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function yce({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:u,shapeRendering:l,clip:c=!1},f){return[,e]=o2(e),[,t]=oi(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:u,shapeRendering:l,clip:c,initializer:f}}function qg(e,t,n,r,i,o,a){let s;function u(f,d,p,g,y,v){const b=f==null&&(t==="fx"||t==="fy"),{[t]:x}=g;if(!x)throw new Error(`missing scale: ${t}`);const _=x.domain();let{interval:A,ticks:E,tickFormat:$,tickSpacing:S=t==="x"?80:35}=o;if(typeof E=="string"&&_ce(x)&&(A=E,E=void 0),E===void 0&&(E=xv(A,x.type)??Xet(x,S)),f==null){if(L0(E))f=$o(E);else if(VKe(E))f=h8(E,...Cc(_));else if(x.interval){let O=x.interval;if(x.ticks){const[N,F]=Cc(_),W=(F-N)/O[yv];O=iH(O,W/E)??O,f=h8(O,N,F)}else{f=_;const N=f.length;O=iH(O,N/E)??O,O!==x.interval&&(f=h8(O,...Cc(f)))}if(O===x.interval){const N=Math.round(f.length/E);N>1&&(f=f.filter((F,W)=>W%N===0))}}else x.ticks?f=x.ticks(E):f=_;if(!x.ticks&&f.length&&f!==_){const O=new zc(_);f=f.filter(N=>O.has(N)),f.length||Fd(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[bv(f)]:s[t]={scale:t,value:Ml}}a==null||a.call(this,x,f,E,$,s);const k=Object.fromEntries(Object.entries(s).map(([O,N])=>[O,{...N,value:lf(f,N.value)}]));return b&&(d=v.filterFacets(f,k)),{data:f,facets:d,channels:k}}const l=sg(o).initializer,c=e(i,sg({...o,initializer:u},l));return i==null?(s=c.channels,c.channels={}):s={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Xet(e,t){const[n,r]=Cc(e.range());return(r-n)/t}function vce(e,t,n,r,i){return{value:lF(e,t,n,r,i)}}function lF(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&ru(t)?NKe(t,i)??ug:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?ug:typeof r=="string"?(ru(e.domain())?_g:mf)(r):vv(r)}function h8(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Jet={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Ket={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Qet={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Zet={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function bce(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function ett(e){return Math.sign(ag(e.domain()))*Math.sign(ag(e.range()))}function xce(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&_ce(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const a=ett(t);a&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function wce(e="auto"){return Ni(e)?!1:typeof e=="boolean"?e:gs(e,"labelArrow",["auto","up","right","down","left"])}function _ce(e){return ru(e.domain())}function PH(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function ttt(e,{opacity:t,...n}={}){if(!j0(e)&&!Mle(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Ace(e,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",oi(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function ntt(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:Ni(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...s}={},u){const[f,d]=o2(t),[p,g]=o2(r),y=PH(u,f),v=PH(u,p),b=a*a*Math.PI;return n=oi(n)[1],i=oi(i)[1],o=oi(o)[1],Ace(e,s,(x,_,A,E)=>x.append("svg").attr("viewBox","-8 -8 16 16").attr("width",A).attr("height",E).attr("fill",f==="color"?$=>y.scale($):d).attr("fill-opacity",n).attr("stroke",p==="color"?$=>v.scale($):g).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",$=>{const S=gd();return e.scale($).draw(S,b),S}))}function Ace(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=Lle(e),swatchSize:a=15,swatchWidth:s=a,swatchHeight:u=a,marginLeft:l=0,className:c,style:f,width:d}=t;const p=QR(t);c=JR(c),i=lF(e.scale,e.domain,void 0,i);const g=Ki("div",p).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let y;return r!=null?(y=`.${c}-swatches-columns .${c}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${c}-swatches-columns .${c}-swatch::before {
  flex-shrink: 0;
}
.${c}-swatches-columns .${c}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,s,u).call(v=>v.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(y=`.${c}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${c}-swatches-wrap .${c}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,s,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),g.call(v=>v.insert("style","*").text(`.${c}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${c}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${y}`)).style("margin-left",l?`${+l}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Xr(o,"normal")).call(KR,f).node()}const qC=new Map([["symbol",ntt],["color",Ece],["opacity",itt]]);function rtt(e,t,n={}){return(r,i)=>{if(!qC.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return qC.get(r)(e[r],Sce(t,n[r],i),o=>e[o])}}function Sce({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return tQe(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Ece(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return ttt(e,n);case"ramp":return ret(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function itt({type:e,interpolate:t,...n},{legend:r=!0,color:i=sa(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Ece({type:e,...n,interpolate:ott(i)},{legend:r,...o})}function ott(e){const{r:t,g:n,b:r}=sa(e)||sa(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function att(e,t,n){const r=[];for(const[i,o]of qC){const a=n[i];if(a!=null&&a.legend&&i in e){const s=o(e[i],Sce(t,e[i],a),u=>e[u]);s!=null&&r.push(s)}}return r}const stt={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},utt={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class ltt extends mu{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:s=r,rx:u,ry:l}=t;super(ww,void 0,t,n==null?stt:utt),this.anchor=tle(n,"anchor",["top","right","bottom","left"]),this.insetTop=Xn(i),this.insetRight=Xn(o),this.insetBottom=Xn(a),this.insetLeft=Xn(s),this.rx=Xn(u),this.ry=Xn(l)}render(t,n,r,i,o){const{marginTop:a,marginRight:s,marginBottom:u,marginLeft:l,width:c,height:f}=i,{anchor:d,insetTop:p,insetRight:g,insetBottom:y,insetLeft:v,rx:b,ry:x}=this,_=l+v,A=c-s-g,E=a+p,$=f-u-y;return Ki(d?"svg:line":"svg:rect",o).datum(0).call(I0,this,i,o).call(z0,this).call(Wg,this,r).call(B0,this,{}).call(d==="left"?S=>S.attr("x1",_).attr("x2",_).attr("y1",E).attr("y2",$):d==="right"?S=>S.attr("x1",A).attr("x2",A).attr("y1",E).attr("y2",$):d==="top"?S=>S.attr("x1",_).attr("x2",A).attr("y1",E).attr("y2",E):d==="bottom"?S=>S.attr("x1",_).attr("x2",A).attr("y1",$).attr("y2",$):S=>S.attr("x",_).attr("y",E).attr("width",A-_).attr("height",$-E).attr("rx",b).attr("ry",x)).node()}}function ctt(e){return new ltt(e)}const p8={ariaLabel:"tip",fill:"white",stroke:"currentColor"},ftt=new Set(["geometry","href","src","ariaLabel","scales"]);class dtt extends mu{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&L0(t)&&nle(t)&&(n={...n,title:Ml});const{x:r,y:i,x1:o,x2:a,y1:s,y2:u,anchor:l,monospace:c,fontFamily:f=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:g,fontWeight:y,lineHeight:v=1,lineWidth:b=20,frameAnchor:x,format:_,textAnchor:A="start",textOverflow:E,textPadding:$=8,title:S,pointerSize:k=12,pathFilter:O="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:s,scale:"y",optional:u==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:u,scale:"y",optional:s==null},title:{value:S,optional:!0}},n,p8),this.anchor=rle(l,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=ES(x),this.textAnchor=Xr(A,"middle"),this.textPadding=+$,this.pointerSize=+k,this.pathFilter=ri(O),this.lineHeight=+v,this.lineWidth=+b,this.textOverflow=Jle(E),this.monospace=!!c,this.fontFamily=ri(f),this.fontSize=Xn(d),this.fontStyle=ri(p),this.fontVariant=ri(g),this.fontWeight=ri(y);for(const N in p8)N in this.channels&&(this[N]=p8[N]);this.splitLines=Zle(this),this.clipLine=ece(this),this.format={..._}}render(t,n,r,i,o){const a=this,{x:s,y:u,fx:l,fy:c}=n,{ownerSVGElement:f,document:d}=o,{anchor:p,monospace:g,lineHeight:y,lineWidth:v}=this,{textPadding:b,pointerSize:x,pathFilter:_}=this,{marginTop:A,marginLeft:E}=i,{x1:$,y1:S,x2:k,y2:O,x:N=$??k,y:F=S??O}=r,W=l?l(t.fx)-E:0,I=c?c(t.fy)-A:0,[M,D]=Sv(this,i),L=Dle(r,M),j=Ple(r,D),z=g?uF:sF,H=z(cp);let U,V;"title"in r?(U=r.channels,V=ytt):(U=mtt.call(this,r,n),V=vtt);const K=Ki("svg:g",o).call(I0,this,i,o).call(Qle,this).call(B0,this,{x:N&&s,y:F&&u}).call(ce=>ce.selectAll().data(t).enter().append("g").attr("transform",ye=>`translate(${Math.round(L(ye))},${Math.round(j(ye))})`).call(z0,this).call(ye=>ye.append("path").attr("filter",_)).call(ye=>ye.append("text").each(function(fe){const pe=It(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const te=V.call(a,fe,t,U,n,r);if(typeof te=="string")for(const Se of a.splitLines(te))Q(pe,{value:a.clipLine(Se)});else{const Se=new Set;for(const Ae of te){const{label:re=""}=Ae;re&&Se.has(re)||(Se.add(re),Q(pe,Ae))}}})));function Q(ce,{label:ye,value:fe,color:pe,opacity:te}){ye??(ye=""),fe??(fe="");const Se=pe!=null||te!=null;let Ae,re=v*100;const[qe]=lg(ye,re,z,H);if(qe>=0)ye=ye.slice(0,qe).trimEnd()+cp,Ae=fe.trim(),fe="";else{(ye||!fe&&!Se)&&(fe=" "+fe);const[Ze]=lg(fe,re-z(ye),z,H);Ze>=0&&(fe=fe.slice(0,Ze).trimEnd()+cp,Ae=fe.trim())}const _e=ce.append("tspan").attr("x",0).attr("dy",`${y}em`).text("​");ye&&_e.append("tspan").attr("font-weight","bold").text(ye),fe&&_e.append(()=>d.createTextNode(fe)),Se&&_e.append("tspan").text(" ■").attr("fill",pe).attr("fill-opacity",te).style("user-select","none"),Ae&&_e.append("title").text(Ae)}function ne(){const{width:ce,height:ye}=i.facet??i;K.selectChildren().each(function(fe){let{x:pe,width:te,height:Se}=this.getBBox();te=Math.round(te),Se=Math.round(Se);let Ae=p;if(Ae===void 0){Ae=a.previousAnchor;const _e=L(fe)+W,Ze=j(fe)+I,Ve=_e+te+b*2<ce,ht=_e-te-b*2>0,jr=Ze+Se+x+b*2+7<ye,Mo=Ze-Se-x-b*2>0,Lt=(/-left$/.test(Ae)?Ve||!ht:Ve&&!ht)?"left":"right",Te=(/^top-/.test(Ae)?jr||!Mo:jr&&!Mo)?"top":"bottom";Ae=a.previousAnchor=`${Te}-${Lt}`}const re=this.firstChild,qe=this.lastChild;if(re.setAttribute("d",gtt(Ae,x,b,te,Se)),pe)for(const _e of qe.childNodes)_e.setAttribute("x",-pe);qe.setAttribute("y",`${+htt(Ae,qe.childNodes.length,y).toFixed(6)}em`),qe.setAttribute("transform",`translate(${ptt(Ae,x,b,te,Se)})`)}),K.attr("visibility",null)}return t.length&&(K.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(ne):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ne)),K.node()}}function $ce(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=WR(t,n)),new dtt(e,{...r,x:t,y:n})}function htt(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function ptt(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function gtt(e,t,n,r,i){const o=r+n*2,a=i+n*2;switch(e){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${a}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${a}h${-o}v${-a}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${a}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-o}v${a}h${o}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-a}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-a}h${-o}v${a}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-a}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${o}v${a}h${-o}v${t/2-a/2}z`}}function mtt({channels:e},t){var i,o;const n={};let r=this.format;r=LH(r,e,"x"),r=LH(r,e,"y"),this.format=r;for(const a in r){const s=r[a];if(!(s===null||s===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const u=pH(e,a);u&&(n[a]=u)}}for(const a in e){if(a in n||a in r||ftt.has(a))continue;const s=pH(e,a);s&&(n[a]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const s=this.format[a];if(typeof s=="string"){const u=((i=n[a])==null?void 0:i.value)??((o=t[a])==null?void 0:o.domain())??[];this.format[a]=(ru(u)?_g:mf)(s)}else if(s===void 0||s===!0){const u=t[a];this.format[a]=u!=null&&u.bandwidth?lF(u,u.domain()):ug}}return n}function LH(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),a=e[n];return o.splice(o.findIndex(([s])=>s===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function ytt(e,t,{title:n}){return ug(n.value[e],e)}function*vtt(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:LA(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:zH(r,n,"x"),value:IH(this.format.x2,n.x1,a,e)};else if(o==="y2"&&"y1"in n)yield{label:zH(r,n,"y"),value:IH(this.format.y2,n.y1,a,e)};else{const s=a.value[e],u=a.scale;if(!g0(s)&&u==null)continue;yield{label:LA(r,n,o),value:this.format[o](s,e),color:u==="color"?i[o][e]:null,opacity:u==="opacity"?i[o][e]:null}}}}function IH(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function zH(e,t,n){const r=LA(e,t,`${n}1`,n),i=LA(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function LA(e,t,n,r=n){const i=t[n],o=e[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function Cce(e={}){var H;const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:s}=e,u=JR(e.className),l=e.marks===void 0?[]:jH(e.marks);l.push(...$tt(l));const c=Stt(t,e),f=new Map;for(const U of l){const V=UH(U,c,e);V&&f.set(U,V)}const d=new Map;c&&Y1(d,[c],e),Y1(d,f,e);const p=jH(Ctt(l,d,e));for(const U of p){const V=UH(U,c,e);V&&f.set(U,V)}l.unshift(...p);let g=jZe(d,e);if(g!==void 0){const U=c?f8(g,c):void 0;for(const K of l){if(K.facet===null||K.facet==="super")continue;const Q=f.get(K);Q!==void 0&&(Q.facetsIndex=K.fx!=null||K.fy!=null?f8(g,Q):U)}const V=new Set;for(const{facetsIndex:K}of f.values())K==null||K.forEach((Q,ne)=>{(Q==null?void 0:Q.length)>0&&V.add(ne)});g.forEach(0<V.size&&V.size<g.length?(K,Q)=>K.empty=!V.has(Q):K=>K.empty=!1);for(const K of l)if(K.facet==="exclude"){const Q=f.get(K);Q!==void 0&&(Q.facetsIndex=HZe(Q.facetsIndex))}}for(const U of xn.keys())IC(e[U])&&U!=="fx"&&U!=="fy"&&d.set(U,[]);const y=new Map;for(const U of l){if(y.has(U))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:V,channels:K}=f.get(U)??{},{data:Q,facets:ne,channels:ce}=U.initialize(V,K,e);cF(ce,e),y.set(U,{data:Q,facets:ne,channels:ce})}const v=UC(Y1(d,y,e),e),b=zZe(v,l,e);MZe(v,b);const x=AH(v),{fx:_,fy:A}=x,E=_||A?Cle(v,b):b,$=_||A?Ftt(x,b):b,S=QR(e),k=S.document,O=a3("svg").call(k.documentElement);let N=O;S.ownerSVGElement=O,S.className=u,S.projection=WQe(e,E),S.filterFacets=(U,V)=>f8(g,{channels:V,groups:rF(U,V)}),S.getMarkState=U=>{const V=y.get(U),K=f.get(U);return{...V,channels:{...V.channels,...K==null?void 0:K.channels}}},S.dispatchValue=U=>{N.value!==U&&(N.value=U,N.dispatchEvent(new Event("input",{bubbles:!0})))};const F=new Set;for(const[U,V]of y)if(U.initializer!=null){const K=U.facet==="super"?$:E,Q=U.initializer(V.data,V.facets,V.channels,x,K,S);if(Q.data!==void 0&&(V.data=Q.data),Q.facets!==void 0&&(V.facets=Q.facets),Q.channels!==void 0){const{fx:ne,fy:ce,...ye}=Q.channels;Att(ye),Object.assign(V.channels,ye);for(const fe of Object.values(ye)){const{scale:pe}=fe;pe!=null&&!rQe(xn.get(pe))&&(kce(fe,e),F.add(pe))}(ne!=null||ce!=null)&&f.set(U,!0)}}if(F.size){const U=new Map;Y1(U,y,e,ne=>F.has(ne)),Y1(d,y,e,ne=>F.has(ne));const V=Rtt(UC(U,e),v),{scales:K,...Q}=AH(V);Object.assign(v,V),Object.assign(x,Q),Object.assign(x.scales,K)}let W,I;g!==void 0&&(W={x:_==null?void 0:_.domain(),y:A==null?void 0:A.domain()},g=UZe(g,W),I=WZe(_,A,b));for(const[U,V]of y)V.values=U.scale(V.channels,x,S);const{width:M,height:D}=b;It(O).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",M).attr("height",D).attr("viewBox",`0 0 ${M} ${D}`).attr("aria-label",a).attr("aria-description",s).call(U=>U.append("style").text(`.${u} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${u} text,
.${u} tspan {
  white-space: pre;
}`)).call(KR,n);for(const U of l){const{channels:V,values:K,facets:Q}=y.get(U);if(g===void 0||U.facet==="super"){let ne=null;if(Q&&(ne=Q[0],ne=U.filter(ne,V,K),ne.length===0))continue;const ce=U.render(ne,x,K,$,S);if(ce==null)continue;O.appendChild(ce)}else{let ne;for(const ce of g){if(!(((H=U.facetAnchor)==null?void 0:H.call(U,g,W,ce))??!ce.empty))continue;let ye=null;if(Q){const pe=f.has(U);if(ye=Q[pe?ce.i:0],ye=U.filter(ye,V,K),ye.length===0)continue;!pe&&ye===Q[0]&&(ye=HKe(ye)),ye.fx=ce.x,ye.fy=ce.y,ye.fi=ce.i}const fe=U.render(ye,x,K,E,S);if(fe!=null){(ne??(ne=It(O).append("g"))).append(()=>fe).datum(ce);for(const pe of["aria-label","aria-description","aria-hidden","transform"])fe.hasAttribute(pe)&&(ne.attr(pe,fe.getAttribute(pe)),fe.removeAttribute(pe))}}ne==null||ne.selectChildren().attr("transform",I)}}const L=att(v,S,e),{figure:j=r!=null||i!=null||o!=null||L.length>0}=e;j&&(N=k.createElement("figure"),N.className=`${u}-figure`,N.style.maxWidth="initial",r!=null&&N.append(BH(k,r,"h2")),i!=null&&N.append(BH(k,i,"h3")),N.append(...L,O),o!=null&&N.append(btt(k,o))),N.scale=LZe(x.scales),N.legend=rtt(v,S,e);const z=FQe();return z>0&&It(O).append("text").attr("x",M).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${z.toLocaleString("en-US")} warning${z===1?"":"s"}. Please check the console.`),N}function BH(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function btt(e,t){const n=e.createElement("figcaption");return n.append(t),n}function xtt({marks:e=[],...t}={}){return Cce({...t,marks:[...e,this]})}mu.prototype.plot=xtt;function jH(e){return e.flat(1/0).filter(t=>t!=null).map(wtt)}function wtt(e){return typeof e.render=="function"?e:new _tt(e)}class _tt extends mu{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function cF(e,t){for(const n in e)kce(e[n],t);return e}function kce(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:s=o?u=>u*100:qKe(a,i)}=t[n]??{};s!=null&&(e.value=bi(e.value,s),e.transform=!1)}function Att(e){for(const t in e)lle(t,e[t])}function Y1(e,t,n,r=zKe){var i,o;for(const{channels:a}of t.values())for(const s in a){const u=a[s],{scale:l}=u;if(l!=null&&r(l))if(l==="projection"){if(!VQe(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((o=n.y)==null?void 0:o.domain)===void 0;if(c||f){const[d,p]=XQe(u);c&&g8(e,"x",d),f&&g8(e,"y",p)}}}else g8(e,l,u)}return e}function g8(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Stt(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=$o(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=s2(i,{value:n,scale:"fx"})),r!=null&&(o.fy=s2(i,{value:r,scale:"fy"})),cF(o,t);const a=rF(i,o);return{channels:o,groups:a,data:e.data}}function UH(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=$o(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=s2(l,{value:r,scale:"fx"})),i!=null&&(c.fy=s2(l,{value:i,scale:"fy"})),cF(c,n),{channels:c,groups:rF(l,c)}}if(t===void 0)return;const{channels:o,groups:a,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:o,groups:a};s.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((u=$o(e.data))==null?void 0:u.length)===s.length&&Fd(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Ett(e,t={}){return sg({...t,x:null,y:null},(n,r,i,o,a,s)=>s.getMarkState(e))}function $tt(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?tet:/^y$/i.test(i)?net:Fle,r=i(Ett(n,r)),r.title=null;const o=$ce(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function Ctt(e,t,n){let{projection:r,x:i={},y:o={},fx:a={},fy:s={},axis:u,grid:l,facet:c={},facet:{axis:f=u,grid:d}=c,x:{axis:p=u,grid:g=p===null?null:l}=i,y:{axis:y=u,grid:v=y===null?null:l}=o,fx:{axis:b=f,grid:x=b===null?null:d}=a,fy:{axis:_=f,grid:A=_===null?null:d}=s}=n;(r||!IC(i)&&!WH("x",e))&&(p=g=null),(r||!IC(o)&&!WH("y",e))&&(y=v=null),t.has("fx")||(b=x=null),t.has("fy")||(_=A=null),p===void 0&&(p=!Rx(e,"x")),y===void 0&&(y=!Rx(e,"y")),b===void 0&&(b=!Rx(e,"fx")),_===void 0&&(_=!Rx(e,"fy")),p===!0&&(p="bottom"),y===!0&&(y="left"),b===!0&&(b=p==="top"||p===null?"bottom":"top"),_===!0&&(_=y==="right"||y===null?"left":"right");const E=[];return Nx(E,A,Get,s),Ox(E,_,zet,"right","left",c,s),Nx(E,x,Yet,a),Ox(E,b,Bet,"top","bottom",c,a),Nx(E,v,qet,o),Ox(E,y,cce,"left","right",n,o),Nx(E,g,Vet,i),Ox(E,p,fce,"bottom","top",n,i),E}function Ox(e,t,n,r,i,o,a){if(!t)return;const s=ktt(t);a=Ttt(s?r:t,o,a);const{line:u}=a;(n===cce||n===fce)&&u&&!a2(u)&&e.push(ctt(Mtt(a))),e.push(n(a)),s&&e.push(n({...a,anchor:i,label:null}))}function Nx(e,t,n,r){!t||a2(t)||e.push(n(Ott(t,r)))}function ktt(e){return/^\s*both\s*$/i.test(e)}function Ttt(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:c,ariaDescription:f,label:d=t.label,labelAnchor:p,labelArrow:g=t.labelArrow,labelOffset:y}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:c,ariaDescription:f,label:d,labelAnchor:p,labelArrow:g,labelOffset:y}}function Mtt(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Ott(e,{stroke:t=SS(e)?e:void 0,ticks:n=Ntt(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function Ntt(e){switch(typeof e){case"number":return!0;case"string":return!SS(e)}return L0(e)||typeof(e==null?void 0:e.range)=="function"}function Rx(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function WH(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function Rtt(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function Ftt({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:u}=nF(n),l=e&&HH(e),c=t&&HH(t);return{marginTop:t?c[0]:r,marginRight:e?s-l[1]:i,marginBottom:t?u-c[1]:o,marginLeft:e?l[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}function HH(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const Dtt={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Ptt(e){return e.sort===void 0&&e.reverse===void 0?fQe({channel:"-r"},e):e}class Ltt extends mu{constructor(t,n={}){const{x:r,y:i,r:o,rotate:a,symbol:s=Rp,frameAnchor:u}=n,[l,c]=oi(a,0),[f,d]=lQe(s),[p,g]=oi(o,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:p,scale:"r",filter:bS,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},Ptt(n),Dtt),this.r=g,this.rotate=c,this.symbol=d,this.frameAnchor=ES(u);const{channels:y}=this,{symbol:v}=y;if(v){const{fill:b,stroke:x}=y;v.hint={fill:b?b.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:x?x.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,o){const{x:a,y:s}=n,{x:u,y:l,r:c,rotate:f,symbol:d}=r,{r:p,rotate:g,symbol:y}=this,[v,b]=Sv(this,i),x=y===Rp,_=c?void 0:p*p*Math.PI;return BR(p)&&(t=[]),Ki("svg:g",o).call(I0,this,i,o).call(B0,this,{x:u&&a,y:l&&s}).call(A=>A.selectAll().data(t).enter().append(x?"circle":"path").call(z0,this).call(x?E=>{E.attr("cx",u?$=>u[$]:v).attr("cy",l?$=>l[$]:b).attr("r",c?$=>c[$]:p)}:E=>{E.attr("transform",oF`translate(${u?$=>u[$]:v},${l?$=>l[$]:b})${f?$=>` rotate(${f[$]})`:g?` rotate(${g})`:""}`).attr("d",c&&d?$=>{const S=gd();return d[$].draw(S,c[$]*c[$]*Math.PI),S}:c?$=>{const S=gd();return y.draw(S,c[$]*c[$]*Math.PI),S}:d?$=>{const S=gd();return d[$].draw(S,_),S}:(()=>{const $=gd();return y.draw($,_),$})())}).call(Wg,this,r)).node()}}function Itt(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=WR(t,n)),new Ltt(e,{...r,x:t,y:n})}function ztt(){const e=Y.useRef(),[t,n]=Y.useState("1"),r=[{name:"All years",value:"1"},{name:"5 years",value:"2"}],i=Y.useMemo(()=>by.map(o=>{const{finalRank:a,head:s}=cwe(o.rank);return{name:o.name,gs_id:o.gs_id,hindex:t=="1"?o.hindex:o.hindex5y,i10index:t=="1"?o.i10index:o.i10index5y,rank:a,head:s}}),[t]);return Y.useEffect(()=>{const o=Cce({height:500,width:700,color:{type:"categorical",domain:["Chair Professor","Professor","Associate Professor","Assistant Professor"],range:["#0057e7","#d62d20","#ffa700","#008744"],legend:!0},symbol:{type:"categorical",domain:["Head","Associate Head","Non-head"],range:["triangle2","times","circle"],legend:!0},x:{domain:[0,90]},y:{domain:[0,740],grid:!0},marks:[Itt(i,{x:"hindex",y:"i10index",stroke:"rank",symbol:"head"}),$ce(i,Fle({x:"hindex",y:"i10index",title:a=>`${a.name} 

 i-index: ${a.i10index} 
 h-index: ${a.hindex}`,fontSize:14}))]});return e.current.append(o),()=>o.remove()},[i]),J.jsxs("div",{children:[J.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[J.jsx("h3",{children:"i10-index vs h-index in "}),J.jsx(Fve,{children:r.map((o,a)=>J.jsx(uwe,{id:`radio-${a}`,type:"radio",variant:"outline-primary",name:"radio",value:o.value,checked:t===o.value,onChange:s=>n(s.currentTarget.value),children:o.name},a))})]}),J.jsx("div",{ref:e})]})}function GC(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Btt=typeof global=="object"&&global&&global.Object===Object&&global;const jtt=Btt;var Utt=typeof self=="object"&&self&&self.Object===Object&&self,Wtt=jtt||Utt||Function("return this")();const Tce=Wtt;var Htt=function(){return Tce.Date.now()};const m8=Htt;var qtt=/\s/;function Gtt(e){for(var t=e.length;t--&&qtt.test(e.charAt(t)););return t}var Vtt=/^\s+/;function Ytt(e){return e&&e.slice(0,Gtt(e)+1).replace(Vtt,"")}var Xtt=Tce.Symbol;const IA=Xtt;var Mce=Object.prototype,Jtt=Mce.hasOwnProperty,Ktt=Mce.toString,X1=IA?IA.toStringTag:void 0;function Qtt(e){var t=Jtt.call(e,X1),n=e[X1];try{e[X1]=void 0;var r=!0}catch{}var i=Ktt.call(e);return r&&(t?e[X1]=n:delete e[X1]),i}var Ztt=Object.prototype,ent=Ztt.toString;function tnt(e){return ent.call(e)}var nnt="[object Null]",rnt="[object Undefined]",qH=IA?IA.toStringTag:void 0;function int(e){return e==null?e===void 0?rnt:nnt:qH&&qH in Object(e)?Qtt(e):tnt(e)}function ont(e){return e!=null&&typeof e=="object"}var ant="[object Symbol]";function snt(e){return typeof e=="symbol"||ont(e)&&int(e)==ant}var GH=0/0,unt=/^[-+]0x[0-9a-f]+$/i,lnt=/^0b[01]+$/i,cnt=/^0o[0-7]+$/i,fnt=parseInt;function VH(e){if(typeof e=="number")return e;if(snt(e))return GH;if(GC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=GC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ytt(e);var n=lnt.test(e);return n||cnt.test(e)?fnt(e.slice(2),n?2:8):unt.test(e)?GH:+e}var dnt="Expected a function",hnt=Math.max,pnt=Math.min;function gnt(e,t,n){var r,i,o,a,s,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(dnt);t=VH(t)||0,GC(n)&&(c=!!n.leading,f="maxWait"in n,o=f?hnt(VH(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function p($){var S=r,k=i;return r=i=void 0,l=$,a=e.apply(k,S),a}function g($){return l=$,s=setTimeout(b,t),c?p($):a}function y($){var S=$-u,k=$-l,O=t-S;return f?pnt(O,o-k):O}function v($){var S=$-u,k=$-l;return u===void 0||S>=t||S<0||f&&k>=o}function b(){var $=m8();if(v($))return x($);s=setTimeout(b,y($))}function x($){return s=void 0,d&&r?p($):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function A(){return s===void 0?a:x(m8())}function E(){var $=m8(),S=v($);if(r=arguments,i=this,u=$,S){if(s===void 0)return g(u);if(f)return clearTimeout(s),s=setTimeout(b,t),p(u)}return s===void 0&&(s=setTimeout(b,t)),a}return E.cancel=_,E.flush=A,E}function mnt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function ynt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Snt(r.key),r)}}function vnt(e,t,n){return t&&YH(e.prototype,t),n&&YH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bnt(e,t){return xnt(e)||mnt(e,t)||wnt(e,t)||_nt()}function xnt(e){if(Array.isArray(e))return e}function wnt(e,t){if(e){if(typeof e=="string")return XH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XH(e,t)}}function XH(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ant(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Snt(e){var t=Ant(e,"string");return typeof t=="symbol"?t:String(t)}var Ent=vnt(function e(t,n){var r=n.default,i=r===void 0?null:r,o=n.triggerUpdate,a=o===void 0?!0:o,s=n.onChange,u=s===void 0?function(l,c){}:s;ynt(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=a,this.onChange=u});function ms(e){var t=e.stateInit,n=t===void 0?function(){return{}}:t,r=e.props,i=r===void 0?{}:r,o=e.methods,a=o===void 0?{}:o,s=e.aliases,u=s===void 0?{}:s,l=e.init,c=l===void 0?function(){}:l,f=e.update,d=f===void 0?function(){}:f,p=Object.keys(i).map(function(g){return new Ent(g,i[g])});return function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=Object.assign({},n instanceof Function?n(g):n,{initialised:!1}),v={};function b(A){return x(A,g),_(),b}var x=function(E,$){c.call(b,E,y,$),y.initialised=!0},_=gnt(function(){y.initialised&&(d.call(b,y,v),v={})},1);return p.forEach(function(A){b[A.name]=E(A);function E($){var S=$.name,k=$.triggerUpdate,O=k===void 0?!1:k,N=$.onChange,F=N===void 0?function(M,D){}:N,W=$.defaultVal,I=W===void 0?null:W;return function(M){var D=y[S];if(!arguments.length)return D;var L=M===void 0?I:M;return y[S]=L,F.call(b,L,y,D),!v.hasOwnProperty(S)&&(v[S]=D),O&&_(),b}}}),Object.keys(a).forEach(function(A){b[A]=function(){for(var E,$=arguments.length,S=new Array($),k=0;k<$;k++)S[k]=arguments[k];return(E=a[A]).call.apply(E,[b,y].concat(S))}}),Object.entries(u).forEach(function(A){var E=bnt(A,2),$=E[0],S=E[1];return b[$]=b[S]}),b.resetProps=function(){return p.forEach(function(A){b[A.name](A.defaultVal)}),b},b.resetProps(),y._rerender=_,b}}function zA(e){"@babel/helpers - typeof";return zA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zA(e)}var $nt=/^\s+/,Cnt=/\s+$/;function De(e,t){if(e=e||"",t=t||{},e instanceof De)return e;if(!(this instanceof De))return new De(e,t);var n=knt(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}De.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,o,a,s;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*a+.0722*s},setAlpha:function(t){return this._a=Oce(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=KH(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=KH(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=JH(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=JH(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return QH(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Nnt(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(rn(this._r,255)*100)+"%",g:Math.round(rn(this._g,255)*100)+"%",b:Math.round(rn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(rn(this._r,255)*100)+"%, "+Math.round(rn(this._g,255)*100)+"%, "+Math.round(rn(this._b,255)*100)+"%)":"rgba("+Math.round(rn(this._r,255)*100)+"%, "+Math.round(rn(this._g,255)*100)+"%, "+Math.round(rn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Hnt[QH(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+ZH(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=De(t);r="#"+ZH(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return De(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Pnt,arguments)},brighten:function(){return this._applyModification(Lnt,arguments)},darken:function(){return this._applyModification(Int,arguments)},desaturate:function(){return this._applyModification(Rnt,arguments)},saturate:function(){return this._applyModification(Fnt,arguments)},greyscale:function(){return this._applyModification(Dnt,arguments)},spin:function(){return this._applyModification(znt,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(Unt,arguments)},complement:function(){return this._applyCombination(Bnt,arguments)},monochromatic:function(){return this._applyCombination(Wnt,arguments)},splitcomplement:function(){return this._applyCombination(jnt,arguments)},triad:function(){return this._applyCombination(eq,[3])},tetrad:function(){return this._applyCombination(eq,[4])}};De.fromRatio=function(e,t){if(zA(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=$m(e[r]));e=n}return De(e,t)};function knt(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=Ynt(e)),zA(e)=="object"&&(Du(e.r)&&Du(e.g)&&Du(e.b)?(t=Tnt(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Du(e.h)&&Du(e.s)&&Du(e.v)?(r=$m(e.s),i=$m(e.v),t=Ont(e.h,r,i),a=!0,s="hsv"):Du(e.h)&&Du(e.s)&&Du(e.l)&&(r=$m(e.s),o=$m(e.l),t=Mnt(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Oce(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function Tnt(e,t,n){return{r:rn(e,255)*255,g:rn(t,255)*255,b:rn(n,255)*255}}function JH(e,t,n){e=rn(e,255),t=rn(t,255),n=rn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=(r+i)/2;if(r==i)o=a=0;else{var u=r-i;switch(a=s>.5?u/(2-r-i):u/(r+i),r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4;break}o/=6}return{h:o,s:a,l:s}}function Mnt(e,t,n){var r,i,o;e=rn(e,360),t=rn(t,100),n=rn(n,100);function a(l,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+(c-l)*6*f:f<1/2?c:f<2/3?l+(c-l)*(2/3-f)*6:l}if(t===0)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=a(u,s,e+1/3),i=a(u,s,e),o=a(u,s,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function KH(e,t,n){e=rn(e,255),t=rn(t,255),n=rn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=r,u=r-i;if(a=r===0?0:u/r,r==i)o=0;else{switch(r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4;break}o/=6}return{h:o,s:a,v:s}}function Ont(e,t,n){e=rn(e,360)*6,t=rn(t,100),n=rn(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=r%6,l=[n,a,o,o,s,n][u],c=[s,n,n,a,o,o][u],f=[o,o,s,n,n,a][u];return{r:l*255,g:c*255,b:f*255}}function QH(e,t,n,r){var i=[Ga(Math.round(e).toString(16)),Ga(Math.round(t).toString(16)),Ga(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Nnt(e,t,n,r,i){var o=[Ga(Math.round(e).toString(16)),Ga(Math.round(t).toString(16)),Ga(Math.round(n).toString(16)),Ga(Nce(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function ZH(e,t,n,r){var i=[Ga(Nce(r)),Ga(Math.round(e).toString(16)),Ga(Math.round(t).toString(16)),Ga(Math.round(n).toString(16))];return i.join("")}De.equals=function(e,t){return!e||!t?!1:De(e).toRgbString()==De(t).toRgbString()};De.random=function(){return De.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Rnt(e,t){t=t===0?0:t||10;var n=De(e).toHsl();return n.s-=t/100,n.s=OS(n.s),De(n)}function Fnt(e,t){t=t===0?0:t||10;var n=De(e).toHsl();return n.s+=t/100,n.s=OS(n.s),De(n)}function Dnt(e){return De(e).desaturate(100)}function Pnt(e,t){t=t===0?0:t||10;var n=De(e).toHsl();return n.l+=t/100,n.l=OS(n.l),De(n)}function Lnt(e,t){t=t===0?0:t||10;var n=De(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),De(n)}function Int(e,t){t=t===0?0:t||10;var n=De(e).toHsl();return n.l-=t/100,n.l=OS(n.l),De(n)}function znt(e,t){var n=De(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,De(n)}function Bnt(e){var t=De(e).toHsl();return t.h=(t.h+180)%360,De(t)}function eq(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=De(e).toHsl(),r=[De(e)],i=360/t,o=1;o<t;o++)r.push(De({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function jnt(e){var t=De(e).toHsl(),n=t.h;return[De(e),De({h:(n+72)%360,s:t.s,l:t.l}),De({h:(n+216)%360,s:t.s,l:t.l})]}function Unt(e,t,n){t=t||6,n=n||30;var r=De(e).toHsl(),i=360/n,o=[De(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(De(r));return o}function Wnt(e,t){t=t||6;for(var n=De(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(De({h:r,s:i,v:o})),o=(o+s)%1;return a}De.mix=function(e,t,n){n=n===0?0:n||50;var r=De(e).toRgb(),i=De(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return De(a)};De.readability=function(e,t){var n=De(e),r=De(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};De.isReadable=function(e,t,n){var r=De.readability(e,t),i,o;switch(o=!1,i=Xnt(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};De.mostReadable=function(e,t,n){var r=null,i=0,o,a,s,u;n=n||{},a=n.includeFallbackColors,s=n.level,u=n.size;for(var l=0;l<t.length;l++)o=De.readability(e,t[l]),o>i&&(i=o,r=De(t[l]));return De.isReadable(e,r,{level:s,size:u})||!a?r:(n.includeFallbackColors=!1,De.mostReadable(e,["#fff","#000"],n))};var VC=De.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Hnt=De.hexNames=qnt(VC);function qnt(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Oce(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function rn(e,t){Gnt(e)&&(e="100%");var n=Vnt(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function OS(e){return Math.min(1,Math.max(0,e))}function io(e){return parseInt(e,16)}function Gnt(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Vnt(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ga(e){return e.length==1?"0"+e:""+e}function $m(e){return e<=1&&(e=e*100+"%"),e}function Nce(e){return Math.round(parseFloat(e)*255).toString(16)}function tq(e){return io(e)/255}var Ma=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Du(e){return!!Ma.CSS_UNIT.exec(e)}function Ynt(e){e=e.replace($nt,"").replace(Cnt,"").toLowerCase();var t=!1;if(VC[e])e=VC[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Ma.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Ma.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Ma.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Ma.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Ma.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Ma.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Ma.hex8.exec(e))?{r:io(n[1]),g:io(n[2]),b:io(n[3]),a:tq(n[4]),format:t?"name":"hex8"}:(n=Ma.hex6.exec(e))?{r:io(n[1]),g:io(n[2]),b:io(n[3]),format:t?"name":"hex"}:(n=Ma.hex4.exec(e))?{r:io(n[1]+""+n[1]),g:io(n[2]+""+n[2]),b:io(n[3]+""+n[3]),a:tq(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Ma.hex3.exec(e))?{r:io(n[1]+""+n[1]),g:io(n[2]+""+n[2]),b:io(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function Xnt(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}function Jnt(e){return Knt(e)||Qnt(e)||Znt(e)||ert()}function Knt(e){if(Array.isArray(e))return YC(e)}function Qnt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Znt(e,t){if(e){if(typeof e=="string")return YC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YC(e,t)}}function YC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ert(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _w=ms({props:{bbox:{default:{width:null,height:null}},passes:{default:3}},init:function(t,n){n.el=t},update:function(t){Jnt(Array(t.passes).keys()).some(function(){var n=parseInt(t.el.style["font-size"].split("px")[0])||20,r=t.el.getBBox(),i=Math.floor(n*Math.min(t.bbox.width/r.width,t.bbox.height/r.height));if(i===n)return!0;t.el.style["font-size"]=i+"px"})}});ms({props:{maxWidth:{default:1/0}},init:function(t,n){n.el=t},update:function(t){for(var n=t.el.textContent,r=Math.round(n.length*t.maxWidth/t.el.getBBox().width*1.2);--r&&t.maxWidth/t.el.getBBox().width<1;)t.el.textContent=i(n,r);function i(o,a){return o.length<=a?o:o.substring(0,a*2/3)+"..."+o.substring(o.length-a/3,o.length)}}});ms({init:function(t){t.parentNode.appendChild(t)}});var trt=ms({props:{id:{},colorScale:{default:Uc().range(["black","white"])},angle:{default:0}},init:function(t,n){n.id="areaGradient".concat(Math.round(Math.random()*1e4)),n.gradient=It(t).append("linearGradient")},update:function(t){var n=Math.PI*t.angle/180;t.gradient.attr("y1",Math.round(100*Math.max(0,Math.sin(n)))+"%").attr("y2",Math.round(100*Math.max(0,-Math.sin(n)))+"%").attr("x1",Math.round(100*Math.max(0,-Math.cos(n)))+"%").attr("x2",Math.round(100*Math.max(0,Math.cos(n)))+"%").attr("id",t.id);var r=Uc().domain([0,100]).range(t.colorScale.domain()),i=t.gradient.selectAll("stop").data(In(0,100.01,20));i.exit().remove(),i.merge(i.enter().append("stop")).attr("offset",function(o){return"".concat(o,"%")}).attr("stop-color",function(o){return t.colorScale(r(o))})}});ms({props:{id:{default:"areaGradient".concat(Math.round(Math.random()*1e4))}},init:function(t,n){n.filter=It(t).append("defs").append("filter").attr("height","130%"),n.filter.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3),n.filter.append("feOffset").attr("dx",2).attr("dy",2).attr("result","offsetblur");var r=n.filter.append("feMerge");r.append("feMergeNode"),r.append("feMergeNode").attr("in","SourceGraphic")},update:function(t){t.filter.attr("id",t.id)}});ms({props:{x:{default:0},y:{default:0},r:{default:8},color:{default:"darkblue"},duration:{default:.7},angleFull:{default:120}},init:function(t,n){t=It(t),n.path=t.append("path"),n.transform=n.path.append("animateTransform").attr("attributeName","transform").attr("attributeType","XML").attr("type","rotate").attr("begin","0s").attr("fill","freeze").attr("repeatCount","indefinite")},update:function(t){t.path.attr("d",n(t.x,t.y,t.r,t.r/3,0,t.angleFull)).attr("fill",t.color),t.transform.attr("from","0 "+t.x+" "+t.y).attr("to","360 "+t.x+" "+t.y).attr("dur",t.duration+"s");function n(r,i,o,a,s,u){s=s/180*Math.PI,u=u/180*Math.PI;var l=o,c=o-a,f=[[r+l*Math.cos(s),i+l*Math.sin(s)],[r+l*Math.cos(u),i+l*Math.sin(u)],[r+c*Math.cos(u),i+c*Math.sin(u)],[r+c*Math.cos(s),i+c*Math.sin(s)]],d=u-s,p=d%(Math.PI*2)>Math.PI?1:0,g=[];return g.push("M"+f[0].join()),g.push("A"+[l,l,0,p,1,f[1]].join()),g.push("L"+f[2].join()),g.push("A"+[c,c,0,p,0,f[3]].join()),g.push("z"),g.join(" ")}}});ms({props:{imgUrl:{},x:{default:0},y:{default:0},maxWidth:{default:20},maxHeight:{default:20},svgAlign:{default:"xMidYMid"}},methods:{show:function(t){return t.img.attr("width",t.maxWidth).attr("height",t.maxHeight),this},hide:function(t){return t.img.attr("width",0).attr("height",0),this}},init:function(t,n){n.img=It(t).append("image")},update:function(t){t.img.attr("xlink:href",t.imgUrl).attr("x",t.x).attr("y",t.y).attr("width",t.maxW).attr("height",t.maxH).attr("preserveAspectRatio",t.svgAlign+" meet")}});ms({props:{selection:{default:{x:[null,null],y:[null,null]}},xDomain:{onChange:function(t,n){n.xScale.domain(t)}},yDomain:{onChange:function(t,n){n.yScale.domain(t)}},transitionDuration:700},stateInit:{xScale:Uc(),yScale:Uc()},init:function(t,n,r){var i=r.width,o=r.height,a=r.margin,s=a===void 0?{top:2,right:2,bottom:2,left:2}:a;n.xScale.range([s.left,i-n.margin.right]),n.yScale.range([s.top,o-n.margin.bottom]),n.svg=It(t).append("svg").attr("width",i).attr("height",o),n.outerBox=n.svg.append("rect").attr("x",n.xScale.range()[0]).attr("y",n.yScale.range()[0]).attr("rx",2).attr("ry",2).attr("width",n.xScale.range()[1]).attr("height",n.yScale.range()[1]).style("fill","#EEE").style("stroke","grey"),n.selectionBox=n.svg.append("rect").attr("rx",1).attr("ry",1).attr("width",0).attr("height",0).style("stroke","blue").style("stroke-opacity",.6).style("fill","blue").style("fill-opacity",.3)},update:function(t){t.outerBox.attr("x",t.xScale.range()[0]).attr("y",t.yScale.range()[0]).attr("width",t.xScale.range()[1]).attr("height",t.yScale.range()[1]),t.selectionBox.attr("x",t.xScale(t.selection.x[0])).attr("y",t.yScale(t.selection.y[0])).attr("width",t.xScale(t.selection.x[1]-t.selection.x[0])).attr("height",t.yScale(t.selection.y[1]-t.selection.y[0]))}});var nrt=ms({props:{width:{},height:{},scale:{},label:{}},init:function(t,n){n.gradient=trt()(t),n.el=It(t),n.box=n.el.append("rect").attr("x",0).attr("y",0).attr("rx",3).attr("ry",3).attr("stroke","black").attr("stroke-width",.5),n.unitLabel=n.el.append("text").attr("class","legendText").style("text-anchor","middle").style("dominant-baseline","central"),n.labelFitText=_w()(n.unitLabel.node()),n.startLabel=n.el.append("text").style("text-anchor","start").style("dominant-baseline","central"),n.startLabelFitText=_w()(n.startLabel.node()),n.endLabel=n.el.append("text").style("text-anchor","end").style("dominant-baseline","central"),n.endLabelFitText=_w()(n.endLabel.node())},update:function(t){t.gradient.colorScale(t.scale),t.box.attr("width",t.width).attr("height",t.height).style("fill","url(#".concat(t.gradient.id(),")")),t.unitLabel.text(t.label).attr("x",t.width*.5).attr("y",t.height*.5).style("text-anchor","middle").style("dominant-baseline","central").style("fill",De(t.scale((t.scale.domain()[t.scale.domain().length-1]-t.scale.domain()[0])/2)).isLight()?"#444":"#CCC"),t.labelFitText.bbox({width:t.width*.8,height:t.height*.9}),t.startLabel.text(t.scale.domain()[0]).attr("x",t.width*.02).attr("y",t.height*.5).style("fill",De(t.scale(t.scale.domain()[0])).isLight()?"#444":"#CCC"),t.startLabelFitText.bbox({width:t.width*.3,height:t.height*.7}),t.endLabel.text(t.scale.domain()[t.scale.domain().length-1]).attr("x",t.width*.98).attr("y",t.height*.5).style("fill",De(t.scale(t.scale.domain()[t.scale.domain().length-1])).isLight()?"#444":"#CCC"),t.endLabelFitText.bbox({width:t.width*.3,height:t.height*.7})}}),rrt=ms({props:{width:{},height:{},scale:{},label:{}},init:function(t,n){n.el=It(t)},update:function(t){var n=t.width/t.scale.domain().length,r=t.el.selectAll(".color-slot").data(t.scale.domain());r.exit().remove();var i=r.enter().append("g").attr("class","color-slot");i.append("rect").attr("y",0).attr("rx",0).attr("ry",0).attr("stroke-width",0),i.append("text").style("text-anchor","middle").style("dominant-baseline","central"),i.append("title"),r=r.merge(i),r.select("rect").attr("width",n).attr("height",t.height).attr("x",function(o,a){return n*a}).attr("fill",function(o){return t.scale(o)}),r.select("text").text(function(o){return o}).attr("x",function(o,a){return n*(a+.5)}).attr("y",t.height*.5).style("fill",function(o){return De(t.scale(o)).isLight()?"#333":"#DDD"}).each(function(o){_w().bbox({width:n*.9,height:t.height*.8})(this)}),r.select("title").text(function(o){return"".concat(o," ").concat(t.label)})}});ms({props:{width:{},height:{},scale:{},label:{}},init:function(t,n){n.legend=It(t).append("g").attr("class","legend")},update:function(t){if(t.scale){var n=!t.scale.hasOwnProperty("interpolate")&&!t.scale.hasOwnProperty("interpolator");t.legend.html(""),(n?rrt:nrt)().width(t.width).height(t.height).scale(t.scale).label(t.label)(t.legend.node())}}});const irt="/COMP4462-Project/assets/legendChoroplethMap-5DF7JFdz.png";function ort({selectedProfId:e,setSelectedProfId:t}){const n=Y.useRef(null);return Y.useEffect(()=>{const o=It("#viz_container").append("svg").attr("width","780").attr("height","100%").attr("viewBox","0 0  450 300").attr("preserveAspectRatio","xMinYMin"),a=Mk().scale(450/2.5/Math.PI).rotate([0,0]).center([0,0]).translate([450/2,300/2*1.3]),s=$2().projection(a),u=_3().domain([10,50,100,150]).range(["#DCE9FF","#8EBEFF","#589BE5","#0072BC"]).unknown("#E6E6E6"),l=o.append("g"),c=o.append("g"),f="https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/choropleth_map.csv",d="https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_polygons_simplified.json",p="https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_lines_simplified.json",g=[VI(d),Y5e(f)];Promise.all(g).then(y);function y([b,x]){const _={};x.forEach(function(S){_[S.iso3]=+S.refugees}),console.log(_);const A={GBR:26,SGP:29,CHN:460,USA:334,FRA:5,CAN:32,DEU:12,TUR:2,CHE:8,TWN:8,KOR:16,AUS:29,JPN:5,FIN:4,NLD:5,BEL:3,ISR:5,ARE:1,NZL:2,NOR:4,AUT:6,DNK:6,IRN:5,ITA:8,POL:2,CYP:1,GRC:12,EGY:1,IRL:1,IND:3,BRA:2},E=function(S){_I(".countries").transition().duration(100).style("opacity",.3),It(this).transition().duration(100).style("opacity",1)},$=function(S){_I(".countries").transition().duration(100).style("opacity",1),It(this).transition().duration(100).style("opacity",1)};l.selectAll("path").data(f$(b,b.objects.world_polygons_simplified).features).join("path").attr("fill",function(S){return u(S.refugees=A[S.properties.color_code])}).attr("d",s).attr("class",function(S){return"countries"}).on("mouseover",E).on("mouseleave",$).append("title").text(function(S){return`${S.properties.gis_name} 
No. of Coauthors: ${mf(",")(S.refugees)}`})}VI(p).then(function(b){c.selectAll("path").data(f$(b,b.objects.world_lines_simplified).features).enter().append("path").attr("d",s).style("fill","none").attr("class",function(x){return x.properties.type})});{var v=X8e().scaleExtent([1,8]).on("zoom",function(b){l.selectAll("path").attr("transform",b.transform),c.selectAll("path").attr("transform",b.transform)});o.call(v)}o.append("g").attr("class","legendThreshold").attr("transform","translate(5,255)")},[]),J.jsx("div",{children:J.jsxs(Jh,{children:[J.jsx(qo,{children:J.jsx("p",{style:{textAlign:"justify"},children:"HKUST CSE researchers often collaborate with other researchers outside of the department and the instituition. Here is a choropleth map that shows the number of coauthorship with external instuition in different countries and regions. Feel free to zoom in, and hover on the regions to view the respective collaboration."})}),J.jsx(qo,{children:J.jsxs("div",{children:[J.jsx("div",{className:"",id:"viz_container",ref:n}),J.jsx("img",{style:{height:"100px"},src:irt})]})})]})})}const art=["Sunil ARYA","Brahim BENSAOU","Gary Shueng Han CHAN","Hao CHEN","Kai CHEN","Lei CHEN","Long CHEN","Qifeng CHEN","Minhao CHENG","Siu Wing CHENG","Shing Chi CHEUNG","Albert Chi Shing CHUNG","Cunsheng DING","Amir KAFSHDAR GOHARSHADY","Mordecai Jay GOLIN","Song GUO","Yike GUO","Junxian HE","Andrew Brian HORNER","Sung Hun KIM","James Tin Yau KWOK","Bo LI","Mo LI","Fangzhen LIN","Qiong LUO","Xiaojuan MA","Brian Kan Wing MAK","Wilfred Siu Hung NG","Dimitris PAPADIAS","Dimitris PAPADOPOULOS","Lionel PARREAUX","Huamin QU","Long QUAN","Pedro SANDER","Dongdong SHE","Jiasi SHEN","Yangqiu SONG","Chiew Lan TAI","Chi Keung TANG","Shuai WANG","Wei WANG","Raymond Chi Wing WONG","Dekai WU","Dan XU","Dit Yan YEUNG","Ke YI","Binhang YUAN","Charles Chuan ZHANG","Nevin Lianwen ZHANG","Qian ZHANG","Xiaofang ZHOU","","Artificial Intelligence","Cybersecurity","Data, Knowledge & Info Mgmt","Human-Computer Interaction","Networking and Computer Systems","Software Engg and Prog Lang","Theoretical Computer Science","Vision and Graphics",""],srt=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68],[0,0,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,0,1,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,0,0,0]],nq={Names:art,matrix:srt},Fx=[{scholar_id:"Azu2w_MAAAAJ",name:"Sunil Arya"},{scholar_id:"aQblKVwAAAAJ",name:"Brahim Bensaou"},{scholar_id:"uiCSOycAAAAJ",name:"S.-H. Gary Chan"},{scholar_id:"Z_t5DjwAAAAJ",name:"Hao Chen"},{scholar_id:"tnRV5QYAAAAJ",name:"Kai Chen"},{scholar_id:"gtglwgYAAAAJ",name:"Lei Chen"},{scholar_id:"-gtmMpIAAAAJ",name:"Long Chen\\uff08\\u9648\\u9686\\uff09"},{scholar_id:"lLMX9hcAAAAJ",name:"Qifeng Chen"},{scholar_id:"_LkC1yoAAAAJ",name:"Minhao Cheng"},{scholar_id:"0nquEkQAAAAJ",name:"Siu-Wing Cheng"},{scholar_id:"5RIgb3wAAAAJ",name:"Shing-Chi Cheung"},{scholar_id:"MVf7Lq0AAAAJ",name:"Albert C. S. Chung"},{scholar_id:"H9zO5eYAAAAJ",name:"Cunsheng Ding"},{scholar_id:"4o8gvAYAAAAJ",name:"Amir Goharshady"},{scholar_id:"YooPxQwAAAAJ",name:"Mordecai Golin"},{scholar_id:"Ib-sizwAAAAJ",name:"Song Guo"},{scholar_id:"-0q6cIYAAAAJ",name:"Yike  Guo"},{scholar_id:"BIFGeoUAAAAJ",name:"Junxian He"},{scholar_id:"irCp0RIAAAAJ",name:"Andrew Horner"},{scholar_id:"JE_m2UgAAAAJ",name:"Sunghun Kim"},{scholar_id:"-oTraZ4AAAAJ",name:"James T. Kwok"},{scholar_id:"SLgWQLEAAAAJ",name:"Bo Li"},{scholar_id:"kjiwE6IAAAAJ",name:"Mo Li"},{scholar_id:"klFoxpYAAAAJ",name:"Fangzhen Lin"},{scholar_id:"SqAsppUAAAAJ",name:"Qiong Luo"},{scholar_id:"TN0zm80AAAAJ",name:"Xiaojuan Ma"},{scholar_id:"Zx8p8RsAAAAJ",name:"Brian Kan-wing Mak"},{scholar_id:"NJ6YPT4AAAAJ",name:"Wilfred Ng"},{scholar_id:"7BPMWSkAAAAJ",name:"Dimitris Papadias"},{scholar_id:"9Q8DH5sAAAAJ",name:"Dimitrios Papadopoulos"},{scholar_id:"jQqTdHwAAAAJ",name:"Lionel Parreaux"},{scholar_id:"J7a5zGEAAAAJ",name:"Huamin Qu"},{scholar_id:"ZMLhZJ8AAAAJ",name:"Long QUAN"},{scholar_id:"GIToYFwAAAAJ",name:"Pedro Sander"},{scholar_id:"CAd3jhcAAAAJ",name:"Dongdong She"},{scholar_id:"pyLCHy0AAAAJ",name:"Jiasi Shen"},{scholar_id:"MdQZ-q8AAAAJ",name:"Yangqiu Song"},{scholar_id:"DORzgBQAAAAJ",name:"Chiew-Lan Tai"},{scholar_id:"EWfpM74AAAAJ",name:"Chi Keung Tang"},{scholar_id:"POlWWAsAAAAJ",name:"Shuai Wang"},{scholar_id:"FeJrzPMAAAAJ",name:"Wei Wang"},{scholar_id:"IKgiD0AAAAAJ",name:"Raymond Chi-Wing Wong"},{scholar_id:"NMkg-64AAAAJ",name:"Dekai Wu"},{scholar_id:"OuSPv-AAAAAJ",name:"Dan Xu"},{scholar_id:"nEsOOx8AAAAJ",name:"Dit-Yan Yeung"},{scholar_id:"dWcZPFEAAAAJ",name:"Ke Yi"},{scholar_id:"TflKxcIAAAAJ",name:"Binhang Yuan\\uff08\\u8881\\u5f6c\\u822a\\uff09"},{scholar_id:"Zmppp9kAAAAJ",name:"Charles Zhang"},{scholar_id:"18_xlPUAAAAJ",name:"Nevin L. Zhang"},{scholar_id:"XTlaQMkAAAAJ",name:"Qian Zhang"},{scholar_id:"y6m820wAAAAJ",name:"Xiaofang Zhou"}];function urt({selectedProfId:e,setSelectedProfId:t}){const n=Y.useRef(null);return Y.useEffect(()=>{const r=function(){var Q=Math.PI,ne=2*Q,ce={},ye,fe,pe,te,Se=0,Ae,re,qe;function _e(){var Ve={},ht=[],jr=In(te),Mo=[],Lt,Te,un,$t,Nt;for(ye=[],fe=[],Lt=0,$t=-1;++$t<te;){for(Te=0,Nt=-1;++Nt<te;)Te+=pe[$t][Nt];ht.push(Te),Mo.push(In(te).reverse()),Lt+=Te}for(Ae&&jr.sort(function(Nf,Fl){return Ae(ht[Nf],ht[Fl])}),re&&Mo.forEach(function(Nf,Fl){Nf.sort(function(Vg,Yg){return re(pe[Fl][Vg],pe[Fl][Yg])})}),Lt=(ne-Se*te)/Lt,Te=0,$t=-1;++$t<te;){for(un=Te,Nt=-1;++Nt<te;){var On=jr[$t],xi=Mo[On][Nt],Ur=pe[On][xi],Wr=Te,Gg=Te+=Ur*Lt;Ve[On+"-"+xi]={index:On,subindex:xi,startAngle:Wr,endAngle:Gg,value:Ur}}fe[On]={index:On,startAngle:un,endAngle:Te,value:(Te-un)/Lt},Te+=Se}for($t=-1;++$t<te;)for(Nt=$t-1;++Nt<te;){var Nl=Ve[$t+"-"+Nt],Rl=Ve[Nt+"-"+$t];(Nl.value||Rl.value)&&ye.push(Nl.value<Rl.value?{source:Rl,target:Nl}:{source:Nl,target:Rl})}qe&&Ze()}function Ze(){ye.sort(function(Ve,ht){return qe((Ve.source.value+Ve.target.value)/2,(ht.source.value+ht.target.value)/2)})}return ce.matrix=function(Ve){return arguments.length?(te=(pe=Ve)&&pe.length,ye=fe=null,ce):pe},ce.padding=function(Ve){return arguments.length?(Se=Ve,ye=fe=null,ce):Se},ce.sortGroups=function(Ve){return arguments.length?(Ae=Ve,ye=fe=null,ce):Ae},ce.sortSubgroups=function(Ve){return arguments.length?(re=Ve,ye=null,ce):re},ce.sortChords=function(Ve){return arguments.length?(qe=Ve,ye&&Ze(),ce):qe},ce.chords=function(){return ye||_e(),ye},ce.groups=function(){return fe||_e(),fe},ce},i=function(){var Q=Ve,ne=ht,ce=Ze,ye=jr,fe=Mo,pe=0,te=Math.PI,Se=te/2;function Ae(Te,un,$t,Nt){var On=un.call(Te,$t,Nt),xi=ce.call(Te,On,Nt),Ur=ye.call(Te,On,Nt)-Se,Wr=fe.call(Te,On,Nt)-Se;return{r:xi,a0:[Ur],a1:[Wr],p0:[xi*Math.cos(Ur),xi*Math.sin(Ur)],p1:[xi*Math.cos(Wr),xi*Math.sin(Wr)]}}function re(Te,un,$t){var Nt=un[0]>=0?1:-1;return"A"+Te+","+Te+" 0 "+ +($t>te)+",1 "+(un[0]+Nt*pe)+","+un[1]}function qe(Te){var un=Te[0]>=0?1:-1;return"Q 0,0 "+(Te[0]+un*pe)+","+Te[1]}function _e(Te,un){var $t=Ae(this,Q,Te,un),Nt=Ae(this,ne,Te,un);return"M"+($t.p0[0]+pe)+","+$t.p0[1]+re($t.r,$t.p1,$t.a1-$t.a0)+qe(Nt.p0)+re(Nt.r,Nt.p1,Nt.a1-Nt.a0)+qe($t.p0)+"Z"}_e.radius=function(Te){return arguments.length?(ce=Lt(Te),_e):ce},_e.pullOutSize=function(Te){return arguments.length?(pe=Te,_e):pe},_e.source=function(Te){return arguments.length?(Q=Lt(Te),_e):Q},_e.target=function(Te){return arguments.length?(ne=Lt(Te),_e):ne},_e.startAngle=function(Te){return arguments.length?(ye=Lt(Te),_e):ye},_e.endAngle=function(Te){return arguments.length?(fe=Lt(Te),_e):fe};function Ze(Te){return Te.radius}function Ve(Te){return Te.source}function ht(Te){return Te.target}function jr(Te){return Te.startAngle}function Mo(Te){return Te.endAngle}function Lt(Te){return typeof Te=="function"?Te:function(){return Te}}return _e},o=It(n.current);o.selectAll("*").remove();const a=800,s={left:40,top:10,right:0,bottom:10},u=Math.min(a,1e3)-s.left-s.right,l=Math.min(a,800)*7/8-s.top-s.bottom,c=o.append("svg").attr("width",u+s.left+s.right).attr("height",l+s.top+s.bottom);var f=c.append("g").attr("class","chordWrapper").attr("transform","translate("+(u/2+s.left)+","+(l/2+s.top)+")"),d=Math.min(u,l)/2-100+0,p=d*.95,g=.9,y=.02,v=0,b=c.append("g").attr("class","chordTitleWrapper"),x=40,_=0;b.append("text").attr("class","title left").style("font-size","16px").attr("x",u/2+s.left-d-_).attr("y",x).text("Interest"),b.append("line").attr("class","titleLine left").attr("x1",(u/2+s.left-d-_)*.6).attr("x2",(u/2+s.left-d-_)*1.4).attr("y1",x+8).attr("y2",x+8),b.append("text").attr("class","title right").style("font-size","16px").attr("x",u/2+s.left+d+_).attr("y",x).text("Professor"),b.append("line").attr("class","titleLine right").attr("x1",(u/2+s.left-d-_)*.6+2*(d+_)).attr("x2",(u/2+s.left-d-_)*1.4+2*(d+_)).attr("y1",x+8).attr("y2",x+8);var A=f.append("defs"),E=A.append("linearGradient").attr("id","animatedGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0").attr("spreadMethod","reflect");E.append("animate").attr("attributeName","x1").attr("values","0%;100%").attr("dur","7s").attr("repeatCount","indefinite"),E.append("animate").attr("attributeName","x2").attr("values","100%;200%").attr("dur","7s").attr("repeatCount","indefinite"),E.append("stop").attr("offset","5%").attr("stop-color","#E8E8E8"),E.append("stop").attr("offset","45%").attr("stop-color","#A3A3A3"),E.append("stop").attr("offset","55%").attr("stop-color","#A3A3A3"),E.append("stop").attr("offset","95%").attr("stop-color","#E8E8E8");var $=nq.Names,S=68,k=.5,O=Math.round(S*k),N=nq.matrix,F=2*Math.PI*(O/(S+O))/4,W=r().padding(.02).sortChords(gg).matrix(N),I=aZ().innerRadius(p).outerRadius(d).startAngle(j).endAngle(z),M=i().radius(p).startAngle(j).endAngle(z).pullOutSize(v),D=f.selectAll("g.group").data(W.groups).enter().append("g").attr("class","group").on("click",K);D.append("path").style("stroke",function(Q,ne){return $[ne]===""?"none":U($[ne])}).style("fill",function(Q,ne){return $[ne]===""?"none":U($[ne])}).style("pointer-events",function(Q,ne){return $[ne]===""?"none":"auto"}).attr("d",I).attr("transform",function(Q,ne){return Q.pullOutSize=v*(Q.startAngle+.001>Math.PI?-1:1),"translate("+Q.pullOutSize+",0)"}),D.append("text").each(function(Q){Q.angle=(Q.startAngle+Q.endAngle)/2+F}).attr("dy",".35em").attr("class","titles").style("font-size","10px").attr("text-anchor",function(Q){return Q.angle>Math.PI?"end":null}).attr("transform",function(Q,ne){var ce=I.centroid(Q);return"translate("+(ce[0]+Q.pullOutSize)+","+ce[1]+")rotate("+(Q.angle*180/Math.PI-90)+")translate(20,0)"+(Q.angle>Math.PI?"rotate(180)":"")}).text(function(Q,ne){return $[ne]}).call(H,200),f.selectAll("path.chord").data(W.chords).enter().append("path").attr("class","chord").style("stroke","none").style("fill",function(Q,ne){return e===""||Fx.findIndex(L),U($[Q.target.index])}).style("opacity",function(Q){if($[Q.source.index]==="")return 0;if(e==="")return g;var ne=Fx.findIndex(L);return Q.source.index==ne?g:y}).style("pointer-events",function(Q,ne){return $[Q.source.index]===""?"none":"auto"}).attr("d",M).on("click",V).transition();function L(Q){return Q.scholar_id==e}function j(Q){return Q.startAngle+F}function z(Q){return Q.endAngle+F}function H(Q,ne){Q.each(function(){for(var ce=It(this),ye=ce.text().split(/\s+/).reverse(),fe,pe=[],te=0,Se=1.1,Ae=0,re=0,qe=parseFloat(ce.attr("dy")),_e=ce.text(null).append("tspan").attr("x",re).attr("y",Ae).attr("dy",qe+"em");fe=ye.pop();)pe.push(fe),_e.text(pe.join(" ")),_e.node().getComputedTextLength()>ne&&(pe.pop(),_e.text(pe.join(" ")),pe=[fe],_e=ce.append("tspan").attr("x",re).attr("y",Ae).attr("dy",++te*Se+qe+"em").text(fe))})}function U(Q){switch(Q){case"Artificial Intelligence":return"#5778a4";case"Cybersecurity":return"#e7ca60";case"Data, Knowledge & Info Mgmt":return"#85b6b2";case"Human-Computer Interaction":return"#f1a2a9";case"Networking and Computer Systems":return"#6a9f58";case"Software Engg and Prog Lang":return"#e49444";case"Theoretical Computer Science":return"#a87c9f";case"Vision and Graphics":return"#d1615d";case"":return"none"}return"#999"}function V(Q,ne){t(Fx[ne.source.index].scholar_id)}function K(Q,ne){t(Fx[ne.index].scholar_id)}},[e]),J.jsx("div",{children:J.jsxs(Jh,{children:[J.jsxs(qo,{children:[J.jsx("p",{style:{textAlign:"justify"},children:"Understanding professors' research interests helps you choose relevant courses, seize research opportunities, and gain valuable knowledge and insights. It enables you to align your interests with specialized professors, pursue research collaborations, and deepen your understanding of the field."}),J.jsx("p",{children:"Feel free to click on the path or professors' names to view their interests."}),J.jsx("div",{className:"mt-3",style:{color:"red"}})]}),J.jsx(qo,{style:{padding:"0px"},children:J.jsx("div",{className:"research-interest",ref:n})})]})})}const lrt=()=>{const[e,t]=Y.useState("perfTab"),[n,r]=Y.useState(""),[i,o]=Y.useState(""),[a,s]=Y.useState(""),u=Y.useCallback(_=>{o(_)},[]),l=Y.useMemo(()=>by.find(_=>_.gs_id==i),[i]),c=Y.useMemo(()=>by.filter(_=>{var A=n==""||_.name.toLowerCase().includes(n.toLowerCase()),E=a==""||_.rank.split(" and ").find($=>$==a);return A&&E}),[n,a]),f=Y.useMemo(()=>J.jsx(SKe,{profData:l}),[l]),d=Y.useMemo(()=>J.jsx(EKe,{profData:l}),[l]),p=Y.useMemo(()=>J.jsx(J8e,{selectedProfId:i,setSelectedProfId:u}),[i]),g=Y.useMemo(()=>J.jsx(ort,{selectedProfId:i,setSelectedProfId:u}),[]),y=Y.useMemo(()=>J.jsx(urt,{selectedProfId:i,setSelectedProfId:u}),[i]),v=_=>{t(_)},b=_=>{r(_.target.value)},x=_=>{s(_)};return J.jsx(ZL,{fluid:!0,children:J.jsxs(Jh,{children:[J.jsxs(qo,{style:{padding:"20px 0px 20px 20px"},children:[J.jsx("h2",{children:"HKUST CSE Department Google Scholar Visualization"}),J.jsx("p",{children:"This visualization aims to act as a visual aid to evaluate HKUST CSE Department's regular faculty members' performance, research interest and co-authorship network in overall and individual view."}),J.jsxs(ih.Container,{activeKey:e,onSelect:v,children:[J.jsxs($u,{variant:"tabs",className:"mb-3",children:[J.jsx($u.Item,{children:J.jsx($u.Link,{eventKey:"perfTab",children:"Performance"})}),J.jsx($u.Item,{children:J.jsx($u.Link,{eventKey:"interestTab",children:"Research Interests"})}),J.jsx($u.Item,{children:J.jsx($u.Link,{eventKey:"interCoauthorTab",children:"Internal co-authorship Network"})}),J.jsx($u.Item,{children:J.jsx($u.Link,{eventKey:"exterCoauthorTab",children:"External co-authorship Network"})})]}),J.jsxs(ih.Content,{children:[J.jsxs(ih.Pane,{eventKey:"perfTab",children:[J.jsxs("p",{children:["The i10-index and h-index are important indicators of the productivity and the citation impact of publication of an author. On the left side, the two indicators are used to plot a scatter plot. You may choose the overall view or the 5-year view.",J.jsx("br",{}),"The number of citations and publications also provide significant insight into analysing research impact and rank of all professors in the CSE department at HKUST.  On the right side, line charts for total citation per year and total publication per year are displayed. You can select a specific author on the author panel to view the charts for his/her respective citation per year and publication per year."]}),J.jsxs(Jh,{children:[J.jsx(qo,{children:J.jsx(ztt,{})}),J.jsx(qo,{children:J.jsxs("div",{className:"d-flex flex-column align-items-end",children:[f,d,J.jsx("p",{children:"Note: The values for 2023 are still counting."})]})})]})]}),J.jsx(ih.Pane,{eventKey:"interestTab",children:y}),J.jsx(ih.Pane,{eventKey:"interCoauthorTab",children:J.jsx("div",{children:p})}),J.jsx(ih.Pane,{eventKey:"exterCoauthorTab",children:g})]})]})]}),J.jsx(qo,{sm:3,style:{maxHeight:"100vh",width:"350px"},children:J.jsxs(ZL,{className:"d-flex flex-column",style:{height:"100vh",padding:"20px 10px 20px 10px"},children:[l&&J.jsxs(b9,{className:"mb-3 p-0",children:[J.jsx(b9.Header,{children:J.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:["Selected Faculty Member",J.jsx(V7,{variant:"outline-secondary",onClick:()=>o(""),children:"Deselect"})]})}),J.jsx(b9.Body,{children:J.jsxs(Jh,{children:[J.jsx(qo,{xs:2,style:{width:"120px"},children:J.jsx("img",{src:l.url_picture?l.url_picture:$Ke,className:"avatar"})}),J.jsxs(qo,{children:[J.jsx("span",{style:{fontWeight:"bold"},children:"Name:"})," ",l.name," ",J.jsx("br",{}),J.jsx("span",{style:{fontWeight:"bold"},children:"Tel:"})," ",l.tel," ",J.jsx("br",{}),J.jsx("span",{style:{fontWeight:"bold"},children:"Email:"})," ",l.email," ",J.jsx("br",{}),J.jsx("span",{style:{fontWeight:"bold"},children:"Google Scholar ID:"})," ",l.gs_id," ",J.jsx("br",{})]})]})})]}),J.jsxs("div",{className:"mb-3 d-flex",children:[J.jsx(Uxe,{type:"text",placeholder:"Search Name",onChange:lwe.debounce(b,200)}),J.jsxs(Fb,{style:{marginLeft:"16px"},children:[J.jsx(Fb.Toggle,{variant:"secondary",id:"dropdown-basic",children:"Filter"}),J.jsx(Fb.Menu,{children:fwe.map((_,A)=>J.jsxs(Fb.Item,{onClick:()=>x(_),children:[J.jsx("svg",{width:"20",height:"10",children:J.jsx("circle",{cx:"5",cy:"5",r:"5",fill:Jw(_)})}),_]},`rank${A}`))})]})]}),a!=""&&J.jsxs("div",{className:"d-flex mb-3",children:[J.jsx("div",{className:"align-self-center",style:{marginRight:"16px",fontSize:"16px"},children:"Filter: "}),J.jsxs(Rve,{bg:"light",className:"p-2",children:[J.jsx("span",{style:{fontSize:"14px",color:"GrayText"},children:a}),J.jsx(Nve,{onClick:()=>s("")})]})]}),J.jsx("div",{className:"flex-grow-1",style:{overflowY:"scroll"},children:J.jsx(vI,{children:c.map((_,A)=>J.jsxs(vI.Item,{onClick:()=>{o(_.gs_id)},active:i==_.gs_id,action:!0,children:[J.jsxs("svg",{width:"20",height:"20",children:[J.jsx("circle",{cx:"7",cy:"10",r:"7",fill:"white"}),J.jsx("circle",{cx:"7",cy:"10",r:"5",fill:Jw(_.rank)})]}),_.name]},A))})})]})})]})})};y8.createRoot(document.getElementById("root")).render(J.jsx(lrt,{}))});export default crt();
